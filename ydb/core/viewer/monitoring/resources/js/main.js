/*! For license information please see main.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],Array(23).concat([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(689),i=r.setup();function o(e){var t=i(e);function n(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift(),i=e[0],o=e[1];return"string"==typeof r&&"string"!=typeof i||(o=i,i=null),i=t(r,i),(i=o?i.mix(o):i).toString()}return n.builder=function(){return t},n}o.setup=function(e){i=r.setup(e)},o.reset=function(){i=r.setup()},t.default=o},,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(760)()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(e){var r,i,o,a,s,l,c,u,h,d,f,p,m,v,g,y,b,C,w,E,S,O,x,_,k,T,N,P,I,R,j,D,A,L,M,F,B,H,z,U,V,W,G,q,Y,X=X||{version:"4.6.0"};function K(e,t){this.__eventListeners[e]&&(e=this.__eventListeners[e],t?e[e.indexOf(t)]=!1:X.util.array.fill(e,!1))}function Z(e,t){var n=function(){t.apply(this,arguments),this.off(e,n)}.bind(this);this.on(e,n)}function Q(e,t,n,r,i,o,a){var s=Math.PI,l=a*s/180,c=X.util.sin(l),u=X.util.cos(l),h=0,d=0,f=-u*e*.5-c*t*.5,p=-u*t*.5+c*e*.5,m=(n=Math.abs(n))*n,v=(r=Math.abs(r))*r,g=p*p,y=m*v-m*g-v*(b=f*f);a=0;y<0?(n*=l=Math.sqrt(1-y/(m*v)),r*=l):a=(i===o?-1:1)*Math.sqrt(y/(m*g+v*b));var b,C=u*(b=a*n*p/r)-c*(a=-a*r*f/n)+.5*e,w=c*b+u*a+.5*t,E=$(1,0,(f-b)/n,(p-a)/r);a=$((f-b)/n,(p-a)/r,(-f-b)/n,(-p-a)/r);0===o&&0<a?a-=2*s:1===o&&a<0&&(a+=2*s);for(var S,O,x,_,k,T,N,P,I,R,j,D,A,L=Math.ceil(Math.abs(a/s*2)),M=[],F=a/L,B=8/3*Math.sin(F/4)*Math.sin(F/4)/Math.sin(F/2),H=E+F,z=0;z<L;z++)M[z]=(S=E,O=H,x=u,_=c,k=n,T=r,N=C,P=w,I=B,R=h,j=d,void 0,D=X.util.cos(S),["C",R+I*(-x*k*(A=X.util.sin(S))-_*T*D),j+I*(-_*k*A+x*T*D),(N=x*k*(S=X.util.cos(O))-_*T*(O=X.util.sin(O))+N)+I*(x*k*O+_*T*S),(P=_*k*S+x*T*O+P)+I*(_*k*O-x*T*S),N,P]),h=M[z][5],d=M[z][6],E=H,H+=F;return M}function $(e,t,n,r){return(e=Math.atan2(t,e))<=(n=Math.atan2(r,n))?n-e:2*Math.PI-(e-n)}function J(e,t,n,r,i,o,a,s){var l;if(X.cachesBoundsOfCurve&&(l=c.call(arguments),X.boundsOfCurveCache[l]))return X.boundsOfCurveCache[l];for(var u,h,d,f=Math.sqrt,p=Math.min,m=Math.max,v=Math.abs,g=[],y=[[],[]],b=6*e-12*n+6*i,C=-3*e+9*n-9*i+3*a,w=3*n-3*e,E=0;E<2;++E)0<E&&(b=6*t-12*r+6*o,C=-3*t+9*r-9*o+3*s,w=3*r-3*t),v(C)<1e-12?v(b)<1e-12||0<(u=-w/b)&&u<1&&g.push(u):(h=b*b-4*w*C)<0||(0<(h=(-b+(d=f(h)))/(2*C))&&h<1&&g.push(h),0<(d=(-b-d)/(2*C))&&d<1&&g.push(d));for(var S,O=g.length,x=O;O--;)u=g[O],y[0][O]=(S=1-u)*S*S*e+3*S*S*u*n+3*S*u*u*i+u*u*u*a,y[1][O]=S*S*S*t+3*S*S*u*r+3*S*u*u*o+u*u*u*s;return y[0][x]=e,y[1][x]=t,y[0][x+1]=a,y[1][x+1]=s,m=[{x:p.apply(null,y[0]),y:p.apply(null,y[1])},{x:m.apply(null,y[0]),y:m.apply(null,y[1])}],X.cachesBoundsOfCurve&&(X.boundsOfCurveCache[l]=m),m}function ee(e,t,n){for(var r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],l=Q(n[6]-e,n[7]-t,r,i,a,s,o),c=0,u=l.length;c<u;c++)l[c][1]+=e,l[c][2]+=t,l[c][3]+=e,l[c][4]+=t,l[c][5]+=e,l[c][6]+=t;return l}function te(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function ne(e,t,n){for(var r,i={x:t,y:n},o=0,a=1;a<=100;a+=1)r=e(a/100),o+=te(i.x,i.y,r.x,r.y),i=r;return o}function re(e){for(var t,n,r,i,o=0,a=e.length,s=0,l=0,c=0,u=0,h=[],d=0;d<a;d++){switch(r={x:s,y:l,command:(t=e[d])[0]},t[0]){case"M":r.length=0,c=s=t[1],u=l=t[2];break;case"L":r.length=te(s,l,t[1],t[2]),s=t[1],l=t[2];break;case"C":n=function(e,t,n,r,i,o,a,s){return function(l){var c=l*l*l,u=3*l*l*(1-l),h=3*l*(1-l)*(1-l);return{x:a*c+i*u+n*h+e*(l=(1-l)*(1-l)*(1-l)),y:s*c+o*u+r*h+t*l}}}(s,l,t[1],t[2],t[3],t[4],t[5],t[6]),i=function(e,t,n,r,i,o,a,s){return function(l){var c=1-l;return Math.atan2(3*c*c*(r-t)+6*c*l*(o-r)+3*l*l*(s-o),3*c*c*(n-e)+6*c*l*(i-n)+3*l*l*(a-i))}}(s,l,t[1],t[2],t[3],t[4],t[5],t[6]),r.iterator=n,r.angleFinder=i,r.length=ne(n,s,l),s=t[5],l=t[6];break;case"Q":n=function(e,t,n,r,i,o){return function(a){var s=a*a,l=2*a*(1-a);return{x:i*s+n*l+e*(a=(1-a)*(1-a)),y:o*s+r*l+t*a}}}(s,l,t[1],t[2],t[3],t[4]),i=function(e,t,n,r,i,o){return function(a){var s=1-a;return Math.atan2(2*s*(r-t)+2*a*(o-r),2*s*(n-e)+2*a*(i-n))}}(s,l,t[1],t[2],t[3],t[4]),r.iterator=n,r.angleFinder=i,r.length=ne(n,s,l),s=t[3],l=t[4];break;case"Z":case"z":r.destX=c,r.destY=u,r.length=te(s,l,c,u),s=c,l=u}o+=r.length,h.push(r)}return h.push({length:o,x:s,y:l}),h}function ie(e,t,n){if(e&&0!==e.length){var r=e.length-1,i=t?e[r][t]:e[r];if(t)for(;r--;)n(e[r][t],i)&&(i=e[r][t]);else for(;r--;)n(e[r],i)&&(i=e[r]);return i}}function oe(e,t,n){if(n)if(!X.isLikelyNode&&t instanceof Element)e=t;else if(t instanceof Array){e=[];for(var r=0,i=t.length;r<i;r++)e[r]=oe({},t[r],n)}else if(t&&"object"==typeof t)for(var o in t)"canvas"===o||"group"===o?e[o]=null:t.hasOwnProperty(o)&&(e[o]=oe({},t[o],n));else e=t;else for(var o in t)e[o]=t[o];return e}function ae(){}function se(){}function le(e){for(var t=null,n=this;n.constructor.superclass;){var r=n.constructor.superclass.prototype[e];if(n[e]!==r){t=r;break}n=n.constructor.superclass.prototype}return t?1<arguments.length?t.apply(this,f.call(arguments,1)):t.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}function ce(){}function ue(){return!1}function he(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t}function de(){return b.apply(X.window,arguments)}function fe(e,t,n){var r="rgba("+parseInt(e[0]+n*(t[0]-e[0]),10)+","+parseInt(e[1]+n*(t[1]-e[1]),10)+","+parseInt(e[2]+n*(t[2]-e[2]),10);return(r+=","+(e&&t?parseFloat(e[3]+n*(t[3]-e[3])):1))+")"}function pe(e,t,n,r){return r=e<Math.abs(t)?(e=t,n/4):0===t&&0===e?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(t/e),{a:e,c:t,p:n,s:r}}function me(e,t,n){return e.a*Math.pow(2,10*--t)*Math.sin((t*n-e.s)*(2*Math.PI)/e.p)}function ve(e,t,n,r){return n-ge(r-e,0,n,r)+t}function ge(e,t,n,r){return(e/=r)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t}function ye(e,t){return e.button&&e.button===t-1}function be(e,t){if(t){if(t.toLive)return e+": url(#SVGID_"+t.id+"); ";var n;t=e+": "+(n=new X.Color(t)).toRgb()+"; ";return 1!==(n=n.getAlpha())&&(t+=e+"-opacity: "+n.toString()+"; "),t}return e+": none; "}function Ce(e,t,n){var r={};n.forEach((function(t){r[t]=e[t]})),A(e[t],r,!0)}function we(e,t){var n=e.canvas,r=t.targetCanvas;(e=r.getContext("2d")).translate(0,r.height),e.scale(1,-1),t=n.height-r.height,e.drawImage(n,0,t,r.width,r.height,0,0,r.width,r.height)}function Ee(e,t){var n=t.targetCanvas.getContext("2d"),r=t.destinationWidth,i=t.destinationHeight,o=r*i*4;t=new Uint8Array(this.imageBuffer,0,o),o=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,r,i,e.RGBA,e.UNSIGNED_BYTE,t),i=new ImageData(o,r,i),n.putImageData(i,0,0)}function Se(e){e.textDecoration&&(-1<e.textDecoration.indexOf("underline")&&(e.underline=!0),-1<e.textDecoration.indexOf("line-through")&&(e.linethrough=!0),-1<e.textDecoration.indexOf("overline")&&(e.overline=!0),delete e.textDecoration)}t.fabric=X,"undefined"!=typeof document&&"undefined"!=typeof window?(document instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document)?X.document=document:X.document=document.implementation.createHTMLDocument(""),X.window=window):(W=new(n(835).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window,X.document=W.document,X.jsdomImplForWrapper=n(836).implForWrapper,X.nodeCanvas=n(837).Canvas,X.window=W,DOMParser=X.window.DOMParser),X.isTouchSupported="ontouchstart"in X.window||"ontouchstart"in X.document||X.window&&X.window.navigator&&0<X.window.navigator.maxTouchPoints,X.isLikelyNode=void 0!==e&&"undefined"==typeof window,X.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],X.DPI=96,X.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",X.commaWsp="(?:\\s+,?\\s*|,\\s*)",X.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,X.reNonWord=/[ \n\.,;!\?\-]/,X.fontPaths={},X.iMatrix=[1,0,0,1,0,0],X.svgNS="http://www.w3.org/2000/svg",X.perfLimitSizeTotal=2097152,X.maxCacheSideLimit=4096,X.minCacheSideLimit=256,X.charWidthsCache={},X.textureSize=2048,X.disableStyleCopyPaste=!1,X.enableGLFiltering=!0,X.devicePixelRatio=X.window.devicePixelRatio||X.window.webkitDevicePixelRatio||X.window.mozDevicePixelRatio||1,X.browserShadowBlurConstant=1,X.arcToSegmentsCache={},X.boundsOfCurveCache={},X.cachesBoundsOfCurve=!0,X.forceGLPutImageData=!1,X.initFilterBackend=function(){return X.enableGLFiltering&&X.isWebglSupported&&X.isWebglSupported(X.textureSize)?(console.log("max texture size: "+X.maxTextureSize),new X.WebglFilterBackend({tileSize:X.textureSize})):X.Canvas2dFilterBackend?new X.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=X),X.Observable={fire:function(e,t){if(!this.__eventListeners)return this;var n=this.__eventListeners[e];if(!n)return this;for(var r=0,i=n.length;r<i;r++)n[r]&&n[r].call(this,t||{});return this.__eventListeners[e]=n.filter((function(e){return!1!==e})),this},on:function(e,t){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in e)this.on(n,e[n]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t);return this},once:function(e,t){if(1===arguments.length)for(var n in e)Z.call(this,n,e[n]);else Z.call(this,e,t);return this},off:function(e,t){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)K.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in e)K.call(this,n,e[n]);else K.call(this,e,t);return this}},X.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(e,t,n){var r=this._objects;return n?r[t]=e:r.splice(t,0,e),this._onObjectAdded&&this._onObjectAdded(e),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var e,t=this._objects,n=!1,r=0,i=arguments.length;r<i;r++)-1!==(e=t.indexOf(arguments[r]))&&(n=!0,t.splice(e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(e,t){for(var n=this.getObjects(),r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);return this},getObjects:function(e){return void 0===e?this._objects.concat():this._objects.filter((function(t){return t.type===e}))},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e,t){return-1<this._objects.indexOf(e)||!!t&&this._objects.some((function(t){return"function"==typeof t.contains&&t.contains(e,!0)}))},complexity:function(){return this._objects.reduce((function(e,t){return e+(t.complexity?t.complexity():0)}),0)}},X.CommonMethods={_setOptions:function(e){for(var t in e)this.set(t,e[t])},_initGradient:function(e,t){!e||!e.colorStops||e instanceof X.Gradient||this.set(t,new X.Gradient(e))},_initPattern:function(e,t,n){!e||!e.source||e instanceof X.Pattern?n&&n():this.set(t,new X.Pattern(e,n))},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){return"object"==typeof e?this._setObject(e):this._set(e,t),this},_set:function(e,t){this[e]=t},toggle:function(e){var t=this.get(e);return"boolean"==typeof t&&this.set(e,!t),this},get:function(e){return this[e]}},r=t,i=Math.sqrt,o=Math.atan2,a=Math.pow,s=Math.PI/180,l=Math.PI/2,X.util={cos:function(e){if(0===e)return 1;switch((e=e<0?-e:e)/l){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(0===e)return 0;var t=e<0?-1:1;switch(e/l){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(e)},removeFromArray:function(e,t){return-1!==(t=e.indexOf(t))&&e.splice(t,1),e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*s},radiansToDegrees:function(e){return e/s},rotatePoint:function(e,t,n){return e=new X.Point(e.x-t.x,e.y-t.y),n=X.util.rotateVector(e,n),new X.Point(n.x,n.y).addEquals(t)},rotateVector:function(e,t){var n=X.util.sin(t);t=X.util.cos(t);return{x:e.x*t-e.y*n,y:e.x*n+e.y*t}},transformPoint:function(e,t,n){return n?new X.Point(t[0]*e.x+t[2]*e.y,t[1]*e.x+t[3]*e.y):new X.Point(t[0]*e.x+t[2]*e.y+t[4],t[1]*e.x+t[3]*e.y+t[5])},makeBoundingBoxFromPoints:function(e,t){if(t)for(var n=0;n<e.length;n++)e[n]=X.util.transformPoint(e[n],t);var r=[e[0].x,e[1].x,e[2].x,e[3].x],i=X.util.array.min(r),o=X.util.array.max(r)-i,a=[e[0].y,e[1].y,e[2].y,e[3].y];return{left:i,top:r=X.util.array.min(a),width:o,height:X.util.array.max(a)-r}},invertTransform:function(e){var t=[(t=1/(e[0]*e[3]-e[1]*e[2]))*e[3],-t*e[1],-t*e[2],t*e[0]];e=X.util.transformPoint({x:e[4],y:e[5]},t,!0);return t[4]=-e.x,t[5]=-e.y,t},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e,t){var n=/\D{0,2}$/.exec(e),r=parseFloat(e);switch(t=t||X.Text.DEFAULT_SVG_FONT_SIZE,n[0]){case"mm":return r*X.DPI/25.4;case"cm":return r*X.DPI/2.54;case"in":return r*X.DPI;case"pt":return r*X.DPI/72;case"pc":return r*X.DPI/72*12;case"em":return r*t;default:return r}},falseFunction:function(){return!1},getKlass:function(e,t){return e=X.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),X.util.resolveNamespace(t)[e]},getSvgAttributes:function(e){var t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":t=t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":t=t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":t=t.concat(["offset","stop-color","stop-opacity"])}return t},resolveNamespace:function(e){if(!e)return X;for(var t=e.split("."),n=t.length,i=r||X.window,o=0;o<n;++o)i=i[t[o]];return i},loadImage:function(e,t,n,r){var i,o;e?((i=X.util.createImage()).onload=o=function(){t&&t.call(n,i,!1),i=i.onload=i.onerror=null},i.onerror=function(){X.log("Error loading "+i.src),t&&t.call(n,null,!0),i=i.onload=i.onerror=null},0!==e.indexOf("data")&&null!=r&&(i.crossOrigin=r),"data:image/svg"===e.substring(0,14)&&(i.onload=null,X.util.loadImageInDom(i,o)),i.src=e):t&&t.call(n,e)},loadImageInDom:function(e,t){var n=X.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(e),X.document.querySelector("body").appendChild(n),e.onload=function(){t(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(e,t,n,r){var i=[],o=0,a=(e=e||[]).length;function s(){++o===a&&t&&t(i.filter((function(e){return e})))}a?e.forEach((function(e,t){e&&e.type?X.util.getKlass(e.type,n).fromObject(e,(function(n,o){o||(i[t]=n),r&&r(e,n,o),s()})):s()})):t&&t(i)},enlivenPatterns:function(e,t){function n(){++i===o&&t&&t(r)}var r=[],i=0,o=(e=e||[]).length;o?e.forEach((function(e,t){e&&e.source?new X.Pattern(e,(function(e){r[t]=e,n()})):(r[t]=e,n())})):t&&t(r)},groupSVGElements:function(e,t,n){return e&&1===e.length?e[0]:(t&&(t.width&&t.height?t.centerPoint={x:t.width/2,y:t.height/2}:(delete t.width,delete t.height)),t=new X.Group(e,t),void 0!==n&&(t.sourcePath=n),t)},populateWithProperties:function(e,t,n){if(n&&"[object Array]"===Object.prototype.toString.call(n))for(var r=0,i=n.length;r<i;r++)n[r]in e&&(t[n[r]]=e[n[r]])},drawDashedLine:function(e,t,n,r,a,s){var l=i((r=r-t)*r+(a=a-n)*a),c=(r=o(a,r),s.length),u=0,h=!0;for(e.save(),e.translate(t,n),e.moveTo(0,0),e.rotate(r),t=0;t<l;)l<(t+=s[u++%c])&&(t=l),e[h?"lineTo":"moveTo"](t,0),h=!h;e.restore()},createCanvasElement:function(){return X.document.createElement("canvas")},copyCanvasElement:function(e){var t=X.util.createCanvasElement();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},toDataURL:function(e,t,n){return e.toDataURL("image/"+t,n)},createImage:function(){return X.document.createElement("img")},multiplyTransformMatrices:function(e,t,n){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],n?0:e[0]*t[4]+e[2]*t[5]+e[4],n?0:e[1]*t[4]+e[3]*t[5]+e[5]]},qrDecompose:function(e){var t=o(e[1],e[0]),n=a(e[0],2)+a(e[1],2),r=i(n),l=(e[0]*e[3]-e[2]*e[1])/r;n=o(e[0]*e[2]+e[1]*e[3],n);return{angle:t/s,scaleX:r,scaleY:l,skewX:n/s,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return X.iMatrix.concat();var t=X.util.degreesToRadians(e.angle);return[e=X.util.cos(t),t=X.util.sin(t),-t,e,0,0]},calcDimensionsMatrix:function(e){var t=void 0===e.scaleX?1:e.scaleX,n=void 0===e.scaleY?1:e.scaleY,r=[e.flipX?-t:t,0,0,e.flipY?-n:n,0,0];t=X.util.multiplyTransformMatrices,n=X.util.degreesToRadians;return e.skewX&&(r=t(r,[1,0,Math.tan(n(e.skewX)),1],!0)),e.skewY?t(r,[1,Math.tan(n(e.skewY)),0,1],!0):r},composeMatrix:function(e){var t=[1,0,0,1,e.translateX||0,e.translateY||0],n=X.util.multiplyTransformMatrices;return e.angle&&(t=n(t,X.util.calcRotateMatrix(e))),1!==e.scaleX||1!==e.scaleY||e.skewX||e.skewY||e.flipX||e.flipY?n(t,X.util.calcDimensionsMatrix(e)):t},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,t,n,r){0<r&&(r<t?t-=r:t=0,r<n?n-=r:n=0);for(var i=!0,o=e.getImageData(t,n,2*r||1,2*r||1),a=o.data.length,s=3;s<a&&!1!=(i=o.data[s]<=0);s+=4);return o=null,i},parsePreserveAspectRatioAttribute:function(e){var t,n="meet";return(e=e.split(" "))&&e.length&&("meet"!==(n=e.pop())&&"slice"!==n?(t=n,n="meet"):e.length&&(t=e.pop())),{meetOrSlice:n,alignX:"none"!==t?t.slice(1,4):"none",alignY:"none"!==t?t.slice(5,8):"none"}},clearFabricFontCache:function(e){(e=(e||"").toLowerCase())?X.charWidthsCache[e]&&delete X.charWidthsCache[e]:X.charWidthsCache={}},limitDimsByArea:function(e,t){return e=Math.sqrt(t*e),t=Math.floor(t/e),{x:Math.floor(e),y:t}},capValue:function(e,t,n){return Math.max(e,Math.min(t,n))},findScaleToFit:function(e,t){return Math.min(t.width/e.width,t.height/e.height)},findScaleToCover:function(e,t){return Math.max(t.width/e.width,t.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map((function(e){return X.util.toFixed(e,X.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(e,t){t=X.util.invertTransform(t),t=X.util.multiplyTransformMatrices(t,e.calcOwnMatrix()),X.util.applyTransformToObject(e,t)},addTransformToObject:function(e,t){X.util.applyTransformToObject(e,X.util.multiplyTransformMatrices(t,e.calcOwnMatrix()))},applyTransformToObject:function(e,t){var n=X.util.qrDecompose(t);t=new X.Point(n.translateX,n.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",n.scaleX),e.set("scaleY",n.scaleY),e.skewX=n.skewX,e.skewY=n.skewY,e.angle=n.angle,e.setPositionByOrigin(t,"center","center")},sizeAfterTransform:function(e,t,n){return t=[{x:-(e/=2),y:-(t/=2)},{x:e,y:-t},{x:-e,y:t},{x:e,y:t}],n=X.util.calcDimensionsMatrix(n),{x:(n=X.util.makeBoundingBoxFromPoints(t,n)).width,y:n.height}}},c=Array.prototype.join,u={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h={m:"l",M:"L"},X.util.joinPath=function(e){return e.map((function(e){return e.join(" ")})).join(" ")},X.util.parsePath=function(e){var t,n,r,i,o=[],a=[],s=X.rePathCommand,l="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",c="("+l+")"+X.commaWsp,d="([01])"+X.commaWsp+"?",f=new RegExp(c+"?"+c+"?"+c+d+d+c+"?("+l+")","g");if(!e||!e.match)return o;for(var p,m=0,v=(p=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;m<v;m++){i=(t=p[m]).slice(1).trim(),a.length=0;var g,y=t.charAt(0),b=[y];if("a"===y.toLowerCase())for(;g=f.exec(i);)for(var C=1;C<g.length;C++)a.push(g[C]);else for(;r=s.exec(i);)a.push(r[0]);C=0;for(var w=a.length;C<w;C++)n=parseFloat(a[C]),isNaN(n)||b.push(n);var E=u[y.toLowerCase()],S=h[y]||y;if(b.length-1>E)for(var O=1,x=b.length;O<x;O+=E)o.push([y].concat(b.slice(O,O+E))),y=S;else o.push(b)}return o},X.util.makePathSimpler=function(e){for(var t,n,r,i,o,a=0,s=0,l=e.length,c=0,u=0,h=[],d=0;d<l;++d){switch(n=!1,(t=e[d].slice(0))[0]){case"l":t[0]="L",t[1]+=a,t[2]+=s;case"L":a=t[1],s=t[2];break;case"h":t[1]+=a;case"H":t[0]="L",t[2]=s,a=t[1];break;case"v":t[1]+=s;case"V":t[0]="L",s=t[1],t[1]=a,t[2]=s;break;case"m":t[0]="M",t[1]+=a,t[2]+=s;case"M":a=t[1],s=t[2],c=t[1],u=t[2];break;case"c":t[0]="C",t[1]+=a,t[2]+=s,t[3]+=a,t[4]+=s,t[5]+=a,t[6]+=s;case"C":i=t[3],o=t[4],a=t[5],s=t[6];break;case"s":t[0]="S",t[1]+=a,t[2]+=s,t[3]+=a,t[4]+=s;case"S":o="C"===r?(i=2*a-i,2*s-o):(i=a,s),a=t[3],s=t[4],t[0]="C",t[5]=t[3],t[6]=t[4],t[3]=t[1],t[4]=t[2],t[1]=i,t[2]=o,i=t[3],o=t[4];break;case"q":t[0]="Q",t[1]+=a,t[2]+=s,t[3]+=a,t[4]+=s;case"Q":i=t[1],o=t[2],a=t[3],s=t[4];break;case"t":t[0]="T",t[1]+=a,t[2]+=s;case"T":o="Q"===r?(i=2*a-i,2*s-o):(i=a,s),t[0]="Q",a=t[1],s=t[2],t[1]=i,t[2]=o,t[3]=a,t[4]=s;break;case"a":t[0]="A",t[6]+=a,t[7]+=s;case"A":n=!0,h=h.concat(ee(a,s,t)),a=t[6],s=t[7];break;case"z":case"Z":a=c,s=u}n||h.push(t),r=t[0]}return h},X.util.getSmoothPathFromPoints=function(e,t){var n,r,i=[],o=new X.Point(e[0].x,e[0].y),a=new X.Point(e[1].x,e[1].y),s=e.length,l=1,c=0,u=2<s;for(u&&(l=e[2].x<a.x?-1:e[2].x===a.x?0:1,c=e[2].y<a.y?-1:e[2].y===a.y?0:1),i.push(["M",o.x-l*(t=t||0),o.y-c*t]),n=1;n<s;n++)o.eq(a)||(r=o.midPointFrom(a),i.push(["Q",o.x,o.y,r.x,r.y])),o=e[n],n+1<e.length&&(a=e[n+1]);return u&&(l=o.x>e[n-2].x?1:o.x===e[n-2].x?0:-1,c=o.y>e[n-2].y?1:o.y===e[n-2].y?0:-1),i.push(["L",o.x+l*t,o.y+c*t]),i},X.util.getPathSegmentsInfo=re,X.util.getBoundsOfCurve=J,X.util.getPointOnPath=function(e,t,n){n=n||re(e);for(var r=0;0<t-n[r].length&&r<n.length-2;)t-=n[r].length,r++;var i,o=n[r],a=t/o.length,s=o.command,l=e[r];switch(s){case"M":return{x:o.x,y:o.y,angle:0};case"Z":case"z":return(i=new X.Point(o.x,o.y).lerp(new X.Point(o.destX,o.destY),a)).angle=Math.atan2(o.destY-o.y,o.destX-o.x),i;case"L":return(i=new X.Point(o.x,o.y).lerp(new X.Point(l[1],l[2]),a)).angle=Math.atan2(l[2]-o.y,l[1]-o.x),i;case"C":case"Q":return function(e,t){var n,r,i,o=0,a=0,s=e.iterator,l={x:e.x,y:e.y},c=.01;for(e=e.angleFinder;a<t&&o<=1&&1e-4<c;)n=s(o),i=o,t<(r=te(l.x,l.y,n.x,n.y))+a?o-=c/=2:(l=n,o+=c,a+=r);return n.angle=e(i),n}(o,t)}},X.util.transformPath=function(e,t,n){return n&&(t=X.util.multiplyTransformMatrices(t,[1,0,0,1,-n.x,-n.y])),e.map((function(e){for(var n=e.slice(0),r={},i=1;i<e.length-1;i+=2)r.x=e[i],r.y=e[i+1],r=X.util.transformPoint(r,t),n[i]=r.x,n[i+1]=r.y;return n}))},X.util.fromArcToBeizers=ee,X.util.getBoundsOfArc=function(e,t,n,r,i,o,a,s,l){for(var c,u=0,h=0,d=[],f=Q(s-e,l-t,n,r,o,a,i),p=0,m=f.length;p<m;p++)c=J(u,h,f[p][1],f[p][2],f[p][3],f[p][4],f[p][5],f[p][6]),d.push({x:c[0].x+e,y:c[0].y+t}),d.push({x:c[1].x+e,y:c[1].y+t}),u=f[p][5],h=f[p][6];return d},X.util.drawArc=function(e,t,n,r){ee(t,n,r=r.slice(0).unshift("X")).forEach((function(t){e.bezierCurveTo.apply(e,t.slice(1))}))},d=Array.prototype.slice,X.util.array={fill:function(e,t){for(var n=e.length;n--;)e[n]=t;return e},invoke:function(e,t){for(var n=d.call(arguments,2),r=[],i=0,o=e.length;i<o;i++)r[i]=n.length?e[i][t].apply(e[i],n):e[i][t].call(e[i]);return r},min:function(e,t){return ie(e,t,(function(e,t){return e<t}))},max:function(e,t){return ie(e,t,(function(e,t){return t<=e}))}},X.util.object={extend:oe,clone:function(e,t){return oe({},e,t)}},X.util.object.extend(X.util,X.Observable),X.util.string={camelize:function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(e){var t,n=0,r=[];for(n=0;n<e.length;n++)!1!==(t=function(e,t){var n=e.charCodeAt(t);if(isNaN(n))return"";if(n<55296||57343<n)return e.charAt(t);if(55296<=n&&n<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";if((n=e.charCodeAt(t+1))<56320||57343<n)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";if((t=e.charCodeAt(t-1))<55296||56319<t)throw"Low surrogate without preceding high surrogate";return!1}(e,n))&&r.push(t);return r}},f=Array.prototype.slice,p=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),X.util.createClass=function(){var e=null,t=f.call(arguments,0);function n(){this.initialize.apply(this,arguments)}"function"==typeof t[0]&&(e=t.shift()),n.superclass=e,n.subclasses=[],e&&(se.prototype=e.prototype,n.prototype=new se,e.subclasses.push(n));for(var r=0,i=t.length;r<i;r++)!function(e,t,n){for(var r in t)r in e.prototype&&"function"==typeof e.prototype[r]&&-1<(t[r]+"").indexOf("callSuper")?e.prototype[r]=function(e){return function(){var r=this.constructor.superclass;this.constructor.superclass=n;var i=t[e].apply(this,arguments);if(this.constructor.superclass=r,"initialize"!==e)return i}}(r):e.prototype[r]=t[r],p&&(t.toString!==Object.prototype.toString&&(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=t.valueOf))}(n,t[r],e);return n.prototype.initialize||(n.prototype.initialize=ae),(n.prototype.constructor=n).prototype.callSuper=le,n},m=!!X.document.createElement("div").attachEvent,v=["touchstart","touchmove","touchend"],X.util.addListener=function(e,t,n,r){e&&e.addEventListener(t,n,!m&&r)},X.util.removeListener=function(e,t,n,r){e&&e.removeEventListener(t,n,!m&&r)},X.util.getPointer=function(e){var t=e.target,n=X.util.getScrollLeftTop(t);return{x:(t=(e=(t=e).changedTouches)&&e[0]?e[0]:t).clientX+n.left,y:t.clientY+n.top}},X.util.isTouchEvent=function(e){return-1<v.indexOf(e.type)||"touch"===e.pointerType},G="string"==typeof(q=X.document.createElement("div")).style.opacity,q="string"==typeof q.style.filter,g=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,y=function(e){return e},G?y=function(e,t){return e.style.opacity=t,e}:q&&(y=function(e,t){var n=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(n.zoom=1),g.test(n.filter)?n.filter=n.filter.replace(g,t=.9999<=t?"":"alpha(opacity="+100*t+")"):n.filter+=" alpha(opacity="+100*t+")",e}),X.util.setStyle=function(e,t){var n,r=e.style;if(!r)return e;if("string"==typeof t)return e.style.cssText+=";"+t,-1<t.indexOf("opacity")?y(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(n in t)"opacity"===n?y(e,t[n]):r["float"===n||"cssFloat"===n?void 0===r.styleFloat?"cssFloat":"styleFloat":n]=t[n];return e},function(){var e,t,n,r=Array.prototype.slice,i=function(e){return r.call(e,0)};try{t=i(X.document.childNodes)instanceof Array}catch(t){}function o(e,t){var n,r=X.document.createElement(e);for(n in t)"class"===n?r.className=t[n]:"for"===n?r.htmlFor=t[n]:r.setAttribute(n,t[n]);return r}function a(e){for(var t=0,n=0,r=X.document.documentElement,i=X.document.body||{scrollLeft:0,scrollTop:0};e&&(e.parentNode||e.host)&&((e=e.parentNode||e.host)===X.document?(t=i.scrollLeft||r.scrollLeft||0,n=i.scrollTop||r.scrollTop||0):(t+=e.scrollLeft||0,n+=e.scrollTop||0),1!==e.nodeType||"fixed"!==e.style.position););return{left:t,top:n}}t||(i=function(e){for(var t=new Array(e.length),n=e.length;n--;)t[n]=e[n];return t}),e=X.document.defaultView&&X.document.defaultView.getComputedStyle?function(e,t){return(e=X.document.defaultView.getComputedStyle(e,null))?e[t]:void 0}:function(e,t){var n=e.style[t];return!n&&e.currentStyle?e.currentStyle[t]:n},t=X.document.documentElement.style,n="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"",X.util.makeElementUnselectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=X.util.falseFunction),n?e.style[n]="none":"string"==typeof e.unselectable&&(e.unselectable="on"),e},X.util.makeElementSelectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=null),n?e.style[n]="":"string"==typeof e.unselectable&&(e.unselectable=""),e},X.util.setImageSmoothing=function(e,t){e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled,e.imageSmoothingEnabled=t},X.util.getById=function(e){return"string"==typeof e?X.document.getElementById(e):e},X.util.toArray=i,X.util.addClass=function(e,t){e&&-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=(e.className?" ":"")+t)},X.util.makeElement=o,X.util.wrapElement=function(e,t,n){return"string"==typeof t&&(t=o(t,n)),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},X.util.getScrollLeftTop=a,X.util.getElementOffset=function(t){var n,r,i=t&&t.ownerDocument,o={left:0,top:0},s={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!i)return s;for(r in l)s[l[r]]+=parseInt(e(t,r),10)||0;return n=i.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),i=a(t),{left:o.left+i.left-(n.clientLeft||0)+s.left,top:o.top+i.top-(n.clientTop||0)+s.top}},X.util.getNodeCanvas=function(e){return(e=X.jsdomImplForWrapper(e))._canvas||e._image},X.util.cleanUpJsdomNode=function(e){!X.isLikelyNode||(e=X.jsdomImplForWrapper(e))&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}(),X.util.request=function(e,t){var n,r=(t=t||{}).method?t.method.toUpperCase():"GET",i=t.onComplete||function(){},o=new X.window.XMLHttpRequest,a=t.body||t.parameters;return o.onreadystatechange=function(){4===o.readyState&&(i(o),o.onreadystatechange=ce)},"GET"===r&&(a=null,"string"==typeof t.parameters&&(n=e,t=t.parameters,e=n+(/\?/.test(n)?"&":"?")+t)),o.open(r,e,!0),"POST"!==r&&"PUT"!==r||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(a),o},X.log=console.log,X.warn=console.warn,b=X.window.requestAnimationFrame||X.window.webkitRequestAnimationFrame||X.window.mozRequestAnimationFrame||X.window.oRequestAnimationFrame||X.window.msRequestAnimationFrame||function(e){return X.window.setTimeout(e,1e3/60)},C=X.window.cancelAnimationFrame||X.window.clearTimeout,X.util.animate=function(e){var t=!1;return de((function(n){e=e||{};var r,i=n||+new Date,o=e.duration||500,a=i+o,s=e.onChange||ue,l=e.abort||ue,c=e.onComplete||ue,u=e.easing||he,h="startValue"in e?e.startValue:0,d="endValue"in e?e.endValue:100,f=e.byValue||d-h;e.onStart&&e.onStart(),function e(n){r=n||+new Date;var p=(m=a<r?o:r-i)/o,m=(n=u(m,h,f,o),Math.abs((n-h)/f));t||(l(n,m,p)?c(d,1,1):a<r?(s(d,1,1),c(d,1,1)):(s(n,m,p),de(e)))}(i)})),function(){t=!0}},X.util.requestAnimFrame=de,X.util.cancelAnimFrame=function(){return C.apply(X.window,arguments)},X.util.animateColor=function(e,t,n,r){e=new X.Color(e).getSource();var i=new X.Color(t).getSource(),o=r.onComplete,a=r.onChange;return r=r||{},X.util.animate(X.util.object.extend(r,{duration:n||500,startValue:e,endValue:i,byValue:i,easing:function(e,t,n,i){return fe(t,n,r.colorEasing?r.colorEasing(e,i):1-Math.cos(e/i*(Math.PI/2)))},onComplete:function(e,t,n){if(o)return o(fe(i,i,0),t,n)},onChange:function(e,t,n){if(a){if(Array.isArray(e))return a(fe(e,e,0),t,n);a(e,t,n)}}}))},X.util.ease={easeInQuad:function(e,t,n,r){return n*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){return 0===e?t:n*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){return e===r?t+n:n*(1-Math.pow(2,-10*e/r))+t},easeInOutExpo:function(e,t,n,r){return 0===e?t:e===r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var i=0;return 0===e?t:1==(e/=r)?t+n:-me(pe(n,n,i=i||.3*r,1.70158),e,r)+t},easeOutElastic:function(e,t,n,r){return 0===e?t:1==(e/=r)?t+n:(n=pe(n,n,.3*r,1.70158)).a*Math.pow(2,-10*e)*Math.sin((e*r-n.s)*(2*Math.PI)/n.p)+n.c+t},easeInOutElastic:function(e,t,n,r){return 0===e?t:2==(e/=r/2)?t+n:(n=pe(n,n,r*(.3*1.5),1.70158),e<1?-.5*me(n,e,r)+t:n.a*Math.pow(2,-10*--e)*Math.sin((e*r-n.s)*(2*Math.PI)/n.p)*.5+n.c+t)},easeInBack:function(e,t,n,r,i){return n*(e/=r)*e*(((i=void 0===i?1.70158:i)+1)*e-i)+t},easeOutBack:function(e,t,n,r,i){return n*((e=e/r-1)*e*(((i=void 0===i?1.70158:i)+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),(e/=r/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:ve,easeOutBounce:ge,easeInOutBounce:function(e,t,n,r){return e<r/2?.5*ve(2*e,0,n,r)+t:.5*ge(2*e-r,0,n,r)+.5*n+t}},function(e){"use strict";var t,n,r,i,o,a=e.fabric||(e.fabric={}),s=a.util.object.extend,l=a.util.object.clone,c=a.util.toFixed,u=a.util.parseUnit,h=a.util.multiplyTransformMatrices,d={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},f={stroke:"strokeOpacity",fill:"fillOpacity"},p="font-size",m="clip-path";function v(e){return new RegExp("^("+e.join("|")+")\\b","i")}function g(e,t){for(var n,r=[],i=0,o=t.length;i<o;i++)n=t[i],n=e.getElementsByTagName(n),r=r.concat(Array.prototype.slice.call(n));return r}function y(e,t,n){e[n]=Math.tan(a.util.degreesToRadians(t[0]))}function b(e,t){var n,r={};for(n in a.cssRules[t])if(function(e,t){var n,r=!0;return(n=C(e,t.pop()))&&t.length&&(r=function(e,t){for(var n,r=!0;e.parentNode&&1===e.parentNode.nodeType&&t.length;)r&&(n=t.pop()),r=C(e=e.parentNode,n);return 0===t.length}(e,t)),n&&r&&0===t.length}(e,n.split(" ")))for(var i in a.cssRules[t][n])r[i]=a.cssRules[t][n][i];return r}function C(e,t){var n,r=e.nodeName,i=e.getAttribute("class"),o=(e=e.getAttribute("id"),new RegExp("^"+r,"i"));if(t=t.replace(o,""),e&&t.length&&(o=new RegExp("#"+e+"(?![a-zA-Z\\-]+)","i"),t=t.replace(o,"")),i&&t.length)for(n=(i=i.split(" ")).length;n--;)o=new RegExp("\\."+i[n]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(o,"");return 0===t.length}function w(e,t){var n;if(n=e.getElementById?e.getElementById(t):n)return n;for(var r,i=e.getElementsByTagName("*"),o=0,a=i.length;o<a;o++)if(t===(r=i[o]).getAttribute("id"))return r}a.svgValidTagNamesRegEx=v(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),a.svgViewBoxElementsRegEx=v(["symbol","image","marker","pattern","view","svg"]),a.svgInvalidAncestorsRegEx=v(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),a.svgValidParentsRegEx=v(["symbol","g","a","svg","clipPath","defs"]),a.cssRules={},a.gradientDefs={},a.clipPaths={},a.parseTransformAttribute=(t=a.iMatrix,n=a.reNum,e=a.commaWsp,r="(?:(?:(matrix)\\s*\\(\\s*("+n+")"+e+"("+n+")"+e+"("+n+")"+e+"("+n+")"+e+"("+n+")"+e+"("+n+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+n+")(?:"+e+"("+n+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+n+")(?:"+e+"("+n+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+n+")(?:"+e+"("+n+")"+e+"("+n+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+n+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+n+")\\s*\\)))",i=new RegExp("^\\s*(?:(?:"+r+"(?:"+e+"*"+r+")*)?)\\s*$"),o=new RegExp(r,"g"),function(e){var n=t.concat(),s=[];if(!e||!i.test(e))return n;e.replace(o,(function(e){var i,o,l,c,u,h,d=new RegExp(r).exec(e).filter((function(e){return!!e})),f=(e=d[1],d.slice(2).map(parseFloat));switch(e){case"translate":h=f,(u=n)[4]=h[0],2===h.length&&(u[5]=h[1]);break;case"rotate":f[0]=a.util.degreesToRadians(f[0]),i=n,u=f,o=a.util.cos(u[0]),h=a.util.sin(u[0]),c=l=0,3===u.length&&(l=u[1],c=u[2]),i[0]=o,i[1]=h,i[2]=-h,i[3]=o,i[4]=l-(o*l-h*c),i[5]=c-(h*l+o*c);break;case"scale":l=n,c=(o=f)[0],o=2===o.length?o[1]:o[0],l[0]=c,l[3]=o;break;case"skewX":y(n,f,2);break;case"skewY":y(n,f,1);break;case"matrix":n=f}s.push(n.concat()),n=t.concat()}));for(var l=s[0];1<s.length;)s.shift(),l=a.util.multiplyTransformMatrices(l,s[0]);return l});var E=new RegExp("^\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*$");function S(e){if(!a.svgViewBoxElementsRegEx.test(e.nodeName))return{};var t,n,r,i=e.getAttribute("viewBox"),o=1,s=1,l=e.getAttribute("width"),c=e.getAttribute("height"),h=e.getAttribute("x")||0,d=e.getAttribute("y")||0,f=e.getAttribute("preserveAspectRatio")||"",p=!i||!(i=i.match(E)),m=!l||!c||"100%"===l||"100%"===c,v=p&&m,g={},y="",b=0,C=0;if(g.width=0,g.height=0,g.toBeParsed=v,p&&(h||d)&&e.parentNode&&"#document"!==e.parentNode.nodeName&&(y=" translate("+u(h)+" "+u(d)+") ",n=(e.getAttribute("transform")||"")+y,e.setAttribute("transform",n),e.removeAttribute("x"),e.removeAttribute("y")),v)return g;if(p)return g.width=u(l),g.height=u(c),g;if(t=-parseFloat(i[1]),v=-parseFloat(i[2]),p=parseFloat(i[3]),i=parseFloat(i[4]),g.minX=t,g.minY=v,g.viewBoxWidth=p,g.viewBoxHeight=i,m?(g.width=p,g.height=i):(g.width=u(l),g.height=u(c),o=g.width/p,s=g.height/i),"none"!==(f=a.util.parsePreserveAspectRatioAttribute(f)).alignX&&("meet"===f.meetOrSlice&&(s=o=s<o?s:o),"slice"===f.meetOrSlice&&(s=o=s<o?o:s),b=g.width-p*o,C=g.height-i*o,"Mid"===f.alignX&&(b/=2),"Mid"===f.alignY&&(C/=2),"Min"===f.alignX&&(b=0),"Min"===f.alignY&&(C=0)),1===o&&1===s&&0==t&&0==v&&0===h&&0===d)return g;if(n=(y=(h||d)&&"#document"!==e.parentNode.nodeName?" translate("+u(h)+" "+u(d)+") ":y)+" matrix("+o+" 0 0 "+s+" "+(t*o+b)+" "+(v*s+C)+") ","svg"===e.nodeName){for(r=e.ownerDocument.createElementNS(a.svgNS,"g");e.firstChild;)r.appendChild(e.firstChild);e.appendChild(r)}else(r=e).removeAttribute("x"),r.removeAttribute("y"),n=r.getAttribute("transform")+n;return r.setAttribute("transform",n),g}a.parseSVGDocument=function(e,t,n,r){if(e){!function(e){for(var t=g(e,["use","svg:use"]),n=0;t.length&&n<t.length;){var r=t[n];if(null===(l=r.getAttribute("xlink:href")||r.getAttribute("href")))return;var i,o=l.substr(1),s=r.getAttribute("x")||0,l=r.getAttribute("y")||0,c=w(e,o).cloneNode(!0),u=(c.getAttribute("transform")||"")+" translate("+s+", "+l+")",h=(l=t.length,a.svgNS);if(S(c),/^svg$/i.test(c.nodeName)){for(var d,f=c.ownerDocument.createElementNS(h,"g"),p=0,m=(d=c.attributes).length;p<m;p++)i=d.item(p),f.setAttributeNS(h,i.nodeName,i.nodeValue);for(;c.firstChild;)f.appendChild(c.firstChild);c=f}for(p=0,m=(d=r.attributes).length;p<m;p++)"x"!==(i=d.item(p)).nodeName&&"y"!==i.nodeName&&"xlink:href"!==i.nodeName&&"href"!==i.nodeName&&("transform"===i.nodeName?u=i.nodeValue+" "+u:c.setAttribute(i.nodeName,i.nodeValue));c.setAttribute("transform",u),c.setAttribute("instantiated_by_use","1"),c.removeAttribute("id"),r.parentNode.replaceChild(c,r),t.length===l&&n++}}(e);var i=a.Object.__uid++,o=S(e),s=a.util.toArray(e.getElementsByTagName("*"));if(o.crossOrigin=r&&r.crossOrigin,o.svgUid=i,0===s.length&&a.isLikelyNode){for(var c=[],u=0,h=(s=e.selectNodes('//*[name(.)!="svg"]')).length;u<h;u++)c[u]=s[u];s=c}var d,f=s.filter((function(e){return S(e),a.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))&&!function(e,t){for(;e=e&&e.parentNode;)if(e.nodeName&&t.test(e.nodeName.replace("svg:",""))&&!e.getAttribute("instantiated_by_use"))return 1}(e,a.svgInvalidAncestorsRegEx)}));f&&f.length?(d={},s.filter((function(e){return"clipPath"===e.nodeName.replace("svg:","")})).forEach((function(e){var t=e.getAttribute("id");d[t]=a.util.toArray(e.getElementsByTagName("*")).filter((function(e){return a.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))}))})),a.gradientDefs[i]=a.getGradientDefs(e),a.cssRules[i]=a.getCSSRules(e),a.clipPaths[i]=d,a.parseElements(f,(function(e,n){t&&(t(e,o,n,s),delete a.gradientDefs[i],delete a.cssRules[i],delete a.clipPaths[i])}),l(o),n,r)):t&&t([],{})}};var O=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+a.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+a.reNum+"))?\\s+(.*)");s(a,{parseFontDeclaration:function(e,t){var n,r,i,o=e.match(O);o&&(n=o[1],r=o[3],i=o[4],e=o[5],o=o[6],n&&(t.fontStyle=n),r&&(t.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),i&&(t.fontSize=u(i)),o&&(t.fontFamily=o),e&&(t.lineHeight="normal"===e?1:e))},getGradientDefs:function(e){var t,n=g(e,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),r=0,i={};for(r=n.length;r--;)(t=n[r]).getAttribute("xlink:href")&&function e(t,n){var r="xlink:href",i=w(t,n.getAttribute(r).substr(1));if(i&&i.getAttribute(r)&&e(t,i),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach((function(e){i&&!n.hasAttribute(e)&&i.hasAttribute(e)&&n.setAttribute(e,i.getAttribute(e))})),!n.children.length)for(var o=i.cloneNode(!0);o.firstChild;)n.appendChild(o.firstChild);n.removeAttribute(r)}(e,t),i[t.getAttribute("id")]=t;return i},parseAttributes:function(e,t,n){if(e){var r,i,o={};void 0===n&&(n=e.getAttribute("svgUid")),e.parentNode&&a.svgValidParentsRegEx.test(e.parentNode.nodeName)&&(o=a.parseAttributes(e.parentNode,t,n));var l=t.reduce((function(t,n){return(r=e.getAttribute(n))&&(t[n]=r),t}),{});n=s(b(e,n),a.parseStyleAttribute(e)),l=s(l,n);n[m]&&e.setAttribute(m,n[m]),i=n=o.fontSize||a.Text.DEFAULT_SVG_FONT_SIZE,l[p]&&(l[p]=i=u(l[p],n));var v,g,y,C={};for(g in l)y=function(e,t,n,r){var i,o="[object Array]"===Object.prototype.toString.call(t);if("fill"!==e&&"stroke"!==e||"none"!==t){if("strokeUniform"===e)return"non-scaling-stroke"===t;if("strokeDashArray"===e)t="none"===t?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)t=n&&n.transformMatrix?h(n.transformMatrix,a.parseTransformAttribute(t)):a.parseTransformAttribute(t);else if("visible"===e)t="none"!==t&&"hidden"!==t,n&&!1===n.visible&&(t=!1);else if("opacity"===e)t=parseFloat(t),n&&void 0!==n.opacity&&(t*=n.opacity);else if("textAnchor"===e)t="start"===t?"left":"end"===t?"right":"center";else if("charSpacing"===e)i=u(t,r)/r*1e3;else if("paintFirst"===e){var s=t.indexOf("fill");n=t.indexOf("stroke"),t="fill";(-1<s&&-1<n&&n<s||-1===s&&-1<n)&&(t="stroke")}else{if("href"===e||"xlink:href"===e||"font"===e)return t;if("imageSmoothing"===e)return"optimizeQuality"===t;i=o?t.map(u):u(t,r)}}else t="";return!o&&isNaN(i)?t:i}(v=(y=g)in d?d[y]:y,l[g],o,i),C[v]=y;return C&&C.font&&a.parseFontDeclaration(C.font,C),n=s(o,C),a.svgValidParentsRegEx.test(e.nodeName)?n:function(e){for(var t in f)if(void 0!==e[f[t]]&&""!==e[t]){if(void 0===e[t]){if(!a.Object.prototype[t])continue;e[t]=a.Object.prototype[t]}var n;0!==e[t].indexOf("url(")&&(n=new a.Color(e[t]),e[t]=n.setAlpha(c(n.getAlpha()*e[f[t]],2)).toRgba())}return e}(n)}},parseElements:function(e,t,n,r,i){new a.ElementsParser(e,t,n,r,i).parse()},parseStyleAttribute:function(e){var t,n,r,i={};return(e=e.getAttribute("style"))&&("string"==typeof e?(t=i,e.replace(/;\s*$/,"").split(";").forEach((function(e){e=e.split(":"),n=e[0].trim().toLowerCase(),r=e[1].trim(),t[n]=r}))):function(e,t){var n,r,i;for(i in e)void 0!==e[i]&&(n=i.toLowerCase(),r=e[i],t[n]=r)}(e,i)),i},parsePointsAttribute:function(e){if(!e)return null;for(var t=[],n=0,r=(e=(e=e.replace(/,/g," ").trim()).split(/\s+/)).length;n<r;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t},getCSSRules:function(e){for(var t=e.getElementsByTagName("style"),n={},r=0,i=t.length;r<i;r++){var o=t[r].textContent;""!==(o=o.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&o.match(/[^{]*\{[\s\S]*?\}/g).map((function(e){return e.trim()})).forEach((function(e){var t=e.match(/([\s\S]*?)\s*\{([^}]*)\}/),o={},s=t[2].trim().replace(/;$/,"").split(/\s*;\s*/);for(r=0,i=s.length;r<i;r++){var l=(c=s[r].split(/\s*:\s*/))[0],c=c[1];o[l]=c}(e=t[1]).split(",").forEach((function(e){""!==(e=e.replace(/^svg/i,"").trim())&&(n[e]?a.util.object.extend(n[e],o):n[e]=a.util.object.clone(o))}))}))}return n},loadSVGFromURL:function(e,t,n,r){e=e.replace(/^\n\s*/,"").trim(),new a.util.request(e,{method:"get",onComplete:function(e){if(!(e=e.responseXML)||!e.documentElement)return t&&t(null),!1;a.parseSVGDocument(e.documentElement,(function(e,n,r,i){t&&t(e,n,r,i)}),n,r)}})},loadSVGFromString:function(e,t,n,r){e=(new a.window.DOMParser).parseFromString(e.trim(),"text/xml"),a.parseSVGDocument(e.documentElement,(function(e,n,r,i){t(e,n,r,i)}),n,r)}})}(t),X.ElementsParser=function(e,t,n,r,i,o){this.elements=e,this.callback=t,this.options=n,this.reviver=r,this.svgUid=n&&n.svgUid||0,this.parsingOptions=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},(Y=X.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},Y.createObjects=function(){var e=this;this.elements.forEach((function(t,n){t.setAttribute("svgUid",e.svgUid),e.createObject(t,n)}))},Y.findTag=function(e){return X[X.util.string.capitalize(e.tagName.replace("svg:",""))]},Y.createObject=function(e,t){var n=this.findTag(e);if(n&&n.fromElement)try{n.fromElement(e,this.createCallback(t,e),this.options)}catch(e){X.log(e)}else this.checkIfDone()},Y.createCallback=function(e,t){var n=this;return function(r){var i;n.resolveGradient(r,t,"fill"),n.resolveGradient(r,t,"stroke"),r instanceof X.Image&&r._originalElement&&(i=r.parsePreserveAspectRatioAttribute(t)),r._removeTransformMatrix(i),n.resolveClipPath(r,t),n.reviver&&n.reviver(t,r),n.instances[e]=r,n.checkIfDone()}},Y.extractPropertyDefinition=function(e,t,n){if(e=e[t],(t=this.regexUrl).test(e))return t.lastIndex=0,e=t.exec(e)[1],t.lastIndex=0,X[n][this.svgUid][e]},Y.resolveGradient=function(e,t,n){var r=this.extractPropertyDefinition(e,n,"gradientDefs");r&&(t=t.getAttribute(n+"-opacity"),t=X.Gradient.fromElement(r,e,t,this.options),e.set(n,t))},Y.createClipPathCallback=function(e,t){return function(e){e._removeTransformMatrix(),e.fillRule=e.clipRule,t.push(e)}},Y.resolveClipPath=function(e,t){var n,r=this.extractPropertyDefinition(e,"clipPath","clipPaths");if(r){for(var i=[],o=X.util.invertTransform(e.calcTransformMatrix()),a=r[0].parentNode,s=t;s.parentNode&&s.getAttribute("clip-path")!==e.clipPath;)s=s.parentNode;s.parentNode.appendChild(a);for(var l=0;l<r.length;l++)n=r[l],this.findTag(n).fromElement(n,this.createClipPathCallback(e,i),this.options);r=1===i.length?i[0]:new X.Group(i),o=X.util.multiplyTransformMatrices(o,r.calcTransformMatrix()),r.clipPath&&this.resolveClipPath(r,s),o=X.util.qrDecompose(o),r.flipX=!1,r.flipY=!1,r.set("scaleX",o.scaleX),r.set("scaleY",o.scaleY),r.angle=o.angle,r.skewX=o.skewX,r.skewY=0,r.setPositionByOrigin({x:o.translateX,y:o.translateY},"center","center"),e.clipPath=r}else delete e.clipPath},Y.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter((function(e){return null!=e})),this.callback(this.instances,this.elements))},function(e){"use strict";function t(e,t){this.x=e,this.y=t}(e=e.fabric||(e.fabric={})).Point?e.warn("fabric.Point is already defined"):(e.Point=t).prototype={type:"point",constructor:t,add:function(e){return new t(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new t(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new t(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new t(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new t(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new t(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,n){return void 0===n&&(n=.5),n=Math.max(Math.min(1,n),0),new t(this.x+(e.x-this.x)*n,this.y+(e.y-this.y)*n)},distanceFrom:function(e){var t=this.x-e.x;e=this.y-e.y;return Math.sqrt(t*t+e*e)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new t(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new t(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setFromPoint:function(e){return this.x=e.x,this.y=e.y,this},swap:function(e){var t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n},clone:function(){return new t(this.x,this.y)}}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e){this.status=e,this.points=[]}t.Intersection?t.warn("fabric.Intersection is already defined"):(t.Intersection=n,t.Intersection.prototype={constructor:n,appendPoint:function(e){return this.points.push(e),this},appendPoints:function(e){return this.points=this.points.concat(e),this}},t.Intersection.intersectLineLine=function(e,r,i,o){var a,s=(o.x-i.x)*(e.y-i.y)-(o.y-i.y)*(e.x-i.x),l=(r.x-e.x)*(e.y-i.y)-(r.y-e.y)*(e.x-i.x);return 0!=(o=(o.y-i.y)*(r.x-e.x)-(o.x-i.x)*(r.y-e.y))?(i=l/o,0<=(o=s/o)&&o<=1&&0<=i&&i<=1?(a=new n("Intersection")).appendPoint(new t.Point(e.x+o*(r.x-e.x),e.y+o*(r.y-e.y))):a=new n):a=new n(0==s||0==l?"Coincident":"Parallel"),a},t.Intersection.intersectLinePolygon=function(e,t,r){for(var i,o,a=new n,s=r.length,l=0;l<s;l++)i=r[l],o=r[(l+1)%s],o=n.intersectLineLine(e,t,i,o),a.appendPoints(o.points);return 0<a.points.length&&(a.status="Intersection"),a},t.Intersection.intersectPolygonPolygon=function(e,t){for(var r=new n,i=e.length,o=0;o<i;o++){var a=e[o],s=e[(o+1)%i];s=n.intersectLinePolygon(a,s,t);r.appendPoints(s.points)}return 0<r.points.length&&(r.status="Intersection"),r},t.Intersection.intersectPolygonRectangle=function(e,r,i){var o=r.min(i),a=r.max(i),s=new t.Point(a.x,o.y);r=new t.Point(o.x,a.y),i=n.intersectLinePolygon(o,s,e),s=n.intersectLinePolygon(s,a,e),a=n.intersectLinePolygon(a,r,e),o=n.intersectLinePolygon(r,o,e);return(e=new n).appendPoints(i.points),e.appendPoints(s.points),e.appendPoints(a.points),e.appendPoints(o.points),0<e.points.length&&(e.status="Intersection"),e})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function r(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}t.Color?t.warn("fabric.Color is already defined."):(t.Color=n,t.Color.prototype={_tryParsingColor:function(e){var t;(t=(t=(t=(t=(t="transparent"===(e=e in n.colorNameMap?n.colorNameMap[e]:e)?[255,255,255,0]:t)||n.sourceFromHex(e))||n.sourceFromRgb(e))||n.sourceFromHsl(e))||[0,0,0,1])&&this.setSource(t)},_rgbToHsl:function(e,n,r){var i,o=t.util.array.max([e/=255,n/=255,r/=255]),a=t.util.array.min([e,n,r]),s=(o+a)/2;if(o===a)i=c=0;else{var l=o-a,c=.5<s?l/(2-o-a):l/(o+a);switch(o){case e:i=(n-r)/l+(n<r?6:0);break;case n:i=(r-e)/l+2;break;case r:i=(e-n)/l+4}i/=6}return[Math.round(360*i),Math.round(100*c),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource();return"hsl("+(e=this._rgbToHsl(e[0],e[1],e[2]))[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+t[0]+","+t[1]+"%,"+t[2]+"%,"+e[3]+")"},toHex:function(){var e,t=this.getSource(),n=t[0].toString(16);return n=1===n.length?"0"+n:n,e=1===(e=t[1].toString(16)).length?"0"+e:e,t=1===(t=t[2].toString(16)).length?"0"+t:t,n.toUpperCase()+e.toUpperCase()+t.toUpperCase()},toHexa:function(){var e=this.getSource();return e=1===(e=(e=Math.round(255*e[3])).toString(16)).length?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();return t[3]=e,this.setSource(t),this},toGrayscale:function(){var e=this.getSource(),t=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10);e=e[3];return this.setSource([t,t,t,e]),this},toBlackWhite:function(e){var t=(.3*(n=this.getSource())[0]+.59*n[1]+.11*n[2]).toFixed(0),n=n[3];return e=e||127,t=Number(t)<Number(e)?0:255,this.setSource([t,t,t,n]),this},overlayWith:function(e){e instanceof n||(e=new n(e));for(var t=[],r=this.getAlpha(),i=this.getSource(),o=e.getSource(),a=0;a<3;a++)t.push(Math.round(.5*i[a]+.5*o[a]));return t[3]=r,this.setSource(t),this}},t.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,t.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,t.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,t.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},t.Color.fromRgb=function(e){return n.fromSource(n.sourceFromRgb(e))},t.Color.sourceFromRgb=function(e){var t=e.match(n.reRGBa);if(t){var r=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),i=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1);e=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1);return[parseInt(r,10),parseInt(i,10),parseInt(e,10),t[4]?parseFloat(t[4]):1]}},t.Color.fromRgba=n.fromRgb,t.Color.fromHsl=function(e){return n.fromSource(n.sourceFromHsl(e))},t.Color.sourceFromHsl=function(e){var t=e.match(n.reHSLa);if(t){var i,o,a,s=(parseFloat(t[1])%360+360)%360/360,l=parseFloat(t[2])/(/%$/.test(t[2])?100:1);e=parseFloat(t[3])/(/%$/.test(t[3])?100:1);return 0==l?i=o=a=e:(i=r(l=2*e-(e=e<=.5?e*(1+l):e+l-e*l),e,s+1/3),o=r(l,e,s),a=r(l,e,s-1/3)),[Math.round(255*i),Math.round(255*o),Math.round(255*a),t[4]?parseFloat(t[4]):1]}},t.Color.fromHsla=n.fromHsl,t.Color.fromHex=function(e){return n.fromSource(n.sourceFromHex(e))},t.Color.sourceFromHex=function(e){if(e.match(n.reHex)){var t=3===(a=e.slice(e.indexOf("#")+1)).length||4===a.length,r=8===a.length||4===a.length,i=t?a.charAt(0)+a.charAt(0):a.substring(0,2),o=t?a.charAt(1)+a.charAt(1):a.substring(2,4),a=(e=t?a.charAt(2)+a.charAt(2):a.substring(4,6),r?t?a.charAt(3)+a.charAt(3):a.substring(6,8):"FF");return[parseInt(i,16),parseInt(o,16),parseInt(e,16),parseFloat((parseInt(a,16)/255).toFixed(2))]}},t.Color.fromSource=function(e){var t=new n;return t.setSource(e),t})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=["e","se","s","sw","w","nw","n","ne","e"],r=["ns","nesw","ew","nwse"],i={},o="left",a="top",s="right",l="bottom",c="center",u={top:l,bottom:a,left:s,right:o,center:c},h=t.util.radiansToDegrees,d=Math.sign||function(e){return(0<e)-(e<0)||+e};function f(e,t){return t=e.angle+h(Math.atan2(t.y,t.x))+360,Math.round(t%360/45)}function p(e,n){var r=n.transform.target,i=r.canvas,o=t.util.object.clone(n);o.target=r,i&&i.fire("object:"+e,o),r.fire(e,n)}function m(e,t){return e=e[(t=t.canvas).uniScaleKey],t.uniformScaling&&!e||!t.uniformScaling&&e}function v(e){return e.originX===c&&e.originY===c}function g(e,t,n){var r=e.lockScalingX;e=e.lockScalingY;return!((!r||!e)&&(t||!r&&!e||!n)&&(!r||"x"!==t)&&(!e||"y"!==t))}function y(e,t,n,r){return{e:e,transform:t,pointer:{x:n,y:r}}}function b(e){return function(t,n,r,i){var o=n.target,a=o.getCenterPoint();a=o.translateToOriginPoint(a,n.originX,n.originY),i=e(t,n,r,i);return o.setPositionByOrigin(a,n.originX,n.originY),i}}function C(e,t){return function(n,r,i,o){var a=t(n,r,i,o);return a&&p(e,y(n,r,i,o)),a}}function w(e,n,r,i,o){var a=e.target,s=a.controls[e.corner];e=a.canvas.getZoom(),e=a.padding/e;return(r=a.toLocalPoint(new t.Point(i,o),n,r)).x>=e&&(r.x-=e),r.x<=-e&&(r.x+=e),r.y>=e&&(r.y-=e),r.y<=e&&(r.y+=e),r.x-=s.offsetX,r.y-=s.offsetY,r}function E(e){return e.flipX!==e.flipY}function S(e,t,n,r,i){0!==e[t]&&(r=i/e._getTransformedDimensions()[r]*e[n],e.set(n,r))}function O(e,t,n,r){var i,c=t.target,u=c._getTransformedDimensions(0,c.skewY);n=w(t,t.originX,t.originY,n,r),r=Math.abs(2*n.x)-u.x,n=c.skewX;return r<2?i=0:(i=h(Math.atan2(r/c.scaleX,u.y/c.scaleY)),t.originX===o&&t.originY===l&&(i=-i),t.originX===s&&t.originY===a&&(i=-i),E(c)&&(i=-i)),(t=n!==i)&&(n=c._getTransformedDimensions().y,c.set("skewX",i),S(c,"skewY","scaleY","y",n)),t}function x(e,t,n,r){var i,c=t.target,u=c._getTransformedDimensions(c.skewX,0);n=w(t,t.originX,t.originY,n,r),r=Math.abs(2*n.y)-u.y,n=c.skewY;return r<2?i=0:(i=h(Math.atan2(r/c.scaleY,u.x/c.scaleX)),t.originX===o&&t.originY===l&&(i=-i),t.originX===s&&t.originY===a&&(i=-i),E(c)&&(i=-i)),(t=n!==i)&&(n=c._getTransformedDimensions().x,c.set("skewY",i),S(c,"skewX","scaleX","x",n)),t}function _(e,t,n,r,i){var o=t.target,a=o.lockScalingX,s=o.lockScalingY,l=(i=i||{}).by,c=m(e,o);i=g(o,l,c),e=t.gestureScale;if(i)return!1;if(e)h=t.scaleX*e,f=t.scaleY*e;else{if(i=w(t,t.originX,t.originY,n,r),e="y"!==l?d(i.x):1,p="x"!==l?d(i.y):1,t.signX||(t.signX=e),t.signY||(t.signY=p),o.lockScalingFlip&&(t.signX!==e||t.signY!==p))return!1;var h,f;n=o._getTransformedDimensions();f=c&&!l?(r=Math.abs(i.x)+Math.abs(i.y),c=t.original,r/=Math.abs(n.x*c.scaleX/o.scaleX)+Math.abs(n.y*c.scaleY/o.scaleY),h=c.scaleX*r,c.scaleY*r):(h=Math.abs(i.x*o.scaleX/n.x),Math.abs(i.y*o.scaleY/n.y)),v(t)&&(h*=2,f*=2),t.signX!==e&&"y"!==l&&(t.originX=u[t.originX],h*=-1,t.signX=e),t.signY!==p&&"x"!==l&&(t.originY=u[t.originY],f*=-1,t.signY=p)}t=o.scaleX;var p=o.scaleY;return l?("x"===l&&o.set("scaleX",h),"y"===l&&o.set("scaleY",f)):(a||o.set("scaleX",h),s||o.set("scaleY",f)),t!==o.scaleX||p!==o.scaleY}i.scaleCursorStyleHandler=function(e,t,r){var i=m(e,r);e="";return 0!==t.x&&0===t.y?e="x":0===t.x&&0!==t.y&&(e="y"),g(r,e,i)?"not-allowed":(t=f(r,t),n[t]+"-resize")},i.skewCursorStyleHandler=function(e,t,n){return 0!==t.x&&n.lockSkewingY||0!==t.y&&n.lockSkewingX?"not-allowed":(t=f(n,t)%4,r[t]+"-resize")},i.scaleSkewCursorStyleHandler=function(e,t,n){return e[n.canvas.altActionKey]?i.skewCursorStyleHandler(e,t,n):i.scaleCursorStyleHandler(e,t,n)},i.rotationWithSnapping=C("rotating",b((function(e,t,n,r){var i=t,o=i.target,a=o.translateToOriginPoint(o.getCenterPoint(),i.originX,i.originY);if(o.lockRotation)return!1;var s;t=Math.atan2(i.ey-a.y,i.ex-a.x),a=Math.atan2(r-a.y,n-a.x),a=h(a-t+i.theta);return 0<o.snapAngle&&(t=o.snapAngle,i=o.snapThreshold||t,s=Math.ceil(a/t)*t,t=Math.floor(a/t)*t,Math.abs(a-t)<i?a=t:Math.abs(a-s)<i&&(a=s)),a<0&&(a=360+a),s=o.angle!==(a%=360),o.angle=a,s}))),i.scalingEqually=C("scaling",b((function(e,t,n,r){return _(e,t,n,r)}))),i.scalingX=C("scaling",b((function(e,t,n,r){return _(e,t,n,r,{by:"x"})}))),i.scalingY=C("scaling",b((function(e,t,n,r){return _(e,t,n,r,{by:"y"})}))),i.scalingYOrSkewingX=function(e,t,n,r){return e[t.target.canvas.altActionKey]?i.skewHandlerX(e,t,n,r):i.scalingY(e,t,n,r)},i.scalingXOrSkewingY=function(e,t,n,r){return e[t.target.canvas.altActionKey]?i.skewHandlerY(e,t,n,r):i.scalingX(e,t,n,r)},i.changeWidth=C("resizing",b((function(e,t,n,r){var i=t.target,o=w(t,t.originX,t.originY,n,r);n=i.strokeWidth/(i.strokeUniform?i.scaleX:1),r=v(t)?2:1,t=i.width,n=Math.abs(o.x*r/i.scaleX)-n;return i.set("width",Math.max(n,0)),t!==n}))),i.skewHandlerX=function(e,t,n,r){var i,l=t.target,u=l.skewX,h=t.originY;return!l.lockSkewingX&&(0===u?i=0<w(t,c,c,n,r).x?o:s:(0<u&&(i=h===a?o:s),u<0&&(i=h===a?s:o),E(l)&&(i=i===o?s:o)),t.originX=i,C("skewing",b(O))(e,t,n,r))},i.skewHandlerY=function(e,t,n,r){var i,s=t.target,u=s.skewY,h=t.originX;return!s.lockSkewingY&&(0===u?i=0<w(t,c,c,n,r).y?a:l:(0<u&&(i=h===o?a:l),u<0&&(i=h===o?l:a),E(s)&&(i=i===a?l:a)),t.originY=i,C("skewing",b(x))(e,t,n,r))},i.dragHandler=function(e,t,n,r){var i=t.target,o=n-t.offsetX,a=r-t.offsetY,s=!i.get("lockMovementX")&&i.left!==o,l=!i.get("lockMovementY")&&i.top!==a;return s&&i.set("left",o),l&&i.set("top",a),(s||l)&&p("moving",y(e,t,n,r)),s||l},i.scaleOrSkewActionName=function(e,t,n){return n=e[n.canvas.altActionKey],0===t.x?n?"skewX":"scaleY":0===t.y?n?"skewY":"scaleX":void 0},i.rotationStyleHandler=function(e,t,n){return n.lockRotation?"not-allowed":t.cursorStyle},i.fireEvent=p,i.wrapWithFixedAnchor=b,i.wrapWithFireEvent=C,i.getLocalPoint=w,t.controlsUtils=i}(t),function(e){"use strict";var t=(e=e.fabric||(e.fabric={})).util.degreesToRadians;(e=e.controlsUtils).renderCircleControl=function(e,t,n,r,i){r=r||{};var o,a=this.sizeX||r.cornerSize||i.cornerSize,s=this.sizeY||r.cornerSize||i.cornerSize,l=(h=(void 0!==r.transparentCorners?r:i).transparentCorners)?"stroke":"fill",c=!h&&(r.cornerStrokeColor||i.cornerStrokeColor),u=t,h=n;e.save(),e.fillStyle=r.cornerColor||i.cornerColor,e.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor,s<a?(e.scale(1,s/(o=a)),h=n*a/s):a<s?(e.scale(a/(o=s),1),u=t*s/a):o=a,e.lineWidth=1,e.beginPath(),e.arc(u,h,o/2,0,2*Math.PI,!1),e[l](),c&&e.stroke(),e.restore()},e.renderSquareControl=function(e,n,r,i,o){i=i||{};var a=this.sizeX||i.cornerSize||o.cornerSize,s=this.sizeY||i.cornerSize||o.cornerSize,l=(h=(void 0!==i.transparentCorners?i:o).transparentCorners)?"stroke":"fill",c=!h&&(i.cornerStrokeColor||o.cornerStrokeColor),u=a/2,h=s/2;e.save(),e.fillStyle=i.cornerColor||o.cornerColor,e.strokeStyle=i.cornerStrokeColor||o.cornerStrokeColor,e.lineWidth=1,e.translate(n,r),e.rotate(t(o.angle)),e[l+"Rect"](-u,-h,a,s),c&&e.strokeRect(-u,-h,a,s),e.restore()}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Control=function(e){for(var t in e)this[t]=e[t]},t.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(e,t){return t.cursorStyle},getActionName:function(e,t){return t.actionName},getVisibility:function(e,t){return(e=e._controlsVisibility)&&void 0!==e[t]?e[t]:this.visible},setVisibility:function(e){this.visible=e},positionHandler:function(e,n){return t.util.transformPoint({x:this.x*e.x+this.offsetX,y:this.y*e.y+this.offsetY},n)},calcCornerCoords:function(e,n,r,i,o){var a,s,l,c,u,h,d=o?this.touchSizeX:this.sizeX;o=o?this.touchSizeY:this.sizeY;return d&&o&&d!==o?(l=Math.atan2(o,d),u=Math.sqrt(d*d+o*o)/2,h=l-t.util.degreesToRadians(e),c=Math.PI/2-l-t.util.degreesToRadians(e),a=u*t.util.cos(h),s=u*t.util.sin(h),l=u*t.util.cos(c),c=u*t.util.sin(c)):(u=.7071067812*(d&&o?d:n),h=t.util.degreesToRadians(45-e),a=l=u*t.util.cos(h),s=c=u*t.util.sin(h)),{tl:{x:r-c,y:i-l},tr:{x:r+a,y:i-s},bl:{x:r-a,y:i+s},br:{x:r+c,y:i+l}}},render:function(e,n,r,i,o){("circle"===((i=i||{}).cornerStyle||o.cornerStyle)?t.controlsUtils.renderCircleControl:t.controlsUtils.renderSquareControl).call(this,e,n,r,i,o)}}}(t),w=X.util.object.clone,X.Gradient=X.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){(e=e||{}).coords||(e.coords={});var t,n=this;Object.keys(e).forEach((function(t){n[t]=e[t]})),this.id?this.id+="_"+X.Object.__uid++:this.id=X.Object.__uid++,t={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},"radial"===this.type&&(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var t in e){var n=new X.Color(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(e){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform&&this.gradientTransform.concat()};return X.util.populateWithProperties(this,t,e),t},toSVG:function(e,t){var n,r=w(this.coords,!0),i=(t=t||{},w(this.colorStops,!0)),o=r.r1>r.r2,a=(this.gradientTransform||X.iMatrix).concat(),s=-this.offsetX,l=-this.offsetY,c=!!t.additionalTransform,u="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(i.sort((function(e,t){return e.offset-t.offset})),"objectBoundingBox"==u?(s/=e.width,l/=e.height):(s+=e.width/2,l+=e.height/2),"path"===e.type&&"percentage"!==this.gradientUnits&&(s-=e.pathOffset.x,l-=e.pathOffset.y),a[4]-=s,a[5]-=l,u='id="SVGID_'+this.id+'" gradientUnits="'+u+'"',u+=' gradientTransform="'+(c?t.additionalTransform+" ":"")+X.util.matrixToSVG(a)+'" ',"linear"===this.type?n=["<linearGradient ",u,' x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,'">\n']:"radial"===this.type&&(n=["<radialGradient ",u,' cx="',o?r.x1:r.x2,'" cy="',o?r.y1:r.y2,'" r="',o?r.r1:r.r2,'" fx="',o?r.x2:r.x1,'" fy="',o?r.y2:r.y1,'">\n']),"radial"===this.type){if(o)for((i=i.concat()).reverse(),d=0,f=i.length;d<f;d++)i[d].offset=1-i[d].offset;if(0<(o=Math.min(r.r1,r.r2)))for(var h=o/Math.max(r.r1,r.r2),d=0,f=i.length;d<f;d++)i[d].offset+=h*(1-i[d].offset)}for(d=0,f=i.length;d<f;d++){var p=i[d];n.push("<stop ",'offset="',100*p.offset+"%",'" style="stop-color:',p.color,void 0!==p.opacity?";stop-opacity: "+p.opacity:";",'"/>\n')}return n.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),n.join("")},toLive:function(e){var t,n,r,i=X.util.object.clone(this.coords);if(this.type){for("linear"===this.type?t=e.createLinearGradient(i.x1,i.y1,i.x2,i.y2):"radial"===this.type&&(t=e.createRadialGradient(i.x1,i.y1,i.r1,i.x2,i.y2,i.r2)),n=0,r=this.colorStops.length;n<r;n++){var o=this.colorStops[n].color,a=this.colorStops[n].opacity,s=this.colorStops[n].offset;void 0!==a&&(o=new X.Color(o).setAlpha(a).toRgba()),t.addColorStop(s,o)}return t}}}),X.util.object.extend(X.Gradient,{fromElement:function(e,t,n,r){var i=(i=parseFloat(n)/(/%$/.test(n)?100:1))<0?0:1<i?1:i;isNaN(i)&&(i=1);for(var o,a,s,l,c,u,h=e.getElementsByTagName("stop"),d="userSpaceOnUse"===e.getAttribute("gradientUnits")?"pixels":"percentage",f=e.getAttribute("gradientTransform")||"",p=[],m=0,v=0,g="linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?(o="linear",{x1:(n=e).getAttribute("x1")||0,y1:n.getAttribute("y1")||0,x2:n.getAttribute("x2")||"100%",y2:n.getAttribute("y2")||0}):(o="radial",{x1:(g=e).getAttribute("fx")||g.getAttribute("cx")||"50%",y1:g.getAttribute("fy")||g.getAttribute("cy")||"50%",r1:0,x2:g.getAttribute("cx")||"50%",y2:g.getAttribute("cy")||"50%",r2:g.getAttribute("r")||"50%"}),y=h.length;y--;)p.push(function(e,t){var n,r,i,o=e.getAttribute("style"),a=e.getAttribute("offset")||0;if(a=(a=parseFloat(a)/(/%$/.test(a)?100:1))<0?0:1<a?1:a,o){var s=o.split(/\s*;\s*/);for(""===s[s.length-1]&&s.pop(),i=s.length;i--;){var l=(c=s[i].split(/\s*:\s*/))[0].trim(),c=c[1].trim();"stop-color"===l?n=c:"stop-opacity"===l&&(r=c)}}return n=n||e.getAttribute("stop-color")||"rgb(0,0,0)",r=r||e.getAttribute("stop-opacity"),e=(n=new X.Color(n)).getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=e*t,{offset:a,color:n.toRgb(),opacity:r}}(h[y],i));return f=X.parseTransformAttribute(f),a=g,s=r,l=d,Object.keys(a).forEach((function(e){"Infinity"===(c=a[e])?u=1:"-Infinity"===c?u=0:(u=parseFloat(a[e],10),"string"==typeof c&&/^(\d+\.\d+)%|(\d+)%$/.test(c)&&(u*=.01,"pixels"===l&&("x1"!==e&&"x2"!==e&&"r2"!==e||(u*=s.viewBoxWidth||s.width),"y1"!==e&&"y2"!==e||(u*=s.viewBoxHeight||s.height)))),a[e]=u})),"pixels"==d&&(m=-t.left,v=-t.top),new X.Gradient({id:e.getAttribute("id"),type:o,coords:g,colorStops:p,gradientUnits:d,gradientTransform:f,offsetX:m,offsetY:v})}}),function(){"use strict";var e=X.util.toFixed;X.Pattern=X.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(e,t){var n;e=e||{},this.id=X.Object.__uid++,this.setOptions(e),!e.source||e.source&&"string"!=typeof e.source?t&&t(this):((n=this).source=X.util.createImage(),X.util.loadImage(e.source,(function(e,r){n.source=e,t&&t(n,r)}),null,this.crossOrigin))},toObject:function(t){var n,r=X.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?n=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),r={type:"pattern",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:e(this.offsetX,r),offsetY:e(this.offsetY,r),patternTransform:this.patternTransform?this.patternTransform.concat():null},X.util.populateWithProperties(this,r,t),r},toSVG:function(e){var t="function"==typeof this.source?this.source():this.source,n=t.width/e.width,r=t.height/e.height,i=this.offsetX/e.width,o=this.offsetY/e.height;e="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(r=1,o&&(r+=Math.abs(o))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,i&&(n+=Math.abs(i))),t.src?e=t.src:t.toDataURL&&(e=t.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+i+'" y="'+o+'" width="'+n+'" height="'+r+'">\n<image x="0" y="0" width="'+t.width+'" height="'+t.height+'" xlink:href="'+e+'"></image>\n</pattern>\n'},setOptions:function(e){for(var t in e)this[t]=e[t]},toLive:function(e){var t=this.source;if(!t)return"";if(void 0!==t.src){if(!t.complete)return"";if(0===t.naturalWidth||0===t.naturalHeight)return""}return e.createPattern(t,this.repeat)}})}(),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.toFixed;t.Shadow?t.warn("fabric.Shadow is already defined."):(t.Shadow=t.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(e){for(var n in e="string"==typeof e?this._parseShadow(e):e)this[n]=e[n];this.id=t.Object.__uid++},_parseShadow:function(e){var n=e.trim();e=t.Shadow.reOffsetsAndBlur.exec(n)||[];return{color:(n.replace(t.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(e[1],10)||0,offsetY:parseFloat(e[2],10)||0,blur:parseFloat(e[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(e){var r=40,i=40,o=t.Object.NUM_FRACTION_DIGITS,a=t.util.rotateVector({x:this.offsetX,y:this.offsetY},t.util.degreesToRadians(-e.angle)),s=new t.Color(this.color);return e.width&&e.height&&(r=100*n((Math.abs(a.x)+this.blur)/e.width,o)+20,i=100*n((Math.abs(a.y)+this.blur)/e.height,o)+20),e.flipX&&(a.x*=-1),e.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+i+'%" height="'+(100+2*i)+'%" x="-'+r+'%" width="'+(100+2*r)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+n(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+n(a.x,o)+'" dy="'+n(a.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+s.toRgb()+'" flood-opacity="'+s.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},n=t.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(t){this[t]!==n[t]&&(e[t]=this[t])}),this),e}}),t.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(t),function(){"use strict";var e,t,n,r,i,o,a,s,l;X.StaticCanvas?X.warn("fabric.StaticCanvas is already defined."):(e=X.util.object.extend,t=X.util.getElementOffset,n=X.util.removeFromArray,r=X.util.toFixed,i=X.util.transformPoint,o=X.util.invertTransform,a=X.util.getNodeCanvas,s=X.util.createCanvasElement,l=new Error("Could not initialize `canvas` element"),X.StaticCanvas=X.util.createClass(X.CommonMethods,{initialize:function(e,t){t=t||{},this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:X.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(e,t){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(e),this._initOptions(t),this.interactive||this._initRetinaScaling(),t.overlayImage&&this.setOverlayImage(t.overlayImage,n),t.backgroundImage&&this.setBackgroundImage(t.backgroundImage,n),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,n),t.overlayColor&&this.setOverlayColor(t.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return 1!==X.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?X.devicePixelRatio:1},_initRetinaScaling:function(){var e;this._isRetinaScaling()&&(e=X.devicePixelRatio,this.__initRetinaScaling(e,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(e,this.upperCanvasEl,this.contextTop))},__initRetinaScaling:function(e,t,n){t.setAttribute("width",this.width*e),t.setAttribute("height",this.height*e),n.scale(e,e)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(e,t,n){return this.__setBgOverlayImage("overlayImage",e,t,n)},setBackgroundImage:function(e,t,n){return this.__setBgOverlayImage("backgroundImage",e,t,n)},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},__setBgOverlayImage:function(e,t,n,r){return"string"==typeof t?X.util.loadImage(t,(function(t,i){var o;t&&(o=new X.Image(t,r),(this[e]=o).canvas=this),n&&n(t,i)}),this,r&&r.crossOrigin):(r&&t.setOptions(r),(this[e]=t)&&(t.canvas=this),n&&n(t,!1)),this},__setBgOverlayColor:function(e,t,n){return this[e]=t,this._initGradient(t,e),this._initPattern(t,e,n),this},_createCanvasElement:function(){var e=s();if(!e)throw l;if(e.style||(e.style={}),void 0===e.getContext)throw l;return e},_initOptions:function(e){var t=this.lowerCanvasEl;this._setOptions(e),this.width=this.width||parseInt(t.width,10)||0,this.height=this.height||parseInt(t.height,10)||0,this.lowerCanvasEl.style&&(t.width=this.width,t.height=this.height,t.style.width=this.width+"px",t.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){e&&e.getContext?this.lowerCanvasEl=e:this.lowerCanvasEl=X.util.getById(e)||this._createCanvasElement(),X.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,t){return this.setDimensions({width:e},t)},setHeight:function(e,t){return this.setDimensions({height:e},t)},setDimensions:function(e,t){var n,r;for(r in t=t||{},e)n=e[r],t.cssOnly||(this._setBackstoreDimension(r,e[r]),n+="px",this.hasLostContext=!0),t.backstoreOnly||this._setCssDimension(r,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),t.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.upperCanvasEl&&(this.upperCanvasEl[e]=t),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t),this[e]=t,this},_setCssDimension:function(e,t){return this.lowerCanvasEl.style[e]=t,this.upperCanvasEl&&(this.upperCanvasEl.style[e]=t),this.wrapperEl&&(this.wrapperEl.style[e]=t),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var t,n,r,i=this._activeObject,o=this.backgroundImage,a=this.overlayImage;for(this.viewportTransform=e,n=0,r=this._objects.length;n<r;n++)(t=this._objects[n]).group||t.setCoords(!0);return i&&i.setCoords(),o&&o.setCoords(!0),a&&a.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(e,t){var n=e,r=this.viewportTransform.slice(0);return e=i(e,o(this.viewportTransform)),r[0]=t,r[3]=t,e=i(e,r),r[4]+=n.x-e.x,r[5]+=n.y-e.y,this.setViewportTransform(r)},setZoom:function(e){return this.zoomToPoint(new X.Point(0,0),e),this},absolutePan:function(e){var t=this.viewportTransform.slice(0);return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)},relativePan:function(e){return this.absolutePan(new X.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState(),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e}),e.fire("removed"),delete e.canvas},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var e=this.contextContainer;return this.renderCanvas(e,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=X.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var e={},t=this.width,n=this.height,r=o(this.viewportTransform);return e.tl=i({x:0,y:0},r),e.br=i({x:t,y:n},r),e.tr=new X.Point(e.br.x,e.tl.y),e.bl=new X.Point(e.tl.x,e.br.y),this.vptCoords=e},cancelRequestedRender:function(){this.isRendering&&(X.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(e,t){var n=this.viewportTransform,r=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(e),X.util.setImageSmoothing(e,this.imageSmoothingEnabled),this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),r&&(r.canvas=this,r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e)),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var t=this.viewportTransform,n=this.clipPath;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e.globalCompositeOperation="destination-in",n.transform(e),e.scale(1/n.zoomX,1/n.zoomY),e.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),e.restore()},_renderObjects:function(e,t){for(var n=0,r=t.length;n<r;++n)t[n]&&t[n].render(e)},_renderBackgroundOrOverlay:function(e,t){var n=this[t+"Color"],r=this[t+"Image"],i=this.viewportTransform;t=this[t+"Vpt"];(n||r)&&(n&&(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=n.toLive?n.toLive(e,this):n,t&&e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0),(n=n.gradientTransform||n.patternTransform)&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),e.fill(),e.restore()),r&&(e.save(),t&&e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),r.render(e),e.restore()))},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(e){return this._centerObject(e,new X.Point(this.getCenter().left,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new X.Point(e.getCenterPoint().x,this.getCenter().top))},centerObject:function(e){var t=this.getCenter();return this._centerObject(e,new X.Point(t.left,t.top))},viewportCenterObject:function(e){var t=this.getVpCenter();return this._centerObject(e,t)},viewportCenterObjectH:function(e){var t=this.getVpCenter();return this._centerObject(e,new X.Point(t.x,e.getCenterPoint().y)),this},viewportCenterObjectV:function(e){var t=this.getVpCenter();return this._centerObject(e,new X.Point(e.getCenterPoint().x,t.y))},getVpCenter:function(){var e=this.getCenter(),t=o(this.viewportTransform);return i({x:e.left,y:e.top},t)},_centerObject:function(e,t){return e.setPositionByOrigin(t,"center","center"),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(t,n){var r=this.clipPath,i={version:X.version,objects:this._toObjects(t,n)};return r&&!r.excludeFromExport&&(i.clipPath=this._toObject(this.clipPath,t,n)),e(i,this.__serializeBgOverlay(t,n)),X.util.populateWithProperties(this,i,n),i},_toObjects:function(e,t){return this._objects.filter((function(e){return!e.excludeFromExport})).map((function(n){return this._toObject(n,e,t)}),this)},_toObject:function(e,t,n){var r;return this.includeDefaultValues||(r=e.includeDefaultValues,e.includeDefaultValues=!1),n=e[t](n),this.includeDefaultValues||(e.includeDefaultValues=r),n},__serializeBgOverlay:function(e,t){var n={},r=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return o&&o.toObject?o.excludeFromExport||(n.background=o.toObject(t)):o&&(n.background=o),a&&a.toObject?a.excludeFromExport||(n.overlay=a.toObject(t)):a&&(n.overlay=a),r&&!r.excludeFromExport&&(n.backgroundImage=this._toObject(r,e,t)),i&&!i.excludeFromExport&&(n.overlayImage=this._toObject(i,e,t)),n},svgViewportTransformation:!0,toSVG:function(e,t){(e=e||{}).reviver=t;var n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")},_setSVGPreamble:function(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,t){var n,i=t.width||this.width,o=t.height||this.height,a='viewBox="0 0 '+this.width+" "+this.height+'" ',s=X.Object.NUM_FRACTION_DIGITS;t.viewBox?a='viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':this.svgViewportTransformation&&(n=this.viewportTransform,a='viewBox="'+r(-n[4]/n[0],s)+" "+r(-n[5]/n[3],s)+" "+r(this.width/n[0],s)+" "+r(this.height/n[3],s)+'" '),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',o,'" ',a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",X.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")},createSVGClipPathMarkup:function(e){var t=this.clipPath;return t?(t.clipPathId="CLIPPATH_"+X.Object.__uid++,'<clipPath id="'+t.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(e.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var e=this;return["background","overlay"].map((function(t){var n=e[t+"Color"];if(n&&n.toLive){var r=e[t+"Vpt"],i=e.viewportTransform;t={width:e.width/(r?i[0]:1),height:e.height/(r?i[3]:1)};return n.toSVG(t,{additionalTransform:r?X.util.matrixToSVG(i):""})}})).join("")},createSVGFontFacesMarkup:function(){var e,t,n,r,i,o,a,s,l,c="",u={},h=X.fontPaths,d=[];for(this._objects.forEach((function e(t){d.push(t),t._objects&&t._objects.forEach(e)})),a=0,s=d.length;a<s;a++)if(t=(e=d[a]).fontFamily,-1!==e.type.indexOf("text")&&!u[t]&&h[t]&&(u[t]=!0,e.styles))for(i in n=e.styles)for(o in r=n[i])!u[t=r[o].fontFamily]&&h[t]&&(u[t]=!0);for(l in u)c+=["\t\t@font-face {\n","\t\t\tfont-family: '",l,"';\n","\t\t\tsrc: url('",h[l],"');\n","\t\t}\n"].join("");return c&&['\t<style type="text/css">',"<![CDATA[\n",c,"]]>","</style>\n"].join("")},_setSVGObjects:function(e,t){for(var n,r=this._objects,i=0,o=r.length;i<o;i++)(n=r[i]).excludeFromExport||this._setSVGObject(e,n,t)},_setSVGObject:function(e,t,n){e.push(t.toSVG(n))},_setSVGBgOverlayImage:function(e,t,n){this[t]&&!this[t].excludeFromExport&&this[t].toSVG&&e.push(this[t].toSVG(n))},_setSVGBgOverlayColor:function(e,t){var n,r=this[t+"Color"],i=this.viewportTransform,o=this.width,a=this.height;r&&(r.toLive?(n=r.repeat,i=X.util.invertTransform(i),i=this[t+"Vpt"]?X.util.matrixToSVG(i):"",e.push('<rect transform="'+i+" translate(",o/2,",",a/2,')"',' x="',r.offsetX-o/2,'" y="',r.offsetY-a/2,'" ','width="',"repeat-y"===n||"no-repeat"===n?r.source.width:o,'" height="',"repeat-x"===n||"no-repeat"===n?r.source.height:a,'" fill="url(#SVGID_'+r.id+')"',"></rect>\n")):e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',"></rect>\n"))},sendToBack:function(e){if(!e)return this;var t,r,i,o=this._activeObject;if(e===o&&"activeSelection"===e.type)for(t=(i=o._objects).length;t--;)r=i[t],n(this._objects,r),this._objects.unshift(r);else n(this._objects,e),this._objects.unshift(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(e){if(!e)return this;var t,r,i,o=this._activeObject;if(e===o&&"activeSelection"===e.type)for(i=o._objects,t=0;t<i.length;t++)r=i[t],n(this._objects,r),this._objects.push(r);else n(this._objects,e),this._objects.push(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(e,t){if(!e)return this;var r,i,o,a,s,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(s=l._objects,r=0;r<s.length;r++)i=s[r],0+c<(o=this._objects.indexOf(i))&&(a=o-1,n(this._objects,i),this._objects.splice(a,0,i)),c++;else 0!==(o=this._objects.indexOf(e))&&(a=this._findNewLowerIndex(e,o,t),n(this._objects,e),this._objects.splice(a,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(e,t,n){var r,i;if(n){for(i=(r=t)-1;0<=i;--i)if(e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e)){r=i;break}}else r=t-1;return r},bringForward:function(e,t){if(!e)return this;var r,i,o,a,s,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(r=(s=l._objects).length;r--;)i=s[r],(o=this._objects.indexOf(i))<this._objects.length-1-c&&(a=o+1,n(this._objects,i),this._objects.splice(a,0,i)),c++;else(o=this._objects.indexOf(e))!==this._objects.length-1&&(a=this._findNewUpperIndex(e,o,t),n(this._objects,e),this._objects.splice(a,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(e,t,n){var r,i,o;if(n){for(i=(r=t)+1,o=this._objects.length;i<o;++i)if(e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e)){r=i;break}}else r=t+1;return r},moveTo:function(e,t){return n(this._objects,e),this._objects.splice(t,0,e),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(X.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),X.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),e(X.StaticCanvas.prototype,X.Observable),e(X.StaticCanvas.prototype,X.Collection),e(X.StaticCanvas.prototype,X.DataURLExporter),e(X.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=s();return t&&t.getContext&&(t=t.getContext("2d"))&&"setLineDash"===e?void 0!==t.setLineDash:null}}),X.StaticCanvas.prototype.toJSON=X.StaticCanvas.prototype.toObject,X.isLikelyNode&&(X.StaticCanvas.prototype.createPNGStream=function(){var e=a(this.lowerCanvasEl);return e&&e.createPNGStream()},X.StaticCanvas.prototype.createJPEGStream=function(e){var t=a(this.lowerCanvasEl);return t&&t.createJPEGStream(e)}))}(),X.BaseBrush=X.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var e=this.canvas.contextTop;e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(e){var t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},_setShadow:function(){var e,t,n,r;this.shadow&&(e=this.canvas,t=this.shadow,n=e.contextTop,r=e.getZoom(),e&&e._isRetinaScaling()&&(r*=X.devicePixelRatio),n.shadowColor=t.color,n.shadowBlur=t.blur*r,n.shadowOffsetX=t.offsetX*r,n.shadowOffsetY=t.offsetY*r)},needsFullRender:function(){return new X.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},_isOutSideCanvas:function(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}),X.PencilBrush=X.util.createClass(X.BaseBrush,{decimate:.4,initialize:function(e){this.canvas=e,this._points=[]},_drawSegment:function(e,t,n){return n=t.midPointFrom(n),e.quadraticCurveTo(t.x,t.y,n.x,n.y),n},onMouseDown:function(e,t){this.canvas._isMainEvent(t.e)&&(this._prepareForDrawing(e),this._captureDrawingPath(e),this._render())},onMouseMove:function(e,t){var n;this.canvas._isMainEvent(t.e)&&(!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||this._captureDrawingPath(e)&&1<this._points.length&&(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this._render()):(t=(n=this._points).length,e=this.canvas.contextTop,this._saveAndTransform(e),this.oldEnd&&(e.beginPath(),e.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(e,n[t-2],n[t-1],!0),e.stroke(),e.restore())))},onMouseUp:function(e){return!this.canvas._isMainEvent(e.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(e){e=new X.Point(e.x,e.y),this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(e){return!(1<this._points.length&&e.eq(this._points[this._points.length-1])||(this._points.push(e),0))},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(e){return e=new X.Point(e.x,e.y),this._addPoint(e)},_render:function(){var e,t,n,r=this.canvas.contextTop,i=this._points[0],o=this._points[1];for(this._saveAndTransform(r),r.beginPath(),2===this._points.length&&i.x===o.x&&i.y===o.y&&(n=this.width/1e3,i=new X.Point(i.x,i.y),o=new X.Point(o.x,o.y),i.x-=n,o.x+=n),r.moveTo(i.x,i.y),e=1,t=this._points.length;e<t;e++)this._drawSegment(r,i,o),i=this._points[e],o=this._points[e+1];r.lineTo(i.x,i.y),r.stroke(),r.restore()},convertPointsToSVGPath:function(e){var t=this.width/1e3;return X.util.getSmoothPathFromPoints(e,t)},_isEmptySVGPath:function(e){return"M 0 0 Q 0 0 0 0 L 0 0"===X.util.joinPath(e)},createPath:function(e){return e=new X.Path(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray}),this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new X.Shadow(this.shadow)),e},decimatePoints:function(e,t){if(e.length<=2)return e;for(var n=this.canvas.getZoom(),r=Math.pow(t/n,2),i=e.length-1,o=e[0],a=[o],s=1;s<i-1;s++)r<=Math.pow(o.x-e[s].x,2)+Math.pow(o.y-e[s].y,2)&&(o=e[s],a.push(o));return a.push(e[i]),a},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points);this._isEmptySVGPath(e)?this.canvas.requestRenderAll():(e=this.createPath(e),this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e}))}}),X.CircleBrush=X.util.createClass(X.BaseBrush,{width:10,initialize:function(e){this.canvas=e,this.points=[]},drawDot:function(e){var t=this.addPoint(e);e=this.canvas.contextTop;this._saveAndTransform(e),this.dot(e,t),e.restore()},dot:function(e,t){e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill()},onMouseDown:function(e){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)},_render:function(){var e,t,n=this.canvas.contextTop,r=this.points;for(this._saveAndTransform(n),e=0,t=r.length;e<t;e++)this.dot(n,r[e]);n.restore()},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e))},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var t=[],n=0,r=this.points.length;n<r;n++){var i=this.points[n];i=new X.Circle({radius:i.radius,left:i.x,top:i.y,originX:"center",originY:"center",fill:i.fill});this.shadow&&(i.shadow=new X.Shadow(this.shadow)),t.push(i)}var o=new X.Group(t);o.canvas=this.canvas,this.canvas.fire("before:path:created",{path:o}),this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()},addPoint:function(e){var t=new X.Point(e.x,e.y),n=X.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2;e=new X.Color(this.color).setAlpha(X.util.getRandomInt(0,100)/100).toRgba();return t.radius=n,t.fill=e,this.points.push(t),t}}),X.SprayBrush=X.util.createClass(X.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e,this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.render(this.sprayChunkPoints)},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.render(this.sprayChunkPoints))},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var t=[],n=0,r=this.sprayChunks.length;n<r;n++)for(var i=this.sprayChunks[n],o=0,a=i.length;o<a;o++){var s=new X.Rect({width:i[o].width,height:i[o].width,left:i[o].x+1,top:i[o].y+1,originX:"center",originY:"center",fill:this.color});t.push(s)}this.optimizeOverlapping&&(t=this._getOptimizedRects(t));var l=new X.Group(t);this.shadow&&l.set("shadow",new X.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()},_getOptimizedRects:function(e){for(var t,n={},r=0,i=e.length;r<i;r++)n[t=e[r].left+""+e[r].top]||(n[t]=e[r]);var o=[];for(t in n)o.push(n[t]);return o},render:function(e){var t,n,r=this.canvas.contextTop;for(r.fillStyle=this.color,this._saveAndTransform(r),t=0,n=e.length;t<n;t++){var i=e[t];void 0!==i.opacity&&(r.globalAlpha=i.opacity),r.fillRect(i.x,i.y,i.width,i.width)}r.restore()},_render:function(){var e,t,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),e=0,t=this.sprayChunks.length;e<t;e++)this.render(this.sprayChunks[e]);n.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];for(var t=this.width/2,n=0;n<this.density;n++){var r=X.util.getRandomInt(e.x-t,e.x+t),i=X.util.getRandomInt(e.y-t,e.y+t),o=this.dotWidthVariance?X.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;(i=new X.Point(r,i)).width=o,this.randomOpacity&&(i.opacity=X.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(i)}this.sprayChunks.push(this.sprayChunkPoints)}}),X.PatternBrush=X.util.createClass(X.PencilBrush,{getPatternSrc:function(){var e=X.util.createCanvasElement(),t=e.getContext("2d");return e.width=e.height=25,t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill(),e},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(e){var t=this.callSuper("createPath",e);e=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new X.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-e.x,offsetY:-e.y}),t}}),function(){var e,t=X.util.getPointer,n=X.util.degreesToRadians,r=X.util.isTouchEvent;for(e in X.Canvas=X.util.createClass(X.StaticCanvas,{initialize:function(e,t){t=t||{},this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=X.PencilBrush&&new X.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e,t=this.getActiveObjects();if(0<t.length&&!this.preserveObjectStacking){for(var n=[],r=[],i=0,o=this._objects.length;i<o;i++)e=this._objects[i],(-1===t.indexOf(e)?n:r).push(e);1<t.length&&(this._activeObject._objects=r),n.push.apply(n,r)}else n=this._objects;return n},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,t){return e=e.calcTransformMatrix(),e=X.util.invertTransform(e),t=this.restorePointerVpt(t),X.util.transformPoint(t,e)},isTargetTransparent:function(e,t,n){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var r=this._normalizePointer(e,{x:t,y:n}),i=Math.max(e.cacheTranslationX+r.x*e.zoomX,0),o=Math.max(e.cacheTranslationY+r.y*e.zoomY,0);return X.util.isTransparent(e._cacheContext,Math.round(i),Math.round(o),this.targetFindTolerance)}return r=this.contextCache,i=e.selectionBackgroundColor,o=this.viewportTransform,e.selectionBackgroundColor="",this.clearContext(r),r.save(),r.transform(o[0],o[1],o[2],o[3],o[4],o[5]),e.render(r),r.restore(),e.selectionBackgroundColor=i,X.util.isTransparent(r,t,n,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return"[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find((function(t){return!0===e[t]})):e[this.selectionKey]},_shouldClearSelection:function(e,t){var n=this.getActiveObjects(),r=this._activeObject;return!t||r&&1<n.length&&-1===n.indexOf(t)&&r!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&r&&r!==t},_shouldCenterTransform:function(e,t,n){var r;if(e)return"scale"===t||"scaleX"===t||"scaleY"===t||"resizing"===t?r=this.centeredScaling||e.centeredScaling:"rotate"===t&&(r=this.centeredRotation||e.centeredRotation),r?!n:n},_getOriginFromCorner:function(e,t){return e={x:e.originX,y:e.originY},"ml"===t||"tl"===t||"bl"===t?e.x="right":"mr"!==t&&"tr"!==t&&"br"!==t||(e.x="left"),"tl"===t||"mt"===t||"tr"===t?e.y="bottom":"bl"!==t&&"mb"!==t&&"br"!==t||(e.y="top"),e},_getActionFromCorner:function(e,t,n,r){return t&&e?(t=r.controls[t]).getActionName(n,t,r):"drag"},_setupCurrentTransform:function(e,t,r){var i,o,a,s,l;t&&(l=this.getPointer(e),i=t.__corner,s=t.controls[i],o=r&&i?s.getActionHandler(e,t,s):X.controlsUtils.dragHandler,a=this._getActionFromCorner(r,i,e,t),s=this._getOriginFromCorner(t,i),r=e[this.centeredKey],l={target:t,action:a,actionHandler:o,corner:i,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:l.x-t.left,offsetY:l.y-t.top,originX:s.x,originY:s.y,ex:l.x,ey:l.y,lastX:l.x,lastY:l.y,theta:n(t.angle),width:t.width*t.scaleX,shiftKey:e.shiftKey,altKey:r,original:X.util.saveObjectTransform(t)},this._shouldCenterTransform(t,a,r)&&(l.originX="center",l.originY="center"),l.original.originX=s.x,l.original.originY=s.y,this._currentTransform=l,this._beforeTransform(e))},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var t=this._groupSelector,n=new X.Point(t.ex,t.ey),r=X.util.transformPoint(n,this.viewportTransform),i=new X.Point(t.ex+t.left,t.ey+t.top),o=X.util.transformPoint(i,this.viewportTransform);n=Math.min(r.x,o.x),t=Math.min(r.y,o.y),i=Math.max(r.x,o.x),r=Math.max(r.y,o.y),o=this.selectionLineWidth/2;this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(n,t,i-n,r-t)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,n+=o,t+=o,i-=o,r-=o,X.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(n,t,i-n,r-t))},findTarget:function(e,t){if(!this.skipTargetFind){var n,i,o=this.getPointer(e,!0),a=this._activeObject,s=this.getActiveObjects(),l=r(e),c=1<s.length&&!t||1===s.length;if(this.targets=[],c&&a._findTargetCorner(o,l))return a;if(1<s.length&&!t&&a===this._searchPossibleTargets([a],o))return a;if(1===s.length&&a===this._searchPossibleTargets([a],o)){if(!this.preserveObjectStacking)return a;n=a,i=this.targets,this.targets=[]}return o=this._searchPossibleTargets(this._objects,o),e[this.altSelectionKey]&&o&&n&&o!==n&&(o=n,this.targets=i),o}},_checkTarget:function(e,t,n){if(t&&t.visible&&t.evented&&t.containsPoint(e))return!((this.perPixelTargetFind||t.perPixelTargetFind)&&!t.isEditing)||!this.isTargetTransparent(t,n.x,n.y)||void 0},_searchPossibleTargets:function(e,t){for(var n,r,i=e.length;i--;){var o=e[i],a=o.group?this._normalizePointer(o.group,t):t;if(this._checkTarget(a,o,t)){(n=e[i]).subTargetCheck&&n instanceof X.Group&&(r=this._searchPossibleTargets(n._objects,t))&&this.targets.push(r);break}}return n},restorePointerVpt:function(e){return X.util.transformPoint(e,X.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var r=t(e),i=this.upperCanvasEl,o=i.getBoundingClientRect(),a=o.width||0;e=o.height||0;return a&&e||("top"in o&&"bottom"in o&&(e=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(a=Math.abs(o.right-o.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,n||(r=this.restorePointerVpt(r)),1!==(n=this.getRetinaScaling())&&(r.x/=n,r.y/=n),e=0===a||0===e?{width:1,height:1}:{width:i.width/a,height:i.height/e},{x:r.x*e.width,y:r.y*e.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),t=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),X.util.addClass(n,"upper-canvas "+e),this.wrapperEl.appendChild(n),this._copyCanvasStyle(t,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=X.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),X.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),X.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.width||e.width,n=this.height||e.height;X.util.setStyle(e,{position:"absolute",width:t+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=t,e.height=n,X.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?"activeSelection"===e.type&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,t){var n=!1,r=this.getActiveObjects(),i=[],o=[];e.forEach((function(e){-1===r.indexOf(e)&&(n=!0,e.fire("deselected",{e:t,target:e}),o.push(e))})),r.forEach((function(r){-1===e.indexOf(r)&&(n=!0,r.fire("selected",{e:t,target:r}),i.push(r))})),0<e.length&&0<r.length?n&&this.fire("selection:updated",{e:t,selected:i,deselected:o,updated:i[0]||o[0],target:this._activeObject}):0<r.length?this.fire("selection:created",{e:t,selected:i,target:this._activeObject}):0<e.length&&this.fire("selection:cleared",{e:t,deselected:o})},setActiveObject:function(e,t){var n=this.getActiveObjects();return this._setActiveObject(e,t),this._fireSelectionEvents(n,t),this},_setActiveObject:function(e,t){return this._activeObject!==e&&!!this._discardActiveObject(t,e)&&!e.onSelect({e:t})&&(this._activeObject=e,!0)},_discardActiveObject:function(e,t){var n=this._activeObject;if(n){if(n.onDeselect({e:e,object:t}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var t=this.getActiveObjects(),n=this.getActiveObject();return t.length&&this.fire("before:selection:cleared",{target:n,e:e}),this._discardActiveObject(e),this._fireSelectionEvents(t,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){X.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,X.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var t=this._activeObject;t&&t._renderControls(e)},_toObject:function(e,t,n){var r=this._realizeGroupTransformOnObject(e);n=this.callSuper("_toObject",e,t,n);return this._unwindGroupTransformOnObject(e,r),n},_realizeGroupTransformOnObject:function(e){if(e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group){var t={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach((function(n){t[n]=e[n]})),X.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),t}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},_setSVGObject:function(e,t,n){var r=this._realizeGroupTransformOnObject(t);this.callSuper("_setSVGObject",e,t,n),this._unwindGroupTransformOnObject(t,r)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),X.StaticCanvas.prototype.setViewportTransform.call(this,e)}}),X.StaticCanvas)"prototype"!==e&&(X.Canvas[e]=X.StaticCanvas[e])}(),E=X.util.addListener,S=X.util.removeListener,O={passive:!1},X.util.object.extend(X.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(E,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(e,t){var n=this.upperCanvasEl,r=this._getEventPrefix();e(X.window,"resize",this._onResize),e(n,r+"down",this._onMouseDown),e(n,r+"move",this._onMouseMove,O),e(n,r+"out",this._onMouseOut),e(n,r+"enter",this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,O),"undefined"!=typeof eventjs&&t in eventjs&&(eventjs[t](n,"gesture",this._onGesture),eventjs[t](n,"drag",this._onDrag),eventjs[t](n,"orientation",this._onOrientationChange),eventjs[t](n,"shake",this._onShake),eventjs[t](n,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(S,"remove");var e=this._getEventPrefix();S(X.document,e+"up",this._onMouseUp),S(X.document,"touchend",this._onTouchEnd,O),S(X.document,e+"move",this._onMouseMove,O),S(X.document,"touchmove",this._onMouseMove,O)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var t=this._hoveredTarget;this.fire("mouse:out",{target:t,e:e}),this._hoveredTarget=null,t&&t.fire("mouseout",{e:e});var n=this;this._hoveredTargets.forEach((function(r){n.fire("mouse:out",{target:t,e:e}),r&&t.fire("mouseout",{e:e})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(e){e.isEditing&&e.hiddenTextarea.focus()}))},_onMouseEnter:function(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",{target:null,e:e}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onLongPress:function(e,t){this.__onLongPress&&this.__onLongPress(e,t)},_onDragOver:function(e){e.preventDefault();var t=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(t,e)},_onContextMenu:function(e){return this.stopContextMenu&&(e.stopPropagation(),e.preventDefault()),!1},_onDoubleClick:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData(e)},getPointerId:function(e){var t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1},_isMainEvent:function(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(e){e.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),this._resetTransformEventData();var t=this.upperCanvasEl;e=this._getEventPrefix();E(X.document,"touchend",this._onTouchEnd,O),E(X.document,"touchmove",this._onMouseMove,O),S(t,e+"down",this._onMouseDown)},_onMouseDown:function(e){this.__onMouseDown(e),this._resetTransformEventData();var t=this.upperCanvasEl;e=this._getEventPrefix();S(t,e+"move",this._onMouseMove,O),E(X.document,e+"up",this._onMouseUp),E(X.document,e+"move",this._onMouseMove,O)},_onTouchEnd:function(e){var t,n;0<e.touches.length||(this.__onMouseUp(e),this._resetTransformEventData(),this.mainTouchId=null,t=this._getEventPrefix(),S(X.document,"touchend",this._onTouchEnd,O),S(X.document,"touchmove",this._onMouseMove,O),(n=this)._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){E(n.upperCanvasEl,t+"down",n._onMouseDown),n._willAddMouseDown=0}),400))},_onMouseUp:function(e){this.__onMouseUp(e),this._resetTransformEventData();var t=this.upperCanvasEl,n=this._getEventPrefix();this._isMainEvent(e)&&(S(X.document,n+"up",this._onMouseUp),S(X.document,n+"move",this._onMouseMove,O),E(t,n+"move",this._onMouseMove,O))},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var t=this._activeObject;return!!(!!t!=!!e||t&&e&&t!==e)||(t&&t.isEditing,!1)},__onMouseUp:function(e){var t,n=this._currentTransform,r=this._groupSelector,i=!1,o=!r||0===r.left&&0===r.top;if(this._cacheTransformEventData(e),r=this._target,this._handleEvent(e,"up:before"),ye(e,3))this.fireRightClick&&this._handleEvent(e,"up",3,o);else{if(ye(e,2))return this.fireMiddleClick&&this._handleEvent(e,"up",2,o),void this._resetTransformEventData();this.isDrawingMode&&this._isCurrentlyDrawing?this._onMouseUpInDrawingMode(e):this._isMainEvent(e)&&(n&&(this._finalizeCurrentTransform(e),i=n.actionPerformed),o||(t=r===this._activeObject,this._maybeGroupObjects(e),i=i||this._shouldRender(r)||!t&&r===this._activeObject),r&&(r.selectable&&r!==this._activeObject&&"up"===r.activeOn?(this.setActiveObject(r,e),i=!0):(t=r._findTargetCorner(this.getPointer(e,!0),X.util.isTouchEvent(e)),(t=(t=r.controls[t])&&t.getMouseUpHandler(e,r,t))&&t(e,n,(n=this.getPointer(e)).x,n.y)),r.isMoving=!1),this._setCursorFromEvent(e,r),this._handleEvent(e,"up",1,o),this._groupSelector=null,this._currentTransform=null,r&&(r.__corner=0),i?this.requestRenderAll():o||this.renderTop())}},_simpleEventHandler:function(e,t){var n=this.findTarget(t),r=this.targets,i={e:t,target:n,subTargets:r};if(this.fire(e,i),n&&n.fire(e,i),!r)return n;for(var o=0;o<r.length;o++)r[o].fire(e,i);return n},_handleEvent:function(e,t,n,r){var i=this._target,o=this.targets||[],a={e:e,target:i,subTargets:o,button:n||1,isClick:r||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===t&&(a.currentTarget=this.findTarget(e),a.currentSubTargets=this.targets),this.fire("mouse:"+t,a),i&&i.fire("mouse"+t,a);for(var s=0;s<o.length;s++)o[s].fire("mouse"+t,a)},_finalizeCurrentTransform:function(e){var t=this._currentTransform,n=t.target;e={e:e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),(t.actionPerformed||this.stateful&&n.hasStateChanged())&&(t.actionPerformed&&(t=this._addEventOptions(e,t),this._fire(t,e)),this._fire("modified",e))},_addEventOptions:function(e,t){var n,r;switch(t.action){case"scaleX":n="scaled",r="x";break;case"scaleY":n="scaled",r="y";break;case"skewX":n="skewed",r="x";break;case"skewY":n="skewed",r="y";break;case"scale":n="scaled",r="equally";break;case"rotate":n="rotated";break;case"drag":n="moved"}return e.by=r,n},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll();var t=this.getPointer(e);this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){var t;this._isCurrentlyDrawing&&(t=this.getPointer(e),this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})),this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){var t=this.getPointer(e);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:e,pointer:t}),this._handleEvent(e,"up")},__onMouseDown:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"down:before");var t,n,r,i,o,a=this._target;ye(e,3)?this.fireRightClick&&this._handleEvent(e,"down",3):ye(e,2)?this.fireMiddleClick&&this._handleEvent(e,"down",2):this.isDrawingMode?this._onMouseDownInDrawingMode(e):this._isMainEvent(e)&&(this._currentTransform||(i=this._pointer,this._previousPointer=i,t=this._shouldRender(a),n=this._shouldGroup(e,a),this._shouldClearSelection(e,a)?this.discardActiveObject(e):n&&(this._handleGrouping(e,a),a=this._activeObject),!this.selection||a&&(a.selectable||a.isEditing||a===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),a&&(r=a===this._activeObject,a.selectable&&"down"===a.activeOn&&this.setActiveObject(a,e),o=a._findTargetCorner(this.getPointer(e,!0),X.util.isTouchEvent(e)),a.__corner=o,a!==this._activeObject||!o&&n||(this._setupCurrentTransform(e,a,r),o=a.controls[o],i=this.getPointer(e),(o=o&&o.getMouseDownHandler(e,a,o))&&o(e,this._currentTransform,i.x,i.y))),this._handleEvent(e,"down"),(t||n)&&this.requestRenderAll()))},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var t=this._currentTransform;this.stateful&&t.target.saveState(),this.fire("before:transform",{e:e,transform:t})},__onMouseMove:function(e){var t,n;this._handleEvent(e,"move:before"),this._cacheTransformEventData(e),this.isDrawingMode?this._onMouseMoveInDrawingMode(e):this._isMainEvent(e)&&((n=this._groupSelector)?(t=this._absolutePointer,n.left=t.x-n.ex,n.top=t.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(e):(n=this.findTarget(e)||null,this._setCursorFromEvent(e,n),this._fireOverOutEvents(n,e)),this._handleEvent(e,"move"),this._resetTransformEventData())},_fireOverOutEvents:function(e,t){var n=this._hoveredTarget,r=this._hoveredTargets,i=this.targets,o=Math.max(r.length,i.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:n,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var a=0;a<o;a++)this.fireSyntheticInOutEvents(i[a],t,{oldTarget:r[a],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(e,t){var n=this._draggedoverTarget,r=this._hoveredTargets,i=this.targets,o=Math.max(r.length,i.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:n,evtOut:"dragleave",evtIn:"dragenter"});for(var a=0;a<o;a++)this.fireSyntheticInOutEvents(i[a],t,{oldTarget:r[a],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=e},fireSyntheticInOutEvents:function(e,t,n){var r,i,o=n.oldTarget,a=o!==e,s=n.canvasEvtIn,l=n.canvasEvtOut;a&&(r={e:t,target:e,previousTarget:o},i={e:t,target:o,nextTarget:e}),t=e&&a,o&&a&&(l&&this.fire(l,i),o.fire(n.evtOut,i)),t&&(s&&this.fire(s,r),e.fire(n.evtIn,r))},__onMouseWheel:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()},_transformObject:function(e){var t=this.getPointer(e),n=this._currentTransform;n.reset=!1,n.shiftKey=e.shiftKey,n.altKey=e[this.centeredKey],this._performTransformAction(e,n,t),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,t,n){var r=n.x,i=n.y,o=t.action,a=!1;(n=t.actionHandler)&&(a=n(e,t,r,i)),"drag"===o&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a},_fire:X.controlsUtils.fireEvent,_setCursorFromEvent:function(e,t){if(!t)return this.setCursor(this.defaultCursor),!1;var n,r=t.hoverCursor||this.hoverCursor;(n=(!(n=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null)||!n.contains(t))&&t._findTargetCorner(this.getPointer(e,!0)))?this.setCursor(this.getCornerCursor(n,t,e)):(t.subTargetCheck&&this.targets.concat().reverse().map((function(e){r=e.hoverCursor||r})),this.setCursor(r))},getCornerCursor:function(e,t,n){return(e=t.controls[e]).cursorStyleHandler(n,e,t)}}),x=Math.min,_=Math.max,X.util.object.extend(X.Canvas.prototype,{_shouldGroup:function(e,t){var n=this._activeObject;return n&&this._isSelectionKeyPressed(e)&&t&&t.selectable&&this.selection&&(n!==t||"activeSelection"===n.type)&&!t.onSelect({e:e})},_handleGrouping:function(e,t){var n=this._activeObject;n.__corner||(t!==n||(t=this.findTarget(e,!0))&&t.selectable)&&(n&&"activeSelection"===n.type?this._updateActiveSelection(t,e):this._createActiveSelection(t,e))},_updateActiveSelection:function(e,t){var n=this._activeObject,r=n._objects.slice(0);n.contains(e)?(n.removeWithUpdate(e),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),t)):(n.addWithUpdate(e),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,t)},_createActiveSelection:function(e,t){var n=this.getActiveObjects();e=this._createGroup(e);this._hoveredTarget=e,this._setActiveObject(e,t),this._fireSelectionEvents(n,t)},_createGroup:function(e){var t=this._objects;e=t.indexOf(this._activeObject)<t.indexOf(e)?[this._activeObject,e]:[e,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new X.ActiveSelection(e,{canvas:this})},_groupSelectedObjects:function(e){var t=this._collectObjects(e);1===t.length?this.setActiveObject(t[0],e):1<t.length&&(t=new X.ActiveSelection(t.reverse(),{canvas:this}),this.setActiveObject(t,e))},_collectObjects:function(e){for(var t,n=[],r=this._groupSelector.ex,i=this._groupSelector.ey,o=r+this._groupSelector.left,a=i+this._groupSelector.top,s=new X.Point(x(r,o),x(i,a)),l=new X.Point(_(r,o),_(i,a)),c=!this.selectionFullyContained,u=r===o&&i===a,h=this._objects.length;h--&&!((t=this._objects[h])&&t.selectable&&t.visible&&(c&&t.intersectsWithRect(s,l,!0)||t.isContainedWithinRect(s,l,!0)||c&&t.containsPoint(s,null,!0)||c&&t.containsPoint(l,null,!0))&&(n.push(t),u)););return 1<n.length?n.filter((function(t){return!t.onSelect({e:e})})):n},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e),this.setCursor(this.defaultCursor),this._groupSelector=null}}),X.util.object.extend(X.StaticCanvas.prototype,{toDataURL:function(e){var t=(e=e||{}).format||"png",n=e.quality||1,r=(e.multiplier||1)*(e.enableRetinaScaling?this.getRetinaScaling():1);e=this.toCanvasElement(r,e);return X.util.toDataURL(e,t,n)},toCanvasElement:function(e,t){var n=((t=t||{}).width||this.width)*(e=e||1),r=(t.height||this.height)*e,i=this.getZoom(),o=this.width,a=this.height,s=i*e,l=this.viewportTransform,c=(l[4]-(t.left||0))*e;i=(l[5]-(t.top||0))*e,t=this.interactive,e=[s,0,0,s,c,i],s=this.enableRetinaScaling,c=X.util.createCanvasElement(),i=this.contextTop;return c.width=n,c.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=e,this.width=n,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(c.getContext("2d"),this._objects),this.viewportTransform=l,this.width=o,this.height=a,this.calcViewportBoundaries(),this.interactive=t,this.enableRetinaScaling=s,this.contextTop=i,c}}),X.util.object.extend(X.StaticCanvas.prototype,{loadFromJSON:function(e,t,n){if(e){var r="string"==typeof e?JSON.parse(e):X.util.object.clone(e),i=this,o=r.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,(function(e){i.clear(),i._setBgOverlay(r,(function(){o?i._enlivenObjects([o],(function(n){i.clipPath=n[0],i.__setupCanvas.call(i,r,e,a,t)})):i.__setupCanvas.call(i,r,e,a,t)}))}),n),this}},__setupCanvas:function(e,t,n,r){var i=this;t.forEach((function(e,t){i.insertAt(e,t)})),this.renderOnAddRemove=n,delete e.objects,delete e.backgroundImage,delete e.overlayImage,delete e.background,delete e.overlay,this._setOptions(e),this.renderAll(),r&&r()},_setBgOverlay:function(e,t){var n,r={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};e.backgroundImage||e.overlayImage||e.background||e.overlay?(this.__setBgOverlay("backgroundImage",e.backgroundImage,r,n=function(){r.backgroundImage&&r.overlayImage&&r.backgroundColor&&r.overlayColor&&t&&t()}),this.__setBgOverlay("overlayImage",e.overlayImage,r,n),this.__setBgOverlay("backgroundColor",e.background,r,n),this.__setBgOverlay("overlayColor",e.overlay,r,n)):t&&t()},__setBgOverlay:function(e,t,n,r){var i=this;if(!t)return n[e]=!0,void(r&&r());"backgroundImage"===e||"overlayImage"===e?X.util.enlivenObjects([t],(function(t){i[e]=t[0],n[e]=!0,r&&r()})):this["set"+X.util.string.capitalize(e,!0)](t,(function(){n[e]=!0,r&&r()}))},_enlivenObjects:function(e,t,n){e&&0!==e.length?X.util.enlivenObjects(e,(function(e){t&&t(e)}),null,n):t&&t([])},_toDataURL:function(e,t){this.clone((function(n){t(n.toDataURL(e))}))},_toDataURLWithMultiplier:function(e,t,n){this.clone((function(r){n(r.toDataURLWithMultiplier(e,t))}))},clone:function(e,t){var n=JSON.stringify(this.toJSON(t));this.cloneWithoutData((function(t){t.loadFromJSON(n,(function(){e&&e(t)}))}))},cloneWithoutData:function(e){var t=X.util.createCanvasElement();t.width=this.width,t.height=this.height;var n=new X.Canvas(t);this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,(function(){n.renderAll(),e&&e(n)})),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):e&&e(n)}}),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.object.clone,i=t.util.toFixed,o=t.util.string.capitalize,a=t.util.degreesToRadians;e=!t.isLikelyNode;t.Object||(t.Object=t.util.createClass(t.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:e,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=t.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(e){var n=t.perfLimitSizeTotal,r=e.width,i=e.height,o=t.maxCacheSideLimit,a=t.minCacheSideLimit;if(r<=o&&i<=o&&r*i<=n)return r<a&&(e.width=a),i<a&&(e.height=a),e;var s=t.util.limitDimsByArea(r/i,n),l=t.util.capValue;n=l(a,s.x,o),o=l(a,s.y,o);return n<r&&(e.zoomX/=r/n,e.width=n,e.capped=!0),o<i&&(e.zoomY/=i/o,e.height=o,e.capped=!0),e},_getCacheCanvasDimensions:function(){var e,t=this.getTotalObjectScaling(),n=(e=this._getTransformedDimensions(0,0)).x*t.scaleX/this.scaleX;return{width:2+n,height:2+(e=e.y*t.scaleY/this.scaleY),zoomX:t.scaleX,zoomY:t.scaleY,x:n,y:e}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var n=e._currentTransform.target,r=e._currentTransform.action;if(this===n&&r.slice&&"scale"===r.slice(0,5))return!1}var i=this._cacheCanvas,o=this._limitCacheSize(this._getCacheCanvasDimensions()),a=t.minCacheSideLimit,s=o.width,l=o.height,c=o.zoomX,u=o.zoomY,h=s!==this.cacheWidth||l!==this.cacheHeight,d=this.zoomX!==c||this.zoomY!==u,f=h||d,p=0;e=0,n=!1;return h&&(r=this._cacheCanvas.width,d=this._cacheCanvas.height,n=(h=r<s||d<l)||(s<.9*r||l<.9*d)&&a<r&&a<d,h&&!o.capped&&(a<s||a<l)&&(p=.1*s,e=.1*l)),this instanceof t.Text&&this.path&&(n=f=!0,p+=this.getHeightOfLine(0)*this.zoomX,e+=this.getHeightOfLine(0)*this.zoomY),!!f&&(n?(i.width=Math.ceil(s+p),i.height=Math.ceil(l+e)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,i.width,i.height)),e=o.x/2,o=o.y/2,this.cacheTranslationX=Math.round(i.width/2-e)+e,this.cacheTranslationY=Math.round(i.height/2-o)+o,this.cacheWidth=s,this.cacheHeight=l,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(c,u),this.zoomX=c,this.zoomY=u,!0)},setOptions:function(e){this._setOptions(e),this._initGradient(e.fill,"fill"),this._initGradient(e.stroke,"stroke"),this._initPattern(e.fill,"fill"),this._initPattern(e.stroke,"stroke")},transform:function(e){var t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop;t=this.calcTransformMatrix(!t);e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},toObject:function(e){var n=t.Object.NUM_FRACTION_DIGITS;n={type:this.type,version:t.version,originX:this.originX,originY:this.originY,left:i(this.left,n),top:i(this.top,n),width:i(this.width,n),height:i(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,n),strokeDashArray:this.strokeDashArray&&this.strokeDashArray.concat(),strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,n),scaleX:i(this.scaleX,n),scaleY:i(this.scaleY,n),angle:i(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,n),skewY:i(this.skewY,n)};return this.clipPath&&!this.clipPath.excludeFromExport&&(n.clipPath=this.clipPath.toObject(e),n.clipPath.inverted=this.clipPath.inverted,n.clipPath.absolutePositioned=this.clipPath.absolutePositioned),t.util.populateWithProperties(this,n,e),this.includeDefaultValues?n:this._removeDefaultValues(n)},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var n=t.util.getKlass(e.type).prototype;return n.stateProperties.forEach((function(t){"left"!==t&&"top"!==t&&(e[t]===n[t]&&delete e[t],"[object Array]"===Object.prototype.toString.call(e[t])&&"[object Array]"===Object.prototype.toString.call(n[t])&&0===e[t].length&&0===n[t].length&&delete e[t])})),e},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var e=t.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(e.scaleX),scaleY:Math.abs(e.scaleY)}},getTotalObjectScaling:function(){var e,t=this.getObjectScaling(),n=t.scaleX,r=t.scaleY;return this.canvas&&(n*=(e=this.canvas.getZoom())*(t=this.canvas.getRetinaScaling()),r*=e*t),{scaleX:n,scaleY:r}},getObjectOpacity:function(){var e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e},_set:function(e,n){var r=this[e]!==n;return("scaleX"===e||"scaleY"===e)&&(n=this._constrainScale(n)),"scaleX"===e&&n<0?(this.flipX=!this.flipX,n*=-1):"scaleY"===e&&n<0?(this.flipY=!this.flipY,n*=-1):"shadow"!==e||!n||n instanceof t.Shadow?"dirty"===e&&this.group&&this.group.set("dirty",n):n=new t.Shadow(n),this[e]=n,r&&(r=this.group&&this.group.isOnACache(),-1<this.cacheProperties.indexOf(e)?(this.dirty=!0,r&&this.group.set("dirty",!0)):r&&-1<this.stateProperties.indexOf(e)&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:t.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(e),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),e.restore())},renderCache:function(e){e=e||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(e){var n,r=this.clipPath;e.save(),r.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",r.absolutePositioned&&(n=t.util.invertTransform(this.calcTransformMatrix()),e.transform(n[0],n[1],n[2],n[3],n[4],n[5])),r.transform(e),e.scale(1/r.zoomX,1/r.zoomY),e.drawImage(r._cacheCanvas,-r.cacheTranslationX,-r.cacheTranslationY),e.restore()},drawObject:function(e,t){var n=this.fill,r=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e),this.fill=n,this.stroke=r},_drawClipPath:function(e){var t=this.clipPath;t&&(t.canvas=this.canvas,t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e))},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){return!(this.isNotVisible()||(!this._cacheCanvas||e||!this._updateCacheCanvas())&&(!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties"))||(this._cacheCanvas&&!e&&(t=this.cacheWidth/this.zoomX,e=this.cacheHeight/this.zoomY,this._cacheContext.clearRect(-t/2,-e/2,t,e)),0)));var t},_renderBackground:function(e){var t;this.backgroundColor&&(t=this._getNonTransformedDimensions(),e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e))},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,t){var n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e,this),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)},_setFillStyles:function(e,t){var n=t.fill;n&&(n.toLive?(e.fillStyle=n.toLive(e,this),this._applyPatternGradientTransform(e,t.fill)):e.fillStyle=n)},_setClippingProperties:function(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"},_setLineDash:function(e,t){t&&0!==t.length&&(1&t.length&&t.push.apply(t,t),e.setLineDash(t))},_renderControls:function(e,n){var r=this.getViewportTransform(),i=this.calcTransformMatrix(),o=(void 0!==(n=n||{}).hasBorders?n:this).hasBorders,s=(void 0!==n.hasControls?n:this).hasControls;i=t.util.multiplyTransformMatrices(r,i),i=t.util.qrDecompose(i);e.save(),e.translate(i.translateX,i.translateY),e.lineWidth=+this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),e.rotate(a(i.angle)),n.forActiveSelection||this.group?o&&this.drawBordersInGroup(e,i,n):o&&this.drawBorders(e,n),s&&this.drawControls(e,n),e.restore()},_setShadow:function(e){var n,r,i,o,a;this.shadow&&(n=this.shadow,i=(r=this.canvas)&&r.viewportTransform[0]||1,o=r&&r.viewportTransform[3]||1,a=n.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(i*=t.devicePixelRatio,o*=t.devicePixelRatio),e.shadowColor=n.color,e.shadowBlur=n.blur*t.browserShadowBlurConstant*(i+o)*(a.scaleX+a.scaleY)/4,e.shadowOffsetX=n.offsetX*i*a.scaleX,e.shadowOffsetY=n.offsetY*o*a.scaleY)},_removeShadow:function(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var n=t.gradientTransform||t.patternTransform,r=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,r,i):e.transform(1,0,0,1,r,i),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:r,offsetY:i}},_renderPaintInOrder:function(e){"stroke"===this.paintFirst?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))},_render:function(){},_renderFill:function(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())},_renderStroke:function(e){var t;this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform&&this.group?(t=this.getObjectScaling(),e.scale(1/t.scaleX,1/t.scaleY)):this.strokeUniform&&e.scale(1/this.scaleX,1/this.scaleY),this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore())},_applyPatternForTransformedGradient:function(e,n){var r,i=this._limitCacheSize(this._getCacheCanvasDimensions()),o=t.util.createCanvasElement(),a=this.canvas.getRetinaScaling(),s=i.x/this.scaleX/a,l=i.y/this.scaleY/a;o.width=s,o.height=l,(r=o.getContext("2d")).beginPath(),r.moveTo(0,0),r.lineTo(s,0),r.lineTo(s,l),r.lineTo(0,l),r.closePath(),r.translate(s/2,l/2),r.scale(i.zoomX/this.scaleX/a,i.zoomY/this.scaleY/a),this._applyPatternGradientTransform(r,n),r.fillStyle=n.toLive(e),r.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/i.zoomX,a*this.scaleY/i.zoomY),e.strokeStyle=r.createPattern(o,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){var e;this.transformMatrix&&(e=t.util.qrDecompose(this.transformMatrix),this.flipX=!1,this.flipY=!1,this.set("scaleX",e.scaleX),this.set("scaleY",e.scaleY),this.angle=e.angle,this.skewX=e.skewX,this.skewY=0)},_removeTransformMatrix:function(e){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=t.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,e&&(this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this.cropX=e.cropX,this.cropY=e.cropY,n.x+=e.offsetLeft,n.y+=e.offsetTop,this.width=e.width,this.height=e.height),this.setPositionByOrigin(n,"center","center")},clone:function(e,n){n=this.toObject(n),this.constructor.fromObject?this.constructor.fromObject(n,e):t.Object._fromObject("Object",n,e)},cloneAsImage:function(e,n){return n=this.toCanvasElement(n),e&&e(new t.Image(n)),this},toCanvasElement:function(e){e=e||{};var n=t.util,r=n.saveObjectTransform(this),i=this.group,o=this.shadow,a=Math.abs,s=(e.multiplier||1)*(e.enableRetinaScaling?t.devicePixelRatio:1);delete this.group,e.withoutTransform&&n.resetObjectTransform(this),e.withoutShadow&&(this.shadow=null);var l,c=t.util.createCanvasElement(),u=this.getBoundingRect(!0,!0),h=this.shadow,d={x:0,y:0};return h&&(n=h.blur,l=h.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),d.x=2*Math.round(a(h.offsetX)+n)*a(l.scaleX),d.y=2*Math.round(a(h.offsetY)+n)*a(l.scaleY)),l=u.width+d.x,d=u.height+d.y,c.width=Math.ceil(l),c.height=Math.ceil(d),d=new t.StaticCanvas(c,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}),"jpeg"===e.format&&(d.backgroundColor="#fff"),this.setPositionByOrigin(new t.Point(d.width/2,d.height/2),"center","center"),c=this.canvas,d.add(this),e=d.toCanvasElement(s||1,e),this.shadow=o,this.set("canvas",c),i&&(this.group=i),this.set(r).setCoords(),d._objects=[],d.dispose(),d=null,e},toDataURL:function(e){return t.util.toDataURL(this.toCanvasElement(e=e||{}),e.format||"png",e.quality||1)},isType:function(e){return this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},rotate:function(e){var t=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(e,n){return n=n||this.canvas.getPointer(e),e=new t.Point(n.x,n.y),n=this._getLeftTopCoords(),{x:(e=this.angle?t.util.rotatePoint(e,n,a(-this.angle)):e).x-n.x,y:e.y-n.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}}),t.util.createAccessors&&t.util.createAccessors(t.Object),n(t.Object.prototype,t.Observable),t.Object.NUM_FRACTION_DIGITS=2,t.Object._fromObject=function(e,n,i,o){var a=t[e];n=r(n,!0),t.util.enlivenPatterns([n.fill,n.stroke],(function(e){void 0!==e[0]&&(n.fill=e[0]),void 0!==e[1]&&(n.stroke=e[1]),t.util.enlivenObjects([n.clipPath],(function(e){n.clipPath=e[0],e=o?new a(n[o],n):new a(n),i&&i(e)}))}))},t.Object.__uid=0)}(t),k=X.util.degreesToRadians,T={left:-.5,center:0,right:.5},N={top:-.5,center:0,bottom:.5},X.util.object.extend(X.Object.prototype,{translateToGivenOrigin:function(e,t,n,r,i){var o=e.x,a=e.y;return"string"==typeof t?t=T[t]:t-=.5,"string"==typeof r?r=T[r]:r-=.5,"string"==typeof n?n=N[n]:n-=.5,"string"==typeof i?i=N[i]:i-=.5,n=i-n,((r-=t)||n)&&(t=this._getTransformedDimensions(),o=e.x+r*t.x,a=e.y+n*t.y),new X.Point(o,a)},translateToCenterPoint:function(e,t,n){return n=this.translateToGivenOrigin(e,t,n,"center","center"),this.angle?X.util.rotatePoint(n,e,k(this.angle)):n},translateToOriginPoint:function(e,t,n){return n=this.translateToGivenOrigin(e,"center","center",t,n),this.angle?X.util.rotatePoint(n,e,k(this.angle)):n},getCenterPoint:function(){var e=new X.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var n=this.getCenterPoint();return this.translateToOriginPoint(n,e,t)},toLocalPoint:function(e,t,n){var r=this.getCenterPoint();n=void 0!==t&&void 0!==n?this.translateToGivenOrigin(r,"center","center",t,n):new X.Point(this.left,this.top),e=new X.Point(e.x,e.y);return(e=this.angle?X.util.rotatePoint(e,r,-k(this.angle)):e).subtractEquals(n)},setPositionByOrigin:function(e,t,n){n=this.translateToCenterPoint(e,t,n),n=this.translateToOriginPoint(n,this.originX,this.originY),this.set("left",n.x),this.set("top",n.y)},adjustPosition:function(e){var t=k(this.angle),n=this.getScaledWidth(),r=X.util.cos(t)*n,i=X.util.sin(t)*n;t="string"==typeof this.originX?T[this.originX]:this.originX-.5,n="string"==typeof e?T[e]:e-.5;this.left+=r*(n-t),this.top+=i*(n-t),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),P=X.util,I=P.degreesToRadians,R=P.multiplyTransformMatrices,j=P.transformPoint,P.object.extend(X.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(e,t){return t?e?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),e?this.aCoords:this.lineCoords)},getCoords:function(e,t){return t=this._getCoords(e,t),[new X.Point(t.tl.x,t.tl.y),new X.Point(t.tr.x,t.tr.y),new X.Point(t.br.x,t.br.y),new X.Point(t.bl.x,t.bl.y)]},intersectsWithRect:function(e,t,n,r){return r=this.getCoords(n,r),"Intersection"===X.Intersection.intersectPolygonRectangle(r,e,t).status},intersectsWithObject:function(e,t,n){return"Intersection"===X.Intersection.intersectPolygonPolygon(this.getCoords(t,n),e.getCoords(t,n)).status||e.isContainedWithinObject(this,t,n)||this.isContainedWithinObject(e,t,n)},isContainedWithinObject:function(e,t,n){for(var r=this.getCoords(t,n),i=(t=t?e.aCoords:e.lineCoords,0),o=e._getImageLines(t);i<4;i++)if(!e.containsPoint(r[i],o))return!1;return!0},isContainedWithinRect:function(e,t,n,r){return(r=this.getBoundingRect(n,r)).left>=e.x&&r.left+r.width<=t.x&&r.top>=e.y&&r.top+r.height<=t.y},containsPoint:function(e,t,n,r){return r=this._getCoords(n,r),t=t||this._getImageLines(r),0!==(t=this._findCrossPoints(e,t))&&t%2==1},isOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.getCoords(!0,e).some((function(e){return e.x<=n.x&&e.x>=t.x&&e.y<=n.y&&e.y>=t.y}))||!!this.intersectsWithRect(t,n,!0,e)||this._containsCenterOfCanvas(t,n,e)},_containsCenterOfCanvas:function(e,t,n){return t={x:(e.x+t.x)/2,y:(e.y+t.y)/2},!!this.containsPoint(t,null,!0,n)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.intersectsWithRect(t,n,!0,e)||this.getCoords(!0,e).every((function(e){return(e.x>=n.x||e.x<=t.x)&&(e.y>=n.y||e.y<=t.y)}))&&this._containsCenterOfCanvas(t,n,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var n,r,i,o=0;for(i in t)if(!((r=t[i]).o.y<e.y&&r.d.y<e.y||r.o.y>=e.y&&r.d.y>=e.y||((r.o.x===r.d.x&&r.o.x>=e.x?r.o.x:(n=(r.d.y-r.o.y)/(r.d.x-r.o.x),-(e.y-0*e.x-(r.o.y-n*r.o.x))/(0-n)))>=e.x&&(o+=1),2!==o)))break;return o},getBoundingRect:function(e,t){return t=this.getCoords(e,t),P.makeBoundingBoxFromPoints(t)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,t){return t=this.getBoundingRect(t).width/this.getScaledWidth(),this.scale(e/this.width/t)},scaleToHeight:function(e,t){return t=this.getBoundingRect(t).height/this.getScaledHeight(),this.scale(e/this.height/t)},calcCoords:function(e){return e?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var e=this.getViewportTransform(),t=this.padding,n=I(this.angle),r=(n=(r=P.cos(n)*t)+(i=P.sin(n)*t),r-i),i=this.calcACoords();e={tl:j(i.tl,e),tr:j(i.tr,e),bl:j(i.bl,e),br:j(i.br,e)};return t&&(e.tl.x-=r,e.tl.y-=n,e.tr.x+=n,e.tr.y-=r,e.bl.x-=n,e.bl.y+=r,e.br.x+=r,e.br.y+=n),e},calcOCoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),n=this.getViewportTransform(),r=(t=R(n,t),R(t,e)),i=(r=R(r,[1/n[0],0,0,1/n[3],0,0]),this._calculateCurrentDimensions()),o={};return this.forEachControl((function(e,t,n){o[t]=e.positionHandler(i,r,n)})),o},calcACoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),n=R(t,e);e=(t=this._getTransformedDimensions()).x/2,t=t.y/2;return{tl:j({x:-e,y:-t},n),tr:j({x:e,y:-t},n),bl:j({x:-e,y:t},n),br:j({x:e,y:t},n)}},setCoords:function(e){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),e||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return P.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var t="_",n="";return(n=!e&&this.group?this.group.transformMatrixKey(e)+t:n)+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){var t=this.calcOwnMatrix();if(e||!this.group)return t;var n=this.transformMatrixKey(e);return(e=this.matrixCache||(this.matrixCache={})).key===n?e.value:(this.group&&(t=R(this.group.calcTransformMatrix(!1),t)),e.key=n,e.value=t)},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),t=this.ownMatrixCache||(this.ownMatrixCache={});if(t.key===e)return t.value;var n=this._calcTranslateMatrix();n={angle:this.angle,translateX:n[4],translateY:n[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return t.key=e,t.value=P.composeMatrix(n),t.value},_calcDimensionsTransformMatrix:function(e,t,n){return P.calcDimensionsMatrix({skewX:e,skewY:t,scaleX:this.scaleX*(n&&this.flipX?-1:1),scaleY:this.scaleY*(n&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var e=this.strokeWidth;return{x:this.width+e,y:this.height+e}},_getTransformedDimensions:function(e,t){void 0===e&&(e=this.skewX),void 0===t&&(t=this.skewY);var n,r=0===e&&0===t,i=this.strokeUniform?(n=this.width,this.height):(n=(i=this._getNonTransformedDimensions()).x,i.y);return r?this._finalizeDimensions(n*this.scaleX,i*this.scaleY):(t=P.sizeAfterTransform(n,i,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:e,skewY:t}),this._finalizeDimensions(t.x,t.y))},_finalizeDimensions:function(e,t){return this.strokeUniform?{x:e+this.strokeWidth,y:t+this.strokeWidth}:{x:e,y:t}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),t=this._getTransformedDimensions();return j(t,e,!0).scalarAdd(2*this.padding)}}),X.util.object.extend(X.Object.prototype,{sendToBack:function(){return this.group?X.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?X.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?X.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas&&this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?X.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas&&this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group&&"activeSelection"!==this.group.type?X.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas&&this.canvas.moveTo(this,e),this}}),D=X.util.toFixed,X.util.object.extend(X.Object.prototype,{getSvgStyles:function(e){var t=this.fillRule||"nonzero",n=this.strokeWidth||"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset||"0",o=this.strokeLineCap||"butt",a=this.strokeLineJoin||"miter",s=this.strokeMiterLimit||"4",l=void 0!==this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter();e=be("fill",this.fill);return[be("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",s,"; ",e,"fill-rule: ",t,"; ","opacity: ",l,";",u,c].join("")},getSvgSpanStyles:function(e,t){var n="; ",r=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+n:"",i=e.strokeWidth?"stroke-width: "+e.strokeWidth+n:"",o=(r=r,e.fontSize?"font-size: "+e.fontSize+"px"+n:""),a=e.fontStyle?"font-style: "+e.fontStyle+n:"",s=e.fontWeight?"font-weight: "+e.fontWeight+n:"",l=e.fill?be("fill",e.fill):"",c=e.stroke?be("stroke",e.stroke):"",u=this.getSvgTextDecoration(e);return[c,i,r,o,a,s,u=u&&"text-decoration: "+u+n,l,e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"",t?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){return["overline","underline","line-through"].filter((function(t){return e[t.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(e,t){return e=e?this.calcTransformMatrix():this.calcOwnMatrix(),'transform="'+X.util.matrixToSVG(e)+(t||"")+'" '},_setSVGBg:function(e){var t;this.backgroundColor&&(t=X.Object.NUM_FRACTION_DIGITS,e.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',D(-this.width/2,t),'" y="',D(-this.height/2,t),'" width="',D(this.width,t),'" height="',D(this.height,t),'"></rect>\n'))},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})},toClipPathSVG:function(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})},_createBaseClipPathSVGMarkup:function(e,t){var n=(t=t||{}).reviver,r=t.additionalTransform||"";t=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),r=e.indexOf("COMMON_PARTS");return e[r]=t,n?n(e.join("")):e.join("")},_createBaseSVGMarkup:function(e,t){var n,r=(t=t||{}).noStyle,i=t.reviver,o=r?"":'style="'+this.getSvgStyles()+'" ',a=t.withShadow?'style="'+this.getSvgFilter()+'" ':"",s=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=s&&s.absolutePositioned,u=this.stroke,h=this.fill,d=this.shadow,f=[],p=e.indexOf("COMMON_PARTS");t=t.additionalTransform;return s&&(s.clipPathId="CLIPPATH_"+X.Object.__uid++,n='<clipPath id="'+s.clipPathId+'" >\n'+s.toClipPathSVG(i)+"</clipPath>\n"),c&&f.push("<g ",a,this.getSvgCommons()," >\n"),f.push("<g ",this.getSvgTransform(!1),c?"":a+this.getSvgCommons()," >\n"),t=[o,l,r?"":this.addPaintOrder()," ",t?'transform="'+t+'" ':""].join(""),e[p]=t,h&&h.toLive&&f.push(h.toSVG(this)),u&&u.toLive&&f.push(u.toSVG(this)),d&&f.push(d.toSVG(this)),s&&f.push(n),f.push(e.join("")),f.push("</g>\n"),c&&f.push("</g>\n"),i?i(f.join("")):f.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}}),A=X.util.object.extend,L="stateProperties",X.util.object.extend(X.Object.prototype,{hasStateChanged:function(e){var t="_"+(e=e||L);return Object.keys(this[t]).length<this[e].length||!function e(t,n,r){if(t===n)return 1;if(Array.isArray(t)){if(Array.isArray(n)&&t.length===n.length){for(var i=0,o=t.length;i<o;i++)if(!e(t[i],n[i]))return;return 1}}else if(t&&"object"==typeof t){var a,s=Object.keys(t);if(n&&"object"==typeof n&&(r||s.length===Object.keys(n).length)){for(i=0,o=s.length;i<o;i++)if("canvas"!==(a=s[i])&&"group"!==a&&!e(t[a],n[a]))return;return 1}}}(this[t],this,!0)},saveState:function(e){var t=e&&e.propertySet||L,n="_"+t;return this[n]?(Ce(this,n,this[t]),e&&e.stateProperties&&Ce(this,n,e.stateProperties),this):this.setupState(e)},setupState:function(e){var t=(e=e||{}).propertySet||L;return this["_"+(e.propertySet=t)]={},this.saveState(e),this}}),M=X.util.degreesToRadians,X.util.object.extend(X.Object.prototype,{_findTargetCorner:function(e,t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var n,r,i=e.x,o=e.y,a=Object.keys(this.oCoords),s=a.length-1;for(this.__corner=0;0<=s;s--)if(r=a[s],this.isControlVisible(r)&&(n=this._getImageLines(t?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(n=this._findCrossPoints({x:i,y:o},n))&&n%2==1))return this.__corner=r;return!1},forEachControl:function(e){for(var t in this.controls)e(this.controls[t],t,this)},_setCornerCoords:function(){var e,t=this.oCoords;for(e in t){var n=this.controls[e];t[e].corner=n.calcCornerCoords(this.angle,this.cornerSize,t[e].x,t[e].y,!1),t[e].touchCorner=n.calcCornerCoords(this.angle,this.touchCornerSize,t[e].x,t[e].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var t=this.getCenterPoint(),n=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(t.x,t.y),e.scale(1/r[0],1/r[3]),e.rotate(M(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore(),this},drawBorders:function(e,t){t=t||{};var n=this._calculateCurrentDimensions(),r=this.borderScaleFactor,i=n.x+r,o=n.y+r,a=(r=(void 0!==t.hasControls?t:this).hasControls,!1);return e.save(),e.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(e,t.borderDashArray||this.borderDashArray),e.strokeRect(-i/2,-o/2,i,o),r&&(e.beginPath(),this.forEachControl((function(t,n,r){t.withConnection&&t.getVisibility(r,n)&&(a=!0,e.moveTo(t.x*i,t.y*o),e.lineTo(t.x*i+t.offsetX,t.y*o+t.offsetY))})),a&&e.stroke()),e.restore(),this},drawBordersInGroup:function(e,t,n){n=n||{};var r=X.util.sizeAfterTransform(this.width,this.height,t),i=this.strokeWidth,o=this.strokeUniform,a=this.borderScaleFactor,s=r.x+i*(o?this.canvas.getZoom():t.scaleX)+a;a=r.y+i*(o?this.canvas.getZoom():t.scaleY)+a;return e.save(),this._setLineDash(e,n.borderDashArray||this.borderDashArray),e.strokeStyle=n.borderColor||this.borderColor,e.strokeRect(-s/2,-a/2,s,a),e.restore(),this},drawControls:function(e,t){t=t||{},e.save();var n,r,i=this.canvas.getRetinaScaling();return e.setTransform(i,0,0,i,0,0),e.strokeStyle=e.fillStyle=t.cornerColor||this.cornerColor,this.transparentCorners||(e.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(e,t.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl((function(i,o,a){r=a.oCoords[o],i.getVisibility(a,o)&&(n&&(r=X.util.transformPoint(r,n)),i.render(e,r.x,r.y,t,a))})),e.restore(),this},isControlVisible:function(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)},setControlVisible:function(e,t){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t,this},setControlsVisibility:function(e){for(var t in e=e||{})this.setControlVisible(t,e[t]);return this},onDeselect:function(){},onSelect:function(){}}),X.util.object.extend(X.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){function n(){}var r=(t=t||{}).onComplete||n,i=t.onChange||n,o=this;return X.util.animate({startValue:e.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),o.requestRenderAll(),i()},onComplete:function(){e.setCoords(),r()}}),this},fxCenterObjectV:function(e,t){function n(){}var r=(t=t||{}).onComplete||n,i=t.onChange||n,o=this;return X.util.animate({startValue:e.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),o.requestRenderAll(),i()},onComplete:function(){e.setCoords(),r()}}),this},fxRemove:function(e,t){function n(){}var r=(t=t||{}).onComplete||n,i=t.onChange||n,o=this;return X.util.animate({startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),o.requestRenderAll(),i()},onComplete:function(){o.remove(e),r()}}),this}}),X.util.object.extend(X.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var e,t,n=[];for(e in arguments[0])n.push(e);for(var r=0,i=n.length;r<i;r++)e=n[r],t=r!==i-1,this._animate(e,arguments[0][e],arguments[1],t)}else this._animate.apply(this,arguments);return this},_animate:function(e,t,n,r){var i,o=this;t=t.toString(),n=n?X.util.object.clone(n):{},~e.indexOf(".")&&(i=e.split("."));var a=-1<o.colorProperties.indexOf(e)||i&&-1<o.colorProperties.indexOf(i[1]),s=i?this.get(i[0])[i[1]]:this.get(e);return"from"in n||(n.from=s),a||(t=~t.indexOf("=")?s+parseFloat(t.replace("=","")):parseFloat(t)),t={startValue:n.from,endValue:t,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(e,t,r){return n.abort.call(o,e,t,r)},onChange:function(t,a,s){i?o[i[0]][i[1]]=t:o.set(e,t),r||n.onChange&&n.onChange(t,a,s)},onComplete:function(e,t,i){r||(o.setCoords(),n.onComplete&&n.onComplete(e,t,i))}},a?X.util.animateColor(t.startValue,t.endValue,t.duration,t):X.util.animate(t)}}),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.object.clone,i={x1:1,x2:1,y1:1,y2:1};function o(e,t){var n=e.origin,r=e.axis1,i=e.axis2,o=e.dimension,a=t.nearest,s=t.center,l=t.farthest;return function(){switch(this.get(n)){case a:return Math.min(this.get(r),this.get(i));case s:return Math.min(this.get(r),this.get(i))+.5*this.get(o);case l:return Math.max(this.get(r),this.get(i))}}}t.Line?t.warn("fabric.Line is already defined"):(t.Line=t.util.createClass(t.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:t.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,t){e=e||[0,0,0,0],this.callSuper("initialize",t),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(t)},_setWidthHeight:function(e){e=e||{},this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,t){return this.callSuper("_set",e,t),void 0!==i[e]&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();var t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth,t=e.strokeStyle,e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=t},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return n(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,t=this.y1<=this.y2?-1:1,n=e*this.width*.5,r=t*this.height*.5;return{x1:n,x2:e*this.width*-.5,y1:r,y2:t*this.height*-.5}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}}),t.Line.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),t.Line.fromElement=function(e,r,i){i=i||{};var o=t.parseAttributes(e,t.Line.ATTRIBUTE_NAMES);e=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];r(new t.Line(e,n(o,i)))},t.Line.fromObject=function(e,n){var i=r(e,!0);i.points=[e.x1,e.y1,e.x2,e.y2],t.Object._fromObject("Line",i,(function(e){delete e.points,n&&n(e)}),"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=Math.PI;t.Circle?t.warn("fabric.Circle is already defined."):(t.Circle=t.util.createClass(t.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,cacheProperties:t.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,t){return this.callSuper("_set",e,t),"radius"===e&&this.setRadius(t),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,r,i,o,a=(this.endAngle-this.startAngle)%(2*n);return 0==a?["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n']:(e=t.util.cos(this.startAngle)*this.radius,r=t.util.sin(this.startAngle)*this.radius,i=t.util.cos(this.endAngle)*this.radius,o=t.util.sin(this.endAngle)*this.radius,['<path d="M '+e+" "+r," A "+this.radius+" "+this.radius," 0 ",+(n<a?"1":"0")+" 1"," "+i+" "+o,'" ',"COMMON_PARTS"," />\n"])},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",2*e).set("height",2*e)}}),t.Circle.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),t.Circle.fromElement=function(e,n){var r=t.parseAttributes(e,t.Circle.ATTRIBUTE_NAMES);if(!("radius"in(e=r)&&0<=e.radius))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,n(new t.Circle(r))},t.Circle.fromObject=function(e,n){t.Object._fromObject("Circle",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Triangle?t.warn("fabric.Triangle is already defined"):(t.Triangle=t.util.createClass(t.Object,{type:"triangle",width:100,height:100,_render:function(e){var t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)},_toSVG:function(){var e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-e+" "+t,"0 "+-t,e+" "+t].join(","),'" />']}}),t.Triangle.fromObject=function(e,n){return t.Object._fromObject("Triangle",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=2*Math.PI;t.Ellipse?t.warn("fabric.Ellipse is already defined."):(t.Ellipse=t.util.createClass(t.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this.set("rx",e&&e.rx||0),this.set("ry",e&&e.ry||0)},_set:function(e,t){switch(this.callSuper("_set",e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,n,!1),e.restore(),this._renderPaintInOrder(e)}}),t.Ellipse.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),t.Ellipse.fromElement=function(e,n){(e=t.parseAttributes(e,t.Ellipse.ATTRIBUTE_NAMES)).left=(e.left||0)-e.rx,e.top=(e.top||0)-e.ry,n(new t.Ellipse(e))},t.Ellipse.fromObject=function(e,n){t.Object._fromObject("Ellipse",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend;t.Rect?t.warn("fabric.Rect is already defined"):(t.Rect=t.util.createClass(t.Object,{stateProperties:t.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){var t=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,i=this.height,o=-this.width/2,a=-this.height/2,s=0!==t||0!==n,l=.4477152502;e.beginPath(),e.moveTo(o+t,a),e.lineTo(o+r-t,a),s&&e.bezierCurveTo(o+r-l*t,a,o+r,a+l*n,o+r,a+n),e.lineTo(o+r,a+i-n),s&&e.bezierCurveTo(o+r,a+i-l*n,o+r-l*t,a+i,o+r-t,a+i),e.lineTo(o+t,a+i),s&&e.bezierCurveTo(o+l*t,a+i,o,a+i-l*n,o,a+i-n),e.lineTo(o,a+n),s&&e.bezierCurveTo(o,a+l*n,o+l*t,a,o+t,a),e.closePath(),this._renderPaintInOrder(e)},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),t.Rect.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),t.Rect.fromElement=function(e,r,i){if(!e)return r(null);i=i||{},(e=t.parseAttributes(e,t.Rect.ATTRIBUTE_NAMES)).left=e.left||0,e.top=e.top||0,e.height=e.height||0,e.width=e.width||0,(e=new t.Rect(n(i?t.util.object.clone(i):{},e))).visible=e.visible&&0<e.width&&0<e.height,r(e)},t.Rect.fromObject=function(e,n){return t.Object._fromObject("Rect",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.array.min,i=t.util.array.max,o=t.util.toFixed;t.Polyline?t.warn("fabric.Polyline is already defined"):(t.Polyline=t.util.createClass(t.Object,{type:"polyline",points:null,cacheProperties:t.Object.prototype.cacheProperties.concat("points"),initialize:function(e,t){t=t||{},this.points=e||[],this.callSuper("initialize",t),this._setPositionDimensions(t)},_setPositionDimensions:function(e){var t,n=this._calcDimensions(e);this.width=n.width,this.height=n.height,e.fromSVG||(t=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2,y:n.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),void 0===e.left&&(this.left=e.fromSVG?n.left:t.x),void 0===e.top&&(this.top=e.fromSVG?n.top:t.y),this.pathOffset={x:n.left+this.width/2,y:n.top+this.height/2}},_calcDimensions:function(){var e=this.points,t=r(e,"x")||0,n=r(e,"y")||0;return{left:t,top:n,width:(i(e,"x")||0)-t,height:(i(e,"y")||0)-n}},toObject:function(e){return n(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){for(var e=[],n=this.pathOffset.x,r=this.pathOffset.y,i=t.Object.NUM_FRACTION_DIGITS,a=0,s=this.points.length;a<s;a++)e.push(o(this.points[a].x-n,i),",",o(this.points[a].y-r,i)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),'" />\n']},commonRender:function(e){var t,n=this.points.length,r=this.pathOffset.x,i=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-i);for(var o=0;o<n;o++)t=this.points[o],e.lineTo(t.x-r,t.y-i);return!0},_render:function(e){this.commonRender(e)&&this._renderPaintInOrder(e)},complexity:function(){return this.get("points").length}}),t.Polyline.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polyline.fromElementGenerator=function(e){return function(r,i,o){if(!r)return i(null);o=o||{};var a=t.parsePointsAttribute(r.getAttribute("points"));(r=t.parseAttributes(r,t[e].ATTRIBUTE_NAMES)).fromSVG=!0,i(new t[e](a,n(r,o)))}},t.Polyline.fromElement=t.Polyline.fromElementGenerator("Polyline"),t.Polyline.fromObject=function(e,n){return t.Object._fromObject("Polyline",e,n,"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Polygon?t.warn("fabric.Polygon is already defined"):(t.Polygon=t.util.createClass(t.Polyline,{type:"polygon",_render:function(e){this.commonRender(e)&&(e.closePath(),this._renderPaintInOrder(e))}}),t.Polygon.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polygon.fromElement=t.Polyline.fromElementGenerator("Polygon"),t.Polygon.fromObject=function(e,n){t.Object._fromObject("Polygon",e,n,"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.array.min,r=t.util.array.max,i=t.util.object.extend,o=Object.prototype.toString,a=t.util.toFixed;t.Path?t.warn("fabric.Path is already defined"):(t.Path=t.util.createClass(t.Object,{type:"path",path:null,cacheProperties:t.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:t.Object.prototype.stateProperties.concat("path"),initialize:function(e,n){this.callSuper("initialize",n=n||{});var r="[object Array]"===o.call(e=e||[]);this.path=t.util.makePathSimpler(r?e:t.util.parsePath(e)),this.path&&t.Polyline.prototype._setPositionDimensions.call(this,n)},_renderPathCommands:function(e){var t,n=0,r=0,i=0,o=0,a=0,s=0,l=-this.pathOffset.x,c=-this.pathOffset.y;e.beginPath();for(var u=0,h=this.path.length;u<h;++u)switch((t=this.path[u])[0]){case"L":i=t[1],o=t[2],e.lineTo(i+l,o+c);break;case"M":n=i=t[1],r=o=t[2],e.moveTo(i+l,o+c);break;case"C":i=t[5],o=t[6],a=t[3],s=t[4],e.bezierCurveTo(t[1]+l,t[2]+c,a+l,s+c,i+l,o+c);break;case"Q":e.quadraticCurveTo(t[1]+l,t[2]+c,t[3]+l,t[4]+c),i=t[3],o=t[4],a=t[1],s=t[2];break;case"z":case"Z":i=n,o=r,e.closePath()}},_render:function(e){this._renderPathCommands(e),this._renderPaintInOrder(e)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){return i(this.callSuper("toObject",e),{path:this.path.map((function(e){return e.slice()}))})},toDatalessObject:function(e){return(e=this.toObject(["sourcePath"].concat(e))).sourcePath&&delete e.path,e},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',t.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var e=t.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,e)+", "+a(-this.pathOffset.y,e)+")"},toClipPathSVG:function(e){var t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},toSVG:function(e){var t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var e,i,o=[],a=[],s=0,l=0,c=0,u=0,h=0,d=this.path.length;h<d;++h){switch((e=this.path[h])[0]){case"L":c=e[1],u=e[2],i=[];break;case"M":s=c=e[1],l=u=e[2],i=[];break;case"C":i=t.util.getBoundsOfCurve(c,u,e[1],e[2],e[3],e[4],e[5],e[6]),c=e[5],u=e[6];break;case"Q":i=t.util.getBoundsOfCurve(c,u,e[1],e[2],e[1],e[2],e[3],e[4]),c=e[3],u=e[4];break;case"z":case"Z":c=s,u=l}i.forEach((function(e){o.push(e.x),a.push(e.y)})),o.push(c),a.push(u)}var f=n(o)||0,p=n(a)||0;return{left:f,top:p,width:(r(o)||0)-f,height:(r(a)||0)-p}}}),t.Path.fromObject=function(e,n){var r;"string"==typeof e.sourcePath?(r=e.sourcePath,t.loadSVGFromURL(r,(function(t){(t=t[0]).setOptions(e),n&&n(t)}))):t.Object._fromObject("Path",e,n,"path")},t.Path.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(["d"]),t.Path.fromElement=function(e,n,r){(e=t.parseAttributes(e,t.Path.ATTRIBUTE_NAMES)).fromSVG=!0,n(new t.Path(e.d,i(e,r)))})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.array.min,r=t.util.array.max;t.Group||(t.Group=t.util.createClass(t.Object,t.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,t,n){t=t||{},this._objects=[],n&&this.callSuper("initialize",t),this._objects=e||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;n?this._updateObjectsACoords():(n=t&&t.centerPoint,void 0!==t.originX&&(this.originX=t.originX),void 0!==t.originY&&(this.originY=t.originY),n||this._calcBounds(),this._updateObjectsCoords(n),delete t.centerPoint,this.callSuper("initialize",t)),this.setCoords()},_updateObjectsACoords:function(){for(var e=this._objects.length;e--;)this._objects[e].setCoords(!0)},_updateObjectsCoords:function(e){e=e||this.getCenterPoint();for(var t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],e)},_updateObjectCoords:function(e,t){var n=e.left,r=e.top;e.set({left:n-t.x,top:r-t.y}),e.group=this,e.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var n=!!this.group;return this._restoreObjectsState(),t.util.resetObjectTransform(this),e&&(n&&t.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),t.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,n){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(e,n);if("canvas"===e)for(;r--;)this._objects[r]._set(e,n);t.Object.prototype._set.call(this,e,n)},toObject:function(e){var n=this.includeDefaultValues,r=this._objects.filter((function(e){return!e.excludeFromExport})).map((function(t){var r=t.includeDefaultValues;t.includeDefaultValues=n;var i=t.toObject(e);return t.includeDefaultValues=r,i})),i=t.Object.prototype.toObject.call(this,e);return i.objects=r,i},toDatalessObject:function(e){var n,r,i=this.sourcePath;return r=i||(n=this.includeDefaultValues,this._objects.map((function(t){var r=t.includeDefaultValues;t.includeDefaultValues=n;var i=t.toDatalessObject(e);return t.includeDefaultValues=r,i}))),(i=t.Object.prototype.toDatalessObject.call(this,e)).objects=r,i},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=t.Object.prototype.shouldCache.call(this);if(e)for(var n=0,r=this._objects.length;n<r;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1;return e},willDrawShadow:function(){if(t.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var t=0,n=this._objects.length;t<n;t++)this._objects[t].render(e);this._drawClipPath(e)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var t,n,r=0,i=this._objects.length;r<i;r++)if(this._objects[r].isCacheDirty(!0))return this._cacheCanvas&&(t=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY,this._cacheContext.clearRect(-t/2,-n/2,t,n)),!0;return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach((function(n){t.util.addTransformToObject(n,e),delete n.group,n.setCoords()})),this},realizeTransform:function(e,n){return t.util.addTransformToObject(e,n),e},destroy:function(){return this._objects.forEach((function(e){e.set("dirty",!0)})),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var e=this._objects,n=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var i=new t.ActiveSelection([]);return i.set(r),i.type="activeSelection",n.remove(this),e.forEach((function(e){e.group=i,e.dirty=!0,n.add(e)})),i.canvas=n,i._objects=e,(n._activeObject=i).setCoords(),i}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(e){e.setCoords(!0)})),this},_calcBounds:function(e){for(var t,n,r,i,o=[],a=[],s=["tr","br","bl","tl"],l=0,c=this._objects.length,u=s.length;l<c;++l){for(r=(t=this._objects[l]).calcACoords(),i=0;i<u;i++)o.push(r[n=s[i]].x),a.push(r[n].y);t.aCoords=r}this._getBounds(o,a,e)},_getBounds:function(e,i,o){var a=new t.Point(n(e),n(i)),s=new t.Point(r(e),r(i)),l=a.y||0;e=a.x||0,i=s.x-a.x||0,a=s.y-a.y||0;this.width=i,this.height=a,o||this.setPositionByOrigin({x:e,y:l},"left","top")},_toSVG:function(e){for(var t=["<g ","COMMON_PARTS"," >\n"],n=0,r=this._objects.length;n<r;n++)t.push("\t\t",this._objects[n].toSVG(e));return t.push("</g>\n"),t},getSvgStyles:function(){var e=void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")},toClipPathSVG:function(e){for(var t=[],n=0,r=this._objects.length;n<r;n++)t.push("\t",this._objects[n].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}}),t.Group.fromObject=function(e,n){var r=e.objects,i=t.util.object.clone(e,!0);delete i.objects,"string"!=typeof r?t.util.enlivenObjects(r,(function(r){t.util.enlivenObjects([e.clipPath],(function(i){var o=t.util.object.clone(e,!0);o.clipPath=i[0],delete o.objects,n&&n(new t.Group(r,o,!0))}))})):t.loadSVGFromURL(r,(function(o){(o=t.util.groupSVGElements(o,e,r)).set(i),n&&n(o)}))})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.ActiveSelection||(t.ActiveSelection=t.util.createClass(t.Group,{type:"activeSelection",initialize:function(e,n){n=n||{},this._objects=e||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),t.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var e=this._objects.concat();this._objects=[];var n=t.Object.prototype.toObject.call(this),r=new t.Group([]);return delete n.type,r.set(n),e.forEach((function(e){e.canvas.remove(e),e.group=r})),r._objects=e,this.canvas?((e=this.canvas).add(r),(e._activeObject=r).setCoords(),r):r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",e,t),void 0===(n=n||{}).hasControls&&(n.hasControls=!1),n.forActiveSelection=!0;for(var r=0,i=this._objects.length;r<i;r++)this._objects[r]._renderControls(e,n);e.restore()}}),t.ActiveSelection.fromObject=function(e,n){t.util.enlivenObjects(e.objects,(function(r){delete e.objects,n&&n(new t.ActiveSelection(r,e,!0))}))})}(t),function(e){"use strict";var t=X.util.object.extend;e.fabric||(e.fabric={}),e.fabric.Image?X.warn("fabric.Image is already defined."):(X.Image=X.util.createClass(X.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:X.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:X.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(e,t){t=t||{},this.filters=[],this.cacheKey="texture"+X.Object.__uid++,this.callSuper("initialize",t),this._initElement(e,t)},getElement:function(){return this._element||{}},setElement:function(e,t){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=e,this._originalElement=e,this._initConfig(t),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(e){var t=X.filterBackend;t&&t.evictCachesForKey&&t.evictCachesForKey(e)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(e){X.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){var t,n;this.stroke&&0!==this.strokeWidth&&(t=this.width/2,n=this.height/2,e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath())},toObject:function(e){var n=[];return this.filters.forEach((function(e){e&&n.push(e.toObject())})),e=t(this.callSuper("toObject",["cropX","cropY"].concat(e)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n}),this.resizeFilter&&(e.resizeFilter=this.resizeFilter.toObject()),e},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var e,t,n=[],r=[],i=this._element,o=-this.width/2,a=-this.height/2,s="",l="";return i?(this.hasCrop()&&(t=X.Object.__uid++,n.push('<clipPath id="imageCrop_'+t+'">\n','\t<rect x="'+o+'" y="'+a+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+t+')" '),this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),r.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',a-this.cropY,'" width="',i.width||i.naturalWidth,'" height="',i.height||i.height,l,'"',s,"></image>\n"),(this.stroke||this.strokeDashArray)&&(s=this.fill,this.fill=null,e=["\t<rect ",'x="',o,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=s),n="fill"!==this.paintFirst?n.concat(e,r):n.concat(r,e)):[]},getSrc:function(e){return(e=e?this._element:this._originalElement)?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(e,t,n){return X.util.loadImage(e,(function(e,r){this.setElement(e,n),this._setWidthHeight(),t&&t(this,r)}),this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,t=this.minimumScaleTrigger,n=(s=this.getTotalObjectScaling()).scaleX,r=s.scaleY,i=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||t<n&&t<r)return this._element=i,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=r);X.filterBackend||(X.filterBackend=X.initFilterBackend());var o=X.util.createCanvasElement(),a=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,s=i.width;t=i.height;o.width=s,o.height=t,this._element=o,this._lastScaleX=e.scaleX=n,this._lastScaleY=e.scaleY=r,X.filterBackend.applyFilters([e],i,s,t,this._element,a),this._filterScalingX=o.width/this._originalElement.width,this._filterScalingY=o.height/this._originalElement.height},applyFilters:function(e){if(e=(e=e||this.filters||[]).filter((function(e){return e&&!e.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===e.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var t=this._originalElement,n=t.naturalWidth||t.width,r=t.naturalHeight||t.height;return this._element===this._originalElement?((t=X.util.createCanvasElement()).width=n,t.height=r,this._element=t,this._filteredEl=t):(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,r),this._lastScaleX=1,this._lastScaleY=1),X.filterBackend||(X.filterBackend=X.initFilterBackend()),X.filterBackend.applyFilters(e,this._originalElement,n,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(e){X.util.setImageSmoothing(e,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)},drawCacheOnCanvas:function(e){X.util.setImageSmoothing(e,this.imageSmoothing),X.Object.prototype.drawCacheOnCanvas.call(this,e)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(e){var t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,v=this._element;v&&(t=this._filterScalingX,n=this._filterScalingY,r=this.width,i=this.height,o=Math.min,p=(f=Math.max)(this.cropX,0),m=f(this.cropY,0),a=v.naturalWidth||v.width,s=v.naturalHeight||v.height,c=m*n,u=o(r*t,a-(l=p*t)),h=o(i*n,s-c),d=-r/2,f=-i/2,p=o(r,a/t-p),m=o(i,s/n-m),v&&e.drawImage(v,l,c,u,h,d,f,p,m))},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,t){this.setElement(X.util.getById(e),t),X.util.addClass(this.getElement(),X.Image.CSS_CANVAS)},_initConfig:function(e){this.setOptions(e=e||{}),this._setWidthHeight(e)},_initFilters:function(e,t){e&&e.length?X.util.enlivenObjects(e,(function(e){t&&t(e)}),"fabric.Image.filters"):t&&t()},_setWidthHeight:function(e){e=e||{};var t=this.getElement();this.width=e.width||t.naturalWidth||t.width||0,this.height=e.height||t.naturalHeight||t.height||0},parsePreserveAspectRatioAttribute:function(){var e,t=X.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),n=this._element.width,r=this._element.height,i=1,o=1,a=0,s=0,l=0,c=0,u=this.width,h=this.height,d={width:u,height:h};return!t||"none"===t.alignX&&"none"===t.alignY?(i=u/n,o=h/r):("meet"===t.meetOrSlice&&(e=(u-n*(i=o=X.util.findScaleToFit(this._element,d)))/2,"Min"===t.alignX&&(a=-e),"Max"===t.alignX&&(a=e),e=(h-r*o)/2,"Min"===t.alignY&&(s=-e),"Max"===t.alignY&&(s=e)),"slice"===t.meetOrSlice&&(e=n-u/(i=o=X.util.findScaleToCover(this._element,d)),"Mid"===t.alignX&&(l=e/2),"Max"===t.alignX&&(l=e),e=r-h/o,"Mid"===t.alignY&&(c=e/2),"Max"===t.alignY&&(c=e),n=u/i,r=h/o)),{width:n,height:r,scaleX:i,scaleY:o,offsetLeft:a,offsetTop:s,cropX:l,cropY:c}}}),X.Image.CSS_CANVAS="canvas-img",X.Image.prototype.getSvgSrc=X.Image.prototype.getSrc,X.Image.fromObject=function(e,t){var n=X.util.object.clone(e);X.util.loadImage(n.src,(function(e,r){r?t&&t(null,!0):X.Image.prototype._initFilters.call(n,n.filters,(function(r){n.filters=r||[],X.Image.prototype._initFilters.call(n,[n.resizeFilter],(function(r){n.resizeFilter=r[0],X.util.enlivenObjects([n.clipPath],(function(r){n.clipPath=r[0],r=new X.Image(e,n),t(r,!1)}))}))}))}),null,n.crossOrigin)},X.Image.fromURL=function(e,t,n){X.util.loadImage(e,(function(e,r){t&&t(new X.Image(e,n),r)}),null,n&&n.crossOrigin)},X.Image.ATTRIBUTE_NAMES=X.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),X.Image.fromElement=function(e,n,r){e=X.parseAttributes(e,X.Image.ATTRIBUTE_NAMES),X.Image.fromURL(e["xlink:href"],n,t(r?X.util.object.clone(r):{},e))})}(t),X.util.object.extend(X.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.angle%360;return 0<e?90*Math.round((e-1)/90):90*Math.round(e/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(e){function t(){}var n=(e=e||{}).onComplete||t,r=e.onChange||t,i=this;return X.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){i.rotate(e),r()},onComplete:function(){i.setCoords(),n()}}),this}}),X.util.object.extend(X.StaticCanvas.prototype,{straightenObject:function(e){return e.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(e){return e.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";X.isWebglSupported=function(e){if(X.isLikelyNode)return!1;e=e||X.WebglFilterBackend.prototype.tileSize;var t,n,r,i=(o=document.createElement("canvas")).getContext("webgl")||o.getContext("experimental-webgl"),o=!1;if(i){X.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE);o=X.maxTextureSize>=e;for(var a=["highp","mediump","lowp"],s=0;s<3;s++)if(void 0,r="precision "+a[s]+" float;\nvoid main(){}",n=(t=i).createShader(t.FRAGMENT_SHADER),t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)){X.webGlPrecision=a[s];break}}return this.isSupported=o},(X.WebglFilterBackend=function(e){e&&e.tileSize&&(this.tileSize=e.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}).prototype={tileSize:2048,resources:{},setupGLContext:function(e,t){this.dispose(),this.createWebGLCanvas(e,t),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(e,t)},chooseFastestCopyGLTo2DMethod:function(e,t){var n=void 0!==window.performance;try{new ImageData(1,1),o=!0}catch(e){o=!1}var r="undefined"!=typeof ArrayBuffer,i="undefined"!=typeof Uint8ClampedArray;if(n&&o&&r&&i){var o=X.util.createCanvasElement();r=new ArrayBuffer(e*t*4);if(X.forceGLPutImageData)return this.imageBuffer=r,void(this.copyGLTo2D=Ee);i={imageBuffer:r,destinationWidth:e,destinationHeight:t,targetCanvas:o},o.width=e,o.height=t,o=window.performance.now(),we.call(i,this.gl,i),t=window.performance.now()-o,o=window.performance.now(),Ee.call(i,this.gl,i),window.performance.now()-o<t?(this.imageBuffer=r,this.copyGLTo2D=Ee):this.copyGLTo2D=we}},createWebGLCanvas:function(e,t){var n=X.util.createCanvasElement();n.width=e,n.height=t;e={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1};(t=(t=n.getContext("webgl",e))||n.getContext("experimental-webgl",e))&&(t.clearColor(0,0,0,0),this.canvas=n,this.gl=t)},applyFilters:function(e,t,n,r,i,o){var a=this.gl;o&&(s=this.getCachedTexture(o,t));var s,l={originalWidth:t.width||t.originalWidth,originalHeight:t.height||t.originalHeight,sourceWidth:n,sourceHeight:r,destinationWidth:n,destinationHeight:r,context:a,sourceTexture:this.createTexture(a,n,r,!s&&t),targetTexture:this.createTexture(a,n,r),originalTexture:s||this.createTexture(a,n,r,!s&&t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i};o=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,o),e.forEach((function(e){e&&e.applyTo(l)})),s=(r=(n=l).targetCanvas).width,t=r.height,e=n.destinationWidth,n=n.destinationHeight,s===e&&t===n||(r.width=e,r.height=n),this.copyGLTo2D(a,l),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(l.sourceTexture),a.deleteTexture(l.targetTexture),a.deleteFramebuffer(o),i.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(e,t,n,r){var i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),i},getCachedTexture:function(e,t){return this.textureCache[e]?this.textureCache[e]:(t=this.createTexture(this.gl,t.width,t.height,t),this.textureCache[e]=t)},evictCachesForKey:function(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])},copyGLTo2D:we,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl,t={renderer:"",vendor:""};if(!e)return t;var n,r=e.getExtension("WEBGL_debug_renderer_info");return r&&(n=e.getParameter(r.UNMASKED_RENDERER_WEBGL),r=e.getParameter(r.UNMASKED_VENDOR_WEBGL),n&&(t.renderer=n.toLowerCase()),r&&(t.vendor=r.toLowerCase())),this.gpuInfo=t}}}(),function(){"use strict";function e(){}(X.Canvas2dFilterBackend=function(){}).prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(e,t,n,r,i){var o=i.getContext("2d");o.drawImage(t,0,0,n,r);var a={sourceWidth:n,sourceHeight:r,imageData:o.getImageData(0,0,n,r),originalEl:t,originalImageData:o.getImageData(0,0,n,r),canvasEl:i,ctx:o,filterBackend:this};return e.forEach((function(e){e.applyTo(a)})),a.imageData.width===n&&a.imageData.height===r||(i.width=a.imageData.width,i.height=a.imageData.height),o.putImageData(a.imageData,0,0),a}}}(),X.Image=X.Image||{},X.Image.filters=X.Image.filters||{},X.Image.filters.BaseFilter=X.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},createProgram:function(e,t,n){t=t||this.fragmentSource,n=n||this.vertexSource,"highp"!==X.webGlPrecision&&(t=t.replace(/precision highp float/g,"precision "+X.webGlPrecision+" float"));var r=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(r));if(n=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+e.getShaderInfoLog(n));if(t=e.createProgram(),e.attachShader(t,r),e.attachShader(t,n),e.linkProgram(t),!e.getProgramParameter(t,e.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(t));return r=this.getAttributeLocations(e,t),(n=this.getUniformLocations(e,t)||{}).uStepW=e.getUniformLocation(t,"uStepW"),n.uStepH=e.getUniformLocation(t,"uStepH"),{program:t,attributeLocations:r,uniformLocations:n}},getAttributeLocations:function(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,t,n){var r=t.aPosition;t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var t,n,r=e.context;1<e.passes?(t=e.destinationWidth,n=e.destinationHeight,e.sourceWidth===t&&e.sourceHeight===n||(r.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(r,t,n)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(e){e.passes--,e.pass++;var t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t},isNeutralState:function(){var e=this.mainParameter,t=X.Image.filters[this.type].prototype;if(e){if(Array.isArray(t[e])){for(var n=t[e].length;n--;)if(this[e][n]!==t[e][n])return!1;return!0}return t[e]===this[e]}return!1},applyTo:function(e){e.webgl?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},retrieveShader:function(e){return e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context)),e.programCache[this.type]},applyToWebGL:function(e){var t=e.context,n=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){var t;e.helpLayer||((t=document.createElement("canvas")).width=e.sourceWidth,t.height=e.sourceHeight,e.helpLayer=t)},toObject:function(){var e={type:this.type},t=this.mainParameter;return t&&(e[t]=this[t]),e},toJSON:function(){return this.toObject()}}),X.Image.filters.BaseFilter.fromObject=function(e,t){return e=new X.Image.filters[e.type](e),t&&t(e),e},function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.ColorMatrix=e(n.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){for(var t,n,r,i,o=e.imageData.data,a=o.length,s=this.matrix,l=this.colorsOnly,c=0;c<a;c+=4)t=o[c],n=o[c+1],r=o[c+2],l?(o[c]=t*s[0]+n*s[1]+r*s[2]+255*s[4],o[c+1]=t*s[5]+n*s[6]+r*s[7]+255*s[9],o[c+2]=t*s[10]+n*s[11]+r*s[12]+255*s[14]):(i=o[c+3],o[c]=t*s[0]+n*s[1]+r*s[2]+i*s[3]+255*s[4],o[c+1]=t*s[5]+n*s[6]+r*s[7]+i*s[8]+255*s[9],o[c+2]=t*s[10]+n*s[11]+r*s[12]+i*s[13]+255*s[14],o[c+3]=t*s[15]+n*s[16]+r*s[17]+i*s[18]+255*s[19])},getUniformLocations:function(e,t){return{uColorMatrix:e.getUniformLocation(t,"uColorMatrix"),uConstants:e.getUniformLocation(t,"uConstants")}},sendUniformData:function(e,t){var n=[(r=this.matrix)[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],r=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,n),e.uniform4fv(t.uConstants,r)}}),t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.Brightness=e(n.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(0!==this.brightness)for(var t=e.imageData.data,n=t.length,r=Math.round(255*this.brightness),i=0;i<n;i+=4)t[i]=t[i]+r,t[i+1]=t[i+1]+r,t[i+2]=t[i+2]+r},getUniformLocations:function(e,t){return{uBrightness:e.getUniformLocation(t,"uBrightness")}},sendUniformData:function(e,t){e.uniform1f(t.uBrightness,this.brightness)}}),t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.Image.filters;e=t.util.createClass;r.Convolute=e(r.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var t=Math.sqrt(this.matrix.length),n=this.type+"_"+t+"_"+(this.opaque?1:0);t=this.fragmentSource[n];return e.programCache.hasOwnProperty(n)||(e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyTo2d:function(e){for(var t,n,r,i,o,a,s,l,c,u,h,d,f=(d=e.imageData).data,p=this.matrix,m=Math.round(Math.sqrt(p.length)),v=Math.floor(m/2),g=d.width,y=d.height,b=(d=e.ctx.createImageData(g,y)).data,C=this.opaque?1:0,w=0;w<y;w++)for(c=0;c<g;c++){for(o=4*(w*g+c),h=i=r=n=t=0;h<m;h++)for(u=0;u<m;u++)s=c+u-v,(a=w+h-v)<0||y<=a||s<0||g<=s||(l=p[h*m+u],t+=f[s=4*(a*g+s)]*l,n+=f[1+s]*l,r+=f[2+s]*l,C||(i+=f[3+s]*l));b[o]=t,b[1+o]=n,b[2+o]=r,b[3+o]=C?f[3+o]:i}e.imageData=d},getUniformLocations:function(e,t){return{uMatrix:e.getUniformLocation(t,"uMatrix"),uOpaque:e.getUniformLocation(t,"uOpaque"),uHalfSize:e.getUniformLocation(t,"uHalfSize"),uSize:e.getUniformLocation(t,"uSize")}},sendUniformData:function(e,t){e.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.Grayscale=e(n.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(e){for(var t,n=e.imageData.data,r=n.length,i=this.mode,o=0;o<r;o+=4)"average"===i?t=(n[o]+n[o+1]+n[o+2])/3:"lightness"===i?t=(Math.min(n[o],n[o+1],n[o+2])+Math.max(n[o],n[o+1],n[o+2]))/2:"luminosity"===i&&(t=.21*n[o]+.72*n[o+1]+.07*n[o+2]),n[o]=t,n[o+1]=t,n[o+2]=t},retrieveShader:function(e){var t,n=this.type+"_"+this.mode;return e.programCache.hasOwnProperty(n)||(t=this.fragmentSource[this.mode],e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},getUniformLocations:function(e,t){return{uMode:e.getUniformLocation(t,"uMode")}},sendUniformData:function(e,t){e.uniform1i(t.uMode,1)},isNeutralState:function(){return!1}}),t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.Invert=e(n.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(e){for(var t=e.imageData.data,n=t.length,r=0;r<n;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,t){return{uInvert:e.getUniformLocation(t,"uInvert")}},sendUniformData:function(e,t){e.uniform1i(t.uInvert,this.invert)}}),t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.Image.filters;e=t.util.createClass;r.Noise=e(r.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise)for(var t,n=e.imageData.data,r=(n.length,this.noise),i=0,o=n.length;i<o;i+=4)t=(.5-Math.random())*r,n[i]+=t,n[i+1]+=t,n[i+2]+=t},getUniformLocations:function(e,t){return{uNoise:e.getUniformLocation(t,"uNoise"),uSeed:e.getUniformLocation(t,"uSeed")}},sendUniformData:function(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.Pixelate=e(n.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(e){for(var t,n,r,i,o,a,s,l,c,u,h=(e=e.imageData).data,d=e.height,f=e.width,p=0;p<d;p+=this.blocksize)for(n=0;n<f;n+=this.blocksize)for(r=h[t=4*p*f+4*n],i=h[1+t],o=h[2+t],a=h[3+t],c=Math.min(p+this.blocksize,d),u=Math.min(n+this.blocksize,f),s=p;s<c;s++)for(l=n;l<u;l++)h[t=4*s*f+4*l]=r,h[1+t]=i,h[2+t]=o,h[3+t]=a},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(e,t){return{uBlocksize:e.getUniformLocation(t,"uBlocksize"),uStepW:e.getUniformLocation(t,"uStepW"),uStepH:e.getUniformLocation(t,"uStepH")}},sendUniformData:function(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}),t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.Image.filters;e=t.util.createClass;r.RemoveColor=e(r.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){for(var n,r,i,o=e.imageData.data,a=255*this.distance,s=[(e=new t.Color(this.color).getSource())[0]-a,e[1]-a,e[2]-a],l=[e[0]+a,e[1]+a,e[2]+a],c=0;c<o.length;c+=4)n=o[c],r=o[c+1],i=o[c+2],s[0]<n&&s[1]<r&&s[2]<i&&n<l[0]&&r<l[1]&&i<l[2]&&(o[c+3]=0)},getUniformLocations:function(e,t){return{uLow:e.getUniformLocation(t,"uLow"),uHigh:e.getUniformLocation(t,"uHigh")}},sendUniformData:function(e,n){var r=new t.Color(this.color).getSource(),i=parseFloat(this.distance),o=[0+r[0]/255-i,0+r[1]/255-i,0+r[2]/255-i,1];i=[r[0]/255+i,r[1]/255+i,r[2]/255+i,1];e.uniform4fv(n.uLow,o),e.uniform4fv(n.uHigh,i)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),t.Image.filters.RemoveColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t,n=e.fabric||(e.fabric={}),r=n.Image.filters,i=n.util.createClass,o={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(t in o)r[t]=i(r.ColorMatrix,{type:t,matrix:o[t],mainParameter:!1,colorsOnly:!0}),n.Image.filters[t].fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(){"use strict";var e=t.fabric,n=e.Image.filters,r=e.util.createClass;n.BlendColor=r(n.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(e){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[e]+"}\n}"},retrieveShader:function(e){var t,n=this.type+"_"+this.mode;return e.programCache.hasOwnProperty(n)||(t=this.buildSource(this.mode),e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyTo2d:function(t){for(var n,r,i,o=t.imageData.data,a=o.length,s=1-this.alpha,l=(t=new e.Color(this.color).getSource())[0]*this.alpha,c=t[1]*this.alpha,u=t[2]*this.alpha,h=0;h<a;h+=4)switch(n=o[h],r=o[h+1],i=o[h+2],this.mode){case"multiply":o[h]=n*l/255,o[h+1]=r*c/255,o[h+2]=i*u/255;break;case"screen":o[h]=255-(255-n)*(255-l)/255,o[h+1]=255-(255-r)*(255-c)/255,o[h+2]=255-(255-i)*(255-u)/255;break;case"add":o[h]=n+l,o[h+1]=r+c,o[h+2]=i+u;break;case"diff":case"difference":o[h]=Math.abs(n-l),o[h+1]=Math.abs(r-c),o[h+2]=Math.abs(i-u);break;case"subtract":o[h]=n-l,o[h+1]=r-c,o[h+2]=i-u;break;case"darken":o[h]=Math.min(n,l),o[h+1]=Math.min(r,c),o[h+2]=Math.min(i,u);break;case"lighten":o[h]=Math.max(n,l),o[h+1]=Math.max(r,c),o[h+2]=Math.max(i,u);break;case"overlay":o[h]=l<128?2*n*l/255:255-2*(255-n)*(255-l)/255,o[h+1]=c<128?2*r*c/255:255-2*(255-r)*(255-c)/255,o[h+2]=u<128?2*i*u/255:255-2*(255-i)*(255-u)/255;break;case"exclusion":o[h]=l+n-2*l*n/255,o[h+1]=c+r-2*c*r/255,o[h+2]=u+i-2*u*i/255;break;case"tint":o[h]=l+n*s,o[h+1]=c+r*s,o[h+2]=u+i*s}},getUniformLocations:function(e,t){return{uColor:e.getUniformLocation(t,"uColor")}},sendUniformData:function(t,n){var r=new e.Color(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,t.uniform4fv(n.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(),function(){"use strict";var e=t.fabric,n=e.Image.filters,r=e.util.createClass;n.BlendImage=r(n.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(e){var t=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(t)||(e.programCache[t]=this.createProgram(e.context,n)),e.programCache[t]},applyToWebGL:function(e){var t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(t,t.TEXTURE1)},createTexture:function(e,t){return e.getCachedTexture(t.cacheKey,t._element)},calculateMatrix:function(){var e=this.image,t=e._element.width,n=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]},applyTo2d:function(t){var n,r,i,o,a,s,l,c,u=t.imageData,h=t.filterBackend.resources,d=u.data,f=d.length,p=u.width,m=u.height;t=this.image;h.blendImage||(h.blendImage=e.util.createCanvasElement()),h=(u=h.blendImage).getContext("2d"),u.width!==p||u.height!==m?(u.width=p,u.height=m):h.clearRect(0,0,p,m),h.setTransform(t.scaleX,0,0,t.scaleY,t.left,t.top),h.drawImage(t._element,0,0,p,m);for(var v=h.getImageData(0,0,p,m).data,g=0;g<f;g+=4)switch(a=d[g],s=d[g+1],l=d[g+2],c=d[g+3],n=v[g],r=v[g+1],i=v[g+2],o=v[g+3],this.mode){case"multiply":d[g]=a*n/255,d[g+1]=s*r/255,d[g+2]=l*i/255,d[g+3]=c*o/255;break;case"mask":d[g+3]=o}},getUniformLocations:function(e,t){return{uTransformMatrix:e.getUniformLocation(t,"uTransformMatrix"),uImage:e.getUniformLocation(t,"uImage")}},sendUniformData:function(e,t){var n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,n){e.Image.fromObject(t.image,(function(r){var i=e.util.object.clone(t);i.image=r,n(new e.Image.filters.BlendImage(i))}))}}(),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=Math.pow,r=Math.floor,i=Math.sqrt,o=Math.abs,a=Math.round,s=Math.sin,l=Math.ceil,c=t.Image.filters;e=t.util.createClass;c.Resize=e(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(e,t){return{uDelta:e.getUniformLocation(t,"uDelta"),uTaps:e.getUniformLocation(t,"uTaps")}},sendUniformData:function(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)},retrieveShader:function(e){var t=this.getFilterWindow(),n=this.type+"_"+t;return e.programCache.hasOwnProperty(n)||(t=this.generateShader(t),e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},getFilterWindow:function(){var e=this.tempScale;return Math.ceil(this.lanczosLobes/e)},getTaps:function(){for(var e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),r=new Array(n),i=1;i<=n;i++)r[i-1]=e(i*t);return r},generateShader:function(e){for(var t=new Array(e),n=this.fragmentSourceTOP,r=1;r<=e;r++)t[r-1]=r+".0 * uDelta";return n+="uniform float uTaps["+e+"];\n",n+="void main() {\n",n+="  vec4 color = texture2D(uTexture, vTexCoord);\n",n+="  float sum = 1.0;\n",t.forEach((function(e,t){n+="  color += texture2D(uTexture, vTexCoord + "+e+") * uTaps["+t+"];\n",n+="  color += texture2D(uTexture, vTexCoord - "+e+") * uTaps["+t+"];\n",n+="  sum += 2.0 * uTaps["+t+"];\n"})),n+="  gl_FragColor = color / sum;\n",n+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(e){e.webgl?(e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceHeight=e.destinationHeight):this.applyTo2d(e)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(e){return function(t){if(e<=t||t<=-e)return 0;if(t<1.1920929e-7&&-1.1920929e-7<t)return 1;var n=(t*=Math.PI)/e;return s(t)/t*s(n)/n}},applyTo2d:function(e){var t=e.imageData,n=this.scaleX,r=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/r;var i,o=t.width;t=t.height,n=a(o*n),r=a(t*r);"sliceHack"===this.resizeType?i=this.sliceByTwo(e,o,t,n,r):"hermite"===this.resizeType?i=this.hermiteFastResize(e,o,t,n,r):"bilinear"===this.resizeType?i=this.bilinearFiltering(e,o,t,n,r):"lanczos"===this.resizeType&&(i=this.lanczosResize(e,o,t,n,r)),e.imageData=i},sliceByTwo:function(e,n,i,o,a){var s,l,c=e.imageData,u=!1,h=!1,d=.5*n,f=.5*i,p=0,m=0,v=n,g=0;for((e=t.filterBackend.resources).sliceByTwo||(e.sliceByTwo=document.createElement("canvas")),((s=e.sliceByTwo).width<1.5*n||s.height<i)&&(s.width=1.5*n,s.height=i),(l=s.getContext("2d")).clearRect(0,0,1.5*n,i),l.putImageData(c,0,0),o=r(o),a=r(a);!u||!h;)i=f,o<r(.5*(n=d))?d=r(.5*d):(d=o,u=!0),a<r(.5*f)?f=r(.5*f):(f=a,h=!0),l.drawImage(s,p,m,n,i,v,g,d,f),p=v,m=g,g+=f;return l.getImageData(p,m,o,a)},lanczosResize:function(e,t,a,s,c){var u=e.imageData.data,h=e.ctx.createImageData(s,c),d=h.data,f=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,m=this.rcpScaleY,v=2/this.rcpScaleX,g=2/this.rcpScaleY,y=l(p*this.lanczosLobes/2),b=l(m*this.lanczosLobes/2),C={},w={},E={};return function e(l){var S,O,x,_,k,T,N,P,I,R;for(w.x=(l+.5)*p,E.x=r(w.x),S=0;S<c;S++){for(w.y=(S+.5)*m,E.y=r(w.y),P=N=T=k=_=0,O=E.x-y;O<=E.x+y;O++)if(!(O<0||t<=O)){I=r(1e3*o(O-w.x)),C[I]||(C[I]={});for(var j=E.y-b;j<=E.y+b;j++)j<0||a<=j||(R=r(1e3*o(j-w.y)),C[I][R]||(C[I][R]=f(i(n(I*v,2)+n(R*g,2))/1e3)),0<(R=C[I][R])&&(_+=R,k+=R*u[x=4*(j*t+O)],T+=R*u[x+1],N+=R*u[x+2],P+=R*u[x+3]))}d[x=4*(S*s+l)]=k/_,d[x+1]=T/_,d[x+2]=N/_,d[x+3]=P/_}return++l<s?e(l):h}(0)},bilinearFiltering:function(e,t,n,i,o){for(var a,s,l,c,u,h,d,f,p,m,v,g=0,y=this.rcpScaleX,b=this.rcpScaleY,C=4*(t-1),w=e.imageData.data,E=(e=e.ctx.createImageData(i,o)).data,S=0;S<o;S++)for(d=0;d<i;d++)for(f=y*d-(u=r(y*d)),p=b*S-(h=r(b*S)),v=4*(h*t+u),m=0;m<4;m++)a=w[v+m],s=w[4+v+m],l=w[v+C+m],c=w[v+C+4+m],E[g++]=a*(1-f)*(1-p)+s*f*(1-p)+l*p*(1-f)+c*f*p;return e},hermiteFastResize:function(e,t,n,a,s){for(var c=this.rcpScaleX,u=this.rcpScaleY,h=l(c/2),d=l(u/2),f=e.imageData.data,p=(e=e.ctx.createImageData(a,s)).data,m=0;m<s;m++)for(var v=0;v<a;v++){for(var g=4*(v+m*a),y=0,b=0,C=0,w=0,E=0,S=0,O=0,x=(m+.5)*u,_=r(m*u);_<(m+1)*u;_++)for(var k=o(x-(_+.5))/d,T=(v+.5)*c,N=k*k,P=r(v*c);P<(v+1)*c;P++){var I=o(T-(P+.5))/h,R=i(N+I*I);1<R&&R<-1||0<(y=2*R*R*R-3*R*R+1)&&(O+=y*f[3+(I=4*(P+_*t))],C+=y,w+=(y=f[3+I]<255?y*f[3+I]/250:y)*f[I],E+=y*f[1+I],S+=y*f[2+I],b+=y)}p[g]=w/b,p[1+g]=E/b,p[2+g]=S/b,p[3+g]=O/C}return e},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),t.Image.filters.Resize.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.Contrast=e(n.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(0!==this.contrast)for(var t=e.imageData.data,n=t.length,r=259*((e=Math.floor(255*this.contrast))+255)/(255*(259-e)),i=0;i<n;i+=4)t[i]=r*(t[i]-128)+128,t[i+1]=r*(t[i+1]-128)+128,t[i+2]=r*(t[i+2]-128)+128},getUniformLocations:function(e,t){return{uContrast:e.getUniformLocation(t,"uContrast")}},sendUniformData:function(e,t){e.uniform1f(t.uContrast,this.contrast)}}),t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.Saturation=e(n.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(0!==this.saturation)for(var t,n=e.imageData.data,r=n.length,i=-this.saturation,o=0;o<r;o+=4)t=Math.max(n[o],n[o+1],n[o+2]),n[o]+=t!==n[o]?(t-n[o])*i:0,n[o+1]+=t!==n[o+1]?(t-n[o+1])*i:0,n[o+2]+=t!==n[o+2]?(t-n[o+2])*i:0},getUniformLocations:function(e,t){return{uSaturation:e.getUniformLocation(t,"uSaturation")}},sendUniformData:function(e,t){e.uniform1f(t.uSaturation,-this.saturation)}}),t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.Vibrance=e(n.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(0!==this.vibrance)for(var t,n,r=e.imageData.data,i=r.length,o=-this.vibrance,a=0;a<i;a+=4)t=Math.max(r[a],r[a+1],r[a+2]),n=(r[a]+r[a+1]+r[a+2])/3,n=2*Math.abs(t-n)/255*o,r[a]+=t!==r[a]?(t-r[a])*n:0,r[a+1]+=t!==r[a+1]?(t-r[a+1])*n:0,r[a+2]+=t!==r[a+2]?(t-r[a+2])*n:0},getUniformLocations:function(e,t){return{uVibrance:e.getUniformLocation(t,"uVibrance")}},sendUniformData:function(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}}),t.Image.filters.Vibrance.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.Blur=e(n.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var n,r,i=e.filterBackend.resources,o=e.imageData.width,a=e.imageData.height;i.blurLayer1||(i.blurLayer1=t.util.createCanvasElement(),i.blurLayer2=t.util.createCanvasElement()),n=i.blurLayer1,r=i.blurLayer2,n.width===o&&n.height===a||(r.width=n.width=o,r.height=n.height=a);var s,l,c,u,h=n.getContext("2d"),d=r.getContext("2d"),f=.06*this.blur*.5;for(h.putImageData(e.imageData,0,0),d.clearRect(0,0,o,a),u=-15;u<=15;u++)c=f*(l=u/15)*o+(s=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(n,c,s),h.drawImage(r,0,0),d.globalAlpha=1,d.clearRect(0,0,r.width,r.height);for(u=-15;u<=15;u++)c=f*(l=u/15)*a+(s=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(n,s,c),h.drawImage(r,0,0),d.globalAlpha=1,d.clearRect(0,0,r.width,r.height);return e.ctx.drawImage(n,0,0),e=e.ctx.getImageData(0,0,n.width,n.height),h.globalAlpha=1,h.clearRect(0,0,n.width,n.height),e},getUniformLocations:function(e,t){return{delta:e.getUniformLocation(t,"uDelta")}},sendUniformData:function(e,t){var n=this.chooseRightDelta();e.uniform2fv(t.delta,n)},chooseRightDelta:function(){var e=1,t=[0,0];return this.horizontal?1<this.aspectRatio&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),e=e*this.blur*.12,this.horizontal?t[0]=e:t[1]=e,t}}),n.Blur.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.Gamma=e(n.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var t,n=e.imageData.data,r=(e=this.gamma,n.length),i=1/e[0],o=1/e[1],a=1/e[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),t=0,r=256;t<r;t++)this.rVals[t]=255*Math.pow(t/255,i),this.gVals[t]=255*Math.pow(t/255,o),this.bVals[t]=255*Math.pow(t/255,a);for(t=0,r=n.length;t<r;t+=4)n[t]=this.rVals[n[t]],n[t+1]=this.gVals[n[t+1]],n[t+2]=this.bVals[n[t+2]]},getUniformLocations:function(e,t){return{uGamma:e.getUniformLocation(t,"uGamma")}},sendUniformData:function(e,t){e.uniform3fv(t.uGamma,this.gamma)}}),t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.Composed=e(n.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach((function(t){t.applyTo(e)}))},toObject:function(){return t.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(e){return e.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(e){return!e.isNeutralState()}))}}),t.Image.filters.Composed.fromObject=function(e,n){return e=(e.subFilters||[]).map((function(e){return new t.Image.filters[e.type](e)})),e=new t.Image.filters.Composed({subFilters:e}),n&&n(e),e}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters;e=t.util.createClass;n.HueRotation=e(n.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,n=t.util.cos(e),r=t.util.sin(e);e=Math.sqrt(1/3)*r,r=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+r/3,this.matrix[1]=1/3*r-e,this.matrix[2]=1/3*r+e,this.matrix[5]=1/3*r+e,this.matrix[6]=n+1/3*r,this.matrix[7]=1/3*r-e,this.matrix[10]=1/3*r-e,this.matrix[11]=1/3*r+e,this.matrix[12]=n+1/3*r},isNeutralState:function(e){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,e)}}),t.Image.filters.HueRotation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t,n=e.fabric||(e.fabric={}),r=n.util.object.clone;n.Text?n.warn("fabric.Text is already defined"):(t="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" "),n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:n.Object.prototype.stateProperties.concat(t),cacheProperties:n.Object.prototype.cacheProperties.concat(t),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,t){this.styles=t&&t.styles||{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",t),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=n.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext("2d")),n._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,t,n,r,i,o=0,a=this._textLines.length;o<a;o++)if(("justify"===this.textAlign||o!==a-1&&!this.isEndOfWrapping(o))&&(t=0,n=this._textLines[o],(e=this.getLineWidth(o))<this.width&&(i=this.textLines[o].match(this._reSpacesAndTabs))))for(var s=i.length,l=(this.width-e)/s,c=0,u=n.length;c<=u;c++)r=this.__charBounds[o][c],this._reSpaceAndTab.test(n[c])?(r.width+=l,r.kernedWidth+=l,r.left+=t,t+=l):r.left+=t},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e},_render:function(e){var t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){"stroke"===this.paintFirst?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,t,n){e.textBaseline="alphabetic",e.font=this._getFontDeclaration(t,n)},calcTextWidth:function(){for(var e=this.getLineWidth(0),t=1,n=this._textLines.length;t<n;t++){var r=this.getLineWidth(t);e<r&&(e=r)}return e},_renderTextLine:function(e,t,n,r,i,o){this._renderChars(e,t,n,r,i,o)},_renderTextLinesBackground:function(e){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var t,n,r,i,o=e.fillStyle,a=this._getLeftOffset(),s=this._getTopOffset(),l=0,c=0,u=this.path,h=0,d=this._textLines.length;h<d;h++)if(t=this.getHeightOfLine(h),this.textBackgroundColor||this.styleHas("textBackgroundColor",h)){for(var f=this._textLines[h],p=this._getLineLeftOffset(h),m=(c=0,l=0,this.getValueOfPropertyAt(h,0,"textBackgroundColor")),v=0,g=f.length;v<g;v++)n=this.__charBounds[h][v],r=this.getValueOfPropertyAt(h,v,"textBackgroundColor"),u?(e.save(),e.translate(n.renderLeft,n.renderTop),e.rotate(n.angle),(e.fillStyle=r)&&e.fillRect(-n.width/2,-t/this.lineHeight*(1-this._fontSizeFraction),n.width,t/this.lineHeight),e.restore()):r!==m?(i=a+p+l,"rtl"===this.direction&&(i=this.width-i-c),(e.fillStyle=m)&&e.fillRect(i,s,c,t/this.lineHeight),l=n.left,c=n.width,m=r):c+=n.kernedWidth;r&&!u&&(i=a+p+l,"rtl"===this.direction&&(i=this.width-i-c),e.fillStyle=r,e.fillRect(i,s,c,t/this.lineHeight)),s+=t}else s+=t;e.fillStyle=o,this._removeShadow(e)}},getFontCache:function(e){var t=e.fontFamily.toLowerCase();return n.charWidthsCache[t]||(n.charWidthsCache[t]={}),(t=n.charWidthsCache[t])[e=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase()]||(t[e]={}),t[e]},_measureChar:function(e,t,n,r){var i,o,a,s,l,c=this.getFontCache(t),u=n+e,h=this._getFontDeclaration(t)===this._getFontDeclaration(r);r=t.fontSize/this.CACHE_FONT_SIZE;return n&&void 0!==c[n]&&(a=c[n]),void 0!==c[e]&&(s=i=c[e]),h&&void 0!==c[u]&&(s=(o=c[u])-a),void 0!==i&&void 0!==a&&void 0!==o||(l=this.getMeasuringContext(),this._setTextStyles(l,t,!0)),void 0===i&&(s=i=l.measureText(e).width,c[e]=i),void 0===a&&h&&n&&(a=l.measureText(n).width,c[n]=a),h&&void 0===o&&(o=l.measureText(u).width,s=(c[u]=o)-a),{width:i*r,kernedWidth:s*r}},getHeightOfChar:function(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")},measureLine:function(e){return e=this._measureLine(e),0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(e){var t,r,i,o,a,s,l=0,c=this._textLines[e],u=new Array(c.length),h=0,d=this.path,f="right"===this.pathSide;for(this.__charBounds[e]=u,t=0;t<c.length;t++)r=c[t],o=this._getGraphemeBox(r,e,t,i),l+=(u[t]=o).kernedWidth,i=r;if(u[t]={left:o?o.left+o.width:0,width:0,kernedWidth:0,height:this.fontSize},d){switch(s=d.segmentsInfo[d.segmentsInfo.length-1].length,(a=n.util.getPointOnPath(d.path,0,d.segmentsInfo)).x+=d.pathOffset.x,a.y+=d.pathOffset.y,this.textAlign){case"left":h=f?s-l:0;break;case"center":h=(s-l)/2;break;case"right":h=f?0:s-l}for(h+=this.pathStartOffset*(f?-1:1),t=f?c.length-1:0;f?0<=t:t<c.length;f?t--:t++)o=u[t],s<h?h%=s:h<0&&(h+=s),this._setGraphemeOnPath(h,o,a),h+=o.kernedWidth}return{width:l,numOfSpaces:0}},_setGraphemeOnPath:function(e,t,r){var i=e+t.kernedWidth/2;e=this.path,e=n.util.getPointOnPath(e.path,i,e.segmentsInfo);t.renderLeft=e.x-r.x,t.renderTop=e.y-r.y,t.angle=e.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(e,t,n,r,i){var o=this.getCompleteStyleDeclaration(t,n),a=r?this.getCompleteStyleDeclaration(t,n-1):{},s=this._measureChar(e,o,r,a);e=s.kernedWidth,r=s.width;return 0!==this.charSpacing&&(r+=a=this._getWidthOfCharSpacing(),e+=a),o={width:r,left:0,height:o.fontSize,kernedWidth:e,deltaY:o.deltaY},0<n&&!i&&(n=this.__charBounds[t][n-1],o.left=n.left+n.width+s.kernedWidth-s.width),o},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var t=this._textLines[e],n=this.getHeightOfChar(e,0),r=1,i=t.length;r<i;r++)n=Math.max(this.getHeightOfChar(e,r),n);return this.__lineHeights[e]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,t=0,n=0,r=this._textLines.length;n<r;n++)e=this.getHeightOfLine(n),t+=n===r-1?e/this.lineHeight:e;return t},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,t){e.save();for(var n=0,r=this._getLeftOffset(),i=this._getTopOffset(),o=0,a=this._textLines.length;o<a;o++){var s=this.getHeightOfLine(o),l=s/this.lineHeight,c=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],r+c,i+n+l,o),n+=s}e.restore()},_renderTextFill:function(e){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,t,n,r,i,o){var a,s,l,c,u=this.getHeightOfLine(o),h=-1!==this.textAlign.indexOf("justify"),d="",f=0,p=this.path,m=!h&&0===this.charSpacing&&this.isEmptyStyles(o)&&!p,v="ltr"===this.direction,g="ltr"===this.direction?1:-1;if(t.save(),i-=u*this._fontSizeFraction/this.lineHeight,m)return t.canvas.setAttribute("dir",v?"ltr":"rtl"),t.direction=v?"ltr":"rtl",t.textAlign=v?"left":"right",this._renderChar(e,t,o,0,n.join(""),r,i,u),void t.restore();for(var y=0,b=n.length-1;y<=b;y++)l=y===b||this.charSpacing||p,d+=n[y],c=this.__charBounds[o][y],0===f?(r+=g*(c.kernedWidth-c.width),f+=c.width):f+=c.kernedWidth,(l=!(!h||l||!this._reSpaceAndTab.test(n[y]))||l)||(a=a||this.getCompleteStyleDeclaration(o,y),s=this.getCompleteStyleDeclaration(o,y+1),l=this._hasStyleChanged(a,s)),l&&(p?(t.save(),t.translate(c.renderLeft,c.renderTop),t.rotate(c.angle),this._renderChar(e,t,o,y,d,-f/2,0,u),t.restore()):(c=r,t.canvas.setAttribute("dir",v?"ltr":"rtl"),t.direction=v?"ltr":"rtl",t.textAlign=v?"left":"right",this._renderChar(e,t,o,y,d,c,i,u)),d="",a=s,r+=g*f,f=0);t.restore()},_applyPatternGradientTransformText:function(e){var t,r=n.util.createCanvasElement(),i=this.width+this.strokeWidth,o=this.height+this.strokeWidth;return r.width=i,r.height=o,(t=r.getContext("2d")).beginPath(),t.moveTo(0,0),t.lineTo(i,0),t.lineTo(i,o),t.lineTo(0,o),t.closePath(),t.translate(i/2,o/2),t.fillStyle=e.toLive(t),this._applyPatternGradientTransform(t,e),t.fill(),t.createPattern(r,"no-repeat")},handleFiller:function(e,t,n){var r,i;return n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?(r=-this.width/2,i=-this.height/2,e.translate(r,i),e[t]=this._applyPatternGradientTransformText(n),{offsetX:r,offsetY:i}):(e[t]=n.toLive(e,this),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,t){return e.lineWidth=t.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",t.stroke)},_setFillStyles:function(e,t){return this.handleFiller(e,"fillStyle",t.fill)},_renderChar:function(e,t,n,r,i,o,a){var s,l,c=this._getStyleDeclaration(n,r);n=this.getCompleteStyleDeclaration(n,r),r="fillText"===e&&n.fill;((e="strokeText"===e&&n.stroke&&n.strokeWidth)||r)&&(t.save(),r&&(s=this._setFillStyles(t,n)),e&&(l=this._setStrokeStyles(t,n)),t.font=this._getFontDeclaration(n),c&&c.textBackgroundColor&&this._removeShadow(t),c&&c.deltaY&&(a+=c.deltaY),r&&t.fillText(i,o-s.offsetX,a-s.offsetY),e&&t.strokeText(i,o-l.offsetX,a-l.offsetY),t.restore())},setSuperscript:function(e,t){return this._setScript(e,t,this.superscript)},setSubscript:function(e,t){return this._setScript(e,t,this.subscript)},_setScript:function(e,t,n){var r=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize");r=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),n={fontSize:i*n.size,deltaY:r+i*n.baseline};return this.setSelectionStyles(n,e,t),this},_hasStyleChanged:function(e,t){return e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.deltaY!==t.deltaY},_hasStyleChangedForSvg:function(e,t){return this._hasStyleChanged(e,t)||e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough},_getLineLeftOffset:function(e){var t=this.getLineWidth(e),n=this.width-t,r=this.textAlign,i=this.direction;t=0,e=this.isEndOfWrapping(e);return"justify"===r||"justify-center"===r&&!e||"justify-right"===r&&!e||"justify-left"===r&&!e?0:("center"===r&&(t=n/2),"right"===r&&(t=n),"justify-center"===r&&(t=n/2),"justify-right"===r&&(t=n),"rtl"===i&&(t-=n),t)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return(e=e||this.hasStateChanged("_dimensionAffectingProps"))&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){if(this.__lineWidths[e])return this.__lineWidths[e];var t=""===this._textLines[e]?0:this.measureLine(e).width;return this.__lineWidths[e]=t},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,t,n){return((t=this._getStyleDeclaration(e,t))&&void 0!==t[n]?t:this)[n]},_renderTextDecoration:function(e,t){if(this[t]||this.styleHas(t)){for(var n,r=this._getLeftOffset(),i=this._getTopOffset(),o=this.path,a=this._getWidthOfCharSpacing(),s=this.offsets[t],l=0,c=this._textLines.length;l<c;l++)if(n=this.getHeightOfLine(l),this[t]||this.styleHas(t,l)){for(var u=this._textLines[l],h=n/this.lineHeight,d=this._getLineLeftOffset(l),f=0,p=0,m=this.getValueOfPropertyAt(l,0,t),v=this.getValueOfPropertyAt(l,0,"fill"),g=i+h*(1-this._fontSizeFraction),y=this.getHeightOfChar(l,0),b=this.getValueOfPropertyAt(l,0,"deltaY"),C=0,w=u.length;C<w;C++){var E=this.__charBounds[l][C],S=this.getValueOfPropertyAt(l,C,t),O=this.getValueOfPropertyAt(l,C,"fill"),x=this.getHeightOfChar(l,C),_=this.getValueOfPropertyAt(l,C,"deltaY");o&&S&&O?(e.save(),e.fillStyle=v,e.translate(E.renderLeft,E.renderTop),e.rotate(E.angle),e.fillRect(-E.kernedWidth/2,s*x+_,E.kernedWidth,this.fontSize/15),e.restore()):(S!==m||O!==v||x!==y||_!==b)&&0<p?(k=r+d+f,"rtl"===this.direction&&(k=this.width-k-p),m&&v&&(e.fillStyle=v,e.fillRect(k,g+s*y+b,p,this.fontSize/15)),f=E.left,p=E.width,m=S,v=O,y=x,b=_):p+=E.kernedWidth}var k=r+d+f;"rtl"===this.direction&&(k=this.width-k-p),e.fillStyle=O,S&&O&&e.fillRect(k,g+s*y+b,p-a,this.fontSize/15),i+=n}else i+=n;this._removeShadow(e)}},_getFontDeclaration:function(e,t){var r=e||this,i=this.fontFamily;e=-1<n.Text.genericFonts.indexOf(i.toLowerCase()),e=void 0===i||-1<i.indexOf("'")||-1<i.indexOf(",")||-1<i.indexOf('"')||e?r.fontFamily:'"'+r.fontFamily+'"';return[n.isLikelyNode?r.fontWeight:r.fontStyle,n.isLikelyNode?r.fontStyle:r.fontWeight,t?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",e].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var t=e.split(this._reNewline),r=new Array(t.length),i=["\n"],o=[],a=0;a<t.length;a++)r[a]=n.util.string.graphemeSplit(t[a]),o=o.concat(r[a],i);return o.pop(),{_unwrappedLines:r,lines:t,graphemeText:o,graphemeLines:r}},toObject:function(e){return e=t.concat(e),(e=this.callSuper("toObject",e)).styles=r(this.styles,!0),e.path&&(e.path=this.path.toObject()),e},set:function(e,t){this.callSuper("set",e,t);var n=!1,r=!1;if("object"==typeof e)for(var i in e)"path"===i&&this.setPathInfo(),n=n||-1!==this._dimensionAffectingProps.indexOf(i),r=r||"path"===i;else n=-1!==this._dimensionAffectingProps.indexOf(e),r="path"===e;return r&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(e,t,i){if(!e)return t(null);var o=n.parseAttributes(e,n.Text.ATTRIBUTE_NAMES),a=o.textAnchor||"left";(i=n.util.object.extend(i?r(i):{},o)).top=i.top||0,i.left=i.left||0,o.textDecoration&&(-1!==(s=o.textDecoration).indexOf("underline")&&(i.underline=!0),-1!==s.indexOf("overline")&&(i.overline=!0),-1!==s.indexOf("line-through")&&(i.linethrough=!0),delete i.textDecoration),"dx"in o&&(i.left+=o.dx),"dy"in o&&(i.top+=o.dy),"fontSize"in i||(i.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var s="";"textContent"in e?s=e.textContent:"firstChild"in e&&null!==e.firstChild&&"data"in e.firstChild&&null!==e.firstChild.data&&(s=e.firstChild.data),s=s.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),o=i.strokeWidth,i.strokeWidth=0,s=(e=new n.Text(s,i)).getScaledHeight()/e.height,i=((e.height+e.strokeWidth)*e.lineHeight-e.height)*s,s=e.getScaledHeight()+i,i=0,"center"===a&&(i=e.getScaledWidth()/2),"right"===a&&(i=e.getScaledWidth()),e.set({left:e.left-i,top:e.top-(s-e.fontSize*(.07+e._fontSizeFraction))/e.lineHeight,strokeWidth:void 0!==o?o:1}),t(e)},n.Text.fromObject=function(e,t){var i=r(e),o=e.path;return delete i.path,n.Object._fromObject("Text",i,(function(e){o?n.Object._fromObject("Path",o,(function(n){e.set("path",n),t(e)}),"path"):t(e)}),"text")},n.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],n.util.createAccessors&&n.util.createAccessors(n.Text))}(t),X.util.object.extend(X.Text.prototype,{isEmptyStyles:function(e){if(!this.styles)return!0;if(void 0!==e&&!this.styles[e])return!0;var t,n=void 0===e?this.styles:{line:this.styles[e]};for(t in n)for(var r in n[t])for(var i in n[t][r])return!1;return!0},styleHas:function(e,t){if(!this.styles||!e||""===e)return!1;if(void 0!==t&&!this.styles[t])return!1;var n,r=void 0===t?this.styles:{0:this.styles[t]};for(n in r)for(var i in r[n])if(void 0!==r[n][i][e])return!0;return!1},cleanStyle:function(e){if(!this.styles||!e||""===e)return!1;var t,n,r,i,o=this.styles,a=0,s=!0,l=0;for(r in o){for(var c in t=0,o[r])a++,(i=o[r][c]).hasOwnProperty(e)?(n?i[e]!==n&&(s=!1):n=i[e],i[e]===this[e]&&delete i[e]):s=!1,0!==Object.keys(i).length?t++:delete o[r][c];0===t&&delete o[r]}for(var u=0;u<this._textLines.length;u++)l+=this._textLines[u].length;s&&a===l&&(this[e]=n,this.removeStyle(e))},removeStyle:function(e){if(this.styles&&e&&""!==e){var t,n,r,i=this.styles;for(n in i){for(r in t=i[n])delete t[r][e],0===Object.keys(t[r]).length&&delete t[r];0===Object.keys(t).length&&delete i[n]}}},_extendStyles:function(e,t){e=this.get2DCursorLocation(e),this._getLineStyle(e.lineIndex)||this._setLineStyle(e.lineIndex),this._getStyleDeclaration(e.lineIndex,e.charIndex)||this._setStyleDeclaration(e.lineIndex,e.charIndex,{}),X.util.object.extend(this._getStyleDeclaration(e.lineIndex,e.charIndex),t)},get2DCursorLocation:function(e,t){void 0===e&&(e=this.selectionStart);for(var n=t?this._unwrappedTextLines:this._textLines,r=n.length,i=0;i<r;i++){if(e<=n[i].length)return{lineIndex:i,charIndex:e};e-=n[i].length+this.missingNewlineOffset(i)}return{lineIndex:i-1,charIndex:n[i-1].length<e?n[i-1].length:e}},getSelectionStyles:function(e,t,n){void 0===e&&(e=this.selectionStart||0),void 0===t&&(t=this.selectionEnd||e);for(var r=[],i=e;i<t;i++)r.push(this.getStyleAtPosition(i,n));return r},getStyleAtPosition:function(e,t){return e=this.get2DCursorLocation(e),(t?this.getCompleteStyleDeclaration(e.lineIndex,e.charIndex):this._getStyleDeclaration(e.lineIndex,e.charIndex))||{}},setSelectionStyles:function(e,t,n){void 0===t&&(t=this.selectionStart||0),void 0===n&&(n=this.selectionEnd||t);for(var r=t;r<n;r++)this._extendStyles(r,e);return this._forceClearCache=!0,this},_getStyleDeclaration:function(e,t){return(e=this.styles&&this.styles[e])?e[t]:null},getCompleteStyleDeclaration:function(e,t){for(var n,r=this._getStyleDeclaration(e,t)||{},i={},o=0;o<this._styleProperties.length;o++)i[n=this._styleProperties[o]]=(void 0===r[n]?this:r)[n];return i},_setStyleDeclaration:function(e,t,n){this.styles[e][t]=n},_deleteStyleDeclaration:function(e,t){delete this.styles[e][t]},_getLineStyle:function(e){return!!this.styles[e]},_setLineStyle:function(e){this.styles[e]={}},_deleteLineStyle:function(e){delete this.styles[e]}}),X.IText=X.util.createClass(X.Text,X.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(e,t){this.callSuper("initialize",e,t),this.initBehavior()},setSelectionStart:function(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)},setSelectionEnd:function(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)},_updateAndFire:function(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(e){this.clearContextTop(),this.callSuper("render",e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(e){this.callSuper("_render",e)},clearContextTop:function(e){var t,n;this.isEditing&&this.canvas&&this.canvas.contextTop&&(t=this.canvas.contextTop,n=this.canvas.viewportTransform,t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t),this._clearTextArea(t),e||t.restore())},renderCursorOrSelection:function(){var e,t;this.isEditing&&this.canvas&&this.canvas.contextTop&&(e=this._getCursorBoundaries(),t=this.canvas.contextTop,this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),t.restore())},_clearTextArea:function(e){var t=this.width+4,n=this.height+4;e.clearRect(-t/2,-n/2,t,n)},_getCursorBoundaries:function(e){return void 0===e&&(e=this.selectionStart),{left:this._getLeftOffset(),top:this._getTopOffset(),leftOffset:(e=this._getCursorBoundariesOffsets(e)).left,topOffset:e.top}},_getCursorBoundariesOffsets:function(e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var t=0,n=0,r=this.get2DCursorLocation(e),i=r.charIndex,o=r.lineIndex,a=0;a<o;a++)t+=this.getHeightOfLine(a);return e=this._getLineLeftOffset(o),(r=this.__charBounds[o][i])&&(n=r.left),0!==this.charSpacing&&i===this._textLines[o].length&&(n-=this._getWidthOfCharSpacing()),n={top:t,left:e+(0<n?n:0)},"rtl"===this.direction&&(n.left*=-1),this.cursorOffsetCache=n,this.cursorOffsetCache},renderCursor:function(e,t){var n=(s=this.get2DCursorLocation()).lineIndex,r=0<s.charIndex?s.charIndex-1:0,i=this.getValueOfPropertyAt(n,r,"fontSize"),o=this.scaleX*this.canvas.getZoom(),a=this.cursorWidth/o,s=e.topOffset;o=this.getValueOfPropertyAt(n,r,"deltaY");s+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-i*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(e,t),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,r,"fill"),t.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-a/2,s+e.top+o,a,i)},renderSelection:function(e,t){for(var n=(this.inCompositionMode?this.hiddenTextarea:this).selectionStart,r=(this.inCompositionMode?this.hiddenTextarea:this).selectionEnd,i=-1!==this.textAlign.indexOf("justify"),o=(n=this.get2DCursorLocation(n),r=this.get2DCursorLocation(r),n.lineIndex),a=r.lineIndex,s=n.charIndex<0?0:n.charIndex,l=r.charIndex<0?0:r.charIndex,c=o;c<=a;c++){var u,h=this._getLineLeftOffset(c)||0,d=this.getHeightOfLine(c),f=0,p=0;c===o&&(f=this.__charBounds[o][s].left),o<=c&&c<a?p=i&&!this.isEndOfWrapping(c)?this.width:this.getLineWidth(c)||5:c===a&&(p=0===l?this.__charBounds[a][l].left:(m=this._getWidthOfCharSpacing(),this.__charBounds[a][l-1].left+this.__charBounds[a][l-1].width-m)),u=d,(this.lineHeight<1||c===a&&1<this.lineHeight)&&(d/=this.lineHeight);var m=e.left+h+f;h=p-f,p=d,f=0;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",p=1,f=d):t.fillStyle=this.selectionColor,"rtl"===this.direction&&(m=this.width-m-h),t.fillRect(m,e.top+e.topOffset+f,h,p),e.topOffset+=u}},getCurrentCharFontSize:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")},getCurrentCharColor:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")},_getCurrentCharIndex:function(){var e=this.get2DCursorLocation(this.selectionStart,!0),t=0<e.charIndex?e.charIndex-1:0;return{l:e.lineIndex,c:t}}}),X.IText.fromObject=function(e,t){if(Se(e),e.styles)for(var n in e.styles)for(var r in e.styles[n])Se(e.styles[n][r]);X.Object._fromObject("IText",e,t,"text")},F=X.util.object.clone,X.util.object.extend(X.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",(function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))}))},initRemovedHandler:function(){var e=this;this.on("removed",(function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],X.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))}))},_initCanvasHandlers:function(e){e._mouseUpITextHandler=function(){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.__isMousedown=!1}))},e.on("mouse:up",e._mouseUpITextHandler)},_removeCanvasHandlers:function(e){e.off("mouse:up",e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(e,t,n,r){var i={isAborted:!1,abort:function(){this.isAborted=!0}};return e.animate("_currentCursorOpacity",t,{duration:n,onComplete:function(){i.isAborted||e[r]()},onChange:function(){e.canvas&&e.selectionStart===e.selectionEnd&&e.renderCursorOrSelection()},abort:function(){return i.isAborted}}),i},_onTickComplete:function(){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){e._currentTickCompleteState=e._animateCursor(e,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(e){var t=this;e=e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){t._tick()}),e)},abortCursorAnimation:function(){var e=this._currentTickState||this._currentTickCompleteState,t=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,e&&t&&t.clearContext(t.contextTop||t.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(e){var t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&-1<n;)t++,n--;return e-t},findWordBoundaryRight:function(e){var t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t},findLineBoundaryLeft:function(e){for(var t=0,n=e-1;!/\n/.test(this._text[n])&&-1<n;)t++,n--;return e-t},findLineBoundaryRight:function(e){for(var t=0,n=e;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t},searchWordBoundary:function(e,t){for(var n=this._text,r=this._reSpace.test(n[e])?e-1:e,i=n[r],o=X.reNonWord;!o.test(i)&&0<r&&r<n.length;)i=n[r+=t];return o.test(i)&&(r+=1===t?0:1),r},selectWord:function(e){e=e||this.selectionStart;var t=this.searchWordBoundary(e,-1);e=this.searchWordBoundary(e,1);this.selectionStart=t,this.selectionEnd=e,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(e){e=e||this.selectionStart;var t=this.findLineBoundaryLeft(e);e=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=e,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(e){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll()),this},exitEditingOnOthers:function(e){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.selected=!1,e.isEditing&&e.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(e){var t,n;this.__isMousedown&&this.isEditing&&(t=this.getSelectionStartFromPointer(e.e),n=this.selectionStart,e=this.selectionEnd,(t===this.__selectionStartOnMouseDown&&n!==e||n!==t&&e!==t)&&(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===e||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection())))},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(e,t,n){var r=n.slice(0,e);r=X.util.string.graphemeSplit(r).length;return e===t?{selectionStart:r,selectionEnd:r}:(t=n.slice(e,t),{selectionStart:r,selectionEnd:r+X.util.string.graphemeSplit(t).length})},fromGraphemeToStringSelection:function(e,t,n){var r=n.slice(0,e).join("").length;return e===t?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+n.slice(e,t).join("").length}},_updateTextarea:function(){var e;this.cursorOffsetCache={},this.hiddenTextarea&&(this.inCompositionMode||(e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text),this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd),this.updateTextareaPosition())},updateFromTextArea:function(){var e;this.hiddenTextarea&&(this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition())},updateTextareaPosition:function(){var e;this.selectionStart===this.selectionEnd&&(e=this._calcTextareaPosition(),this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top)},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=(s=this.get2DCursorLocation(e)).lineIndex,r=s.charIndex,i=this.getValueOfPropertyAt(n,r,"fontSize")*this.lineHeight,o=t.leftOffset,a=this.calcTransformMatrix(),s=(e={x:t.left+o,y:t.top+t.topOffset+i},this.canvas.getRetinaScaling());t=(r=(n=this.canvas.upperCanvasEl).width/s)-i,s=(o=n.height/s)-i,r=n.clientWidth/r,o=n.clientHeight/o,e=X.util.transformPoint(e,a);return(e=X.util.transformPoint(e,this.canvas.viewportTransform)).x*=r,e.y*=o,e.x<0&&(e.x=0),e.x>t&&(e.x=t),e.y<0&&(e.y=0),e.y>s&&(e.y=s),e.x+=this.canvas._offset.left,e.y+=this.canvas._offset.top,{left:e.x+"px",top:e.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var e=this._textBeforeEdit!==this.text,t=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var e in this.styles)this._textLines[e]||delete this.styles[e]},removeStyleFromTo:function(e,t){e=this.get2DCursorLocation(e,!0),t=this.get2DCursorLocation(t,!0);var n=e.lineIndex,r=e.charIndex,i=t.lineIndex,o=t.charIndex;if(n!==i){if(this.styles[n])for(u=r;u<this._unwrappedTextLines[n].length;u++)delete this.styles[n][u];if(this.styles[i])for(u=o;u<this._unwrappedTextLines[i].length;u++)(l=this.styles[i][u])&&(this.styles[n]||(this.styles[n]={}),this.styles[n][r+u-o]=l);for(u=n+1;u<=i;u++)delete this.styles[u];this.shiftLineStyles(i,n-i)}else if(this.styles[n]){for(var a,s,l=this.styles[n],c=o-r,u=r;u<o;u++)delete l[u];for(s in this.styles[n])o<=(a=parseInt(s,10))&&(l[a-c]=l[s],delete l[s])}},shiftLineStyles:function(e,t){var n,r=F(this.styles);for(n in this.styles){var i=parseInt(n,10);e<i&&(this.styles[i+t]=r[i],r[i-t]||delete this.styles[i])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,t,n,r){var i,o,a={},s=!1,l=this._unwrappedTextLines[e].length===t;for(o in this.shiftLineStyles(e,n=n||1),this.styles[e]&&(i=this.styles[e][0===t?t:t-1]),this.styles[e]){var c=parseInt(o,10);t<=c&&(s=!0,a[c-t]=this.styles[e][o],l&&0===t||delete this.styles[e][o])}var u=!1;for(s&&!l&&(this.styles[e+n]=a,u=!0),u&&n--;0<n;)r&&r[n-1]?this.styles[e+n]={0:F(r[n-1])}:i?this.styles[e+n]={0:F(i)}:delete this.styles[e+n],n--;this._forceClearCache=!0},insertCharStyleObject:function(e,t,n,r){this.styles||(this.styles={});var i,o=this.styles[e],a=o?F(o):{};for(i in n=n||1,a){var s=parseInt(i,10);t<=s&&(o[s+n]=a[s],a[s-n]||delete o[s])}if(this._forceClearCache=!0,r)for(;n--;)Object.keys(r[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=F(r[n]));else if(o)for(var l=o[t?t-1:1];l&&n--;)this.styles[e][t+n]=F(l)},insertNewStyleBlock:function(e,t,n){for(var r=this.get2DCursorLocation(t,!0),i=[0],o=0,a=0;a<e.length;a++)"\n"===e[a]?i[++o]=0:i[o]++;for(0<i[0]&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,i[0],n),n=n&&n.slice(i[0]+1)),o&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+i[0],o),a=1;a<o;a++)0<i[a]?this.insertCharStyleObject(r.lineIndex+a,0,i[a],n):n&&(this.styles[r.lineIndex+a][0]=n[0]),n=n&&n.slice(i[a]+1);0<i[a]&&this.insertCharStyleObject(r.lineIndex+a,0,i[a],n)},setSelectionStartEndWithShift:function(e,t,n){n<=e?(t===e?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=e),this.selectionStart=n):e<n&&n<t?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=t),this.selectionEnd=n)},setSelectionInBoundaries:function(){var e=this.text.length;this.selectionStart>e?this.selectionStart=e:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>e?this.selectionEnd=e:this.selectionEnd<0&&(this.selectionEnd=0)}}),X.util.object.extend(X.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(e){var t;this.canvas&&(this.__newClickTime=+new Date,t=e.pointer,this.isTripleClick(t)&&(this.fire("tripleclick",e),this._stopEvent(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected)},isTripleClick:function(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))},tripleClickHandler:function(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(e){if(this.__isMousedown=!1,!(!this.editable||this.group||e.transform&&e.transform.actionPerformed||e.e.button&&1!==e.e.button)){if(this.canvas){var t=this.canvas._activeObject;if(t&&t!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(e){var t=this.getSelectionStartFromPointer(e),n=this.selectionStart,r=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,r,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(e){for(var t=this.getLocalPointer(e),n=0,r=0,i=0,o=0,a=0,s=0,l=this._textLines.length;s<l&&i<=t.y;s++)i+=this.getHeightOfLine(s)*this.scaleY,0<(a=s)&&(o+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));r=this._getLineLeftOffset(a)*this.scaleX,e=this._textLines[a],"rtl"===this.direction&&(t.x=this.width*this.scaleX-t.x+r);for(var c=0,u=e.length;c<u&&(n=r,(r+=this.__charBounds[a][c].kernedWidth*this.scaleX)<=t.x);c++)o++;return this._getNewSelectionStartFromOffset(t,n,r,o,u)},_getNewSelectionStartFromOffset:function(e,t,n,r,i){return e=r+((t=e.x-t)<(e=n-e.x)||e<0?0:1),(e=this.flipX?i-e:e)>this._text.length?this._text.length:e}}),X.util.object.extend(X.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=X.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var e=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+e.top+"; left: "+e.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: "+e.fontSize+";",(this.hiddenTextareaContainer||X.document.body).appendChild(this.hiddenTextarea),X.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),X.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),X.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),X.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),X.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),X.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),X.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),X.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),X.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(X.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing){var t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),33<=e.keyCode&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(e){var t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),this.isEditing){var n,r,i,o=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,a=this._text.length,s=o.length,l=s-a,c=this.selectionStart,u=this.selectionEnd,h=c!==u;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var d=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);e=c>d.selectionStart;h?(i=this._text.slice(c,u),l+=u-c):s<a&&(i=e?this._text.slice(u+l,u):this._text.slice(c,c-l)),d=o.slice(d.selectionEnd-l,d.selectionEnd),i&&i.length&&(d.length&&(n=this.getSelectionStyles(c,c+1,!1),n=d.map((function(){return n[0]}))),i=h?(r=c,u):e?(r=u-i.length,u):(r=u)+i.length,this.removeStyleFromTo(r,i)),d.length&&(t&&d.join("")===X.copiedText&&!X.disableStyleCopyPaste&&(n=X.copiedTextStyle),this.insertNewStyleBlock(d,c,n)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(e){this.compositionStart=e.target.selectionStart,this.compositionEnd=e.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(X.copiedText=this.getSelectedText(),X.disableStyleCopyPaste?X.copiedTextStyle=null:X.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(e){return e&&e.clipboardData||X.window.clipboardData},_getWidthBeforeCursor:function(e,t){var n=this._getLineLeftOffset(e);return 0<t&&(n+=(t=this.__charBounds[e][t-1]).left+t.width),n},getDownCursorOffset:function(e,t){var n=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(n);return(t=r.lineIndex)===this._textLines.length-1||e.metaKey||34===e.keyCode?this._text.length-n:(n=r.charIndex,r=this._getWidthBeforeCursor(t,n),r=this._getIndexOnLine(t+1,r),this._textLines[t].slice(n).length+r+1+this.missingNewlineOffset(t))},_getSelectionForOffset:function(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(e,t){var n=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(n);return 0===(t=r.lineIndex)||e.metaKey||33===e.keyCode?-n:(e=r.charIndex,n=this._getWidthBeforeCursor(t,e),r=this._getIndexOnLine(t-1,n),n=this._textLines[t].slice(0,e),e=this.missingNewlineOffset(t-1),-this._textLines[t-1].length+r-n.length+(1-e))},_getIndexOnLine:function(e,t){for(var n=this._textLines[e],r=this._getLineLeftOffset(e),i=0,o=0,a=n.length;o<a;o++)if(t<(r+=c=this.__charBounds[e][o].width)){var s=!0,l=r,c=Math.abs(r-c-t);i=Math.abs(l-t)<c?o:o-1;break}return s?i:n.length-1},moveCursorDown:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)},moveCursorUp:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)},_moveCursorUpOrDown:function(e,t){e=this["get"+e+"CursorOffset"](t,"right"===this._selectionDirection),t.shiftKey?this.moveCursorWithShift(e):this.moveCursorWithoutShift(e),0!==e&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(e){var t="left"===this._selectionDirection?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e},moveCursorWithoutShift:function(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)},_move:function(e,t,n){var r;if(e.altKey)r=this["findWordBoundary"+n](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===n?-1:1,!0;r=this["findLineBoundary"+n](this[t])}if(this[t]!==r)return this[t]=r,!0},_moveLeft:function(e,t){return this._move(e,t,"Left")},_moveRight:function(e,t){return this._move(e,t,"Right")},moveCursorLeftWithoutShift:function(e){var t=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t},moveCursorLeftWithShift:function(e){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(e,"selectionStart")):void 0},moveCursorRight:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)},_moveCursorLeftOrRight:function(e,t){e="moveCursor"+e+"With",this._currentCursorOpacity=1,t.shiftKey?e+="Shift":e+="outShift",this[e](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(e){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(e,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(e){var t=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t},removeChars:function(e,t){this.removeStyleFromTo(e,t=void 0===t?e+1:t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(e,t,n,r){n<(r=void 0===r?n:r)&&this.removeStyleFromTo(n,r),e=X.util.string.graphemeSplit(e),this.insertNewStyleBlock(e,n,t),this._text=[].concat(this._text.slice(0,n),e,this._text.slice(r)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),B=X.util.toFixed,H=/  +/g,X.util.object.extend(X.Text.prototype,{_toSVG:function(){var e=this._getSVGLeftTopOffsets();e=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(e){var t=this.getSvgTextDecoration(this);return[e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(e,t){var n,r=[],i=[],o=e;this._setSVGBg(i);for(var a=0,s=this._textLines.length;a<s;a++)n=this._getLineLeftOffset(a),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(i,a,t+n,o),this._setSVGTextLineText(r,a,t+n,o),o+=this.getHeightOfLine(a);return{textSpans:r,textBgRects:i}},_createTextCharSpan:function(e,t,n,r){var i=e!==e.trim()||e.match(H),o=(a=this.getSvgSpanStyles(t,i))?'style="'+a+'"':"",a=(i=t.deltaY,"");t=X.Object.NUM_FRACTION_DIGITS;return i&&(a=' dy="'+B(i,t)+'" '),['<tspan x="',B(n,t),'" y="',B(r,t),'" ',a,o,">",X.util.string.escapeXml(e),"</tspan>"].join("")},_setSVGTextLineText:function(e,t,n,r){var i,o,a,s,l=this.getHeightOfLine(t),c=-1!==this.textAlign.indexOf("justify"),u="",h=0,d=this._textLines[t];r+=l*(1-this._fontSizeFraction)/this.lineHeight;for(var f=0,p=d.length-1;f<=p;f++)s=f===p||this.charSpacing,u+=d[f],a=this.__charBounds[t][f],0===h?(n+=a.kernedWidth-a.width,h+=a.width):h+=a.kernedWidth,(s=!(!c||s||!this._reSpaceAndTab.test(d[f]))||s)||(i=i||this.getCompleteStyleDeclaration(t,f),o=this.getCompleteStyleDeclaration(t,f+1),s=this._hasStyleChangedForSvg(i,o)),s&&(s=this._getStyleDeclaration(t,f)||{},e.push(this._createTextCharSpan(u,s,n,r)),u="",i=o,n+=h,h=0)},_pushTextBgRect:function(e,t,n,r,i,o){var a=X.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(t),' x="',B(n,a),'" y="',B(r,a),'" width="',B(i,a),'" height="',B(o,a),'"></rect>\n')},_setSVGTextLineBg:function(e,t,n,r){for(var i,o,a=this._textLines[t],s=this.getHeightOfLine(t)/this.lineHeight,l=0,c=0,u=this.getValueOfPropertyAt(t,0,"textBackgroundColor"),h=0,d=a.length;h<d;h++)i=this.__charBounds[t][h],(o=this.getValueOfPropertyAt(t,h,"textBackgroundColor"))!==u?(u&&this._pushTextBgRect(e,u,n+c,r,l,s),c=i.left,l=i.width,u=o):l+=i.kernedWidth;o&&this._pushTextBgRect(e,o,n+c,r,l,s)},_getFillAttributes:function(e){var t=e&&"string"==typeof e?new X.Color(e):"";return t&&t.getSource()&&1!==t.getAlpha()?'opacity="'+t.getAlpha()+'" fill="'+t.setAlpha(1).toRgb()+'"':'fill="'+e+'"'},_getSVGLineTopOffset:function(e){for(var t,n=0,r=0;r<e;r++)n+=this.getHeightOfLine(r);return t=this.getHeightOfLine(r),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(e){return X.Object.prototype.getSvgStyles.call(this,e)+" white-space: pre;"}}),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Textbox=t.util.createClass(t.IText,t.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:t.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(e){for(var t=0,n=0,r=0,i={},o=0;o<e.graphemeLines.length;o++)"\n"===e.graphemeText[r]&&0<o?(n=0,r++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[r])&&0<o&&(n++,r++),i[o]={line:t,offset:n},r+=e.graphemeLines[o].length,n+=e.graphemeLines[o].length;return i},styleHas:function(e,n){var r;return!this._styleMap||this.isWrapping||(r=this._styleMap[n])&&(n=r.line),t.Text.prototype.styleHas.call(this,e,n)},isEmptyStyles:function(e){if(!this.styles)return!0;var t,n,r,i=0,o=!1,a=this._styleMap[e],s=this._styleMap[e+1];for(r in a&&(e=a.line,i=a.offset),s&&(o=s.line===e,t=s.offset),n=void 0===e?this.styles:{line:this.styles[e]})for(var l in n[r])if(i<=l&&(!o||l<t))for(var c in n[r][l])return!1;return!0},_getStyleDeclaration:function(e,t){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[e];if(!n)return null;e=n.line,t=n.offset+t}return this.callSuper("_getStyleDeclaration",e,t)},_setStyleDeclaration:function(e,t,n){var r=this._styleMap[e];e=r.line,t=r.offset+t,this.styles[e][t]=n},_deleteStyleDeclaration:function(e,t){var n=this._styleMap[e];e=n.line,t=n.offset+t,delete this.styles[e][t]},_getLineStyle:function(e){return e=this._styleMap[e],!!this.styles[e.line]},_setLineStyle:function(e){e=this._styleMap[e],this.styles[e.line]={}},_wrapText:function(e,t){var n,r=[];for(this.isWrapping=!0,n=0;n<e.length;n++)r=r.concat(this._wrapLine(e[n],n,t));return this.isWrapping=!1,r},_measureWord:function(e,t,n){var r,i=0;n=n||0;for(var o=0,a=e.length;o<a;o++)i+=this._getGraphemeBox(e[o],t,o+n,r,!0).kernedWidth,r=e[o];return i},_wrapLine:function(e,n,r,i){var o,a,s=0,l=this.splitByGrapheme,c=[],u=[],h=l?t.util.string.graphemeSplit(e):e.split(this._wordJoiners),d=0,f=l?"":" ",p=0,m=0,v=!0,g=this._getWidthOfCharSpacing();i=i||0;0===h.length&&h.push([]),r-=i;for(var y=0;y<h.length;y++)o=l?h[y]:t.util.string.graphemeSplit(h[y]),a=this._measureWord(o,n,d),d+=o.length,r<(s+=p+a-g)&&!v?(c.push(u),u=[],s=a,v=!0):s+=g,v||l||u.push(f),u=u.concat(o),p=l?0:this._measureWord([f],n,d),d++,v=!1,m<a&&(m=a);return y&&c.push(u),m+i>this.dynamicMinWidth&&(this.dynamicMinWidth=m-g+i),c},isEndOfWrapping:function(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line},missingNewlineOffset:function(e){return!this.splitByGrapheme||this.isEndOfWrapping(e)?1:0},_splitTextIntoLines:function(e){e=t.Text.prototype._splitTextIntoLines.call(this,e);for(var n=this._wrapText(e.lines,this.width),r=new Array(n.length),i=0;i<n.length;i++)r[i]=n[i].join("");return e.lines=r,e.graphemeLines=n,e},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var e,t={};for(e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(e in this.styles)t[e]||delete this.styles[e]},toObject:function(e){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(e))}}),t.Textbox.fromObject=function(e,n){return t.Object._fromObject("Textbox",e,n,"text")}}(t),U=(z=X.controlsUtils).scaleSkewCursorStyleHandler,V=z.scaleCursorStyleHandler,W=z.scalingEqually,e=z.scalingYOrSkewingX,G=z.scalingXOrSkewingY,q=z.scaleOrSkewActionName,(Y=X.Object.prototype.controls).ml=new X.Control({x:-.5,y:0,cursorStyleHandler:U,actionHandler:G,getActionName:q}),Y.mr=new X.Control({x:.5,y:0,cursorStyleHandler:U,actionHandler:G,getActionName:q}),Y.mb=new X.Control({x:0,y:.5,cursorStyleHandler:U,actionHandler:e,getActionName:q}),Y.mt=new X.Control({x:0,y:-.5,cursorStyleHandler:U,actionHandler:e,getActionName:q}),Y.tl=new X.Control({x:-.5,y:-.5,cursorStyleHandler:V,actionHandler:W}),Y.tr=new X.Control({x:.5,y:-.5,cursorStyleHandler:V,actionHandler:W}),Y.bl=new X.Control({x:-.5,y:.5,cursorStyleHandler:V,actionHandler:W}),Y.br=new X.Control({x:.5,y:.5,cursorStyleHandler:V,actionHandler:W}),Y.mtr=new X.Control({x:0,y:-.5,actionHandler:z.rotationWithSnapping,cursorStyleHandler:z.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),X.Textbox&&((W=X.Textbox.prototype.controls={}).mtr=Y.mtr,W.tr=Y.tr,W.br=Y.br,W.tl=Y.tl,W.bl=Y.bl,W.mt=Y.mt,W.mb=Y.mb,W.mr=new X.Control({x:.5,y:0,actionHandler:z.changeWidth,cursorStyleHandler:U,actionName:"resizing"}),W.ml=new X.Control({x:-.5,y:0,actionHandler:z.changeWidth,cursorStyleHandler:U,actionName:"resizing"}))}).call(this,n(440).Buffer)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(757);Object.defineProperty(t,"__esModule",{value:!0}),t.I18N=void 0;var i=r(n(24)),o=r(n(1)),a=r(n(2)),s=new Set;n=function(){function e(){var t;(0,o.default)(this,e),this.data=((0,i.default)(t={},e.LANGS.ru,{}),(0,i.default)(t,e.LANGS.en,{}),t),this.lang=void 0}return(0,a.default)(e,[{key:"setLang",value:function(t){e.LANGS[t]?this.lang=t:(console.warn("Attempted to set unknown lang."),this.lang=e.LANGS.ru)}},{key:"registerKeyset",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(this.data[e]&&Object.prototype.hasOwnProperty.call(this.data[e],t))throw new Error("Keyset '".concat(t,"' is already registered, aborting!"));this.data[e]=Object.assign({},this.data[e],(0,i.default)({},t,n))}},{key:"registerKeysets",value:function(e,t){var n=this;Object.keys(t).forEach((function(r){n.registerKeyset(e,r,t[r])}))}},{key:"has",value:function(t,n){var r=this.lang||e.defaultLang||e.lang;r=this.data[r];return Boolean(r&&r[t]&&r[t][n])}},{key:"i18n",value:function(t,n,r){var i=this.lang||e.defaultLang||e.lang,o=this.data[i];if(void 0===o)throw new Error("Language '".concat(i,"' is not defined, make sure you call setLang for the same language you called registerKeysets for!"));if(0===Object.keys(o).length)return this.warn("Language data is empty."),n;if(!(i=o[t]))return this.warn("Keyset not found.",t),n;if(0===Object.keys(i).length)return this.warn("Keyset is empty.",t),n;if(void 0===(o=i&&i[n]))return this.warn("Missing key.",t,n),n;if(r){if(i=Number(r.count),Array.isArray(o)){if("number"!=typeof i)return this.warn("Missing params.count for key.",t,n),n;t=i%10,n=i%100;var a=o[n=0===i?3:1==t&&11!=n?0:1<t&&t<5&&(n<10||20<n)?1:2]}else a=o;Object.keys(r).forEach((function(e){var t=r[e];"string"==typeof t&&-1<t.indexOf("$")&&(t=t.replace(/(?:([^$])\$|^\$)(?!\$)/g,"$1$$$$")),a=(a||"").replace(new RegExp("({{".concat(e,"}})"),"g"),t)}))}else a=o;return a}},{key:"keyset",value:function(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.i18n.apply(t,[e].concat(r))}}},{key:"warn",value:function(e,t,n){var r="";if(t?(r+=t,n&&(r+=".".concat(n))):r="languageData",!s.has(r)){if(console.warn("[i18n][".concat(r,"] ").concat(e)),"undefined"!=typeof window&&window.Ya&&window.Ya.Rum&&"function"==typeof window.Ya.Rum.logError)try{window.Ya.Rum.logError({message:"I18n: ".concat(e),type:"i18n",level:window.Ya.Rum.ERROR_LEVEL.INFO,block:r})}catch(e){console.error(e)}s.add(r)}}}],[{key:"setLang",value:function(t){console.warn("Static setLang is deprecated. Please use non-static method."),e.LANGS[t]?e.lang=t:(console.warn("Attempted to set unknown lang."),e.lang=e.LANGS.ru)}},{key:"setDefaultLang",value:function(t){e.LANGS[t]?e.defaultLang=t:(console.warn("Attempted to set unknown lang as default."),e.defaultLang=e.LANGS.ru)}}]),e}();(t.I18N=n).LANGS={ru:"ru",en:"en"},n.lang=n.LANGS.ru,n.defaultLang=void 0},,,,,,function(e,t,n){"use strict";var r=n(475),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Object]"===i.call(e)&&(null===(e=Object.getPrototypeOf(e))||e===Object.prototype)}function c(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!=e)if(o(e="object"!=typeof e?[e]:e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}}},function(e,t,n){"use strict";var r=n(637),i=n(647);n=n(361);e.exports={formats:n,parse:i,stringify:r}},,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(0),i=n(316),o=n(698),a=r.createElement,s=n(700),l=n(704),c=n(705),u=n(487),h=n(707),d=n(486);e.exports=i({displayName:"exports",getDefaultProps:function(){return{data:null,search:l,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:d,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(e){return 2<=e.length},isExpanded:function(e,t){return!1},verboseShowOriginal:!1}},getInitialState:function(){return{query:this.props.query||""}},render:function(){var e=this.props,t=this.state,n=""!==t.query&&e.validateQuery(t.query),r=n?t.filterer(t.query):e.data,i=n&&u(r);return a("div",{className:"json-inspector "+e.className},this.renderToolbar(),i?a("div",{className:"json-inspector__not-found"},"Nothing found"):a(s,{data:r,onClick:e.onClick,id:e.id,getOriginal:this.getOriginal,query:n?new RegExp(t.query,e.filterOptions.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:e.isExpanded,interactiveLabel:e.interactiveLabel,verboseShowOriginal:e.verboseShowOriginal}))},renderToolbar:function(){var e=this.props.search;if(e)return a("div",{className:"json-inspector__toolbar"},a(e,{onChange:o(this.search,this.props.searchOptions.debounceTime),data:this.props.data,query:this.state.query}))},search:function(e){this.setState({query:e})},componentWillMount:function(){this.createFilterer(this.props.data,this.props.filterOptions)},componentWillReceiveProps:function(e){this.createFilterer(e.data,e.filterOptions),"string"==typeof e.query&&e.query!==this.state.query&&this.setState({query:e.query})},shouldComponentUpdate:function(e,t){return e.query!==this.props.query||t.query!==this.state.query||e.data!==this.props.data||e.onClick!==this.props.onClick},createFilterer:function(e,t){this.setState({filterer:c(e,t)})},getOriginal:function(e){return h(this.props.data,e)}})},,,,,,,,,,,,,,,,,,function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,,function(e,t,n){var r;r=[n(44),n(0)],void 0===(n="function"==typeof(n=function(t,n){"use strict";var r,i;function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t=function(e){return e&&e.__esModule?e:{default:e}}(t),n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(n);var v={x:"clientWidth",y:"clientHeight"},g={x:"clientTop",y:"clientLeft"},y={x:"innerWidth",y:"innerHeight"},b={x:"offsetWidth",y:"offsetHeight"},C={x:"offsetLeft",y:"offsetTop"},w={x:"overflowX",y:"overflowY"},E={x:"scrollWidth",y:"scrollHeight"},S={x:"scrollLeft",y:"scrollTop"},O={x:"width",y:"height"},x=function(){},_=!!function(){if("undefined"==typeof window)return!1;var e=!1;try{document.createElement("div").addEventListener("test",x,{get passive(){return e=!0,!1}})}catch(e){}return e}()&&{passive:!0},k=function(e,t){var n=e.length,r=e.minSize,i=e.type,o=t.from,a=t.size,s=t.itemsPerRow,l=(a=Math.max(a,r))%s;return l&&(a+=s-l),a>n&&(a=n),(l=(o="simple"!==i&&o?Math.max(Math.min(o,n-a),0):0)%s)&&(o-=l,a+=l),o===t.from&&a==t.size?t:p(p({},t),{},{from:o,size:a})};e.exports=(i=r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t=u(r);function r(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=t.call(this,e)).state=k(e,{itemsPerRow:1,from:e.initialIndex,size:0}),n.cache={},n.cachedScrollPosition=null,n.prevPrevState={},n.unstable=!1,n.updateCounter=0,n}return l(r,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=k(e,t);return n===t?null:n}}]),l(r,[{key:"componentDidMount",value:function(){this.updateFrameAndClearCache=this.updateFrameAndClearCache.bind(this),window.addEventListener("resize",this.updateFrameAndClearCache),this.updateFrame(this.scrollTo.bind(this,this.props.initialIndex))}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.axis!==e.axis&&this.clearSizeCache(),!this.unstable){if(++this.updateCounter>40)return this.unstable=!0,console.error("ReactList failed to reach a stable state.");this.updateCounterTimeoutId||(this.updateCounterTimeoutId=setTimeout((function(){t.updateCounter=0,delete t.updateCounterTimeoutId}),0)),this.updateFrame()}}},{key:"maybeSetState",value:function(e,t){if(function(e,t){for(var n in t)if(e[n]!==t[n])return!1;return!0}(this.state,e))return t();this.setState(e,t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateFrameAndClearCache),this.scrollParent.removeEventListener("scroll",this.updateFrameAndClearCache,_),this.scrollParent.removeEventListener("mousewheel",x,_)}},{key:"getOffset",value:function(e){var t=this.props.axis,n=e[g[t]]||0,r=C[t];do{n+=e[r]||0}while(e=e.offsetParent);return n}},{key:"getEl",value:function(){return this.el||this.items}},{key:"getScrollPosition",value:function(){if("number"==typeof this.cachedScrollPosition)return this.cachedScrollPosition;var e=this.scrollParent,t=this.props.axis,n=S[t],r=e===window?document.body[n]||document.documentElement[n]:e[n],i=this.getScrollSize()-this.props.scrollParentViewportSizeGetter(this),o=Math.max(0,Math.min(r,i)),a=this.getEl();return this.cachedScrollPosition=this.getOffset(e)+o-this.getOffset(a),this.cachedScrollPosition}},{key:"setScroll",value:function(e){var t=this.scrollParent,n=this.props.axis;if(e+=this.getOffset(this.getEl()),t===window)return window.scrollTo(0,e);e-=this.getOffset(this.scrollParent),t[S[n]]=e}},{key:"getScrollSize",value:function(){var e=this.scrollParent,t=document,n=t.body,r=t.documentElement,i=E[this.props.axis];return e===window?Math.max(n[i],r[i]):e[i]}},{key:"hasDeterminateSize",value:function(){var e=this.props,t=e.itemSizeGetter;return"uniform"===e.type||t}},{key:"getStartAndEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.threshold,t=this.getScrollPosition(),n=Math.max(0,t-e),r=t+this.props.scrollParentViewportSizeGetter(this)+e;return this.hasDeterminateSize()&&(r=Math.min(r,this.getSpaceBefore(this.props.length))),{start:n,end:r}}},{key:"getItemSizeAndItemsPerRow",value:function(){var e=this.props,t=e.axis,n=e.useStaticSize,r=this.state,i=r.itemSize,o=r.itemsPerRow;if(n&&i&&o)return{itemSize:i,itemsPerRow:o};var a=this.items.children;if(!a.length)return{};var s=a[0],l=s[b[t]],c=Math.abs(l-i);if((isNaN(c)||c>=1)&&(i=l),!i)return{};for(var u=C[t],h=s[u],d=a[o=1];d&&d[u]===h;d=a[o])++o;return{itemSize:i,itemsPerRow:o}}},{key:"clearSizeCache",value:function(){this.cachedScrollPosition=null}},{key:"updateFrameAndClearCache",value:function(e){return this.clearSizeCache(),this.updateFrame(e)}},{key:"updateFrame",value:function(e){switch(this.updateScrollParent(),"function"!=typeof e&&(e=x),this.props.type){case"simple":return this.updateSimpleFrame(e);case"variable":return this.updateVariableFrame(e);case"uniform":return this.updateUniformFrame(e)}}},{key:"updateScrollParent",value:function(){var e=this.scrollParent;this.scrollParent=this.props.scrollParentGetter(this),e!==this.scrollParent&&(e&&(e.removeEventListener("scroll",this.updateFrameAndClearCache),e.removeEventListener("mousewheel",x)),this.clearSizeCache(),this.scrollParent.addEventListener("scroll",this.updateFrameAndClearCache,_),this.scrollParent.addEventListener("mousewheel",x,_))}},{key:"updateSimpleFrame",value:function(e){var t=this.getStartAndEnd().end,n=this.items.children,r=0;if(n.length){var i=this.props.axis,o=n[0],a=n[n.length-1];r=this.getOffset(a)+a[b[i]]-this.getOffset(o)}if(r>t)return e();var s=this.props,l=s.pageSize,c=s.length,u=Math.min(this.state.size+l,c);this.maybeSetState({size:u},e)}},{key:"updateVariableFrame",value:function(e){this.props.itemSizeGetter||this.cacheSizes();for(var t=this.getStartAndEnd(),n=t.start,r=t.end,i=this.props,o=i.length,a=i.pageSize,s=0,l=0,c=0,u=o-1;l<u;){var h=this.getSizeOfItem(l);if(null==h||s+h>n)break;s+=h,++l}for(var d=o-l;c<d&&s<r;){var f=this.getSizeOfItem(l+c);if(null==f){c=Math.min(c+a,d);break}s+=f,++c}this.maybeSetState(k(this.props,{from:l,itemsPerRow:1,size:c}),e)}},{key:"updateUniformFrame",value:function(e){var t=this.getItemSizeAndItemsPerRow(),n=t.itemSize,r=t.itemsPerRow;if(!n||!r)return e();var i=this.getStartAndEnd(),o=i.start,a=i.end,s=k(this.props,{from:Math.floor(o/n)*r,size:(Math.ceil((a-o)/n)+1)*r,itemsPerRow:r}),l=s.from,c=s.size;return this.maybeSetState({itemsPerRow:r,from:l,itemSize:n,size:c},e)}},{key:"getSpaceBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t[e])return t[e];var n=this.state,r=n.itemSize,i=n.itemsPerRow;if(r)return t[e]=Math.floor(e/i)*r;for(var o=e;o>0&&null==t[--o];);for(var a=t[o]||0,s=o;s<e;++s){t[s]=a;var l=this.getSizeOfItem(s);if(null==l)break;a+=l}return t[e]=a}},{key:"cacheSizes",value:function(){for(var e=this.cache,t=this.state.from,n=this.items.children,r=b[this.props.axis],i=0,o=n.length;i<o;++i)e[t+i]=n[i][r]}},{key:"getSizeOfItem",value:function(e){var t=this.cache,n=this.items,r=this.props,i=r.axis,o=r.itemSizeGetter,a=r.itemSizeEstimator,s=r.type,l=this.state,c=l.from,u=l.itemSize,h=l.size;if(u)return u;if(o)return o(e);if(e in t)return t[e];if("simple"===s&&e>=c&&e<c+h&&n){var d=n.children[e-c];if(d)return d[b[i]]}return a?a(e,t):void 0}},{key:"scrollTo",value:function(e){null!=e&&this.setScroll(this.getSpaceBefore(e))}},{key:"scrollAround",value:function(e){var t=this.getScrollPosition(),n=this.getSpaceBefore(e),r=n-this.props.scrollParentViewportSizeGetter(this)+this.getSizeOfItem(e),i=Math.min(r,n),o=Math.max(r,n);return t<=i?this.setScroll(i):t>o?this.setScroll(o):void 0}},{key:"getVisibleRange",value:function(){for(var e,t,n=this.state,r=n.from,i=n.size,o=this.getStartAndEnd(0),a=o.start,s=o.end,l={},c=r;c<r+i;++c){var u=this.getSpaceBefore(c,l),h=u+this.getSizeOfItem(c);null==e&&h>a&&(e=c),null!=e&&u<s&&(t=c)}return[e,t]}},{key:"renderItems",value:function(){for(var e=this,t=this.props,n=t.itemRenderer,r=t.itemsRenderer,i=this.state,o=i.from,a=i.size,s=[],l=0;l<a;++l)s.push(n(o+l,l));return r(s,(function(t){return e.items=t}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.axis,i=t.length,o=t.type,a=t.useTranslate3d,s=this.state,l=s.from,c=s.itemsPerRow,u=this.renderItems();if("simple"===o)return u;var h={position:"relative"},d={},f=Math.ceil(i/c)*c,p=this.getSpaceBefore(f,d);p&&(h[O[r]]=p,"x"===r&&(h.overflowX="hidden"));var m=this.getSpaceBefore(l,d),v="x"===r?m:0,g="y"===r?m:0,y=a?"translate3d(".concat(v,"px, ").concat(g,"px, 0)"):"translate(".concat(v,"px, ").concat(g,"px)"),b={msTransform:y,WebkitTransform:y,transform:y};return n.default.createElement("div",{style:h,ref:function(t){return e.el=t}},n.default.createElement("div",{style:b},u))}}]),r}(n.Component),m(r,"displayName","ReactList"),m(r,"propTypes",{axis:t.default.oneOf(["x","y"]),initialIndex:t.default.number,itemRenderer:t.default.func,itemSizeEstimator:t.default.func,itemSizeGetter:t.default.func,itemsRenderer:t.default.func,length:t.default.number,minSize:t.default.number,pageSize:t.default.number,scrollParentGetter:t.default.func,scrollParentViewportSizeGetter:t.default.func,threshold:t.default.number,type:t.default.oneOf(["simple","variable","uniform"]),useStaticSize:t.default.bool,useTranslate3d:t.default.bool}),m(r,"defaultProps",{axis:"y",itemRenderer:function(e,t){return n.default.createElement("div",{key:t},e)},itemsRenderer:function(e,t){return n.default.createElement("div",{ref:t},e)},length:0,minSize:1,pageSize:10,scrollParentGetter:function(e){for(var t=e.props.axis,n=e.getEl(),r=w[t];n=n.parentElement;)switch(window.getComputedStyle(n)[r]){case"auto":case"scroll":case"overlay":return n}return window},scrollParentViewportSizeGetter:function(e){var t=e.props.axis,n=e.scrollParent;return n===window?window[y[t]]:n[v[t]]},threshold:100,type:"simple",useStaticSize:!1,useTranslate3d:!1}),i)})?n.apply(t,r):n)||(e.exports=n)},,function(e,t,n){"use strict";(function(e){var r=n(0),i=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=void 0,c=(l="undefined"!=typeof window?window:"undefined"!=typeof self?self:e,null),u=null,h=l.clearTimeout,d=l.setTimeout,f=l.cancelAnimationFrame||l.mozCancelAnimationFrame||l.webkitCancelAnimationFrame,p=l.requestAnimationFrame||l.mozRequestAnimationFrame||l.webkitRequestAnimationFrame;function m(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t=a(this,(e=m.__proto__||Object.getPrototypeOf(m)).call.apply(e,[this].concat(r)))).state={height:t.props.defaultHeight||0,width:t.props.defaultWidth||0},t._onResize=function(){var e,n,r,i,o,a=t.props,s=a.disableHeight,l=a.disableWidth,c=a.onResize;t._parentNode&&(e=t._parentNode.offsetHeight||0,n=t._parentNode.offsetWidth||0,o=window.getComputedStyle(t._parentNode)||{},r=parseInt(o.paddingLeft,10)||0,i=parseInt(o.paddingRight,10)||0,a=parseInt(o.paddingTop,10)||0,o=parseInt(o.paddingBottom,10)||0,(!s&&t.state.height!==e-a-o||!l&&t.state.width!==n-r-i)&&(t.setState({height:e-a-o,width:n-r-i}),c({height:e,width:n})))},t._setRef=function(e){t._autoSizer=e},a(t,e)}u=null==f||null==p?(c=h,function(e){return d(e,20)}):(c=function(e){e=(t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e,2))[0];var t=t[1];f(e),h(t)},function(e){var t=p((function(){h(n),e()})),n=d((function(){f(t),e()}),20);return[t,n]}),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,r.PureComponent),i(m,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=function(e){var t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s="undefined"!=typeof document&&document.attachEvent;if(!s){o=function(e){var t=(n=e.__resizeTriggers__).firstElementChild,n=(e=n.lastElementChild,t.firstElementChild);e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight,n.style.width=t.offsetWidth+1+"px",n.style.height=t.offsetHeight+1+"px",t.scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight},a=function(e){var t;e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0||(o(t=this),this.__resizeRAF__&&c(this.__resizeRAF__),this.__resizeRAF__=u((function(){(function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))})))};var h=!1,d="",f=(r="animationstart","Webkit Moz O ms".split(" ")),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=document.createElement("fakeelement");if(!1===(h=void 0!==m.style.animationName||h))for(var v=0;v<f.length;v++)if(void 0!==m.style[f[v]+"AnimationName"]){d="-"+f[v].toLowerCase()+"-",r=p[v],h=!0;break}t="@"+d+"keyframes "+(n="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",i=d+"animation: 1ms "+n+"; "}return{addResizeListener:function(c,u){var h,d,f,p,m;s?c.attachEvent("onresize",u):(c.__resizeTriggers__||(h=c.ownerDocument,(p=l.getComputedStyle(c))&&"static"===p.position&&(c.style.position="relative"),(d=h).getElementById("detectElementResize")||(f=(t||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',p=d.head||d.getElementsByTagName("head")[0],(m=d.createElement("style")).id="detectElementResize",m.type="text/css",null!=e&&m.setAttribute("nonce",e),m.styleSheet?m.styleSheet.cssText=f:m.appendChild(d.createTextNode(f)),p.appendChild(m)),c.__resizeLast__={},c.__resizeListeners__=[],(c.__resizeTriggers__=h.createElement("div")).className="resize-triggers",(m=h.createElement("div")).className="expand-trigger",m.appendChild(h.createElement("div")),(h=h.createElement("div")).className="contract-trigger",c.__resizeTriggers__.appendChild(m),c.__resizeTriggers__.appendChild(h),c.appendChild(c.__resizeTriggers__),o(c),c.addEventListener("scroll",a,!0),r&&(c.__resizeTriggers__.__animationListener__=function(e){e.animationName===n&&o(c)},c.__resizeTriggers__.addEventListener(r,c.__resizeTriggers__.__animationListener__))),c.__resizeListeners__.push(u))},removeResizeListener:function(e,t){if(s)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",a,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(r,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=(u=this.props).children,t=u.className,n=u.disableHeight,i=u.disableWidth,o=u.style,a=(h=this.state).height,l=h.width,c={overflow:"visible"},u={},h=!1;return n||(0===a&&(h=!0),c.height=0,u.height=a),i||(0===l&&(h=!0),c.width=0,u.width=l),Object(r.createElement)("div",{className:t,ref:this._setRef,style:s({},c,o)},!h&&e(u))}}]),(i=m).defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},t.a=i}).call(this,n(211))},,,,,,,,,,function(e,t,n){var r;void 0===(r="function"==typeof(r=function(){var e,t,n={},r={},i={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},o={currentLocale:i.currentLocale,zeroFormat:i.zeroFormat,nullFormat:i.nullFormat,defaultFormat:i.defaultFormat,scalePercentBy100:i.scalePercentBy100};function a(e,t){this._input=e,this._value=t}return(e=function(r){var i,s,l,c;if(e.isNumeral(r))i=r.value();else if(0===r||void 0===r)i=0;else if(null===r||t.isNaN(r))i=null;else if("string"==typeof r)if(o.zeroFormat&&r===o.zeroFormat)i=0;else if(o.nullFormat&&r===o.nullFormat||!r.replace(/[^0-9]+/g,"").length)i=null;else{for(s in n)if((c="function"==typeof n[s].regexps.unformat?n[s].regexps.unformat():n[s].regexps.unformat)&&r.match(c)){l=n[s].unformat;break}i=(l=l||e._.stringToNumber)(r)}else i=Number(r)||null;return new a(r,i)}).version="2.0.6",e.isNumeral=function(e){return e instanceof a},e._=t={numberToFormat:function(t,n,i){var o,a,s,l,c,u,h,d,f=r[e.options.currentLocale],p=!1,m=!1,v="",g=1e12,y=1e9,b=1e6,C="",w=!1;if(t=t||0,s=Math.abs(t),e._.includes(n,"(")?(p=!0,n=n.replace(/[\(|\)]/g,"")):(e._.includes(n,"+")||e._.includes(n,"-"))&&(u=e._.includes(n,"+")?n.indexOf("+"):t<0?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),e._.includes(n,"a")&&(a=!!(a=n.match(/a(k|m|b|t)?/))&&a[1],e._.includes(n," a")&&(v=" "),n=n.replace(new RegExp(v+"a[kmbt]?"),""),s>=g&&!a||"t"===a?(v+=f.abbreviations.trillion,t/=g):s<g&&s>=y&&!a||"b"===a?(v+=f.abbreviations.billion,t/=y):s<y&&s>=b&&!a||"m"===a?(v+=f.abbreviations.million,t/=b):(s<b&&s>=1e3&&!a||"k"===a)&&(v+=f.abbreviations.thousand,t/=1e3)),e._.includes(n,"[.]")&&(m=!0,n=n.replace("[.]",".")),l=t.toString().split(".")[0],c=n.split(".")[1],h=n.indexOf(","),o=(n.split(".")[0].split(",")[0].match(/0/g)||[]).length,c?(e._.includes(c,"[")?(c=(c=c.replace("]","")).split("["),C=e._.toFixed(t,c[0].length+c[1].length,i,c[1].length)):C=e._.toFixed(t,c.length,i),l=C.split(".")[0],C=e._.includes(C,".")?f.delimiters.decimal+C.split(".")[1]:"",m&&0===Number(C.slice(1))&&(C="")):l=e._.toFixed(t,0,i),v&&!a&&Number(l)>=1e3&&v!==f.abbreviations.trillion)switch(l=String(Number(l)/1e3),v){case f.abbreviations.thousand:v=f.abbreviations.million;break;case f.abbreviations.million:v=f.abbreviations.billion;break;case f.abbreviations.billion:v=f.abbreviations.trillion}if(e._.includes(l,"-")&&(l=l.slice(1),w=!0),l.length<o)for(var E=o-l.length;E>0;E--)l="0"+l;return h>-1&&(l=l.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f.delimiters.thousands)),0===n.indexOf(".")&&(l=""),d=l+C+(v||""),p?d=(p&&w?"(":"")+d+(p&&w?")":""):u>=0?d=0===u?(w?"-":"+")+d:d+(w?"-":"+"):w&&(d="-"+d),d},stringToNumber:function(e){var t,n,i,a=r[o.currentLocale],s=e,l={thousand:3,million:6,billion:9,trillion:12};if(o.zeroFormat&&e===o.zeroFormat)n=0;else if(o.nullFormat&&e===o.nullFormat||!e.replace(/[^0-9]+/g,"").length)n=null;else{for(t in n=1,"."!==a.delimiters.decimal&&(e=e.replace(/\./g,"").replace(a.delimiters.decimal,".")),l)if(i=new RegExp("[^a-zA-Z]"+a.abbreviations[t]+"(?:\\)|(\\"+a.currency.symbol+")?(?:\\))?)?$"),s.match(i)){n*=Math.pow(10,l[t]);break}n*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1,e=e.replace(/[^0-9\.]+/g,""),n*=Number(e)}return n},isNaN:function(e){return"number"==typeof e&&isNaN(e)},includes:function(e,t){return-1!==e.indexOf(t)},insert:function(e,t,n){return e.slice(0,n)+t+e.slice(n)},reduce:function(e,t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,r=Object(e),i=r.length>>>0,o=0;if(3===arguments.length)n=arguments[2];else{for(;o<i&&!(o in r);)o++;if(o>=i)throw new TypeError("Reduce of empty array with no initial value");n=r[o++]}for(;o<i;o++)o in r&&(n=t(n,r[o],o,r));return n},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){var e=Array.prototype.slice.call(arguments);return e.reduce((function(e,n){var r=t.multiplier(n);return e>r?e:r}),1)},toFixed:function(e,t,n,r){var i,o,a,s,l=e.toString().split("."),c=t-(r||0);return i=2===l.length?Math.min(Math.max(l[1].length,c),t):c,a=Math.pow(10,i),s=(n(e+"e+"+i)/a).toFixed(i),r>t-i&&(o=new RegExp("\\.?0{1,"+(r-(t-i))+"}$"),s=s.replace(o,"")),s}},e.options=o,e.formats=n,e.locales=r,e.locale=function(e){return e&&(o.currentLocale=e.toLowerCase()),o.currentLocale},e.localeData=function(e){if(!e)return r[o.currentLocale];if(e=e.toLowerCase(),!r[e])throw new Error("Unknown locale : "+e);return r[e]},e.reset=function(){for(var e in i)o[e]=i[e]},e.zeroFormat=function(e){o.zeroFormat="string"==typeof e?e:null},e.nullFormat=function(e){o.nullFormat="string"==typeof e?e:null},e.defaultFormat=function(e){o.defaultFormat="string"==typeof e?e:"0.0"},e.register=function(e,t,n){if(t=t.toLowerCase(),this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");return this[e+"s"][t]=n,n},e.validate=function(t,n){var r,i,o,a,s,l,c,u;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),(t=t.trim()).match(/^\d+$/))return!0;if(""===t)return!1;try{c=e.localeData(n)}catch(t){c=e.localeData(e.locale())}return o=c.currency.symbol,s=c.abbreviations,r=c.delimiters.decimal,i="."===c.delimiters.thousands?"\\.":c.delimiters.thousands,(null===(u=t.match(/^[^\d]+/))||(t=t.substr(1),u[0]===o))&&((null===(u=t.match(/[^\d]+$/))||(t=t.slice(0,-1),u[0]===s.thousand||u[0]===s.million||u[0]===s.billion||u[0]===s.trillion))&&(l=new RegExp(i+"{2}"),!t.match(/[^\d.,]/g)&&(!((a=t.split(r)).length>2)&&(a.length<2?!!a[0].match(/^\d+.*\d$/)&&!a[0].match(l):1===a[0].length?!!a[0].match(/^\d+$/)&&!a[0].match(l)&&!!a[1].match(/^\d+$/):!!a[0].match(/^\d+.*\d$/)&&!a[0].match(l)&&!!a[1].match(/^\d+$/)))))},e.fn=a.prototype={clone:function(){return e(this)},format:function(t,r){var i,a,s,l=this._value,c=t||o.defaultFormat;if(r=r||Math.round,0===l&&null!==o.zeroFormat)a=o.zeroFormat;else if(null===l&&null!==o.nullFormat)a=o.nullFormat;else{for(i in n)if(c.match(n[i].regexps.format)){s=n[i].format;break}a=(s=s||e._.numberToFormat)(l,c,r)}return a},value:function(){return this._value},input:function(){return this._input},set:function(e){return this._value=Number(e),this},add:function(e){var n=t.correctionFactor.call(null,this._value,e);return this._value=t.reduce([this._value,e],(function(e,t,r,i){return e+Math.round(n*t)}),0)/n,this},subtract:function(e){var n=t.correctionFactor.call(null,this._value,e);return this._value=t.reduce([e],(function(e,t,r,i){return e-Math.round(n*t)}),Math.round(this._value*n))/n,this},multiply:function(e){return this._value=t.reduce([this._value,e],(function(e,n,r,i){var o=t.correctionFactor(e,n);return Math.round(e*o)*Math.round(n*o)/Math.round(o*o)}),1),this},divide:function(e){return this._value=t.reduce([this._value,e],(function(e,n,r,i){var o=t.correctionFactor(e,n);return Math.round(e*o)/Math.round(n*o)})),this},difference:function(t){return Math.abs(e(this._value).subtract(t).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(t,n,r){var i,o=e._.includes(n," BPS")?" ":"";return t*=1e4,n=n.replace(/\s?BPS/,""),i=e._.numberToFormat(t,n,r),e._.includes(i,")")?((i=i.split("")).splice(-1,0,o+"BPS"),i=i.join("")):i=i+o+"BPS",i},unformat:function(t){return+(1e-4*e._.stringToNumber(t)).toFixed(15)}}),function(){var t={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},n={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},r=t.suffixes.concat(n.suffixes.filter((function(e){return t.suffixes.indexOf(e)<0}))).join("|");r="("+r.replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(r)},format:function(r,i,o){var a,s,l,c=e._.includes(i,"ib")?n:t,u=e._.includes(i," b")||e._.includes(i," ib")?" ":"";for(i=i.replace(/\s?i?b/,""),a=0;a<=c.suffixes.length;a++)if(s=Math.pow(c.base,a),l=Math.pow(c.base,a+1),null===r||0===r||r>=s&&r<l){u+=c.suffixes[a],s>0&&(r/=s);break}return e._.numberToFormat(r,i,o)+u},unformat:function(r){var i,o,a=e._.stringToNumber(r);if(a){for(i=t.suffixes.length-1;i>=0;i--){if(e._.includes(r,t.suffixes[i])){o=Math.pow(t.base,i);break}if(e._.includes(r,n.suffixes[i])){o=Math.pow(n.base,i);break}}a*=o||1}return a}})}(),e.register("format","currency",{regexps:{format:/(\$)/},format:function(t,n,r){var i,o,a=e.locales[e.options.currentLocale],s={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(n=n.replace(/\s?\$\s?/,""),i=e._.numberToFormat(t,n,r),t>=0?(s.before=s.before.replace(/[\-\(]/,""),s.after=s.after.replace(/[\-\)]/,"")):t<0&&!e._.includes(s.before,"-")&&!e._.includes(s.before,"(")&&(s.before="-"+s.before),o=0;o<s.before.length;o++)switch(s.before[o]){case"$":i=e._.insert(i,a.currency.symbol,o);break;case" ":i=e._.insert(i," ",o+a.currency.symbol.length-1)}for(o=s.after.length-1;o>=0;o--)switch(s.after[o]){case"$":i=o===s.after.length-1?i+a.currency.symbol:e._.insert(i,a.currency.symbol,-(s.after.length-(1+o)));break;case" ":i=o===s.after.length-1?i+" ":e._.insert(i," ",-(s.after.length-(1+o)+a.currency.symbol.length-1))}return i}}),e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(t,n,r){var i=("number"!=typeof t||e._.isNaN(t)?"0e+0":t.toExponential()).split("e");return n=n.replace(/e[\+|\-]{1}0/,""),e._.numberToFormat(Number(i[0]),n,r)+"e"+i[1]},unformat:function(t){var n=e._.includes(t,"e+")?t.split("e+"):t.split("e-"),r=Number(n[0]),i=Number(n[1]);return i=e._.includes(t,"e-")?i*=-1:i,e._.reduce([r,Math.pow(10,i)],(function(t,n,r,i){var o=e._.correctionFactor(t,n);return t*o*(n*o)/(o*o)}),1)}}),e.register("format","ordinal",{regexps:{format:/(o)/},format:function(t,n,r){var i=e.locales[e.options.currentLocale],o=e._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),o+=i.ordinal(t),e._.numberToFormat(t,n,r)+o}}),e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(t,n,r){var i,o=e._.includes(n," %")?" ":"";return e.options.scalePercentBy100&&(t*=100),n=n.replace(/\s?\%/,""),i=e._.numberToFormat(t,n,r),e._.includes(i,")")?((i=i.split("")).splice(-1,0,o+"%"),i=i.join("")):i=i+o+"%",i},unformat:function(t){var n=e._.stringToNumber(t);return e.options.scalePercentBy100?.01*n:n}}),e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,n){var r=Math.floor(e/60/60),i=Math.floor((e-60*r*60)/60),o=Math.round(e-60*r*60-60*i);return r+":"+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)},unformat:function(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}}),e})?r.call(t,n,t,e):r)||(e.exports=r)},,,function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){var l,c,u;if(!e)throw void 0===t?u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(l=[n,r,i,o,a,s],c=0,(u=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"),u.framesToPop=1,u}},function(e,t,n){!function(t){function n(e){return s[e]||e.toUpperCase().charCodeAt(0)}for(var r={},i={16:!1,18:!1,17:!1,91:!1},o="all",a={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=[],c=1;c<20;c++)s["f"+c]=111+c;function u(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}var h={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function d(e,t,i){var o,a=p(e);void 0===i&&(i=t,t="all");for(var s=0;s<a.length;s++)o=[],1<(e=a[s].split("+")).length&&(o=m(e),e=[e[e.length-1]]),(e=n(e=e[0]))in r||(r[e]=[]),r[e].push({shortcut:a[s],scope:t,method:i,key:a[s],mods:o})}for(c in a)d[c]=!1;function f(){return o||"all"}function p(e){return""==(e=(e=e.replace(/\s/g,"")).split(","))[e.length-1]&&(e[e.length-2]+=","),e}function m(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=a[t[n]];return t}function v(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}v(document,"keydown",(function(e){!function(e){var t,n,o,s,p,m=e.keyCode;if(-1==u(l,m)&&l.push(m),(m=93==m||224==m?91:m)in i)for(n in i[m]=!0,a)a[n]==m&&(d[n]=!0);else if(function(e){for(c in i)i[c]=e[h[c]]}(e),d.filter.call(this,e)&&m in r)for(p=f(),o=0;o<r[m].length;o++)if((t=r[m][o]).scope==p||"all"==t.scope){for(n in s=0<t.mods.length,i)(!i[n]&&-1<u(t.mods,+n)||i[n]&&-1==u(t.mods,+n))&&(s=!1);(0!=t.mods.length||i[16]||i[18]||i[17]||i[91])&&!s||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),v(document,"keyup",(function(e){var t,n=e.keyCode;if(0<=(e=u(l,n))&&l.splice(e,1),(n=93==n||224==n?91:n)in i)for(t in i[n]=!1,a)a[t]==n&&(d[t]=!1)})),v(window,"focus",(function(){for(c in i)i[c]=!1;for(c in a)d[c]=!1}));var g=t.key;t.key=d,t.key.setScope=function(e){o=e||"all"},t.key.getScope=f,t.key.deleteScope=function(e){var t,n,i;for(t in r)for(n=r[t],i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++},t.key.filter=function(e){return!("INPUT"==(e=(e.target||e.srcElement).tagName)||"SELECT"==e||"TEXTAREA"==e)},t.key.isPressed=function(e){return"string"==typeof e&&(e=n(e)),-1!=u(l,e)},t.key.getPressedKeyCodes=function(){return l.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=g,e},t.key.unbind=function(e,t){for(var i,o,a,s=[],l=p(e),c=0;c<l.length;c++){if(1<(i=l[c].split("+")).length&&(s=m(i),e=i[i.length-1]),e=n(e),void 0===t&&(t=f()),!r[e])return;for(o=0;o<r[e].length;o++)(a=r[e][o]).scope===t&&function(e,t){if(e.length==t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return;return 1}}(a.mods,s)&&(r[e][o]={})}},e.exports=d}(this)},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paramDecoder=t.OVERWRITE_ACCESSORS=t.RLSCONFIG=void 0,t.setParamEncoder=function(e){l=e},t.setParamDecoder=function(e){t.paramDecoder=c=e},t.overrideAccessors=function(e,t){s[e]=t},t.get=function(){return s.get.apply(s,arguments)},t.set=function(){return s.set.apply(s,arguments)},t.isEqual=function(){return s.isEqual.apply(s,arguments)},t.getMatchingDeclaredPath=u,t.createObjectFromConfig=function(e,t){if(e)return t=u(e,t),e.global?Object.assign({},e.global,e[t]||{}):e[t]},t.getPath=function(){var e=window.location.href,t=e.indexOf("#")+1;return t&&0===e.substring(t).indexOf("/")?e.substring(t):window.location.pathname+window.location.search+window.location.hash},t.createParamsString=function(e){var t=Object.keys(e).reduce((function(t,n){var r=n.toString(),i=e[n];return null==i||Array.isArray(i)&&!i.length?t:(n=e[n].toString(),[].concat(a(t),[l(r)+"="+l(n)]))}),[]);return t.length?"?"+t.join("&"):""},t.parseParams=function(e,t){return e&&e.split("&").reduce((function(e,n){return"?"===n[0]&&(n=n.substr(1)),n=t?t(n):n.split("="),e[c(n[0])]=c(n[1])||"",e}),{})||{}};var r=o(n(258)),i=o(n(287));n=o(n(635));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.RLSCONFIG="RLSCONFIG",t.OVERWRITE_ACCESSORS="overwrite-accessors";var s={get:r.default,set:n.default,isEqual:i.default},l=encodeURIComponent,c=t.paramDecoder=decodeURIComponent;function u(e,t){var n=t.pathname.split("/");return Object.keys(e).filter((function(e){var t=[].concat(a(n)),r=(e=e.split("/"),[].concat(a(e))),i=0;return e.forEach((function(e,n){"*"===e&&(t.splice(n-i,1),r.splice(n-i,1),i++)})),t.join("/")===r.join("/")}))[0]}},,,,,,,,,,function(e,t,n){"use strict";var r=n(684),i=n(685);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=y(e)),e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=(t=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),["'"].concat(t)),u=["%","/","?",";","#"].concat(c),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(686);function y(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o,s=-1!==(o=e.indexOf("?"))&&o<e.indexOf("#")?"?":"#";(o=e.split(s))[0]=o[0].replace(/\\/g,"/");var y,b,C,w=(w=e=o.join(s)).trim();if(!n&&1===e.split("#").length&&(b=l.exec(w)))return this.path=w,this.href=w,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?g.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this;if((b=a.exec(w))&&(C=(b=b[0]).toLowerCase(),this.protocol=C,w=w.substr(b.length)),(n||b||w.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(y="//"===w.substr(0,2))||b&&m[b]||(w=w.substr(2),this.slashes=!0)),!m[b]&&(y||b&&!v[b])){for(var E=-1,S=0;S<h.length;S++)-1!==(O=w.indexOf(h[S]))&&(-1===E||O<E)&&(E=O);-1!==(A=-1===E?w.lastIndexOf("@"):w.lastIndexOf("@",E))&&(L=w.slice(0,A),w=w.slice(A+1),this.auth=decodeURIComponent(L));var O;for(E=-1,S=0;S<u.length;S++)-1!==(O=w.indexOf(u[S]))&&(-1===E||O<E)&&(E=O);var x;if(-1===E&&(E=w.length),this.host=w.slice(0,E),w=w.slice(E),this.parseHost(),this.hostname=this.hostname||"",!(x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1]))for(var _=this.hostname.split(/\./),k=(S=0,_.length);S<k;S++){var T=_[S];if(T&&!T.match(d)){for(var N="",P=0,I=T.length;P<I;P++)127<T.charCodeAt(P)?N+="x":N+=T[P];if(!N.match(d)){var R=_.slice(0,S),j=_.slice(S+1),D=T.match(f);D&&(R.push(D[1]),j.unshift(D[2])),j.length&&(w="/"+j.join(".")+w),this.hostname=R.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=r.toASCII(this.hostname));var A=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+A,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!p[C])for(S=0,k=c.length;S<k;S++){var M,F=c[S];-1!==w.indexOf(F)&&((M=encodeURIComponent(F))===F&&(M=escape(F)),w=w.split(F).join(M))}return-1!==(x=w.indexOf("#"))&&(this.hash=w.substr(x),w=w.slice(0,x)),-1!==(x=w.indexOf("?"))?(this.search=w.substr(x),this.query=w.substr(x+1),t&&(this.query=g.parse(this.query)),w=w.slice(0,x)):t&&(this.search="",this.query={}),w&&(this.pathname=w),v[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(A=this.pathname||"",C=this.search||"",this.path=A+C),this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";return this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=g.stringify(this.query)),a=this.search||a&&"?"+a||"",t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o=o||"",r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},o.prototype.resolveObject=function(e){i.isString(e)&&((w=new o).parse(e,!1,!0),e=w);for(var t=new o,n=Object.keys(this),r=0;r<n.length;r++){var a=n[r];t[a]=this[a]}if(t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var c=s[l];"protocol"!==c&&(t[c]=e[c])}return v[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!v[e.protocol]){for(var u=Object.keys(e),h=0;h<u.length;h++){var d=u[h];t[d]=e[d]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||m[e.protocol])t.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),t.pathname=f.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(g=t.pathname||"",y=t.search||"",t.path=g+y),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var p=t.pathname&&"/"===t.pathname.charAt(0),g=(w=e.host||e.pathname&&"/"===e.pathname.charAt(0))||p||t.host&&e.pathname,y=g,b=t.pathname&&t.pathname.split("/")||[];f=e.pathname&&e.pathname.split("/")||[];if((p=t.protocol&&!v[t.protocol])&&(t.hostname="",t.port=null,t.host&&(""===b[0]?b[0]=t.host:b.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),g=g&&(""===f[0]||""===b[0])),w)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,b=f;else if(f.length)(b=b||[]).pop(),b=b.concat(f),t.search=e.search,t.query=e.query;else if(!i.isNullOrUndefined(e.search))return p&&(t.hostname=t.host=b.shift(),(O=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=O.shift(),t.host=t.hostname=O.shift())),t.search=e.search,t.query=e.query,i.isNull(t.pathname)&&i.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(!b.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var C=b.slice(-1)[0],w=(t.host||e.host||1<b.length)&&("."===C||".."===C)||""===C,E=0,S=b.length;0<=S;S--)"."===(C=b[S])?b.splice(S,1):".."===C?(b.splice(S,1),E++):E&&(b.splice(S,1),E--);if(!g&&!y)for(;E--;)b.unshift("..");!g||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),w&&"/"!==b.join("/").substr(-1)&&b.push("");var O;w=""===b[0]||b[0]&&"/"===b[0].charAt(0);return p&&(t.hostname=t.host=!w&&b.length?b.shift():"",(O=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=O.shift(),t.host=t.hostname=O.shift())),(g=g||t.host&&b.length)&&!w&&b.unshift(""),b.length?t.pathname=b.join("/"):(t.pathname=null,t.path=null),i.isNull(t.pathname)&&i.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOCATION_POP="REDUX-LOCATION-POP-ACTION",t.LOCATION_PUSH="REDUX-LOCATION-PUSH-ACTION",t.OBJECT_KEY_DELIMITER="-"},,,,,,,,,,,function(e,t,n){e.exports=n(666)},,,,,,,,,,,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,,,,,,,,function(e,t,n){"use strict";var r=n(447),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){var i;!p||(i=f(n))&&i!==p&&e(t,i,r);var a=u(n);h&&(a=a.concat(h(n)));for(var s=l(t),m=l(n),v=0;v<a.length;++v){var g=a[v];if(!(o[g]||r&&r[g]||m&&m[g]||s&&s[g])){var y=d(n,g);try{c(t,g,y)}catch(e){}}}}return t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),i=n(697);if(void 0===r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");n=(new r.Component).updater,e.exports=i(r.Component,r.isValidElement,n)},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(590);Object.defineProperty(t,"createReduxLocationActions",{enumerable:!0,get:function(){return r.createReduxLocationActions}});var i=n(636);Object.defineProperty(t,"listenForHistoryChange",{enumerable:!0,get:function(){return i.listenForHistoryChange}});var o=n(236);Object.defineProperty(t,"setParamDecoder",{enumerable:!0,get:function(){return o.setParamDecoder}}),Object.defineProperty(t,"setParamEncoder",{enumerable:!0,get:function(){return o.setParamEncoder}})},function(e,t,n){"use strict";function r(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}n.d(t,"a",(function(){return r})),Object.create,Object.create},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(11),i=n(90),o=n(16),a=n(1),s=n(2),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(n(426)),u=l(n(268));n=function(){function e(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.setApiEndpoint=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=e;"undefined"!=typeof location&&(n=e.replace("%CURRENT_HOST%",location.host)),t.apiEndpoint=n},this.setCSRFToken=function(e){t._axios.defaults.headers.post["X-CSRF-Token"]=e,t._axios.defaults.headers.put["X-CSRF-Token"]=e,t._axios.defaults.headers.delete["X-CSRF-Token"]=e},this.setDefaultHeader=function(e){var n=e.name,r=e.value,i=(e=e.methods,t._axios.defaults.headers);Array.isArray(e)?e.forEach((function(e){i[e]&&(i[e][n]=r)})):i.common[n]=r},this.apiPath=function(e){return"".concat(t.apiEndpoint).concat(e)};var r=n.config,i=void 0===(i=n.apiEndpoint)?"/api":i;n=void 0===(n=n.collector)?{}:n,r=Object.assign({xsrfCookieName:"",timeout:e.DEFAULT_TIMEOUT,withCredentials:!0},void 0===r?{}:r);this._axios=u.default.create(r),this._axios.defaults.headers=c.default(this._axios.defaults.headers),this.requestTokens={},this.setApiEndpoint(i),this.collectorSettings=n,this.collector={errors:[],requests:[]}}var t;return s(e,[{key:"collectRequest",value:function(e){var t=e.method,n=e.url,r=e.data,i=e.requestStart,a=e.response,s=e.responseError,l=void 0!==(d=e.error)&&d,c=e.cancelled,u=void 0!==c&&c,h=this.collectorSettings,d=h.collectErrors;e=h.collectRequests;(d||e)&&(h=void 0===(h=(c=a&&a.request||{}).responseText)?"":h,c=c.responseURL,s=l&&s instanceof Error?s.message:"",u={method:t,url:void 0===c?n:c,time:{start:i,end:Number(new Date)},status:a&&a.status,size:h.length,requestData:r&&JSON.stringify(r,null,2)||"",responseData:a&&a.data&&JSON.stringify(a.data,null,2)||s,isError:l,isCancelled:u},d&&l&&(this.collector.errors=[].concat(o(this.collector.errors),[u]).slice(-d)),e&&(this.collector.requests=[].concat(o(this.collector.requests),[u]).slice(-e)))}},{key:"getCollectedRequests",value:function(){return{errors:o(this.collector.errors),requests:o(this.collector.requests)}}},{key:"request",value:(t=i(r.mark((function e(t){var n,i,o,a,s,l,c,h,d,f,p=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,i=t.url,s=t.data,o=void 0===s?null:s,d=t.params,h=t.options,c=void 0===h?{}:h,l=t.retries,a=void 0===l?0:l,f=c.requestConfig||{},s=c.concurrentId,h=c.collectRequest,l=void 0===h||h,h=c.timeout,c=c.headers,s&&(this.cancelRequest(s),f.cancelToken=this.createRequestToken(s)),c&&(f.headers=c),void 0!==h&&(f.timeout=h),h=Number(new Date),d={method:n,url:i,data:o,params:d},e.prev=8,e.next=11,this._axios.request(Object.assign(Object.assign({},f),d));case 11:return f=e.sent,this.clearRequestToken(s),l&&this.collectRequest(Object.assign(Object.assign({},d),{requestStart:h,response:f})),e.abrupt("return",f.data);case 17:if(e.prev=17,e.t0=e.catch(8),u.default.isCancel(e.t0))throw{isCancelled:!0,error:e.t0};e.next=23;break;case 23:this.clearRequestToken(s);case 24:return l&&this.collectRequest(Object.assign(Object.assign({},d),{requestStart:h,response:e.t0.response,error:!0,cancelled:u.default.isCancel(e.t0),responseError:e.t0})),e.abrupt("return",this.handleRequestError(e.t0.response,(function(){return p.request(Object.assign(Object.assign({},t),{retries:a+1}))}),a,new Error(e.t0 instanceof Error?e.t0.message:"Unknown error")));case 26:case"end":return e.stop()}}),e,this,[[8,17]])}))),function(e){return t.apply(this,arguments)})},{key:"cancelRequest",value:function(e){e&&this.requestTokens[e]&&this.requestTokens[e].cancel("Concurrent request")}},{key:"get",value:function(e,t){return this.request({method:"GET",url:e,params:t,options:2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}})}},{key:"post",value:function(e,t,n){return this.request({method:"POST",url:e,data:t,params:n,options:3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}})}},{key:"put",value:function(e,t,n){return this.request({method:"PUT",url:e,data:t,params:n,options:3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}})}},{key:"patch",value:function(e,t,n){return this.request({method:"PATCH",url:e,data:t,params:n,options:3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}})}},{key:"delete",value:function(e,t,n){return this.request({method:"DELETE",url:e,data:t,params:n,options:3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}})}},{key:"head",value:function(e,t){return this.request({method:"HEAD",url:e,params:t,options:2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}})}},{key:"handleRequestError",value:function(e){throw e}},{key:"createRequestToken",value:function(e){if(e){var t=u.default.CancelToken.source();return(this.requestTokens[e]=t).token}}},{key:"clearRequestToken",value:function(e){e&&this.requestTokens[e]&&delete this.requestTokens[e]}}]),e}();(t.default=n).DEFAULT_TIMEOUT=6e4},,,,,,,,,,function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var n,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var l in n=Object(arguments[s]))i.call(n,l)&&(a[l]=n[l]);if(r)for(var c=r(n),u=0;u<c.length;u++)o.call(n,c[u])&&(a[c[u]]=n[c[u]])}return a}},,,,,,,,,,,,function(e,t,n){"use strict";var r=SyntaxError,i=Function,o=TypeError,a=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch(e){s=null}function l(){throw new o}function c(e){var t,n;return"%AsyncFunction%"===e?t=a("async function () {}"):"%GeneratorFunction%"===e?t=a("function* () {}"):"%AsyncGeneratorFunction%"===e?t=a("async function* () {}"):"%AsyncGenerator%"===e?(n=c("%AsyncGeneratorFunction%"))&&(t=n.prototype):"%AsyncIteratorPrototype%"!==e||(n=c("%AsyncGenerator%"))&&(t=d(n.prototype)),m[e]=t}var u=s?function(){try{return l}catch(e){try{return s(arguments,"callee").get}catch(e){return l}}}():l,h=n(639)(),d=Object.getPrototypeOf||function(e){return e.__proto__},f={},p="undefined"==typeof Uint8Array?g:d(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?g:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?g:ArrayBuffer,"%ArrayIteratorPrototype%":h?d([][Symbol.iterator]()):g,"%AsyncFromSyncIteratorPrototype%":g,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?g:Atomics,"%BigInt%":"undefined"==typeof BigInt?g:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?g:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?g:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?g:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?g:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?g:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?g:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?g:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?d(d([][Symbol.iterator]())):g,"%JSON%":"object"==typeof JSON?JSON:g,"%Map%":"undefined"==typeof Map?g:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?d((new Map)[Symbol.iterator]()):g,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?g:Promise,"%Proxy%":"undefined"==typeof Proxy?g:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?g:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?g:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?d((new Set)[Symbol.iterator]()):g,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?g:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?d(""[Symbol.iterator]()):g,"%Symbol%":h?Symbol:g,"%SyntaxError%":r,"%ThrowTypeError%":u,"%TypedArray%":p,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?g:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?g:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?g:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?g:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?g:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?g:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?g:WeakSet},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},g=n(360),y=n(642),b=g.call(Function.call,Array.prototype.concat),C=g.call(Function.apply,Array.prototype.splice),w=g.call(Function.call,String.prototype.replace),E=g.call(Function.call,String.prototype.slice),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g;e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');var n,i=function(e){var t=E(e,0,1),n=E(e,-1);if("%"===t&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new r("invalid intrinsic syntax, expected opening `%`");var i=[];return w(e,S,(function(e,t,n,r){i[i.length]=n?w(r,O,"$1"):t||e})),i}(e),a=0<i.length?i[0]:"",l=((n=function(e,t){var n,i=e;if(y(v,i)&&(i="%"+(n=v[i])[0]+"%"),y(m,i)){var a=m[i];if(void 0===(a=a===f?c(i):a)&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:a}}throw new r("intrinsic "+e+" does not exist!")}("%"+a+"%",t)).name,n.value),u=!1;(n=n.alias)&&(a=n[0],C(i,b([0,1],n)));for(var h=1,d=!0;h<i.length;h+=1){var p=i[h],g=E(p,0,1),x=E(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===x||"'"===x||"`"===x)&&g!==x)throw new r("property names with quotes must have matching quotes");if("constructor"!==p&&d||(u=!0),y(m,g="%"+(a+="."+p)+"%"))l=m[g];else if(null!=l){if(!(p in l)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}l=s&&h+1>=i.length?(d=!!(x=s(l,p)))&&"get"in x&&!("originalValue"in x.get)?x.get:l[p]:(d=y(l,p),l[p]),d&&!u&&(m[g]=l)}}return l}},function(e,t,n){"use strict";n=n(641),e.exports=Function.prototype.bind||n},function(e,t,n){"use strict";var r=String.prototype.replace,i=/%20/g,o="RFC3986";e.exports={default:o,formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:o}},,,,,,function(e,t,n){"use strict";(function(t){var r=n(174),i=n(671),o=n(477),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:l="undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t)?n(478):l,transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=(n=this.transitional)&&n.silentJSONParsing,n=n&&n.forcedJSONParsing;if((t=!t&&"json"===this.responseType)||n&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(t){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(a)})),e.exports=c}).call(this,n(368))},function(e,t){var n,r;e=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,l=[],c=!1,u=-1;function h(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&d())}function d(){if(!c){var e=a(h);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||c||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t){e.exports=function(e){return Object.prototype.toString.call(e).slice(8,-1)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseQuery=function(e,t){var n=(0,r.createObjectFromConfig)(e,t),o=(e=e[r.RLSCONFIG]&&e[r.RLSCONFIG].queryParser,(0,r.parseParams)(t.search,e));return n?Object.keys(n).reduce((function(e,t){var a=(u=n[t]).stateKey,s=void 0===(c=u.options)?{}:c,l=u.initialState,c=u.type,u=o[t];t=void 0;return null==u?(0,r.set)(e,a,l):(t=s.parse?s.parse(u):c?i.typeHandles[c].parse(u,s):u,(0,r.set)(e,a,t)),e}),{}):t.search};var r=n(236),i=n(466)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.stateToParams=function(e,t,n){var s=(0,o.createObjectFromConfig)(e,n),l=(e=e[o.RLSCONFIG]&&e[o.RLSCONFIG].queryParser,(0,o.parseParams)(n.search,e));if(!s)return{location:i({},n)};var c=!1;e=Object.keys(s).reduce((function(e,n){var i=(f=s[n]).stateKey,u=void 0===(d=f.options)?{}:d,h=f.initialState,d=f.type,f=(0,o.get)(t,i);i=void 0,i="date"===d?f.toISOString().substring(0,10)===(h&&h.toISOString().substring(0,10)):"object"===(void 0===(f=f&&"object"===(void 0===f?"undefined":r(f))&&!Object.keys(f).length?void 0:f)?"undefined":r(f))?(0,o.isEqual)(h,f):f===h;if((void 0===f&&!u.serialize||i)&&!u.setAsEmptyItem)return e;if(u.serialize){if(void 0===(i=u.serialize(f)))return e;f=i}else d&&(f=a.typeHandles[d].serialize(f,u));return(e[n]=f)!==l[n]&&u.shouldPush&&(c=!0),e}),{});return{location:i({},n,{search:(0,o.createParamsString)(e)}),shouldPush:c}};var o=n(236),a=n(466)},,,function(e,t,n){"use strict";var r=n(765),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,o,a,s,l=!1,c=(t=t||{}).debug||!1;try{var u=r(),h=document.createRange(),d=document.getSelection();if((o=document.createElement("span")).textContent=e,o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",(function(n){var r;n.stopPropagation(),t.format&&(n.preventDefault(),void 0===n.clipboardData?(c&&console.warn("unable to use e.clipboardData"),c&&console.warn("trying IE specific stuff"),window.clipboardData.clearData(),r=i[t.format]||i.default,window.clipboardData.setData(r,e)):(n.clipboardData.clearData(),n.clipboardData.setData(t.format,e))),t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(o),h.selectNodeContents(o),d.addRange(h),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(o){c&&console.error("unable to copy using execCommand: ",o),c&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),l=!0}catch(o){c&&console.error("unable to copy using clipboardData: ",o),c&&console.error("falling back to prompt"),a="message"in t?t.message:"Copy to clipboard: #{key}, Enter",s=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",n=a.replace(/#{\s*key\s*}/g,s),window.prompt(n,e)}}finally{d&&("function"==typeof d.removeRange?d.removeRange(h):d.removeAllRanges()),o&&document.body.removeChild(o),u()}return l}},,,,,function(e,t,n){var r=n(762);e.exports=function e(t,n,i){return r(n)||(i=n||i,n=[]),i=i||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(t,n):r(t)?function(t,n,r){for(var i=[],o=0;o<t.length;o++)i.push(e(t[o],n,r).source);return c(new RegExp("(?:"+i.join("|")+")",u(r)),n)}(t,n,i):(n=n,h(o(t,i=i),n,i))},e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n=[],r=0,o=0,a="",s=t&&t.delimiter||"/";null!=(f=i.exec(e));){var c,u,h,d,f,p=f[0],m=f[1],v=f.index;a+=e.slice(o,v),o=v+p.length,m?a+=m[1]:(c=e[o],u=f[2],h=f[3],d=f[4],v=f[5],p=f[6],m=f[7],a&&(n.push(a),a=""),f=f[2]||s,n.push({name:h||r++,prefix:u||"",delimiter:f,optional:"?"===p||"*"===p,repeat:"+"===p||"*"===p,partial:null!=u&&null!=c&&c!==u,asterisk:!!m,pattern:(v=d||v)?v.replace(/([=!:$\/()])/g,"\\$1"):m?".*":"[^"+l(f)+"]+?"}))}return o<e.length&&(a+=e.substr(o)),a&&n.push(a),n}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",u(t)));return function(t,i){for(var o="",s=t||{},l=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!=typeof u){var h,d=s[u.name];if(null==d){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=l(d[f]),!n[c].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===f?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!n[c].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');o+=u.prefix+h}}else o+=u}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e,t){return e.keys=t,e}function u(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var h,d,f=e[s];"string"==typeof f?a+=l(f):(h=l(f.prefix),d="(?:"+f.pattern+")",t.push(f),f.repeat&&(d+="(?:"+h+d+")*"),a+=d=f.optional?f.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")")}var p=l(n.delimiter||"/"),m=a.slice(-p.length)===p;return i||(a=(m?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+p+"|$)",c(new RegExp("^"+a,u(n)),t)}},,,,,,,function(e,t,n){"use strict";(function(e){var r=n(832),i=n(833),o=n(834);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(e=null===e?new l(t):e).length=t,e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"!=typeof e)return c(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n);return(n=(e=s(e,r)).write(t,n))!==r&&(e=e.slice(0,n)),e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?s(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(u(t),e=s(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(r)return I(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var i,o,a,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return i}(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return i=this,a=n,0===(o=t)&&a===i.length?r.fromByteArray(i):r.fromByteArray(i.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?i?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o=1,a=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a/=o=2,s/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,u=n;u<a;u++)if(l(e,u)===l(t,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===s)return c*o}else-1!==c&&(u-=u-c),c=-1;else for(u=n=a<n+s?a-s:n;0<=u;u--){for(var h=!0,d=0;d<s;d++)if(l(e,u+d)!==l(t,d)){h=!1;break}if(h)return u}return-1}function b(e,t,n,r){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function C(e,t,n,r){return j(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,r%=256,i.push(r),i.push(n);return i}(t,e.length-n),e,n,r)}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,c=e[i],u=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&c)<<6|63&o)&&(u=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&c)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(u=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,h=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return r=null,t=t,n=n,u(e=e),e<=0||void 0===t?s(r,e):"string"==typeof n?s(r,e).fill(t,n):s(r,e).fill(t);var r},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=l.allocUnsafe(t),r=0,i=0;i<e.length;++i){var a=e[i];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?w(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(r,i),u=e.slice(t,n),h=0;h<s;++h)if(c[h]!==u[h]){o=c[h],a=u[h];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,a,s,l=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;if((!r||i<(r=Number(r)))&&(r=i),(i=t.length)%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[n+o]=a}return o}(this,e,t,n);case"utf8":case"utf-8":return a=t,s=n,j(I(e,(o=this).length-a),o,a,s);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return o=this,a=t,s=n,j(R(e),o,a,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function x(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function _(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function k(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(e,t,n,r,o){return o||k(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,o){return o||k(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=l.prototype;else for(var r=t-e,i=new l(r,void 0),o=0;o<r;++o)i[o]=this[o+e];return i},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){return t||S(e,2,this.length),32768&(e=this[e]|this[e+1]<<8)?4294901760|e:e},l.prototype.readInt16BE=function(e,t){return t||S(e,2,this.length),32768&(e=this[e+1]|this[e]<<8)?4294901760|e:e},l.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):_(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||O(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||O(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,a=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):_(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return T(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return T(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i,o=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){var i;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(i=e.charCodeAt(0))<256&&(e=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(s=t;s<n;++s)this[s]=e;else for(var o=l.isBuffer(e)?e:I(new l(e,r).toString()),a=o.length,s=0;s<n-t;++s)this[s+t]=o[s%a];return this};var P=/[^+\/0-9A-Za-z-_]/g;function I(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function R(e){return r.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(P,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(211))},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeHandles=void 0;var r=n(257),i=n(236);function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.typeHandles={number:{serialize:function(e,t){return e.toString()},parse:function(e,t){return parseFloat(e)}},date:{serialize:function(e,t){return e.toISOString().substring(0,10)},parse:function(e,t){return new Date(e)}},array:{serialize:function(e,t){return(t.keepOrder?[].concat(o(e)):[].concat(o(e)).sort()).join(t.delimiter||r.OBJECT_KEY_DELIMITER)},parse:function(e,t){return(0,i.paramDecoder)(e).split(t.delimiter||r.OBJECT_KEY_DELIMITER)}},bool:{serialize:function(e,t){return e.toString()},parse:function(e,t){return"true"===e}},object:{serialize:function(e,t){return t.isFlags?Object.keys(e).filter((function(t,n){return e[t]})).join(r.OBJECT_KEY_DELIMITER):Object.keys(e).sort().map((function(t,n){return""+t+r.OBJECT_KEY_DELIMITER+e[t]}))},parse:function(e,t){return t.isFlags?e.split(t.delimiter||r.OBJECT_KEY_DELIMITER).reduce((function(e,t){return""===t||(e[t]=!0),e}),{}):(0,i.paramDecoder)(e).split(",").reduce((function(e,t){var n=t.split(r.OBJECT_KEY_DELIMITER);n=(t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(n,2))[0],t=t[1];return e[n]=t,e}),{})}}}},function(e,t,n){"use strict";function r(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n}var i=n(361),o=Object.prototype.hasOwnProperty,a=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();e.exports={arrayToObject:r,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],o=i.obj[i.prop],s=Object.keys(o),l=0;l<s.length;++l){var c=s[l],u=o[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:o,prop:c}),n.push(u))}return function(e){for(;1<e.length;){var t=e.pop(),n=t.obj[t.prop];if(a(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){if(e=e.replace(/\+/g," "),"iso-8859-1"===n)return e.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(e)}catch(t){return e}},encode:function(e,t,n,r,o){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===n)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var l="",c=0;c<a.length;++c){var u=a.charCodeAt(c);45===u||46===u||95===u||126===u||48<=u&&u<=57||65<=u&&u<=90||97<=u&&u<=122||o===i.RFC1738&&(40===u||41===u)?l+=a.charAt(c):u<128?l+=s[u]:u<2048?l+=s[192|u>>6]+s[128|63&u]:u<55296||57344<=u?l+=s[224|u>>12]+s[128|u>>6&63]+s[128|63&u]:(c+=1,u=65536+((1023&u)<<10|1023&a.charCodeAt(c)),l+=s[240|u>>18]+s[128|u>>12&63]+s[128|u>>6&63]+s[128|63&u])}return l},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(a(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,i){if(!n)return t;if("object"!=typeof n){if(a(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(i&&(i.plainObjects||i.allowPrototypes)||!o.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var s=t;return a(t)&&!a(n)&&(s=r(t,i)),a(t)&&a(n)?(n.forEach((function(n,r){var a;o.call(t,r)?(a=t[r])&&"object"==typeof a&&n&&"object"==typeof n?t[r]=e(a,n,i):t.push(n):t[r]=n})),t):Object.keys(n).reduce((function(t,r){var a=n[r];return o.call(t,r)?t[r]=e(t[r],a,i):t[r]=a,t}),s)}}},,,,,,,,function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(174);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){return t?((n=n?n(t):r.isURLSearchParams(t)?t.toString():(o=[],r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),o.join("&")))&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n),e):e;var o}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(174),i=n(672),o=n(673),a=n(476),s=n(674),l=n(677),c=n(678),u=n(479);e.exports=function(e){return new Promise((function(t,n){var h=e.data,d=e.headers,f=e.responseType;r.isFormData(h)&&delete d["Content-Type"];var p,m=new XMLHttpRequest;e.auth&&(p=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"",d.Authorization="Basic "+btoa(p+":"+v));var v=s(e.baseURL,e.url);function g(){var r;m&&(r="getAllResponseHeaders"in m?l(m.getAllResponseHeaders()):null,r={data:f&&"text"!==f&&"json"!==f?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m},i(t,n,r),m=null)}m.open(e.method.toUpperCase(),a(v,e.params,e.paramsSerializer),!0),m.timeout=e.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(u("Request aborted",e,"ECONNABORTED",m)),m=null)},m.onerror=function(){n(u("Network Error",e,null,m)),m=null},m.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",m)),m=null},!r.isStandardBrowserEnv()||(v=(e.withCredentials||c(v))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0)&&(d[e.xsrfHeaderName]=v),"setRequestHeader"in m&&r.forEach(d,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete d[t]:m.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(m.withCredentials=!!e.withCredentials),f&&"json"!==f&&(m.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&m.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){m&&(m.abort(),n(e),m=null)})),h=h||null,m.send(h)}))}},function(e,t,n){"use strict";var r=n(477);e.exports=function(e,t,n,i,o){return e=new Error(e),r(e,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(174);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function c(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=l(void 0,e[i])):n[i]=l(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=l(void 0,t[e]))})),r.forEach(o,c),r.forEach(a,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=l(void 0,e[i])):n[i]=l(void 0,t[i])})),r.forEach(s,(function(r){r in t?n[r]=l(e[r],t[r]):r in e&&(n[r]=l(void 0,e[r]))}));var u=i.concat(o).concat(a).concat(s);s=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===u.indexOf(e)}));return r.forEach(s,c),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},,,function(e,t,n){var r=n(369);e.exports=function(e){return"Object"!==(e=r(e))&&"Array"!==e}},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e){return 0===Object.keys(e).length}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,function(e,t,n){},,,,function(e,t,n){"use strict";(function(e){var r=n(0),i=n.n(r),o=n(132),a=n(44),s=n.n(a),l=1073741823,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:{};i=i.a.createContext||function(e,t){var n,i="__create-react-context-"+(c[u="__global_unique_id__"]=(c[u]||0)+1)+"__",a=function(e){function n(){var t,n,r=e.apply(this,arguments)||this;return r.emitter=(t=r.props.value,n=[],{on:function(e){n.push(e)},off:function(e){n=n.filter((function(t){return t!==e}))},get:function(){return t},set:function(e,r){t=e,n.forEach((function(e){return e(t,r)}))}}),r}Object(o.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e={};return e[i]=this.emitter,e},r.componentWillReceiveProps=function(e){var n,r,i,o;this.props.value!==e.value&&(((i=n=this.props.value)===(o=r=e.value)?0!==i||1/i==1/o:i!=i&&o!=o)||(r="function"==typeof t?t(n,r):l,0!=(r|=0)&&this.emitter.set(e.value,r)))},r.render=function(){return this.props.children},n}(r.Component);a.childContextTypes=((n={})[i]=s.a.object.isRequired,n);var u=function(t){function n(){var e=t.apply(this,arguments)||this;return e.state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(o.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){e=e.observedBits,this.observedBits=null==e?l:e},r.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?l:e},r.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},r.getValue=function(){return this.context[i]?this.context[i].get():e},r.render=function(){return e=this.props.children,(Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return u.contextTypes=((n={})[i]=s.a.object,n),{Provider:a,Consumer:u}},t.a=i}).call(this,n(211))},function(e,t,n){"use strict";(n=n(764).CopyToClipboard).CopyToClipboard=n,e.exports=n},,function(e){e.exports=JSON.parse('{"apply_button_text":"Apply","refresh_button_text":"Retry","error_details_button_text":"Details","item_except":"Except","item_only":"Only","items_show_more":"Show more","items_prompt":"Enter search string...","items_not_found":"No matches for the search string «{{inputValue}}»","items_fetch_error":"Something went wrong","items_add_new":"Add new entry","search_clear":"Clear","search_select_all":"Select all","search_placeholder":"Search","empty_string":"Empty string","null":"null","selected_popup_title":"Selected"}')},function(e){e.exports=JSON.parse('{"apply_button_text":"Применить","refresh_button_text":"Повторить","error_details_button_text":"Подробнее","item_except":"Кроме","item_only":"Только","items_show_more":"Показать еще","items_prompt":"Начните вводить...","items_not_found":"По запросу «{{inputValue}}» ничего не найдено","items_fetch_error":"Что-то пошло не так","items_add_new":"Добавить в список","search_clear":"Очистить","search_select_all":"Выбрать все","search_placeholder":"Поиск","empty_string":"Пустая строка","null":"null","selected_popup_title":"Выбрано"}')},function(e,t){var n="undefined"!=typeof Element,r="function"==typeof Map,i="function"==typeof Set,o="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;e.exports=function(e,t){try{return function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var s,l,c,u;if(Array.isArray(t)){if((s=t.length)!=a.length)return!1;for(l=s;0!=l--;)if(!e(t[l],a[l]))return!1;return!0}if(r&&t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(u=t.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=t.entries();!(l=u.next()).done;)if(!e(l.value[1],a.get(l.value[0])))return!1;return!0}if(i&&t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(u=t.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(a)){if((s=t.length)!=a.length)return!1;for(l=s;0!=l--;)if(t[l]!==a[l])return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((s=(c=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(l=s;0!=l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(n&&t instanceof Element)return!1;for(l=s;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!t.$$typeof)&&!e(t[c[l]],a[c[l]]))return!1;return!0}return t!=t&&a!=a}(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},,function(e){e.exports=JSON.parse('{"button_apply":"Apply","label_columns":"Columns"}')},function(e){e.exports=JSON.parse('{"button_apply":"Применить","label_columns":"Колонки"}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return e&&e.__esModule?e:{default:e}}var s=a(n(0));a(n(44)),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,s.default.PureComponent),i(l,[{key:"handleClick",value:function(){var e;this.setState({collapsed:!this.state.collapsed}),this.props.onClick&&(e=this.props).onClick.apply(e,arguments)}},{key:"render",value:function(){var e=void 0===(o=(h=this.props).collapsed)?this.state.collapsed:o,t=void 0===(a=h.className)?"":a,n=void 0===(l=h.itemClassName)?"":l,i=void 0===(c=h.treeViewClassName)?"":c,o=void 0===(u=h.childrenClassName)?"":u,a=h.nodeLabel,l=h.children,c=(h.defaultCollapsed,function(e,t){var n,r={};for(n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(h,["collapsed","className","itemClassName","treeViewClassName","childrenClassName","nodeLabel","children","defaultCollapsed"])),u="tree-view_arrow",h="tree-view_children";return e&&(u+=" tree-view_arrow-collapsed",h+=" tree-view_children-collapsed"),u=s.default.createElement("div",r({},c,{className:t+" "+u,onClick:this.handleClick})),s.default.createElement("div",{className:"tree-view "+i},s.default.createElement("div",{className:"tree-view_item "+n},u,a),s.default.createElement("div",{className:h+" "+o},e?null:l))}}]),i=l;function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=a,r=!0,s=void 0}}(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,e),this.state={collapsed:e.defaultCollapsed},this.handleClick=this.handleClick.bind(this)}t.default=i,e.exports=t.default},function(e,t,n){function r(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function i(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function o(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function a(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,1)}function s(e,t){function n(){var e=i;a(e)&&e.a.parentNode&&t(e.g)}var i=e;r(e.b,n),r(e.c,n),a(e)}function l(e,t){t=t||{},this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal"}function c(){return p=null===p?!!document.fonts:p}function u(e,t){return[e.style,e.weight,function(){if(null===f){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}f=""!==e.style.font}return f}()?e.stretch:"","100px",t].join(" ")}var h,d,f,p;p=f=d=h=null,l.prototype.load=function(e,t){var n=this,r=e||"BESbswy",a=0,l=t||3e3,f=(new Date).getTime();return new Promise((function(e,t){var p,m,v;c()&&!(d=null===d?!(!c()||!/Apple/.test(window.navigator.vendor))&&!!(v=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent))&&parseInt(v[1],10)<603:d)?(p=new Promise((function(e,t){!function i(){(new Date).getTime()-f>=l?t(Error(l+"ms timeout exceeded")):document.fonts.load(u(n,'"'+n.family+'"'),r).then((function(t){1<=t.length?e():setTimeout(i,25)}),t)}()})),v=new Promise((function(e,t){a=setTimeout((function(){t(Error(l+"ms timeout exceeded"))}),l)})),Promise.race([v,p]).then((function(){clearTimeout(a),e(n)}),t)):(m=function(){function c(){var t;(t=-1!=v&&-1!=g||-1!=v&&-1!=y||-1!=g&&-1!=y)&&((t=v!=g&&v!=y&&g!=y)||(null===h&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),h=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)),t=h&&(v==b&&g==b&&y==b||v==C&&g==C&&y==C||v==w&&g==w&&y==w)),t=!t),t&&(E.parentNode&&E.parentNode.removeChild(E),clearTimeout(a),e(n))}var d=new i(r),p=new i(r),m=new i(r),v=-1,g=-1,y=-1,b=-1,C=-1,w=-1,E=document.createElement("div");E.dir="ltr",o(d,u(n,"sans-serif")),o(p,u(n,"serif")),o(m,u(n,"monospace")),E.appendChild(d.a),E.appendChild(p.a),E.appendChild(m.a),document.body.appendChild(E),b=d.a.offsetWidth,C=p.a.offsetWidth,w=m.a.offsetWidth,function e(){var n;(new Date).getTime()-f>=l?(E.parentNode&&E.parentNode.removeChild(E),t(Error(l+"ms timeout exceeded"))):(!0!==(n=document.hidden)&&void 0!==n||(v=d.a.offsetWidth,g=p.a.offsetWidth,y=m.a.offsetWidth,c()),a=setTimeout(e,50))}(),s(d,(function(e){v=e,c()})),o(d,u(n,'"'+n.family+'",sans-serif')),s(p,(function(e){g=e,c()})),o(p,u(n,'"'+n.family+'",serif')),s(m,(function(e){y=e,c()})),o(m,u(n,'"'+n.family+'",monospace'))},document.body?m():document.addEventListener?document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e),m()})):document.attachEvent("onreadystatechange",(function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),m())})))}))},e.exports=l},,,function(e,t,n){"use strict";(function(e){var n="undefined"!=typeof Map?Map:(Object.defineProperty(i.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),i.prototype.get=function(e){return e=r(this.__entries__,e),(e=this.__entries__[e])&&e[1]},i.prototype.set=function(e,t){var n=r(this.__entries__,e);~n?this.__entries__[n][1]=t:this.__entries__.push([e,t])},i.prototype.delete=function(e){var t=this.__entries__;~(e=r(t,e))&&t.splice(e,1)},i.prototype.has=function(e){return!!~r(this.__entries__,e)},i.prototype.clear=function(){this.__entries__.splice(0)},i.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},i);function r(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}function i(){this.__entries__=[]}var o="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,a=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),s="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(a):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},l=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,u=(h.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},h.prototype.removeObserver=function(e){var t=this.observers_;~(e=t.indexOf(e))&&t.splice(e,1),!t.length&&this.connected_&&this.disconnect_()},h.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},h.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),0<e.length},h.prototype.connect_=function(){o&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},h.prototype.disconnect_=function(){o&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},h.prototype.onTransitionEnd_=function(e){var t=void 0===(e=e.propertyName)?"":e;l.some((function(e){return!!~t.indexOf(e)}))&&this.refresh()},h.getInstance=function(){return this.instance_||(this.instance_=new h),this.instance_},h.instance_=null,h);function h(){function e(){o&&(o=!1,r()),a&&n()}function t(){s(e)}function n(){var e=Date.now();if(o){if(e-l<2)return;a=!0}else a=!(o=!0),setTimeout(t,i);l=e}var r,i,o,a,l;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(r=this.refresh.bind(this),a=o=!(i=20),l=0,n)}var d=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||a},p=b(0,0,0,0);function m(e){return parseFloat(e)||0}function v(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+m(e["border-"+n+"-width"])}),0)}var g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"==typeof e.getBBox};function y(e){return o?g(e)?b(0,0,(t=(t=e).getBBox()).width,t.height):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return p;var r=f(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=m(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=m(r.width),l=m(r.height);return"border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=v(r,"left","right")+o),Math.round(l+a)!==n&&(l-=v(r,"top","bottom")+a)),e!==f(e).document.documentElement&&(t=Math.round(s+o)-t,n=Math.round(l+a)-n,1!==Math.abs(t)&&(s-=t),1!==Math.abs(n)&&(l-=n)),b(i.left,i.top,s,l)}(e):p;var t}function b(e,t,n,r){return{x:e,y:t,width:n,height:r}}var C=(w.prototype.isActive=function(){var e=y(this.target);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},w.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},w);function w(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}var E=function(e,t){var n,r,i,o=(n=(o=t).x,r=o.y,i=o.width,t=o.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(o.prototype),d(o,{x:n,y:r,width:i,height:t,top:r,right:n+i,bottom:t+r,left:n}),o);d(this,{target:e,contentRect:o})},S=(O.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new C(e)),this.controller_.addObserver(this),this.controller_.refresh())}},O.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},O.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},O.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},O.prototype.broadcastActive=function(){var e,t;this.hasActive()&&(e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new E(e.target,e.broadcastRect())})),this.callback_.call(e,t,e),this.clearActive())},O.prototype.clearActive=function(){this.activeObservations_.splice(0)},O.prototype.hasActive=function(){return 0<this.activeObservations_.length},O);function O(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}var x=new("undefined"!=typeof WeakMap?WeakMap:n),_=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance();n=new S(t,n,this);x.set(this,n)};["observe","unobserve","disconnect"].forEach((function(e){_.prototype[e]=function(){var t;return(t=x.get(this))[e].apply(t,arguments)}})),e=void 0!==a.ResizeObserver?a.ResizeObserver:_,t.a=e}).call(this,n(211))},,,function(e){e.exports=JSON.parse('{"button_cancel":"Cancel","button_send":"Create request","button_yes":"Yes","button_no":"No","button_retry":"Retry","button_done":"Done","field_access":"Access","field_topic":"Subject","field_message":"Message","field_attach-file":"Attachments","field_screenshot":"Screenshot","value_current-cloud":"Current cloud","value_only-mine":"Only me","label_add-screenshot":"Attach screenshot","label_problem-solved":"Has the problem been resolved?","label_field-empty-error":"Empty field","section_faq":"Frequently asked questions","label_failed-create-ticket":"Failed to create ticket","label_success-create-ticket":"Your appeal has been received","label_cteated-ticket-info":"Ticket created"}')},function(e){e.exports=JSON.parse('{"button_cancel":"Отмена","button_send":"Отправить","button_yes":"Да","button_no":"Нет","button_retry":"Попробовать снова","button_done":"Готово","field_access":"Доступ","field_topic":"Тема","field_message":"Сообщение","field_attach-file":"Вложения","field_screenshot":"Скриншот","value_current-cloud":"Текущему облаку","value_only-mine":"Только мне","label_add-screenshot":"Добавить скриншот экрана","label_problem-solved":"Проблема была решена?","label_field-empty-error":"Поле не заполнено","section_faq":"Часто задаваемые вопросы","label_failed-create-ticket":"Не удалось создать тикет","label_success-create-ticket":"Ваше обращение получено","label_cteated-ticket-info":"Создан тикет"}')},function(e){e.exports=JSON.parse('{"button_attach-files":"Attach files","button_attach-file":"Attach file"}')},function(e){e.exports=JSON.parse('{"button_attach-files":"Прикрепить файлы","button_attach-file":"Прикрепить файл"}')},function(e){e.exports=JSON.parse('{"label_attach-file-notice":"Maximum file size is {{maxSize}} MB.","label_file-size-limit-exceeded":"Files that exceed the allowed size will not be uploaded."}')},function(e){e.exports=JSON.parse('{"label_attach-file-notice":"Размер файла до {{maxSize}} МБ","label_file-size-limit-exceeded":"Файлы, превышающие допустимый размер, загружены не будут."}')},function(e){e.exports=JSON.parse('{"heading_settings":"Settings","placeholder_search":"Search settings","not-found":"No results found"}')},function(e){e.exports=JSON.parse('{"heading_settings":"Настройки","placeholder_search":"Найти настройки","not-found":"Ничего не найдено"}')},function(e){e.exports=JSON.parse('{"switch_services":"All services","switch_settings":"Settings","switch_favorites":"Favorites","label_more":"More"}')},function(e){e.exports=JSON.parse('{"switch_services":"Все сервисы","switch_settings":"Настройки","switch_favorites":"Избранное","label_more":"Ещё"}')},,function(e){e.exports=JSON.parse('{"section_all-services":"All services","value_plain":"Plain","value_group":"Group","section_my-services":"My Services","button_settings":"Settings","label_placeholder-search-services":"Search services","label_not-found-pinned":"Not found in pinned","label_not-found-service":"Not found in all service","section_services-search":"All services search","section_cloud":"Cloud Platform","label_placeholder-empty":"No pinned services","section_settings":"Settings","label_show-icons":"Show icons","label_text-size":"Text size","label_not-found":"Not found","label_console-title":"Console","label_monitoring-title":"Monitoring","label_datalens-title":"DataLens","label_failed-load-services":"Failed to load services","button_retry":"Retry","toast_failed-update-settings":"Failed to save settings","toast_failed-get-settings":"Failed to get settings","label_favorites-services":"Favorites"}')},function(e){e.exports=JSON.parse('{"section_all-services":"Все сервисы","value_plain":"Без групп","value_group":"По группам","section_my-services":"Мои сервисы","button_settings":"Настроить меню","label_placeholder-search-services":"Поиск по сервисам","label_not-found-pinned":"Не найдено в закрепленных","label_not-found-service":"Не найдено","section_services-search":"Поиск по всем сервисам","section_cloud":"Облачная платформа","label_placeholder-empty":"Нет закрепленных сервисов","section_settings":"Настройки","label_show-icons":"Показывать иконки","label_text-size":"Размер текста","label_not-found":"Не найдено","label_console-title":"Консоль","label_monitoring-title":"Мониторинг","label_datalens-title":"DataLens","label_failed-load-services":"Не удалось загрузить список сервисов","button_retry":"Повторить","toast_failed-update-settings":"Не удалось сохранить настройки","toast_failed-get-settings":"Не удалось загрузить настройки","label_favorites-services":"Избранное"}')},function(e){e.exports=JSON.parse('{"label_link-login-title":"Login","label_login":"Log in","label_mail":"Mail","label_manage-account":"Manage account","label_link-add-account-title":"Add account","label_add-account":"Add account","label_link-logout-title":"Logout","label_sso-login":"Log in via SSO","label_popup":"Account"}')},function(e){e.exports=JSON.parse('{"label_link-login-title":"Войти","label_login":"Войти","label_mail":"Почта","label_manage-account":"Управление аккаунтом","label_link-add-account-title":"Добавить аккаунт","label_add-account":"Добавить аккаунт","label_link-logout-title":"Выйти","label_sso-login":"Войти через SSO","label_popup":"Учетная запись"}')},function(e){e.exports=JSON.parse('{"label_error-required":"Empty field","label_error-invalid":"Incorrect value in field","title_dialog-enter-sso":"Log in via SSO","label_dialog-federation-id":"Federation ID","button_dialog-confirm":"Log in"}')},function(e){e.exports=JSON.parse('{"label_error-required":"Поле не заполнено","label_error-invalid":"Поле заполнено неправильно","title_dialog-enter-sso":"Вход через SSO","label_dialog-federation-id":"ID федерации","button_dialog-confirm":"Войти"}')},function(e){e.exports=JSON.parse('{"switch_settings":"Settings","label_more":"More"}')},function(e){e.exports=JSON.parse('{"switch_settings":"Настройки","label_more":"Ещё"}')},function(e,t,n){"use strict";e.exports=n(1011)},,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(1013)},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.createReduxLocationActions=function(e,t,n,l){var c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:s.stateToParams;e[o.RLSCONFIG]&&e[o.RLSCONFIG][o.OVERWRITE_ACCESSORS]&&Object.keys(e[o.RLSCONFIG][o.OVERWRITE_ACCESSORS]).forEach((function(t){(0,o.overrideAccessors)(t,e[o.RLSCONFIG][o.OVERWRITE_ACCESSORS][t])}));var u={};return{locationMiddleware:function(t){return function(r){return function(i){var a=t.getState(),s=r(i),l=t.getState(),h=n.location;i=h.pathname!==u.pathname;return l===a&&!i||(l=(a=c(e,l,u=h)).shouldPush,a=a.location,(0,o.isEqual)(a,h)||(l&&!i?n.push(a):n.replace(a))),s}}},reducersWithLocation:function(n,o){return(o=function(n,o){var s=o.type;o=o.payload;return s===i.LOCATION_POP&&o?(o=r({},o,{query:(0,a.parseQuery)(e,o)}),t(n,o)):n}(l(n,o),o))!==n?o:n}}};var i=n(257),o=n(236),a=n(424),s=n(425)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listenForHistoryChange=function(e,t){function n(e){return{type:r.LOCATION_POP,payload:e}}t.listen((function(){t&&t.action&&"POP"===t.action&&e.dispatch(n(t.location))})),t.listen((function(){var n;t&&t.action&&"PUSH"===t.action&&e.dispatch((n=t.location,{type:r.LOCATION_PUSH,payload:n}))})),e.dispatch(n(t.location))};var r=n(257)},function(e,t,n){"use strict";function r(e,t){d.apply(e,u(t)?t:[t])}function i(e,t,n,s,l,c,d,f,v,g,y,b,C,w,E){for(var S,O=e,x=E,_=0,k=!1;void 0!==(x=x.get(m))&&!k;){var T=x.get(e);if(_+=1,void 0!==T){if(T===_)throw new RangeError("Cyclic object value");k=!0}void 0===x.get(m)&&(_=0)}if("function"==typeof d?O=d(t,O):O instanceof Date?O=g(O):"comma"===n&&u(O)&&(O=a.maybeMap(O,(function(e){return e instanceof Date?g(e):e}))),null===O){if(s)return c&&!C?c(t,p.encoder,w,"key",y):t;O=""}if("string"==typeof(S=O)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||a.isBuffer(O)){if(c){var N=C?t:c(t,p.encoder,w,"key",y);if("comma"===n&&C){for(var P=h.call(String(O),","),I="",R=0;R<P.length;++R)I+=(0===R?"":",")+b(c(P[R],p.encoder,w,"value",y));return[b(N)+"="+I]}return[b(N)+"="+b(c(O,p.encoder,w,"value",y))]}return[b(t)+"="+b(String(O))]}var j,D=[];if(void 0===O)return D;j="comma"===n&&u(O)?[{value:0<O.length?O.join(",")||null:void 0}]:u(d)?d:(N=Object.keys(O),f?N.sort(f):N);for(var A=0;A<j.length;++A){var L,M=j[A],F="object"==typeof M&&void 0!==M.value?M.value:O[M];l&&null===F||(L=u(O)?"function"==typeof n?n(t,M):t:t+(v?"."+M:"["+M+"]"),E.set(e,_),(M=o()).set(m,E),r(D,i(F,L,n,s,l,c,d,f,v,g,y,b,C,w,M)))}return D}var o=n(638),a=n(467),s=n(361),l=Object.prototype.hasOwnProperty,c={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Array.isArray,h=String.prototype.split,d=Array.prototype.push,f=Date.prototype.toISOString,p=(n=s.default,{addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,format:n,formatter:s.formatters[n],indices:!1,serializeDate:function(e){return f.call(e)},skipNulls:!1,strictNullHandling:!1}),m={};e.exports=function(e,t){var n=e,a=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=s.default;if(void 0!==e.format){if(!l.call(s.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=s.formatters[n],i=p.filter;return"function"!=typeof e.filter&&!u(e.filter)||(i=e.filter),{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:p).addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:p).charsetSentinel,delimiter:(void 0===e.delimiter?p:e).delimiter,encode:("boolean"==typeof e.encode?e:p).encode,encoder:("function"==typeof e.encoder?e:p).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:p).encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:("function"==typeof e.serializeDate?e:p).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:p).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:p).strictNullHandling}}(t);"function"==typeof a.filter?n=(0,a.filter)("",n):u(a.filter)&&(f=a.filter);var h=[];if("object"!=typeof n||null===n)return"";e=t&&t.arrayFormat in c?t.arrayFormat:t&&"indices"in t&&!t.indices?"repeat":"indices";var d=c[e],f=f||Object.keys(n);a.sort&&f.sort(a.sort);for(var m=o(),v=0;v<f.length;++v){var g=f[v];a.skipNulls&&null===n[g]||r(h,i(n[g],g,d,a.strictNullHandling,a.skipNulls,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.format,a.formatter,a.encodeValuesOnly,a.charset,m))}return t=h.join(a.delimiter),e=!0===a.addQueryPrefix?"?":"",a.charsetSentinel&&("iso-8859-1"===a.charset?e+="utf8=%26%2310003%3B&":e+="utf8=%E2%9C%93&"),0<t.length?e+t:""}},function(e,t,n){"use strict";function r(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n}var i=n(359),o=n(643),a=n(645),s=i("%TypeError%"),l=i("%WeakMap%",!0),c=i("%Map%",!0),u=o("WeakMap.prototype.get",!0),h=o("WeakMap.prototype.set",!0),d=o("WeakMap.prototype.has",!0),f=o("Map.prototype.get",!0),p=o("Map.prototype.set",!0),m=o("Map.prototype.has",!0);e.exports=function(){var e,t,n,i={assert:function(e){if(!i.has(e))throw new s("Side channel does not contain "+a(e))},get:function(i){if(l&&i&&("object"==typeof i||"function"==typeof i)){if(e)return u(e,i)}else if(c){if(t)return f(t,i)}else if(n)return function(e,t){return(t=r(e,t))&&t.value}(n,i)},has:function(i){if(l&&i&&("object"==typeof i||"function"==typeof i)){if(e)return d(e,i)}else if(c){if(t)return m(t,i)}else if(n)return!!r(n,i);return!1},set:function(i,o){var a,s;l&&i&&("object"==typeof i||"function"==typeof i)?(e=e||new l,h(e,i,o)):c?(t=t||new c,p(t,i,o)):(s=o,(i=r(a=n=n||{key:{},next:null},o=i))?i.value=s:a.next={key:o,next:a.next,value:s})}};return i}},function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(640);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&i()}},function(e,t,n){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;return("function"!=typeof Object.keys||0===Object.keys(e).length)&&(("function"!=typeof Object.getOwnPropertyNames||0===Object.getOwnPropertyNames(e).length)&&(1===(n=Object.getOwnPropertySymbols(e)).length&&n[0]===t&&(!!Object.prototype.propertyIsEnumerable.call(e,t)&&("function"!=typeof Object.getOwnPropertyDescriptor||42===(e=Object.getOwnPropertyDescriptor(e,t)).value&&!0===e.enumerable))))}},function(e,t,n){"use strict";var r=Array.prototype.slice,i=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==i.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,o,a=r.call(arguments,1),s=Math.max(0,t.length-a.length),l=[],c=0;c<s;c++)l.push("$"+c);return n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof n){var i=t.apply(this,a.concat(r.call(arguments)));return Object(i)===i?i:this}return t.apply(e,a.concat(r.call(arguments)))})),t.prototype&&((o=function(){}).prototype=t.prototype,n.prototype=new o,o.prototype=null),n}},function(e,t,n){"use strict";n=n(360),e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var r=n(359),i=n(644),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){return"function"==typeof(t=r(e,!!t))&&-1<o(e,".prototype.")?i(t):t}},function(e,t,n){"use strict";var r=n(360),i=(n=n(359))("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||r.call(o,i),s=n("%Object.getOwnPropertyDescriptor%",!0),l=n("%Object.defineProperty%",!0),c=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}function u(){return a(r,i,arguments)}e.exports=function(e){var t=a(r,o,arguments);return s&&l&&s(t,"length").configurable&&l(t,"length",{value:1+c(0,e.length-(arguments.length-1))}),t},l?l(e.exports,"apply",{value:u}):e.exports.apply=u},function(e,t,n){var r="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"==typeof i.get?i.get:null,a=r&&Map.prototype.forEach,s=(i="function"==typeof Set&&Set.prototype,r=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,i&&r&&"function"==typeof r.get?r.get:null),l=i&&Set.prototype.forEach,c="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,u="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,d=Boolean.prototype.valueOf,f=Object.prototype.toString,p=Function.prototype.toString,m=String.prototype.match,v=String.prototype.slice,g=String.prototype.replace,y=String.prototype.toUpperCase,b=String.prototype.toLowerCase,C=RegExp.prototype.test,w=Array.prototype.concat,E=Array.prototype.join,S=Array.prototype.slice,O=Math.floor,x="function"==typeof BigInt?BigInt.prototype.valueOf:null,_=Object.getOwnPropertySymbols,k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,T="function"==typeof Symbol&&"object"==typeof Symbol.iterator,N="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,P=Object.prototype.propertyIsEnumerable,I=("function"==typeof Reflect?Reflect:Object).getPrototypeOf||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function R(e,t){if(e===1/0||e===-1/0||e!=e||e&&-1e3<e&&e<1e3||C.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-O(-e):O(e);if(r!==e)return e=String(r),r=v.call(t,e.length+1),g.call(e,n,"$&_")+"."+g.call(g.call(r,/([0-9]{3})/g,"$&_"),/_$/,"")}return g.call(t,n,"$&_")}var j=(n=n(646).custom)&&L(n)?n:null;function D(e,t,n){return(t="double"===(n.quoteStyle||t)?'"':"'")+e+t}function A(e){return!("[object Array]"!==B(e)||N&&"object"==typeof e&&N in e)}function L(e){if(T)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return 1;if(e&&"object"==typeof e&&k)try{return k.call(e),1}catch(e){}}e.exports=function e(t,n,r,i){var f=n||{};if(F(f,"quoteStyle")&&"single"!==f.quoteStyle&&"double"!==f.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(F(f,"maxStringLength")&&("number"==typeof f.maxStringLength?f.maxStringLength<0&&f.maxStringLength!==1/0:null!==f.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');if("boolean"!=typeof(ee=!F(f,"customInspect")||f.customInspect)&&"symbol"!==ee)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(F(f,"indent")&&null!==f.indent&&"\t"!==f.indent&&!(parseInt(f.indent,10)===f.indent&&0<f.indent))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(F(f,"numericSeparator")&&"boolean"!=typeof f.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var y=f.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r="... "+(r=t.length-n.maxStringLength)+" more character"+(1<r?"s":"");return e(v.call(t,0,n.maxStringLength),n)+r}return D(t=g.call(g.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,z),"single",n)}(t,f);if("number"==typeof t)return 0===t?0<1/0/t?"0":"-0":(n=String(t),y?R(t,n):n);if("bigint"==typeof t){var C=String(t)+"n";return y?R(t,C):C}if((y=void 0===f.depth?5:f.depth)<=(r=void 0===r?0:r)&&0<y&&"object"==typeof t)return A(t)?"[Array]":"[Object]";var O;C=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&0<e.indent))return null;n=E.call(Array(e.indent+1)," ")}return{base:n,prev:E.call(Array(t+1),n)}}(f,r);if(void 0===i)i=[];else if(0<=H(i,t))return"[Circular]";function _(t,n,o){return n&&(i=S.call(i)).push(n),o?(o={depth:f.depth},F(f,"quoteStyle")&&(o.quoteStyle=f.quoteStyle),e(t,o,r+1,i)):e(t,f,r+1,i)}if("function"==typeof t){y=function(e){return e.name?e.name:(e=m.call(p.call(e),/^function\s*([\w$]+)/))?e[1]:null}(t);var M=q(t,_);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(0<M.length?" { "+E.call(M,", ")+" }":"")}if(L(t))return M=T?g.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):k.call(t),"object"!=typeof t||T?M:U(M);if(function(e){return!(!e||"object"!=typeof e)&&("undefined"!=typeof HTMLElement&&e instanceof HTMLElement||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}(t)){for(var Y="<"+b.call(String(t.nodeName)),X=t.attributes||[],K=0;K<X.length;K++)Y+=" "+X[K].name+"="+D((O=X[K].value,g.call(String(O),/"/g,"&quot;")),"double",f);return Y+=">",t.childNodes&&t.childNodes.length&&(Y+="..."),Y+"</"+b.call(String(t.nodeName))+">"}if(A(t)){if(0===t.length)return"[]";var Z=q(t,_);return C&&!function(e){for(var t=0;t<e.length;t++)if(0<=H(e[t],"\n"))return!1;return!0}(Z)?"["+G(Z,C)+"]":"[ "+E.call(Z,", ")+" ]"}if(!("[object Error]"!==B(Z=t)||N&&"object"==typeof Z&&N in Z)){var Q=q(t,_);return"cause"in t&&!P.call(t,"cause")?"{ ["+String(t)+"] "+E.call(w.call("[cause]: "+_(t.cause),Q),", ")+" }":0===Q.length?"["+String(t)+"]":"{ ["+String(t)+"] "+E.call(Q,", ")+" }"}if("object"==typeof t&&ee){if(j&&"function"==typeof t[j])return t[j]();if("symbol"!==ee&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{s.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var $=[];return a.call(t,(function(e,n){$.push(_(n,t,!0)+" => "+_(e,t))})),W("Map",o.call(t),$,C)}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var J=[];return l.call(t,(function(e){J.push(_(e,t))})),W("Set",s.call(t),J,C)}if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e,c);try{u.call(e,u)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return V("WeakMap");if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e,u);try{c.call(e,c)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return V("WeakSet");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{return h.call(e),!0}catch(e){}return!1}(t))return V("WeakRef");if(!("[object Number]"!==B(Z=t)||N&&"object"==typeof Z&&N in Z))return U(_(Number(t)));if(function(e){if(!e||"object"!=typeof e||!x)return!1;try{return x.call(e),!0}catch(e){}return!1}(t))return U(_(x.call(t)));if(!("[object Boolean]"!==B(Q=t)||N&&"object"==typeof Q&&N in Q))return U(d.call(t));if(!("[object String]"!==B(ee=t)||N&&"object"==typeof ee&&N in ee))return U(_(String(t)));if(("[object Date]"!==B(Z=t)||N&&"object"==typeof Z&&N in Z)&&("[object RegExp]"!==B(te=t)||N&&"object"==typeof te&&N in te)){Q=q(t,_);var ee=I?I(t)===Object.prototype:t instanceof Object||t.constructor===Object,te=(Z=t instanceof Object?"":"null prototype",!ee&&N&&Object(t)===t&&N in t?v.call(B(t),8,-1):Z?"Object":"");Z=(!ee&&"function"==typeof t.constructor&&t.constructor.name?t.constructor.name+" ":"")+(te||Z?"["+E.call(w.call([],te||[],Z||[]),": ")+"] ":"");return 0===Q.length?Z+"{}":C?Z+"{"+G(Q,C)+"}":Z+"{ "+E.call(Q,", ")+" }"}return String(t)};var M=Object.prototype.hasOwnProperty||function(e){return e in this};function F(e,t){return M.call(e,t)}function B(e){return f.call(e)}function H(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function z(e){var t=e.charCodeAt(0);return(e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t])?"\\"+e:"\\x"+(t<16?"0":"")+y.call(t.toString(16))}function U(e){return"Object("+e+")"}function V(e){return e+" { ? }"}function W(e,t,n,r){return e+" ("+t+") {"+(r?G(n,r):E.call(n,", "))+"}"}function G(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+E.call(e,","+n)+"\n"+t.prev}function q(e,t){var n=A(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=F(e,i)?t(e[i],e):""}var o,a="function"==typeof _?_(e):[];if(T)for(var s={},l=0;l<a.length;l++)s["$"+a[l]]=a[l];for(o in e)F(e,o)&&(n&&String(Number(o))===o&&o<e.length||T&&s["$"+o]instanceof Symbol||(C.call(/[^\w$]/,o)?r.push(t(o,e)+": "+t(e[o],e)):r.push(o+": "+t(e[o],e))));if("function"==typeof _)for(var c=0;c<a.length;c++)P.call(e,a[c])&&r.push("["+t(a[c])+"]: "+t(e[a[c]],e));return r}},function(e,t){},function(e,t,n){"use strict";function r(e,t,n,r){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=0<n.depth&&/(\[[^[\]]*])/.exec(i),c=[];if(e=s?i.slice(0,s.index):i){if(!n.plainObjects&&o.call(Object.prototype,e)&&!n.allowPrototypes)return;c.push(e)}for(var u=0;0<n.depth&&null!==(s=a.exec(i))&&u<n.depth;){if(u+=1,!n.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+i.slice(s.index)+"]"),function(e,t,n,r){for(var i=r?t:l(t,n),o=e.length-1;0<=o;--o){var a,s,c,u=e[o];"[]"===u&&n.parseArrays?a=[].concat(i):(a=n.plainObjects?Object.create(null):{},s="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,c=parseInt(s,10),n.parseArrays||""!==s?!isNaN(c)&&u!==s&&String(c)===s&&0<=c&&n.parseArrays&&c<=n.arrayLimit?(a=[])[c]=i:a[s]=i:a={0:i}),i=a}return i}(c,t,n,r)}}var i=n(467),o=Object.prototype.hasOwnProperty,a=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},l=function(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e};e.exports=function(e,t){var n=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?s:e).charset;return{allowDots:void 0===e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:s).allowPrototypes,allowSparse:("boolean"==typeof e.allowSparse?e:s).allowSparse,arrayLimit:("number"==typeof e.arrayLimit?e:s).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:s).charsetSentinel,comma:("boolean"==typeof e.comma?e:s).comma,decoder:("function"==typeof e.decoder?e:s).decoder,delimiter:("string"==typeof e.delimiter||i.isRegExp(e.delimiter)?e:s).delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:s).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:s).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:s).plainObjects,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:s).strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var n,r,c,u,h={},d=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=(e=t.parameterLimit===1/0?void 0:t.parameterLimit,d.split(t.delimiter,e)),p=-1,m=t.charset;if(t.charsetSentinel)for(n=0;n<f.length;++n)0===f[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[n]?m="utf-8":"utf8=%26%2310003%3B"===f[n]&&(m="iso-8859-1"),p=n,n=f.length);for(n=0;n<f.length;++n)n!==p&&((u=-1===(u=-1===(u=(r=f[n]).indexOf("]="))?r.indexOf("="):u+1)?(c=t.decoder(r,s.decoder,m,"key"),t.strictNullHandling?null:""):(c=t.decoder(r.slice(0,u),s.decoder,m,"key"),i.maybeMap(l(r.slice(u+1),t),(function(e){return t.decoder(e,s.decoder,m,"value")}))))&&t.interpretNumericEntities&&"iso-8859-1"===m&&(u=u.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))),-1<r.indexOf("[]=")&&(u=a(u)?[u]:u),o.call(h,c)?h[c]=i.combine(h[c],u):h[c]=u);return h}(e,n):e,u=n.plainObjects?Object.create(null):{},h=Object.keys(c),d=0;d<h.length;++d){var f=r(f=h[d],c[f],n,"string"==typeof e);u=i.merge(u,f,n)}return!0===n.allowSparse?u:i.compact(u)}},,,function(e,t,n){e=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(n){l=function(e,t,n){return e[t]=n}}function c(e,n,r,i){var o,a,s,l;n=n&&n.prototype instanceof v?n:v,n=Object.create(n.prototype),i=new x(i||[]);return n._invoke=(o=e,a=r,s=i,l=h,function(e,n){if(l===f)throw new Error("Generator is already running");if(l===p){if("throw"===e)throw n;return k()}for(s.method=e,s.arg=n;;){var r=s.delegate;if(r){var i=function e(n,r){var i;if((i=n.iterator[r.method])===t){if(r.delegate=null,"throw"===r.method){if(n.iterator.return&&(r.method="return",r.arg=t,e(n,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}return"throw"===(i=u(i,n.iterator,r.arg)).type?(r.method="throw",r.arg=i.arg,r.delegate=null,m):(i=i.arg)?i.done?(r[n.resultName]=i.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}(r,s);if(i){if(i===m)continue;return i}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===h)throw l=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);if(l=f,"normal"===(i=u(o,a,s)).type){if(l=s.done?p:d,i.arg!==m)return{value:i.arg,done:s.done}}else"throw"===i.type&&(l=p,s.method="throw",s.arg=i.arg)}}),n}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",m={};function v(){}function g(){}function y(){}var b={};l(b,o,(function(){return this})),(i=(i=Object.getPrototypeOf)&&i(i(_([]))))&&i!==n&&r.call(i,o)&&(b=i);var C=y.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,s){if("throw"!==(i=u(e[i],e,o)).type){var l=i.arg;return(o=l.value)&&"object"==typeof o&&r.call(o,"__await")?t.resolve(o.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(o).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(i.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(e){if(e){if(n=e[o])return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n,i=-1;return(n=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n}).next=n}}return{next:k}}function k(){return{value:t,done:!0}}return l(C,"constructor",g.prototype=y),l(y,"constructor",g),g.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},w(E.prototype),l(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=_,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;0<=o;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}var a=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r,i=n.completion;return"throw"===i.type&&(r=i.arg,O(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:_(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(174),i=n(475),o=n(667),a=n(481);function s(e){var t=new o(e);e=i(o.prototype.request,t);return r.extend(e,o.prototype,t),r.extend(e,t),e}var l=s(n(367));l.Axios=o,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=n(482),l.CancelToken=n(681),l.isCancel=n(480),l.all=function(e){return Promise.all(e)},l.spread=n(682),l.isAxiosError=n(683),e.exports=l,e.exports.default=l},function(e,t,n){"use strict";var r=n(174),i=n(476),o=n(668),a=n(669),s=n(481),l=n(679),c=l.validators;function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var u=[a,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(o),i=Promise.resolve(e);u.length;)i=i.then(u.shift(),u.shift());return i}for(var h=e;n.length;){var d=n.shift(),f=n.shift();try{h=d(h)}catch(t){f(t);break}}try{i=a(h)}catch(t){return Promise.reject(t)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},u.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=u},function(e,t,n){"use strict";var r=n(174);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(174),i=n(670),o=n(480),a=n(367);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(174),i=n(367);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},function(e,t,n){"use strict";var r=n(174);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(479);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(174);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){return(e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)")))?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(675),i=n(676);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(174),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o={};return e&&r.forEach(e.split("\n"),(function(e){n=e.indexOf(":"),t=r.trim(e.substr(0,n)).toLowerCase(),n=r.trim(e.substr(n+1)),t&&(o[t]&&0<=i.indexOf(t)||(o[t]="set-cookie"===t?(o[t]||[]).concat([n]):o[t]?o[t]+", "+n:n))})),o}},function(e,t,n){"use strict";var r,i,o,a=n(174);function s(e){return i&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}e.exports=a.isStandardBrowserEnv()?(i=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),r=s(window.location.href),function(e){return(e=a.isString(e)?s(e):e).protocol===r.protocol&&e.host===r.host}):function(){return!0}},function(e,t,n){"use strict";var r=n(680),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={},a=r.version.split(".");function s(e,t){for(var n=t?t.split("."):a,r=e.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}i.transitional=function(e,t,n){var i=t&&s(t);function a(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(a(r," has been removed in "+t));return i&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;0<i--;){var o,a=r[i],s=t[a];if(s){if(!0!==(o=void 0===(o=e[a])||s(o,a,e)))throw new TypeError("option "+a+" must be "+o)}else if(!0!==n)throw Error("Unknown option "+a)}},validators:i}},function(e){e.exports=JSON.parse('{"_args":[["axios@0.21.4","/var/lib/teamcity/BuildAgents/dataui-qyp-iva-01/work/bbb0c6120dfbd0c4"]],"_from":"axios@0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"axios@0.21.4","name":"axios","escapedName":"axios","rawSpec":"0.21.4","saveSpec":null,"fetchSpec":"0.21.4"},"_requiredBy":["/@yandex-data-ui/core","/@yandex-data-ui/support-node-components"],"_resolved":"https://npm.yandex-team.ru/axios/-/axios-0.21.4.tgz?rbtorrent=18ccba4ff7434d32e9be97235a7293b040920cc4","_spec":"0.21.4","_where":"/var/lib/teamcity/BuildAgents/dataui-qyp-iva-01/work/bbb0c6120dfbd0c4","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')},function(e,t,n){"use strict";var r=n(482);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t,n){(function(e,r){var i;!function(){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof r&&r;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,l=36,c=/^xn--/,u=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function m(e){throw new RangeError(d[e])}function v(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function g(e,t){var n=e.split("@"),r="";return 1<n.length&&(r=n[0]+"@",e=n[1]),r+v((e=e.replace(h,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function b(e){return v(e,(function(e){var t="";return 65535<e&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+p(e)})).join("")}function C(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var r=0;for(e=n?f(e/700):e>>1,e+=f(e/t);455<e;r+=l)e=f(e/35);return f(r+36*e/(e+38))}function E(e){var t,n,r,i,o,a,c,u=[],h=e.length,d=0,p=128,v=72,g=e.lastIndexOf("-");for(g<0&&(g=0),n=0;n<g;++n)128<=e.charCodeAt(n)&&m("not-basic"),u.push(e.charCodeAt(n));for(r=0<g?g+1:0;r<h;){for(i=d,o=1,a=l;h<=r&&m("invalid-input"),c=e.charCodeAt(r++),(l<=(c=c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:l)||c>f((s-d)/o))&&m("overflow"),d+=c*o,!(c<(c=a<=v?1:v+26<=a?26:a-v));a+=l)o>f(s/(c=l-c))&&m("overflow"),o*=c;v=w(d-i,t=u.length+1,0==i),f(d/t)>s-p&&m("overflow"),p+=f(d/t),d%=t,u.splice(d++,0,p)}return b(u)}function S(e){for(var t,n,r,i,o,a,c,u,h,d,v=[],g=(e=y(e)).length,b=128,E=72,S=t=0;S<g;++S)(c=e[S])<128&&v.push(p(c));for(n=r=v.length,r&&v.push("-");n<g;){for(i=s,S=0;S<g;++S)b<=(c=e[S])&&c<i&&(i=c);for(i-b>f((s-t)/(u=n+1))&&m("overflow"),t+=(i-b)*u,b=i,S=0;S<g;++S)if((c=e[S])<b&&++t>s&&m("overflow"),c==b){for(o=t,a=l;!(o<(h=a<=E?1:E+26<=a?26:a-E));a+=l)v.push(p(C(h+(d=o-h)%(h=l-h),0))),o=f(d/h);v.push(p(C(o,0))),E=w(t,u,n==r),t=0,++n}++t,++b}return v.join("")}a={version:"1.4.1",ucs2:{decode:y,encode:b},decode:E,encode:S,toASCII:function(e){return g(e,(function(e){return u.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return g(e,(function(e){return c.test(e)?E(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(279)(e),n(211))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(687),t.encode=t.stringify=n(688)},function(e,t,n){"use strict";e.exports=function(e,t,n,i){n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t=t||"&"),t=1e3,i&&"number"==typeof i.maxKeys&&(t=i.maxKeys);var s=e.length;0<t&&t<s&&(s=t);for(var l=0;l<s;++l){var c,u=0<=(u=(h=e[l].replace(a,"%20")).indexOf(n))?(c=h.substr(0,u),h.substr(u+1)):(c=h,""),h=decodeURIComponent(c);u=decodeURIComponent(u);Object.prototype.hasOwnProperty.call(o,h)?r(o[h])?o[h].push(u):o[h]=[o[h],u]:o[h]=u}return o};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}e.exports=function(e,t,n,s){return t=t||"&",n=n||"=","object"==typeof(e=null===e?void 0:e)?o(a(e),(function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);function i(e){return"string"==typeof e}function o(e){return"string"!=typeof e}t.ERROR_BLOCK_NAME_TYPE="Block name should be a string",t.ERROR_BLOCK_NAME_EMPTY="Block name should be non-empty";var a={ns:"",el:"__",mod:"_",modValue:"_"},s=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return(t=r.assign({},t)).mixes=t.mixes.concat(n),h(t,e)},l=function(e,t,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=r.assign({},t);return(t=r.assign({},a.states||{}))[n]=r.assign.apply(void 0,[{},t[n]||{}].concat(i)),a.states=t,h(a,e)},c=function(e,t,n,r){return String.prototype.split.call(u(e,t),n,r)},u=function(e,t){var n,r=t.name,i=t.mods,o=t.mixes,a=t.states,s=[r];return i&&(s=s.concat(Object.keys(i).filter((function(e){return i[e]})).map((function(t){var n=i[t];return!0===n?r+e.mod+t:r+e.mod+t+e.modValue+n})))),a&&Object.keys(a).forEach((function(e){var t=a[e];s=s.concat(Object.keys(t).filter((function(e){return t[e]})).map((function(t){return e+t})))})),e.ns&&(s=s.map((function(t){return e.ns+t}))),o&&(s=s.concat((void 0===o?[]:o).map((function(e){return Array.isArray(e)?e.join(" "):"object"==typeof e&&null!==e||"function"==typeof e?e.toString():"string"==typeof e?e:""})).filter((function(e){return!!e})))),e.classMap&&(n=e.classMap,s=s.map((function(e){return n[e]||e}))),s.join(" ")},h=function(e,t){return{mix:s.bind(null,t,e),split:c.bind(null,t,e),is:l.bind(null,t,e,"is-"),has:l.bind(null,t,e,"has-"),state:l.bind(null,t,e,"is-"),toString:u.bind(null,t,e)}};t.setup=function(e){return void 0===e&&(e={}),function(n){if("string"!=typeof n)throw new Error(t.ERROR_BLOCK_NAME_TYPE);var d,f=n.trim();if(!f)throw new Error(t.ERROR_BLOCK_NAME_EMPTY);return d=f,n=r.assign({},a,e),(d=function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];if(!n.length)return u(e,t);var s=r.assign({},t);return(t=n.filter(i).reduce((function(t,n){return t+e.el+n}),""))&&(s.name=s.name+t),t=n.filter(o).reduce((function(e,t){return r.assign(e,t)}),{}),s.mods=r.assign({},s.mods,t),h(s,e)}.bind(null,n,f={name:d,mods:{},mixes:[],states:{"is-":{},"has-":{}}})).mix=s.bind(null,n,f),d.split=c.bind(null,n,f),d.is=l.bind(null,n,f,"is-"),d.has=l.bind(null,n,f,"has-"),d.state=l.bind(null,n,f,"is-"),d.toString=u.bind(null,n,f),d}},t.block=t.setup(),t.default=t.block},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i,o=t[r];for(i in o)o.hasOwnProperty(i)&&(e[i]=o[i])}return e}}])},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){var r;r=[n(227)],void 0===(n="function"==typeof(n=function(e){var t;e.register("locale","bg",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"хил",million:"млн",billion:"млрд",trillion:"трлн"},ordinal:function(e){return""},currency:{symbol:"лв"}}),e.register("locale","chs",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"千",million:"百万",billion:"十亿",trillion:"兆"},ordinal:function(e){return"."},currency:{symbol:"¥"}}),e.register("locale","cs",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tis.",million:"mil.",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"Kč"}}),e.register("locale","da-dk",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mio",billion:"mia",trillion:"b"},ordinal:function(e){return"."},currency:{symbol:"DKK"}}),e.register("locale","de-ch",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){return"."},currency:{symbol:"CHF"}}),e.register("locale","de",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){return"."},currency:{symbol:"€"}}),e.register("locale","en-au",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),e.register("locale","en-gb",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"£"}}),e.register("locale","en-za",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"R"}}),e.register("locale","es-es",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mm",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===t||3===t?"er":2===t?"do":7===t||0===t?"mo":8===t?"vo":9===t?"no":"to"},currency:{symbol:"€"}}),e.register("locale","es",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mm",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===t||3===t?"er":2===t?"do":7===t||0===t?"mo":8===t?"vo":9===t?"no":"to"},currency:{symbol:"$"}}),e.register("locale","et",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:" tuh",million:" mln",billion:" mld",trillion:" trl"},ordinal:function(e){return"."},currency:{symbol:"€"}}),e.register("locale","fi",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"M",billion:"G",trillion:"T"},ordinal:function(e){return"."},currency:{symbol:"€"}}),e.register("locale","fr-ca",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"M",billion:"G",trillion:"T"},ordinal:function(e){return 1===e?"er":"e"},currency:{symbol:"$"}}),e.register("locale","fr-ch",{delimiters:{thousands:"'",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){return 1===e?"er":"e"},currency:{symbol:"CHF"}}),e.register("locale","fr",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){return 1===e?"er":"e"},currency:{symbol:"€"}}),e.register("locale","hu",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"E",million:"M",billion:"Mrd",trillion:"T"},ordinal:function(e){return"."},currency:{symbol:" Ft"}}),e.register("locale","it",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"mila",million:"mil",billion:"b",trillion:"t"},ordinal:function(e){return"º"},currency:{symbol:"€"}}),e.register("locale","ja",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"千",million:"百万",billion:"十億",trillion:"兆"},ordinal:function(e){return"."},currency:{symbol:"¥"}}),e.register("locale","lv",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:" tūkst.",million:" milj.",billion:" mljrd.",trillion:" trilj."},ordinal:function(e){return"."},currency:{symbol:"€"}}),e.register("locale","nl-be",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:" mln",billion:" mld",trillion:" bln"},ordinal:function(e){var t=e%100;return 0!==e&&t<=1||8===t||t>=20?"ste":"de"},currency:{symbol:"€ "}}),e.register("locale","nl-nl",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mln",billion:"mrd",trillion:"bln"},ordinal:function(e){var t=e%100;return 0!==e&&t<=1||8===t||t>=20?"ste":"de"},currency:{symbol:"€ "}}),e.register("locale","no",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){return"."},currency:{symbol:"kr"}}),e.register("locale","pl",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tys.",million:"mln",billion:"mld",trillion:"bln"},ordinal:function(e){return"."},currency:{symbol:"PLN"}}),e.register("locale","pt-br",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"mil",million:"milhões",billion:"b",trillion:"t"},ordinal:function(e){return"º"},currency:{symbol:"R$"}}),e.register("locale","pt-pt",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){return"º"},currency:{symbol:"€"}}),e.register("locale","ru-ua",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"тыс.",million:"млн",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"₴"}}),e.register("locale","ru",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"тыс.",million:"млн.",billion:"млрд.",trillion:"трлн."},ordinal:function(){return"."},currency:{symbol:"руб."}}),e.register("locale","sk",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tis.",million:"mil.",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"€"}}),e.register("locale","sl",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mio",billion:"mrd",trillion:"trilijon"},ordinal:function(){return"."},currency:{symbol:"€"}}),e.register("locale","th",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"พัน",million:"ล้าน",billion:"พันล้าน",trillion:"ล้านล้าน"},ordinal:function(e){return"."},currency:{symbol:"฿"}}),t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"},e.register("locale","tr",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"bin",million:"milyon",billion:"milyar",trillion:"trilyon"},ordinal:function(e){if(0===e)return"'ıncı";var n=e%10;return t[n]||t[e%100-n]||t[e>=100?100:null]},currency:{symbol:"₺"}}),e.register("locale","uk-ua",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"тис.",million:"млн",billion:"млрд",trillion:"блн"},ordinal:function(){return""},currency:{symbol:"₴"}}),e.register("locale","vi",{delimiters:{thousands:".",decimal:","},abbreviations:{thousand:" nghìn",million:" triệu",billion:" tỷ",trillion:" nghìn tỷ"},ordinal:function(){return"."},currency:{symbol:"₫"}})})?n.apply(t,r):n)||(e.exports=n)},function(e,t,n){"use strict";var r=n(347),i={};function o(e,t,n,r,i,o,a,s){var l,c,u;if(!e)throw void 0===t?u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(l=[n,r,i,o,a,s],c=0,(u=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"),u.framesToPop=1,u}e.exports=function(e,t,n){var a=[],s={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},l={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},c={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)u(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=r({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=r({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=d(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=r({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){if(o(!(n in c),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n),n in e)return o("DEFINE_MANY_MERGED"===(l.hasOwnProperty(n)?l[n]:null),"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=d(e[n],r);e[n]=r}}}(e,t)},autobind:function(){}};function u(e,n){if(n){o("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),o(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r,i,a,l,u,h,f=e.prototype,p=f.__reactAutoBindPairs;for(r in n.hasOwnProperty("mixins")&&c.mixins(e,n.mixins),n)n.hasOwnProperty(r)&&"mixins"!==r&&(i=n[r],l=a=f.hasOwnProperty(r),u=r,void 0,h=s.hasOwnProperty(u)?s[u]:null,v.hasOwnProperty(u)&&o("OVERRIDE_BASE"===h,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",u),l&&o("DEFINE_MANY"===h||"DEFINE_MANY_MERGED"===h,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",u),c.hasOwnProperty(r)?c[r](e,i):(u=s.hasOwnProperty(r),"function"!=typeof i||u||a||!1===n.autobind?a?(a=s[r],o(u&&("DEFINE_MANY_MERGED"===a||"DEFINE_MANY"===a),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",a,r),"DEFINE_MANY_MERGED"===a?f[r]=d(f[r],i):"DEFINE_MANY"===a&&(f[r]=function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}(f[r],i))):f[r]=i:(p.push(r,i),f[r]=i)))}}function h(e,t){for(var n in o(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(n)&&(o(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function d(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return h(i,n),h(i,r),i}}function f(){}var p={componentDidMount:function(){this.__isMounted=!0}},m={componentWillUnmount:function(){this.__isMounted=!1}},v={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}};return r(f.prototype,e.prototype,v),function(e){var t,r=function(e,t,a){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e[r]=i.bind(e)}}(this),this.props=e,this.context=t,this.refs=i,this.updater=a||n,this.state=null,o("object"==typeof(a=this.getInitialState?this.getInitialState():null)&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",r.displayName||"ReactCompositeComponent"),this.state=a};for(t in r.prototype=new f,(r.prototype.constructor=r).prototype.__reactAutoBindPairs=[],a.forEach(u.bind(null,r)),u(r,p),u(r,e),u(r,m),r.getDefaultProps&&(r.defaultProps=r.getDefaultProps()),o(r.prototype.render,"createClass(...): Class specification must implement a `render` method."),s)r.prototype[t]||(r.prototype[t]=null);return r}}},function(e,t,n){var r=n(699);e.exports=function(e,t,n){var i,o,a,s,l;function c(){var u=r()-s;u<t&&0<u?i=setTimeout(c,t-u):(i=null,n||(l=e.apply(a,o),i||(a=o=null)))}return null==t&&(t=100),function(){a=this,o=arguments,s=r();var u=n&&!i;return i=i||setTimeout(c,t),u&&(l=e.apply(a,o),a=o=null),l}}},function(e,t){e.exports=Date.now||function(){return(new Date).getTime()}},function(e,t,n){var r=n(0),i=n(316),o=n(701),a=n(702),s=n(369),l=n(485),c=n(703),u=r.createElement,h=i({displayName:"Leaf",getInitialState:function(){return{expanded:this._isInitiallyExpanded(this.props)}},getDefaultProps:function(){return{root:!1,prefix:""}},render:function(){var e="id_"+a(),t=this.props,n={path:this.keypath(),key:t.label.toString(),value:t.data},r=this._onClick.bind(this,n);return u("div",{className:this.getClassName(),id:"leaf-"+this._rootPath()},u("input",{className:"json-inspector__radio",type:"radio",name:t.id,id:e,tabIndex:-1}),u("label",{className:"json-inspector__line",htmlFor:e,onClick:r},u("div",{className:"json-inspector__flatpath"},n.path),u("span",{className:"json-inspector__key"},this.format(n.key),":",this.renderInteractiveLabel(n.key,!0)),this.renderTitle(),this.renderShowOriginalButton()),this.renderChildren())},renderTitle:function(){var e=this.data(),t=s(e);switch(t){case"Array":return u("span",{className:"json-inspector__value json-inspector__value_helper"},"[] "+d(e.length));case"Object":return u("span",{className:"json-inspector__value json-inspector__value_helper"},"{} "+d(Object.keys(e).length));default:return u("span",{className:"json-inspector__value json-inspector__value_"+t.toLowerCase()},this.format(String(e)),this.renderInteractiveLabel(e,!1))}},renderChildren:function(){var e=this.props,t=this._rootPath(),n=this.data();return this.state.expanded&&!l(n)?Object.keys(n).map((function(r){var i=n[r],a=!this.state.original||!!e.verboseShowOriginal&&e.query;return u(h,{data:i,label:r,prefix:t,onClick:e.onClick,id:e.id,query:e.query,getOriginal:a?e.getOriginal:null,key:function(e,t){return l(t)?e+":"+o(String(t)):e+"["+s(t)+"]"}(r,i),isExpanded:e.isExpanded,interactiveLabel:e.interactiveLabel,verboseShowOriginal:e.verboseShowOriginal})}),this):null},renderShowOriginalButton:function(){var e=this.props;return l(e.data)||this.state.original||!e.getOriginal||!e.query||f(this.keypath(),e.query)?null:u("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})},renderInteractiveLabel:function(e,t){return"function"==typeof this.props.interactiveLabel?u(this.props.interactiveLabel,{value:String(e),originalValue:e,isKey:t,keypath:this.keypath()}):null},componentWillReceiveProps:function(e){e.query&&this.setState({expanded:!f(e.label,e.query)}),this.props.query&&!e.query&&this.setState({expanded:this._isInitiallyExpanded(e)})},_rootPath:function(){return this.props.prefix+"."+this.props.label},keypath:function(){return this._rootPath().substr(".root.".length)},data:function(){return this.state.original||this.props.data},format:function(e){return u(c,{string:e,highlight:this.props.query})},getClassName:function(){var e="json-inspector__leaf";return this.props.root&&(e+=" json-inspector__leaf_root"),this.state.expanded&&(e+=" json-inspector__leaf_expanded"),l(this.props.data)||(e+=" json-inspector__leaf_composite"),e},toggle:function(){this.setState({expanded:!this.state.expanded})},_onClick:function(e,t){this.toggle(),this.props.onClick(e),t.stopPropagation()},_onShowOriginalClick:function(e){this.setState({original:this.props.getOriginal(this.keypath())}),e.stopPropagation()},_isInitiallyExpanded:function(e){var t=this.keypath();return!!e.root||(e.query?!f(t,e.query)&&"function"==typeof e.getOriginal:e.isExpanded(t,e.data))}});function d(e){return e+(1===e?" item":" items")}function f(e,t){return-1!==e.indexOf(t)}e.exports=h},function(e,t,n){"use strict";e.exports=function(e){for(var t=function(e){var t,n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<(8*e.length+t)%4*8;r[t>>2]|=128<<(8*e.length+t)%4*8;var i=8*e.length;return r[16*n-2]=255&i,r[16*n-2]|=(i>>>8&255)<<8,r[16*n-2]|=(i>>>16&255)<<16,r[16*n-2]|=(i>>>24&255)<<24,r}(e),n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<t.length;a+=16){var c=n,p=r,m=i,v=o;n=u(n,r,i,o,t[a+0],7,-680876936),o=u(o,n,r,i,t[a+1],12,-389564586),i=u(i,o,n,r,t[a+2],17,606105819),r=u(r,i,o,n,t[a+3],22,-1044525330),n=u(n,r,i,o,t[a+4],7,-176418897),o=u(o,n,r,i,t[a+5],12,1200080426),i=u(i,o,n,r,t[a+6],17,-1473231341),r=u(r,i,o,n,t[a+7],22,-45705983),n=u(n,r,i,o,t[a+8],7,1770035416),o=u(o,n,r,i,t[a+9],12,-1958414417),i=u(i,o,n,r,t[a+10],17,-42063),r=u(r,i,o,n,t[a+11],22,-1990404162),n=u(n,r,i,o,t[a+12],7,1804603682),o=u(o,n,r,i,t[a+13],12,-40341101),i=u(i,o,n,r,t[a+14],17,-1502002290),n=h(n,r=u(r,i,o,n,t[a+15],22,1236535329),i,o,t[a+1],5,-165796510),o=h(o,n,r,i,t[a+6],9,-1069501632),i=h(i,o,n,r,t[a+11],14,643717713),r=h(r,i,o,n,t[a+0],20,-373897302),n=h(n,r,i,o,t[a+5],5,-701558691),o=h(o,n,r,i,t[a+10],9,38016083),i=h(i,o,n,r,t[a+15],14,-660478335),r=h(r,i,o,n,t[a+4],20,-405537848),n=h(n,r,i,o,t[a+9],5,568446438),o=h(o,n,r,i,t[a+14],9,-1019803690),i=h(i,o,n,r,t[a+3],14,-187363961),r=h(r,i,o,n,t[a+8],20,1163531501),n=h(n,r,i,o,t[a+13],5,-1444681467),o=h(o,n,r,i,t[a+2],9,-51403784),i=h(i,o,n,r,t[a+7],14,1735328473),n=d(n,r=h(r,i,o,n,t[a+12],20,-1926607734),i,o,t[a+5],4,-378558),o=d(o,n,r,i,t[a+8],11,-2022574463),i=d(i,o,n,r,t[a+11],16,1839030562),r=d(r,i,o,n,t[a+14],23,-35309556),n=d(n,r,i,o,t[a+1],4,-1530992060),o=d(o,n,r,i,t[a+4],11,1272893353),i=d(i,o,n,r,t[a+7],16,-155497632),r=d(r,i,o,n,t[a+10],23,-1094730640),n=d(n,r,i,o,t[a+13],4,681279174),o=d(o,n,r,i,t[a+0],11,-358537222),i=d(i,o,n,r,t[a+3],16,-722521979),r=d(r,i,o,n,t[a+6],23,76029189),n=d(n,r,i,o,t[a+9],4,-640364487),o=d(o,n,r,i,t[a+12],11,-421815835),i=d(i,o,n,r,t[a+15],16,530742520),n=f(n,r=d(r,i,o,n,t[a+2],23,-995338651),i,o,t[a+0],6,-198630844),o=f(o,n,r,i,t[a+7],10,1126891415),i=f(i,o,n,r,t[a+14],15,-1416354905),r=f(r,i,o,n,t[a+5],21,-57434055),n=f(n,r,i,o,t[a+12],6,1700485571),o=f(o,n,r,i,t[a+3],10,-1894986606),i=f(i,o,n,r,t[a+10],15,-1051523),r=f(r,i,o,n,t[a+1],21,-2054922799),n=f(n,r,i,o,t[a+8],6,1873313359),o=f(o,n,r,i,t[a+15],10,-30611744),i=f(i,o,n,r,t[a+6],15,-1560198380),r=f(r,i,o,n,t[a+13],21,1309151649),n=f(n,r,i,o,t[a+4],6,-145523070),o=f(o,n,r,i,t[a+11],10,-1120210379),i=f(i,o,n,r,t[a+2],15,718787259),r=f(r,i,o,n,t[a+9],21,-343485551),n=s(n,c),r=s(r,p),i=s(i,m),o=s(o,v)}return l(n)+l(r)+l(i)+l(o)};var r="0123456789abcdef";function i(e,t){return(e>>>1|t>>>1)<<1|1&e|1&t}function o(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t}function a(e,t){return(e>>>1&t>>>1)<<1|1&e&t}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function l(e){for(var t="",n=0;n<=3;n++)t+=r.charAt(e>>8*n+4&15)+r.charAt(e>>8*n&15);return t}function c(e,t,n,r,i,o){return s((o=s(s(t,e),s(r,o)))<<i|o>>>32-i,n)}function u(e,t,n,r,o,s,l){return c(i(a(t,n),a(~t,r)),e,t,o,s,l)}function h(e,t,n,r,o,s,l){return c(i(a(t,r),a(n,~r)),e,t,o,s,l)}function d(e,t,n,r,i,a,s){return c(o(o(t,n),r),e,t,i,a,s)}function f(e,t,n,r,a,s,l){return c(o(n,i(t,~r)),e,t,a,s,l)}},function(e,t){var n=Math.ceil(10*Math.random());e.exports=function(){return++n}},function(e,t,n){var r=n(0),i=(n=n(316),r.createElement);e.exports=n({displayName:"exports",getDefaultProps:function(){return{string:"",highlight:""}},shouldComponentUpdate:function(e){return e.highlight!==this.props.highlight},render:function(){var e=this.props,t=e.string.search(e.highlight);if(!e.highlight||-1===t)return i("span",null,e.string);var n=e.highlight.source.length,r=e.string.substr(t,n);return i("span",null,e.string.split(e.highlight).map((function(e,t){return i("span",{key:t},0<t?i("span",{className:"json-inspector__hl"},r):null,e)})))}})},function(e,t,n){var r=n(0),i=n(316),o=r.createElement,a=n(486);e.exports=i({displayName:"exports",getDefaultProps:function(){return{onChange:a}},render:function(){return o("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:this.onChange})},onChange:function(e){this.props.onChange(e.target.value)}})},function(e,t,n){var r=n(706),i=Object.keys,o=n(485),a=n(487);function s(e,t,n){return i(e).reduce((function(i,c){var u,h=e[c];return o(h)?(l(t,c,n)||l(t,h,n))&&(i[c]=h):l(t,c,n)?i[c]=h:(u=s(h,t,n),a(u)||r(i,((h={})[c]=u,h))),i}),{})}function l(e,t,n){if(t)return t=String(t),e=e,n.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),-1!==t.indexOf(e)}e.exports=function(e,t){t=t||{cacheResults:!0};var n={};return function(r){if(!t.cacheResults)return s(e,r,t);var i;if(!n[r])for(var o=r.length-1;0<o;--o)if(i=r.substr(0,o),n[i]){n[r]=s(n[i],r,t);break}return n[r]||(n[r]=s(e,r,t)),n[r]}}},function(e,t,n){"use strict";e.exports=Object.assign||function(e,t){for(var n=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),r=1;r<arguments.length;r++)for(var i=arguments[r],o=Object.keys(Object(i)),a=0;a<o.length;a++)n[o[a]]=i[o[a]];return n}},function(e,t,n){var r=n(369);function i(e){return parseInt(e,10)}e.exports=function e(t,n){var o=n.split("."),a=o.shift();return a?"Array"===(n=r(t))&&t[i(a)]?e(t[i(a)],o.join(".")):"Object"===n&&t[a]?e(t[a],o.join(".")):void 0:t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(761);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r)throw(a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",a}function t(){return e}var n={array:e.isRequired=e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var r=o(n(0)),i=o(n(428));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n,o,s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return n=this,o=(o=c(e)).call.apply(o,[this].concat(l)),t=!o||"object"!==a(o)&&"function"!=typeof o?u(n):o,d(u(t),"onClick",(function(e){var n=(s=t.props).text,o=s.onCopy,a=s.children,s=s.options;a=r.default.Children.only(a),s=(0,i.default)(n,s);o&&o(n,s),a&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(e)})),t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(e,r.default.PureComponent),t=e,(n=[{key:"render",value:function(){var e=((t=this.props).text,t.onCopy,t.options,t.children),t=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(t,["text","onCopy","options","children"]);e=r.default.Children.only(e);return r.default.cloneElement(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{onClick:this.onClick}))}}])&&l(t.prototype,n),e}(),d(t.CopyToClipboard=n,"defaultProps",{onCopy:void 0,options:void 0})},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";t.byteLength=function(e){var t;return 3*((e=(t=c(e))[0])+(t=t[1]))/4-t},t.toByteArray=function(e){var t,n,r=(a=c(e))[0],a=a[1],s=new o(function(e,t){return 3*(e+t)/4-t}(r,a)),l=0,u=0<a?r-4:r;for(n=0;n<u;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,s[l++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t),s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(function(e,t,n){for(var i,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(function(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}(i));return o.join("")}(e,a,s<a+16383?s:a+16383));return 1==i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return[e=-1===(e=e.indexOf("="))?t:e,e===t?0:4-e%4]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1;n=e[t+h];for(h+=d,o=n&(1<<-u)-1,n>>=-u,u+=s;0<u;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;0<u;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(n?-1:1);a+=Math.pow(2,r),o-=c}return(n?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l=8*o-i-1,c=(1<<l)-1,u=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1;o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(t+=1<=a+u?h/r:h*Math.pow(2,1-u))*r&&(a++,r/=2),c<=a+u?(s=0,a=c):1<=a+u?(s=(t*r-1)*Math.pow(2,i),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));8<=i;e[n+d]=255&s,d+=f,s/=256,i-=8);for(a=a<<i|s,l+=i;0<l;e[n+d]=255&a,d+=f,a/=256,l-=8);e[n+d-f]|=128*o}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){var t;return e.webpackPolyfill||((t=Object.create(e)).children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1),t}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(n=n(0))&&"object"==typeof n&&"default"in n?n.default:n;function i(e){return i.warnAboutHMRDisabled&&(i.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),r.Children.only(e.children)}function o(){return o.shouldWrapWithAppContainer?function(e){return function(t){return r.createElement(i,null,r.createElement(e,t))}}:function(e){return e}}o.shouldWrapWithAppContainer=i.warnAboutHMRDisabled=!1,t.AppContainer=i,t.hot=o,t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},,function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(98),a=n.n(o),s=n(565),l=n(48),c=n(272);function u(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}function h(e){if(e){var t=e.match(/[A-Z]/g).join("");return P[e]||t}}(Z=u()).withExtraArgument=u;var d=Z,f=n(24),p=n.n(f),m=n(113),v=n.n(m),g=n(320),y=n(175),b=n.n(y),C=n(38),w=n.n(C),E=n(425),S=n(424),O=n(257),x=n(236),_={TABLET_VOLATILE_STATE_UNKNOWN:"unknown",TABLET_VOLATILE_STATE_STOPPED:"stopped",TABLET_VOLATILE_STATE_BOOTING:"booting",TABLET_VOLATILE_STATE_STARTING:"starting",TABLET_VOLATILE_STATE_RUNNING:"running",TABLET_VOLATILE_STATE_BLOCKED:"blocked"},k={Red:["Created","ResolveStateStorage","Candidate","BlockBlobStorage","WriteZeroEntry","Restored","Discover","Lock","Dead"],Orange:["RebuildGraph"],Yellow:["ResolveMaster","ResolveLeader"],Green:["Deleted","Active"]},T=["Active","Deleted","Created","ResolveStateStorage","Candidate","BlockBlobStorage","WriteZeroEntry","Restored","Discover","Lock","Dead","RebuildGraph","ResolveLeader"],N="TxAllocator",P={OldTxProxy:"P",TxProxy:"P",BSController:"BS",Dummy:"DY",RTMRPartition:"RP",PersQueueReadBalancer:"PB",Cms:"CM",BlockStorePartition:"BP",BlockStoreVolume:"BV",Console:"CN",TenantSlotBroker:"TB"},I=["1 min","5 min","15 min"],R={0:"HDD",1:"SSD"},j={green:5,yellow:4,orange:3,red:2,black:1,gray:1},D="All",A="Problems",L="theme",M="saved_queries",F="tune-columns-popup",B="selectedColumns",H=p()({},L,"light"),z="default-size-result-pane",U="default-size-schema-tree-pane",V=n(1),W=n.n(V),G=n(2),q=n.n(G),Y=n(5),X=n.n(Y),K=(t=n(7),n.n(t)),Z=n(4),Q=n.n(Z),$=(f=n(90),n.n(f)),J=(m=n(16),n.n(m)),ee=(y=n(11),n.n(y)),te=(C=n(426),n.n(C)),ne=(V=n(268),n.n(V));(G=function(){function e(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};W()(this,e),this.setApiEndpoint=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=e;"undefined"!=typeof location&&(n=e.replace("%CURRENT_HOST%",location.host)),t.apiEndpoint=n},this.setCSRFToken=function(e){t._axios.defaults.headers.post["X-CSRF-Token"]=e,t._axios.defaults.headers.put["X-CSRF-Token"]=e,t._axios.defaults.headers.delete["X-CSRF-Token"]=e},this.setDefaultHeader=function(e){var n=e.name,r=e.value,i=(e=e.methods,t._axios.defaults.headers);Array.isArray(e)?e.forEach((function(e){i[e]&&(i[e][n]=r)})):i.common[n]=r},this.apiPath=function(e){return"".concat(t.apiEndpoint).concat(e)};var r=n.config,i=void 0===(i=n.apiEndpoint)?"/api":i;n=void 0===(n=n.collector)?{}:n,r=Object.assign({xsrfCookieName:"",timeout:e.DEFAULT_TIMEOUT,withCredentials:!0},void 0===r?{}:r);this._axios=ne.a.create(r),this._axios.defaults.headers=te()(this._axios.defaults.headers),this.requestTokens={},this.setApiEndpoint(i),this.collectorSettings=n,this.collector={errors:[],requests:[]}}var t;return q()(e,[{key:"collectRequest",value:function(e){var t=e.method,n=e.url,r=e.data,i=e.requestStart,o=e.response,a=e.responseError,s=void 0!==(h=e.error)&&h,l=e.cancelled,c=void 0!==l&&l,u=this.collectorSettings,h=u.collectErrors;e=u.collectRequests;(h||e)&&(u=void 0===(u=(l=o&&o.request||{}).responseText)?"":u,l=l.responseURL,a=s&&a instanceof Error?a.message:"",c={method:t,url:void 0===l?n:l,time:{start:i,end:Number(new Date)},status:o&&o.status,size:u.length,requestData:r&&JSON.stringify(r,null,2)||"",responseData:o&&o.data&&JSON.stringify(o.data,null,2)||a,isError:s,isCancelled:c},h&&s&&(this.collector.errors=[].concat(J()(this.collector.errors),[c]).slice(-h)),e&&(this.collector.requests=[].concat(J()(this.collector.requests),[c]).slice(-e)))}},{key:"getCollectedRequests",value:function(){return{errors:J()(this.collector.errors),requests:J()(this.collector.requests)}}},{key:"request",value:(t=$()(ee.a.mark((function e(t){var n,r,i,o,a,s,l,c,u,h,d=this;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,r=t.url,a=t.data,i=void 0===a?null:a,u=t.params,c=t.options,l=void 0===c?{}:c,s=t.retries,o=void 0===s?0:s,h=l.requestConfig||{},a=l.concurrentId,c=l.collectRequest,s=void 0===c||c,c=l.timeout,l=l.headers,a&&(this.cancelRequest(a),h.cancelToken=this.createRequestToken(a)),l&&(h.headers=l),void 0!==c&&(h.timeout=c),c=Number(new Date),u={method:n,url:r,data:i,params:u},e.prev=8,e.next=11,this._axios.request(Object.assign(Object.assign({},h),u));case 11:return h=e.sent,this.clearRequestToken(a),s&&this.collectRequest(Object.assign(Object.assign({},u),{requestStart:c,response:h})),e.abrupt("return",h.data);case 17:if(e.prev=17,e.t0=e.catch(8),ne.a.isCancel(e.t0))throw{isCancelled:!0,error:e.t0};e.next=23;break;case 23:this.clearRequestToken(a);case 24:return s&&this.collectRequest(Object.assign(Object.assign({},u),{requestStart:c,response:e.t0.response,error:!0,cancelled:ne.a.isCancel(e.t0),responseError:e.t0})),e.abrupt("return",this.handleRequestError(e.t0.response,(function(){return d.request(Object.assign(Object.assign({},t),{retries:o+1}))}),o,new Error(e.t0 instanceof Error?e.t0.message:"Unknown error")));case 26:case"end":return e.stop()}}),e,this,[[8,17]])}))),function(e){return t.apply(this,arguments)})},{key:"cancelRequest",value:function(e){e&&this.requestTokens[e]&&this.requestTokens[e].cancel("Concurrent request")}},{key:"get",value:function(e,t){return this.request({method:"GET",url:e,params:t,options:2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}})}},{key:"post",value:function(e,t,n){return this.request({method:"POST",url:e,data:t,params:n,options:3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}})}},{key:"put",value:function(e,t,n){return this.request({method:"PUT",url:e,data:t,params:n,options:3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}})}},{key:"patch",value:function(e,t,n){return this.request({method:"PATCH",url:e,data:t,params:n,options:3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}})}},{key:"delete",value:function(e,t,n){return this.request({method:"DELETE",url:e,data:t,params:n,options:3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}})}},{key:"head",value:function(e,t){return this.request({method:"HEAD",url:e,params:t,options:2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}})}},{key:"handleRequestError",value:function(e){throw e}},{key:"createRequestToken",value:function(e){if(e){var t=ne.a.CancelToken.source();return(this.requestTokens[e]=t).token}}},{key:"clearRequestToken",value:function(e){e&&this.requestTokens[e]&&delete this.requestTokens[e]}}]),e}()).DEFAULT_TIMEOUT=6e4;Y=n(246);var re=n.n(Y),ie=(t=n(23),n.n(t));function oe(e){return ie()("".concat("yc-").concat(e))}Z=n(14);var ae=n.n(Z),se=(f=n(17),n.n(f));function le(e){return"object"===se()(e)}function ce(e){return"string"==typeof e}n(694);var ue=oe("icon");function he(e){var t,n,r,o,a,s=e.data,l=e.width,c=e.height,u=e.size,h=e.className,d=e.onClick,f=void 0===(p=e.fill)?"currentColor":p,p=void 0===(p=e.stroke)?"none":p;e=e.qa;return u&&(a=o=u),l&&(o=l),c&&(a=c),le(s)?t=s.viewBox:ce(s)?t=(n=(n=s).match(/viewBox=(["']?)([\d\s,-]+)\1/))?n[2]:void 0:(n=s,"object"===se()(n)&&"defaultProps"in n?t=s.defaultProps.viewBox:"function"!=typeof(n=s)||n.prototype&&n.prototype.render||(r=s({}))&&(t=r.props.viewBox)),!t||o&&a||(r=t.split(/\s+|\s*,\s*/),o=o||r[2],a=a||r[3]),p={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:o,height:a,className:ue(null,h),onClick:d,fill:f,stroke:p,"data-qa":e},ce(s)?(e=s.replace(/(width|height)=(["']?)\d+\2/g,""),i.a.createElement("svg",Object.assign({},p,{dangerouslySetInnerHTML:{__html:e}}))):le(s)?i.a.createElement("svg",Object.assign({},p,{viewBox:t}),i.a.createElement("use",{xlinkHref:he.prefix+(s.url||"#".concat(s.id))})):(s.defaultProps&&(s.defaultProps.width=s.defaultProps.height=void 0),i.a.createElement("svg",Object.assign({},p),i.a.createElement(s,{width:void 0,height:void 0})))}he.displayName="Icon",he.prefix="";var de=n(321),fe=new(function(){function e(t){W()(this,e),this.subscriptions=[],this.componentPrefix=t}return q()(e,[{key:"subscribe",value:function(e){this.subscriptions.push(e)}},{key:"unsubscribe",value:function(e){-1<(e=this.subscriptions.indexOf(e))&&this.subscriptions.splice(e,1)}},{key:"publish",value:function(e){var t=this,n=e.componentId,r=Object(de.a)(e,["componentId"]);this.subscriptions.forEach((function(e){return e(Object.assign(Object.assign({},r),{componentId:t.componentPrefix?"".concat(t.componentPrefix).concat(n):n}))}))}},{key:"withEventPublisher",value:function(e,t){var n=this;return function(r){n.publish(Object.assign(Object.assign({},r),{componentId:e,qa:t}))}}}]),e}())("yc-");function pe(e,t,n){var r=e.displayName||e.name||"Component",o="withEventBroker(".concat(r,")");return(r=i.a.forwardRef((function(r,o){var a=t.reduce((function(e,t){var i=r[t];return Object.assign(Object.assign({},e),p()({},t,(function(e){return fe.publish(Object.assign({eventId:t.replace(/^on/,"").toLowerCase(),domEvent:e},n)),i&&i(e)})))}),{});return i.a.createElement(e,Object.assign({},r,a,{ref:o}))}))).displayName=o,r}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(695);var ve=oe("button");(m=i.a.forwardRef((function(e,t){var n=e.view,r=e.size,o=e.pin,a=e.selected,s=void 0!==(O=e.disabled)&&O,l=void 0!==(x=e.loading)&&x,c=e.width,u=e.title,h=e.tabIndex,d=void 0===(_=e.type)?"button":_,f=e.component,p=e.href,m=e.target,v=e.rel,g=e.extraProps,y=e.onClick,b=e.onMouseEnter,C=e.onMouseLeave,w=e.onFocus,E=e.onBlur,S=e.children,O=e.id,x=e.style,_=e.className;e=e.qa,e={title:u,tabIndex:h,onClick:y,onMouseEnter:b,onMouseLeave:C,onFocus:w,onBlur:E,id:O,style:x,className:ve({view:void 0===n?"normal":n,size:void 0===r?"m":r,pin:o,selected:void 0!==a&&a,disabled:s||l,loading:l,width:c},_),"data-qa":e};return"string"==typeof p||f?(v={href:p,target:m,rel:"_blank"!==m||v?v:"noopener noreferrer"},i.a.createElement(f||"a",Object.assign(Object.assign(Object.assign(Object.assign({},g),e),f?{}:v),{ref:t,"aria-disabled":s||l}),be(S))):i.a.createElement("button",Object.assign({},g,e,{ref:t,type:d,disabled:s||l}),be(S))}))).displayName="Button";var ge=pe(m,["onClick"],{componentId:"Button"});function ye(e){if(i.a.isValidElement(e))return(e=e.type)===he||"Icon"===e.displayName}function be(e){var t=i.a.Children.toArray(e);if(1===t.length)return ye(e=t[0])?i.a.createElement("span",{key:"icon",className:ve("icon")},i.a.createElement("span",{className:ve("icon-inner")},e)):i.a.createElement("span",{key:"text",className:ve("text")},e);var n,r,o,a,s=[],l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(t);try{for(l.s();!(a=l.n()).done;){var c=a.value;ye(c)?n||0!==s.length?r||0===s.length||(r=i.a.createElement("span",{key:"icon-right",className:ve("icon",{side:"right"})},i.a.createElement("span",{className:ve("icon-inner")},c))):n=i.a.createElement("span",{key:"icon-left",className:ve("icon",{side:"left"})},i.a.createElement("span",{className:ve("icon-inner")},c)):s.push(c)}}catch(e){l.e(e)}finally{l.f()}return[n,r,o=0<s.length?i.a.createElement("span",{key:"text",className:ve("text")},s):o]}n(693);var Ce=oe("link");(y=i.a.forwardRef((function(e,t){var n=e.view,r=e.href,o=e.target,a=e.rel,s=e.title,l=e.children,c=e.extraProps,u=e.onClick,h=e.onFocus,d=e.onBlur,f=e.id,p=e.style,m=e.className;e=e.qa,e={title:s,children:l,onClick:u,onFocus:h,onBlur:d,id:f,style:p,className:Ce({view:void 0===n?"normal":n},m),"data-qa":e};return"string"==typeof r?("_blank"!==o||a||(a="noopener noreferrer"),i.a.createElement("a",Object.assign({},c,e,{ref:t,href:r,target:o,rel:a}))):i.a.createElement("span",Object.assign({},c,e,{ref:t,tabIndex:0}))}))).displayName="Link";var we=pe(y,["onClick"],{componentId:"Link"});function Ee(e){return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",width:"10",height:"10",fill:"currentColor"},e),i.a.createElement("path",{d:"M9.75592 8.57741C10.0814 8.90285 10.0814 9.43049 9.75592 9.75592C9.43049 10.0814 8.90285 10.0814 8.57741 9.75592L5 6.17851L1.42259 9.75592C1.09715 10.0814 0.569515 10.0814 0.244078 9.75592C-0.0813592 9.43049 -0.0813592 8.90285 0.244078 8.57741L3.82149 5L0.244078 1.42259C-0.0813592 1.09715 -0.0813592 0.569515 0.244078 0.244078C0.569515 -0.0813592 1.09715 -0.0813592 1.42259 0.244078L5 3.82149L8.57741 0.244078C8.90285 -0.0813592 9.43049 -0.0813592 9.75592 0.244078C10.0814 0.569515 10.0814 1.09715 9.75592 1.42259L6.17851 5L9.75592 8.57741Z"}))}n(692);var Se,Oe=oe("toast"),xe={error:function(e){return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none"},e),i.a.createElement("path",{d:"M0 0h24v24H0z"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.048 4.524c.41-.699 1.511-.699 1.92 0l7.902 13.022c.387.659-.138 1.454-.96 1.454H4.09c-.822 0-1.347-.795-.96-1.454l7.918-13.022zm2.093 9.41h-2.265V9.072h2.265v4.86zm-2.265 3.34h2.265v-1.98h-2.265v1.98z",fill:"#FF0400"}))},success:function(e){return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none"},e),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",fill:"#3BC935"}),i.a.createElement("path",{d:"M8.25 11.688l2.5 3.437 5.625-6.875",stroke:"#fff",strokeWidth:"1.667",strokeLinecap:"round"}))}};function _e(e){var t,n,r,o,a,s,l,c,u,h,d=void 0===(C=e.allowAutoHiding)||C,f=void 0===(w=e.isClosable)||w,p=void 0!==(b=e.isOverride)&&b,m=(y=function(e){var t,n=e.onRemove,r=(e=i.a.useState(Se.Creating),(e=ae()(e,2))[0]),o=e[1];return i.a.useEffect((function(){r===Se.Creating?o(Se.ShowingIndents):r===Se.ShowingIndents&&o(Se.ShowingHeight)}),[r]),r===Se.ShowingHeight&&(t=function(e){"move-left"===e.animationName&&o(Se.Shown)}),r===Se.Hiding&&(t=function(e){"remove-height"===e.animationName&&n()}),e=i.a.useCallback((function(){o(Se.Hiding)}),[]),{status:r,containerProps:{onAnimationEnd:t},handleClose:e}}({onRemove:e.removeCallback})).status,v=y.containerProps,g=y.handleClose,y=(t=(C={isOverride:p,status:m}).isOverride,w=C.status,b=i.a.useState(void 0),b=(C=ae()(b,2))[0],n=C[1],r=i.a.useRef(null),o=i.a.useCallback((function(){var e;return null===(e=r.current)||void 0===e?void 0:e.offsetHeight}),[]),i.a.useEffect((function(){n(o())}),[o]),i.a.useEffect((function(){t&&n(o())})),C={},b&&w!==Se.ShowingIndents&&w!==Se.Shown&&(C.height=b),{style:C,ref:r}),b=(p=d?e.timeout||5e3:void 0,a=(w={onClose:g,timeout:p}).onClose,s=w.timeout,l=i.a.useRef(void 0),c=i.a.useCallback((function(){s&&(l.current=setTimeout($()(ee.a.mark((function e(){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a();case 1:case"end":return e.stop()}}),e)}))),s))}),[s,a]),u=i.a.useCallback((function(){l.current&&(clearTimeout(l.current),l.current=void 0)}),[]),i.a.useEffect((function(){return c(),function(){u()}}),[c,u]),{onMouseOver:function(){u()},onMouseLeave:function(){c()}}),C={appearing:m===Se.ShowingIndents||m===Se.ShowingHeight,"show-animation":m===Se.ShowingHeight,"hide-animation":m===Se.Hiding,created:m!==Se.Creating},w=(d=e.content,p=e.actions,e.title);m=e.className,e=e.type;return i.a.createElement("div",Object.assign({className:Oe(C,m)},v,y,b),i.a.createElement("div",{className:Oe("title",{bold:Boolean(d||p)})},(e=(e=(e={type:e}).type)?xe[e]:null)?i.a.createElement(he,{data:e,className:Oe("icon",{title:!0})}):null,w),f&&i.a.createElement(ge,{view:"flat-secondary",size:"s",style:{position:"absolute",top:10,right:10},onClick:g},i.a.createElement(he,{data:Ee})),d,(g=(p={actions:p,onClose:g}).actions,h=p.onClose,g?g.map((function(e,t){var n=e.label,r=e.onClick,o=void 0===(e=e.removeAfterClick)||e;return i.a.createElement(we,{key:"".concat(n,"__").concat(t),className:Oe("action"),onClick:function(){r(),o&&h()}},n)})):null))}function ke(e){var t,n=e.toasts;e=e.removeCallback;return i.a.createElement(i.a.Fragment,null,(t=e,n.map((function(e){var n=e.name;return i.a.createElement(_e,Object.assign({key:n},e,{removeCallback:function(){return t(n)}}))}))))}(C=Se=Se||{}).Creating="creating",C.ShowingIndents="showing-indents",C.ShowingHeight="showing-height",C.Hiding="hiding",C.Shown="shown",n(690);var Te=Symbol("Toaster instance key"),Ne=oe("toaster"),Pe=function(){function e(){var t=this,n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).additionalClass,r=void 0===n?"":n;if(W()(this,e),this.createToast=function(){var e=$()(ee.a.mark((function e(n){var r;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.name,-1!==t._getToastIndex(r))return e.next=5,t.removeToast(r);e.next=5;break;case 5:t._toasts.push(n),t._render();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.removeToast=function(e){-1!==t._getToastIndex(e)&&t._removeToastFromDOM(e)},this.overrideToast=function(e,n){-1!==(e=t._getToastIndex(e))&&(t._toasts[e]=Object.assign(Object.assign(Object.assign({},t._toasts[e]),n),{isOverride:!0}),t._render())},this._getToastIndex=function(e){return t._toasts.findIndex((function(t){return t.name===e}))},window[Te])return(n=window[Te])._additionalClass=r,n._rootNode.className=Ne(null,n._additionalClass),n;this._additionalClass=r,this._toasts=[],this._createRootNode(),this._render(),window[Te]=this}return q()(e,[{key:"_removeToastFromDOM",value:function(e){e=this._getToastIndex(e),this._toasts.splice(e,1),this._render()}},{key:"_createRootNode",value:function(){this._rootNode=document.createElement("div"),this._rootNode.className=Ne(null,this._additionalClass),document.body.appendChild(this._rootNode)}},{key:"_render",value:function(){a.a.render(i.a.createElement(ke,{toasts:this._toasts,removeCallback:this.removeToast}),this._rootNode,(function(){return Promise.resolve()}))}}]),e}();function Ie(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(){return function(e){e({type:Ae.SUCCESS})}}function De(){return Ue({request:Pt.logout(),actions:Ae})}var Ae=ze("authentication","SET_UNAUTHENTICATED"),Le=ze("authentication","SET_AUTHENTICATED"),Me=ze("authentication","FETCH_USER"),Fe={isAuthenticated:!0,user:"",error:""},Be=function(e){return e},He=new Pe;function ze(e,t){return{REQUEST:"".concat(e,"/").concat(t,"_REQUEST"),SUCCESS:"".concat(e,"/").concat(t,"_SUCCESS"),FAILURE:"".concat(e,"/").concat(t,"_FAILURE")}}function Ue(e){var t=e.actions,n=e.request,r=void 0===(e=e.dataHandler)?Be:e;return function(){var e=$()(ee.a.mark((function e(i){var o;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:t.REQUEST}),e.prev=1,e.next=4,n;case 4:return o=e.sent,o=r(o),i({type:t.SUCCESS,data:o}),e.abrupt("return",o);case 10:e.prev=10,e.t0=e.catch(1),401===e.t0.status?i({type:Ae.SUCCESS}):e.t0.status&&e.t0.statusText&&He.createToast({name:"Request failure",title:"Request failure",type:"error",content:"".concat(e.t0.status," ").concat(e.t0.statusText),isClosable:!0,allowAutoHiding:!1}),i({type:t.FAILURE,error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()}var Ve="NOT_FOUND";function We(e,t){return e===t}V=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o,a=0,s={memoizeOptions:void 0},l=r.pop();if("object"==typeof l&&(s=l,l=r.pop()),"function"!=typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");s=void 0===(s=s.memoizeOptions)?n:s,s=Array.isArray(s)?s:[s];var c=function(e){if((e=Array.isArray(e[0])?e[0]:e).every((function(e){return"function"==typeof e})))return e;throw e=e.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", "),new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+e+"]")}(r),u=e.apply(void 0,[function(){return a++,l.apply(null,arguments)}].concat(s));s=e((function(){for(var e=[],t=c.length,n=0;n<t;n++)e.push(c[n].apply(null,arguments));return o=u.apply(null,e)}));return Object.assign(s,{resultFunc:l,memoizedResultFunc:u,dependencies:c,lastResult:function(){return o},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),s}}((function(e,t){var n,r,i,o="object"==typeof t?t:{equalityCheck:t},a=o.equalityCheck,s=(t=void 0===(t=o.maxSize)?1:t,o.resultEqualityCheck),l=(a=(n=void 0===a?We:a,function(e,t){if(null===e||null===t||e.length!==t.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}),1===t?(r=a,{get:function(e){return i&&r(i.key,e)?i.value:Ve},put:function(e,t){i={key:e,value:t}},getEntries:function(){return i?[i]:[]},clear:function(){i=void 0}}):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(-1<r){var i=n[r];return 0<r&&(n.splice(r,1),n.unshift(i)),i.value}return Ve}return{get:r,put:function(t,i){r(t)===Ve&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(t,a));function c(){var t,n=l.get(arguments);return n===Ve&&(n=e.apply(null,arguments),!s||(t=l.getEntries().find((function(e){return s(e.value,n)})))&&(n=t.value),l.put(arguments,n)),n}return c.clearCache=function(){return l.clear()},c})),Y=n(227);var Ge=n.n(Y);function qe(e){return"".concat(e.NodeId,"-").concat(e.PDiskId)}function Ye(e,t){return[Math.floor(e),Math.floor(t)+" IOPS"]}function Xe(e,t){return[Math.floor(e/1e12),"".concat(Math.floor(t/1e12)," TB")]}function Ke(e,t){return[(e/1e6).toFixed(2),(t/1e6).toFixed(1)+" MB/s"]}function Ze(e){return Ge()(e).format()}function Qe(e){return Ge()(e/1e6).format("0.00")}function $e(e){var t;return t=((t=new Date)-Number(e))/1e3,e=Math.floor(t/86400),t%=86400,[e&&"".concat(e,"d"),Ge()(t).format("00:00:00")].filter(Boolean).join(" ")}function Je(e){var t=e.name.split("|");return 1<t.length?t[1]:e.name}function et(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("|")}function tt(e){return w.a.map(e,(function(e){var t,n,r={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&("object"===(n=se()(e[t]))||"boolean"===n||Array.isArray(e[t])?r[t]=JSON.stringify(e[t]):r[t]=e[t]);return r}))}n(696),Ge.a.locale("ru"),Ge.a.localeData().delimiters.decimal=".";var nt=function(e){return Ge()(e).format("0 ib").replace("i","")},rt=function(e){return t=e,Object.keys(t).map((function(e){return t[e]})).join("-");var t},it=function(e,t){return[Math.floor(e/1e9),"".concat(Math.floor(t/1e9)," GB")]},ot=function(e){return e.map((function(e){var t;e=(t=ae()(e,2))[0];return(t=t[1])&&"".concat(e,": ").concat(Array.isArray(t)?t.join(", "):t)})).filter(Boolean).join("\n")};function at(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt="All",ct="Missing",ut="Space",ht="Groups",dt="Nodes",ft=ze("storage","FETCH_STORAGE"),pt="storage/SET_INITIAL",mt="storage/SET_FILTER",vt="storage/SET_VISIBLE_GROUPS",gt="storage/SET_STORAGE_TYPE",yt={loading:!0,wasLoaded:!1,filter:"",visible:ct,type:ht};function bt(e){return e.storage.type}var Ct={Green:1,Yellow:100,Orange:1e4,Red:1e6},wt=(t=V([function(e){return null===(e=e.storage.data)||void 0===e?void 0:e.StoragePools}],(function(e){return w.a.reduce(e,(function(e,t){var n=w.a.reduce(t.Groups,(function(e,n){var r=w.a.filter(n.VDisks,(function(e){return!e.Replicated||"Normal"!==e.PDisk.State||"OK"!==e.VDiskState})).length,i=w.a.reduce(n.VDisks,(function(e,t){return t.DiskSpace&&(e+=Ct[t.DiskSpace]),e}),0),o=w.a.reduce(n.VDisks,(function(e,t){return e+(Number(t.AllocatedSize)||0)}),0),a=w.a.reduce(n.VDisks,(function(e,t){return e+(Number(t.AvailableSize)||Number(null===(e=t.PDisk)||void 0===e?void 0:e.AvailableSize)||0)+(Number(t.AllocatedSize)||0)}),0),s=w.a.reduce(n.VDisks,(function(e,t){return e+(Number(t.ReadThroughput)||0)}),0),l=w.a.reduce(n.VDisks,(function(e,t){return e+(Number(t.WriteThroughput)||0)}),0);return[].concat(J()(e),[st(st({},n),{},{Read:s,Write:l,PoolName:t.Name,Used:o,Limit:a,Missing:r,UsedSpaceFlag:i})])}),[]);return[].concat(J()(e),J()(n))}),[])})),Z=V([function(e){return null===(e=e.storage.data)||void 0===e?void 0:e.Nodes}],(function(e){return w.a.map(e,(function(e){var t=null!==(n=e.SystemState)&&void 0!==n?n:{},n=w.a.filter(e.PDisks,(function(e){return"Normal"!==e.State})).length;return{NodeId:e.NodeId,FQDN:t.Host,uptime:$e(t.StartTime),StartTime:t.StartTime,PDisks:e.PDisks,Missing:n}}))})),f=V([bt,t,Z],(function(e,t,n){return e===ht?t:n})),m=V([function(e){return e.storage.visible},f],(function(e,t){return e===lt?t:e===ct?w.a.filter(t,(function(e){return 0<e.Missing})):w.a.filter(t,(function(e){return 100<e.UsedSpaceFlag}))})),V([function(e){return e.storage.filter},bt,m],(function(e,t,n){var r=e.trim().toLowerCase();return r?w.a.filter(n,(function(e){return t!==ht?e.NodeId.toString().includes(r)||e.FQDN.toLowerCase().includes(r):e.PoolName.toLowerCase().includes(r)||(null===(e=e.GroupID)||void 0===e?void 0:e.toString().includes(r))})):n})));function Et(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];e.startsWith("https://")&&(e=e.slice(8));var r=re.a.parse("http://".concat(e)),i=(o=r).hostname,o=o.port;return function(e){return e.startsWith("https://")&&(e=e.slice(8)),((e=re.a.parse("http://".concat(e)).hostname)===Ot||e===St)&&e}(e)&&t&&(i=(r=re.a.parse("http:/".concat(r.pathname))).hostname,o=r.port),r="/"===r.pathname?"":r.pathname.replace("/viewer/json",""),o=n?"":":".concat(o||8765),"".concat(i).concat(o).concat(r)}var St="ydb.bastion.cloud.yandex-team.ru",Ot="viewer.ydb.yandex-team.ru";y={withCredentials:!window.custom_backend};function xt(e){return null!=e&&e.includes(St)||null!=e&&e.includes(Ot)?e:"https://".concat(kt(e),"/").concat(e)}function _t(e){return!Ro||Do?"".concat(Do).concat(e):e}var kt=function(e){return null!=e&&e.includes(".cloud")||null!=Do&&Do.includes(St)?St:null!=e&&e.includes("ydb-")||null!=Do&&Do.includes(Ot)||null==e||!e.includes("localhost")?Ot:""},Tt=function(e){var t=void 0===(r=e.node)?{}:r,n=e.backend,r=t.Host;e=t.Endpoints,t=null!=n&&n.includes("localhost")?"http":"https";return r&&e&&(e=null===(e=w.a.find(e,{Name:"http-mon"}))||void 0===e?void 0:e.Address)?"".concat(t,"://").concat(kt(n),"/").concat(r).concat(e,"/"):null},Nt=(window.web_version?window.systemSettings:{}).settingsApi,Pt=new(function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"getClustersList",value:function(){return this.get("/api/meta/meta/clusters")}},{key:"getClusterInfo",value:function(e){return Ro?this.get("/api/meta/meta/cluster",{name:e}):this.get(_t("/viewer/json/cluster"),{tablets:!0})}},{key:"getNodes",value:function(e){return this.get(_t("/viewer/json/compute?enums=true"),{path:e})}},{key:"getNodeInfo",value:function(e){return this.get(_t("/viewer/json/sysinfo?enums=true"),{node_id:e})}},{key:"getTenants",value:function(e){return Ro?this.get("/api/meta/meta/cp_databases",{cluster_name:e}):this.get(_t("/viewer/json/tenantinfo"),{tablets:1,storage:1,nodes:1})}},{key:"getTenantInfo",value:function(e){return e=e.path,this.get(_t("/viewer/json/tenantinfo"),{path:e,tablets:!0,storage:!0})}},{key:"getStorageInfo",value:function(e){var t=e.tenant,n=e.filter,r=e.nodeId;e=e.type;return this.get(_t("/viewer/json/".concat(e===dt?"nodes":"storage","?enums=true")),{tenant:t,node_id:r,with:n})}},{key:"getPdiskInfo",value:function(e,t){return this.get(_t("/viewer/json/pdiskinfo?enums=true"),{filter:"(NodeId=".concat(e).concat(t?";PDiskId=".concat(t):"",")")})}},{key:"getVdiskInfo",value:function(e){var t=e.vdiskId,n=e.pdiskId;e=e.nodeId;return this.get(_t("/viewer/json/vdiskinfo?enums=true"),{filter:"(VDiskId=".concat(null!=t?t:"",";PDiskId=").concat(null!=n?n:"",";NodeId=").concat(null!=e?e:"",")")})}},{key:"getGroupInfo",value:function(e){return this.get(_t("/viewer/json/storage?enums=true"),{group_id:e})}},{key:"getHostInfo",value:function(){return this.get(_t("/viewer/json/sysinfo?node_id=.&enums=true"))}},{key:"getTabletsInfo",value:function(e){var t=void 0===(t=e.nodes)?[]:t;e=e.path,t=0<t.length&&"(NodeId=[".concat(t.join(","),"])");return this.get(_t("/viewer/json/tabletinfo"),{filter:t,path:e,enums:!0})}},{key:"getSchema",value:function(e){return e=e.path,this.get(_t("/viewer/json/describe"),{path:e,enums:!0,backup:!1,private:!1,partition_config:!1,partition_stats:!1,partitioning_info:!1},{concurrentId:"getSchema|".concat(e)})}},{key:"getDescribe",value:function(e){return e=e.path,this.get(_t("/viewer/json/describe"),{path:e,enums:!0})}},{key:"getSchemaAcl",value:function(e){return e=e.path,this.get(_t("/viewer/json/metainfo"),{path:e},{concurrentId:"getSchemaAcl|".concat(e)})}},{key:"getHeatmapData",value:function(e){return e=e.path,this.get(_t("/viewer/json/describe"),{path:e,enums:!0,backup:!1,private:!1,children:!1,partition_config:!1,partition_stats:!0})}},{key:"getNetwork",value:function(e){return this.get(_t("/viewer/json/netinfo"),{enums:!0,path:e})}},{key:"getPoolInfo",value:function(e){return this.get(_t("/viewer/json/storage"),{pool:e,enums:!0})}},{key:"getTablet",value:function(e){return e=e.id,this.get(_t("/viewer/json/tabletinfo?filter=(TabletId=".concat(e,")")),{enums:!0})}},{key:"getTabletHistory",value:function(e){return e=e.id,this.get(_t("/viewer/json/tabletinfo?filter=(TabletId=".concat(e,")")),{enums:!0,merge:!1})}},{key:"getNodesList",value:function(){return this.get(_t("/viewer/json/nodelist"),{enums:!0})}},{key:"getTenantsList",value:function(){return this.get(_t("/viewer/json/tenants"),{enums:!0,state:0})}},{key:"sendQuery",value:function(e,t,n,r){return this.post(_t("/viewer/json/query"),{query:e,database:t,action:n,stats:r})}},{key:"getExplainQuery",value:function(e,t){return this.post(_t("/viewer/json/query"),{query:e,database:t,action:"explain"})}},{key:"getExplainQueryAst",value:function(e,t){return this.post(_t("/viewer/json/query"),{query:e,database:t,action:"explain-ast"})}},{key:"getHotKeys",value:function(e,t){return this.get(_t("/viewer/json/hotkeys"),{path:e,enable_sampling:t})}},{key:"getHealthcheckInfo",value:function(e){return this.get(_t("/viewer/json/healthcheck"),{tenant:e})}},{key:"killTablet",value:function(e){return this.get(_t("/tablets?KillTabletID=".concat(e)))}},{key:"stopTablet",value:function(e,t){return this.get(_t("/tablets/app?TabletID=".concat(t,"&page=StopTablet&tablet=").concat(e)))}},{key:"resumeTablet",value:function(e,t){return this.get(_t("/tablets/app?TabletID=".concat(t,"&page=ResumeTablet&tablet=").concat(e)))}},{key:"getTabletDescribe",value:function(e){return this.get(_t("/viewer/json/describe"),{schemeshard_id:e.SchemeShard,path_id:e.PathId})}},{key:"getClusterNodesInfo",value:function(e){return this.get("https://".concat(kt(e),"/").concat(Et(e,!0),"/viewer/json/sysinfo"))}},{key:"postSetting",value:function(e,t){return Ro?this.request({method:"PATCH",url:Nt,data:p()({},e,t)}):{}}},{key:"authenticate",value:function(e,t){return this.post(_t("/login"),{user:e,password:t})}},{key:"logout",value:function(){return this.post(_t("/logout"),{})}},{key:"whoami",value:function(){return this.get(_t("/viewer/json/whoami"))}}]),n}(G))({config:y});function It(e){if(e)try{return JSON.parse(e)}catch(t){return console.log(t),e}}function Rt(e,t){try{var n;return null!==(n=localStorage.getItem(e))&&void 0!==n?n:t}catch(e){console.log(e)}}var jt=["B","KB","MB","GB","TB","PB","EB"];function Dt(e){return"".concat((t=e,isNaN(t)?"":(t/=Math.pow(1e3,2))<10?t.toFixed(2)+jt[2]:t<100?t.toFixed(1)+jt[2]:t.toFixed()+jt[2])).concat(e?"ps":"");var t}function At(e,t){return isNaN(e)?"N/A":(e/=1e9,t?e.toFixed()+jt[3]:e<10?e.toFixed(2)+jt[3]:e<100?e.toFixed(1)+jt[3]:e.toFixed()+jt[3])}function Lt(e,t){return"https://monitoring.yandex-team.ru/projects/kikimr/dashboards/monllvavev47fqmirf72?p.cluster=".concat(e,"&p.service=kqp&p.host=cluster&p.slot=cluster&p.database=").concat(t,"&range=1d&refresh=60")}function Mt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t){return function(n){n({type:Vt,data:{name:e,value:t}}),Pt.postSetting(e,t)}}function Ht(e,t){return e.settings.userSettings[t]}function zt(e){return{type:Ut,data:e}}var Ut="settings/CHANGE_PROBLEM_FILTER",Vt="settings/SET_VALUE",Wt=(C=window.userSettings||{},Y=window.systemSettings||{},t=window.web_version?C.theme||"light":Rt(L,"light"),Z=window.web_version?C[M]:Rt(M,"[]"),{problemFilter:D,userSettings:Ft(Ft(Ft({},H),C),{},p()({theme:t},M,Z)),systemSettings:Y});function Gt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yt=ze("heatmap","FETCH_TABLETS"),Xt="heatmap/SET_HEATMAP_OPTIONS",Kt={loading:!1,wasLoaded:!1,currentMetric:void 0,sort:!1,heatmap:!1};var Zt=["search"];function Qt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jt={global:{problemFilter:{stateKey:"settings.problemFilter",initialState:Wt.problemFilter}},"/tenant/schema":{sort:{stateKey:"heatmap.sort",initialState:Kt.sort,type:"bool"},heatmap:{stateKey:"heatmap.heatmap",initialState:Kt.heatmap,type:"bool"},currentMetric:{stateKey:"heatmap.currentMetric",initialState:Kt.currentMetric},schema:{stateKey:"schema.currentSchemaPath"},stateFilter:{stateKey:"tablets.stateFilter",type:"array"},typeFilter:{stateKey:"tablets.typeFilter",type:"array"}}};function en(e,t){return w.a.merge({},e,t.query)}var tn="";var nn=n(84);function rn(e){return"/"===e.charAt(0)}function on(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function an(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var sn="Invariant failed";function ln(e,t){if(!e)throw new Error(sn)}function cn(e){var t=e.pathname,n=e.search;e=e.hash,t=t||"/";return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),e&&"#"!==e&&(t+="#"===e.charAt(0)?e:"#"+e),t}function un(e,t,n,r){var i,o,a,s;"string"==typeof e?(s=a="",-1!==(i=(o=(i=e)||"/").indexOf("#"))&&(s=o.substr(i),o=o.substr(0,i)),-1!==(i=o.indexOf("?"))&&(a=o.substr(i),o=o.substr(0,i)),(s={pathname:o,search:"?"===a?"":a,hash:"#"===s?"":s}).state=t):(void 0===(s=Object(nn.a)({},e)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(s.key=n),r?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&rn(e);t=t&&rn(t),t=o||t;if(e&&rn(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";n=!!i.length&&("."===(n=i[i.length-1])||".."===n||""===n);for(var a=0,s=i.length;0<=s;s--){var l=i[s];"."===l?on(i,s):".."===l?(on(i,s),a++):a&&(on(i,s),a--)}if(!t)for(;a--;)i.unshift("..");return!t||""===i[0]||i[0]&&rn(i[0])||i.unshift(""),t=i.join("/"),n&&"/"!==t.substr(-1)&&(t+="/"),t}(s.pathname,r.pathname)):s.pathname=r.pathname:s.pathname||(s.pathname="/"),s}var hn=!("undefined"==typeof window||!window.document||!window.document.createElement);function dn(e,t){t(window.confirm(e))}var fn="hashchange";function pn(){try{return window.history.state||{}}catch(e){return{}}}function mn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gn=ze("nodes","FETCH_NODES");function yn(e){return Ue({request:Pt.getNodes(e),actions:gn})}function bn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wn=ze("cluster","FETCH_CLUSTER"),En={loading:!0,wasLoaded:!1};function Sn(e){return Ue({request:Pt.getClusterInfo(e),actions:wn})}function On(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _n=ze("tenant","FETCH_TENANT");function kn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nn(e){return Ue({request:Pt.getNodeInfo(e),actions:Pn})}var Pn=ze("NODE","FETCH_NODE");function In(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jn(){return{type:"CLEAR_STORE"}}function Dn(e,t){return Ue({request:Pt.getPdiskInfo(e,t),actions:An})}var An=ze("PDISK","FETCH_PDISK"),Ln={loading:!0,wasLoaded:!1,data:void 0};function Mn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bn=ze("VDISK","FETCH_VDISK"),Hn={loading:!0,wasLoaded:!1,data:void 0};function zn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vn(e){var t=e.data;e=(100*t.Usage).toFixed(2);return t&&i.a.createElement("div",{className:Jn()},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{className:Jn("label")},"Pool"),i.a.createElement("td",null,t.Name)),i.a.createElement("tr",null,i.a.createElement("td",{className:Jn("label")},"Usage"),i.a.createElement("td",null,e," %")),i.a.createElement("tr",null,i.a.createElement("td",{className:Jn("label")},"Threads"),i.a.createElement("td",null,t.Threads)))))}function Wn(e){var t=e.data;e=e.additionalData;return t&&i.a.createElement("div",{className:er()},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{className:er("label")},"Tablet"),i.a.createElement("td",{className:er("value")},t.TabletId)),i.a.createElement("tr",null,i.a.createElement("td",{className:er("label")},"NodeID"),i.a.createElement("td",{className:er("value")},t.NodeId)),i.a.createElement("tr",null,i.a.createElement("td",{className:er("label")},"State"),i.a.createElement("td",{className:er("value")},t.State)),i.a.createElement("tr",null,i.a.createElement("td",{className:er("label")},"Type"),i.a.createElement("td",{className:er("value")},t.Type)),i.a.createElement("tr",null,i.a.createElement("td",{className:er("label")},"Uptime"),i.a.createElement("td",{className:er("value")},$e(t.ChangeTime))),i.a.createElement("tr",null,i.a.createElement("td",{className:er("label")},"Generation"),i.a.createElement("td",{className:er("value")},t.Generation)),e&&i.a.createElement("tr",null,i.a.createElement("td",{className:er("label")},e.name),i.a.createElement("td",{className:er("value")},e.value)))))}function Gn(e){return(e=e.data)&&i.a.createElement("div",{className:tr()},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{className:tr("label")},"ID"),i.a.createElement("td",{className:tr("value")},e.nodeId||"?")),i.a.createElement("tr",null,i.a.createElement("td",{className:tr("label")},"Rack"),i.a.createElement("td",{className:tr("value")},e.rack||"?")),e.connected&&e.capacity&&i.a.createElement("tr",null,i.a.createElement("td",{className:tr("label")},"Net"),i.a.createElement("td",{className:tr("value")},"".concat(e.connected," / ").concat(e.capacity))))))}function qn(e){return(e=e.data)&&i.a.createElement("div",{className:nr()},i.a.createElement("table",null,i.a.createElement("tbody",null,e.map((function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",{className:nr("label")},e.color,":"),i.a.createElement("td",{className:nr("value")},"".concat(e.value,"/").concat(e.total," (").concat(e.percents.toFixed(2),"%)")))})))))}function Yn(e){return(e=e.data)&&i.a.createElement("div",{className:rr()},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{className:rr("label")},"Count"),i.a.createElement("td",{className:rr("value")},e.count||"?")),i.a.createElement("tr",null,i.a.createElement("td",{className:rr("label")},"From"),i.a.createElement("td",{className:rr("value")},e.leftBound||"?")),i.a.createElement("tr",null,i.a.createElement("td",{className:rr("label")},"To"),i.a.createElement("td",{className:rr("value")},e.rightBound||"?")))))}var Xn=ze("GROUP","FETCH_GROUP"),Kn={loading:!0,wasLoaded:!1,data:void 0},Zn="UPDATE_REF",Qn="HIDE_TOOLTIP",$n=(f=n(193),n.n(f)),Jn=ie()("pool-tooltip"),er=ie()("tablet-tooltip"),tr=ie()("node-tootltip"),nr=ie()("tabletsOverall-tooltip"),rr=ie()("histogram-tooltip"),ir=ie()("cell-tooltip"),or=ie()("json-tooltip"),ar={pool:function(e){return i.a.createElement(Vn,{data:e})},tablet:function(e,t){return i.a.createElement(Wn,{data:e,additionalData:t})},node:function(e){return i.a.createElement(Gn,{data:e})},tabletsOverall:function(e){return i.a.createElement(qn,{data:e})},histogram:function(e){return i.a.createElement(Yn,{data:e})},cell:function(e){return i.a.createElement("div",{className:ir()},e)},json:function(e){return i.a.createElement("div",{className:or()},i.a.createElement($n.a,{data:e,search:!1,isExpanded:function(){return!0},className:or("inspector")}))}};function sr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(){return{type:Qn}}function ur(e,t,n,r,i){return{type:Zn,node:e,data:t,templateType:n,additionalData:r,positions:i}}var hr={toolTipVisible:!1,currentHoveredRef:void 0,data:void 0,templateType:"pool",template:ar.pool};function dr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pr=ze("tablets","FETCH_TABLETS"),mr={loading:!0,wasLoaded:!1,stateFilter:[],typeFilter:[]};function vr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yr=ze("schema","FETCH_SCHEMA"),br="schema/SET_SCHEMA",Cr="schema/ENABLE_AUTOREFRESH",wr="schema/DISABLE_AUTOREFRESH",Er={loading:!0,wasLoaded:!1,data:{},currentSchemaPath:void 0,autorefresh:!1};function Sr(e){return e=e.path,Ue({request:Pt.getSchema({path:e}),actions:yr})}function Or(e){return{type:br,data:e}}function xr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function _r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kr=ze("host","FETCH_HOST"),Tr={loading:!0,wasLoaded:!1,data:{}};function Nr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ir=ze("ALL_NODES_NETWORK","FETCH_ALL_NODES_NETWORK");function Rr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dr=ze("pool","FETCH_POOL");function Ar(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mr=ze("tenants","FETCH_TENANTS"),Fr={loading:!0,wasLoaded:!1,data:{}};function Br(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zr=ze("TABLET","FETCH_TABLET"),Ur=ze("TABLET","FETCH_TABLET_DESCRIBE");function Vr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gr(e){var t=e.input;return function(e){e({type:Yr,data:{input:t}})}}var qr=ze("query","SEND_QUERY"),Yr="query/CHANGE_USER_INPUT",Xr="query/SAVE_QUERY_TO_HISTORY",Kr="query/GO_TO_PREVIOUS_QUERY",Zr="query/GO_TO_NEXT_QUERY",Qr="query/SELECT_RUN_ACTION",$r=(G="execute",y="execute-scan",{loading:!1,input:"",history:{queries:[],currentIndex:-1},runAction:m="execute-script"});function Jr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ti=ze("query","GET_EXPLAIN_QUERY"),ni=ze("query","GET_EXPLAIN_QUERY_AST"),ri={loading:!1};function ii(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ai=ze("tabletsFilters","FETCH_TABLETS_FILTERS"),si={data:void 0,loading:!0,wasLoaded:!1,stateFilter:[],typeFilter:[]};function li(e){return(null==(e=e.tabletsFilters.tabletsData)?void 0:e.TabletStateInfo)||[]}var ci=V([li,function(e){return e.tabletsFilters.stateFilter},function(e){return e.tabletsFilters.typeFilter}],(function(e,t,n){return 0<n.length&&(e=e.filter((function(e){return n.some((function(t){return e.Type===t}))}))),0<t.length?e.filter((function(e){return t.some((function(t){return e.State===t}))})):e})),ui=(H=n(239),n.n(H)),hi=(C=n(240),n.n(C)),di=(t=n(528),n.n(t)),fi=(Z=n(529),n.n(Z)),pi=(Y=n(340),n.n(Y));function mi(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gi(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((function(e){var n=Si(e);e=Ei(e);t[n]?t[n].add(e):t[n]=new Set([e])})),t}function yi(e){var t=Object.keys(e).filter(Boolean).map((function(e){return{version:e,hash:bi(e)}})),n=new Map;return t.sort((function(e,t){return e.hash>t.hash})).forEach((function(t,r){var i,o;t.version.startsWith("stable")?(n.set(t.version,Ci[r%Ci.length]),i=Array.from(e[t.version]).filter((function(e){return e!==t.version})).map((function(e){return{version:e,hash:bi(e)}})),o=i.length,i.sort((function(e,t){return e.hash<t.hash?1:-1})).forEach((function(e,t){var i=Ci[r%Ci.length];t=Math.max(100-t*(100/o),20),t=Math.round(255*t/100).toString(16),t="".concat(i).concat(t);n.set(e.version,t)}))):n.set(t.version,wi)})),n}var bi=function(e){return e.split("").reduce((function(e,t){return(t=(e<<5)-e+t.charCodeAt(0))&t}),0)},Ci=["#07a300","#027bf3","#e0b509","#d17700"],wi="#bfbfbf",Ei=function(e){return/\d{1,}-\d{1,}(-\d){0,}(-hotfix-\d{1,}(-\d{1,})?)?\.[0-9a-zA-Z]+$/.test(e)&&(e=e.replace(/(-hotfix-\d{1,}(-\d{1,})?)?\.[0-9a-zA-Z]+$/,"")),/\d{1,}-\d{1,}-\d{1,}-\d{1,}$/.test(e)?e.replace(/-\d{1,}$/,""):e},Si=function(e){return e=Ei(e),/\d{1,}-\d{1,}-\d{1,}/.test(e)?e.replace(/-\d{1,}$/,""):e};function Oi(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _i=ze("cluster","FETCH_CLUSTERS"),ki="cluster/CHANGE_FILTER",Ti={loading:!1,list:[],clusterName:"",status:[],service:[],versions:[],version:[]};function Ni(e){return e.clusters.list}function Pi(e){return e.clusters.clusterName}function Ii(e){return e.clusters.status}function Ri(e){return e.clusters.service}function ji(e){return e.clusters.version}var Di=V([Ni,Pi,Ii,Ri,ji],(function(e,t,n,r,i){return w.a.filter(e,(function(e){var o=0===n.length||n.includes(e.status),a=0===r.length||r.includes(e.service),s=t.toLowerCase().split(" "),l=e.title.toLowerCase().split(/ |-|_/),c=s.every((function(e){return w.a.some(l,(function(t){return t.startsWith(e)}))})),u=e.clusterVersions.some((function(e){return e.version.includes(t.toLowerCase())}));s=t.toLowerCase(),s=Boolean(e.hosts&&e.hosts[s]);return!!(a&&o&&(c||u||s))&&(!i.length||w.a.some(i,(function(t){var n;return w.a.some(null===(n=e.cluster)||void 0===n?void 0:n.Versions,(function(e){return e.includes(t)}))})))}))})),Ai=V(Ni,(function(e){return ui()([pi()((function(e){return e.cluster.Versions})),hi()(Boolean),fi.a,pi()(Ei),di.a,pi()((function(e){return{value:e,title:e}}))])(e)})),Li=V(Di,(function(e){var t=0,n=0,r=0,i=0,o=0,a=0,s=new Set;e=w.a.filter(e,(function(e){return!e.cluster.error}));return w.a.forEach(e,(function(e){var l=e.cluster;e=e.hosts;t+=l.NodesTotal||0,n+=l.NodesAlive||0,Object.keys(void 0===e?{}:e).forEach((function(e){return s.add(e)})),r+=Number(l.LoadAverage)||0,i+=l.NumberOfCpus||0,o+=Math.floor(parseInt(l.StorageUsed)/1e12)||0,a+=Math.floor(parseInt(l.StorageTotal)/1e12)||0})),{NodesTotal:t,NodesAlive:n,Hosts:s.size,LoadAverage:r,NumberOfCpus:i,StorageUsed:o,StorageTotal:a}}));function Mi(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bi=ze("cluster","FETCH_CLUSTER"),Hi=ze("cluster","FETCH_CLUSTER_NODES"),zi={loading:!1};function Ui(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wi=ze("preview","SEND_QUERY"),Gi=ze("preview","SET_QUERY_OPTIONS"),qi={loading:!1,wasLoaded:!1};function Yi(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yi(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ki=ze("tenants","FETCH_NODES_LIST"),Zi={loading:!0,wasLoaded:!1,data:[]};var Qi=V((function(e){return null===(e=e.nodes.data)||void 0===e?void 0:e.Tenants}),(function(e){return e.settings.problemFilter}),(function(e,t){return e=null==e?void 0:e.reduce((function(e,t){return Array.isArray(t.Nodes)?[].concat(J()(e),J()(t.Nodes.map((function(e){return Xi(Xi({},e),{},{TenantName:t.Name})})))):e}),[]),t===D?e:e.filter((function(e){return(e=e.Overall)&&"Green"!==e}))}));function $i(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eo=ze("describe","FETCH_DESCRIBE");function to(e){return e=e.path,Ue({request:Pt.getDescribe({path:e}),actions:eo})}function no(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var io=ze("schemaAcl","FETCH_SCHEMA_ACL");function oo(e){return e=e.path,Ue({request:Pt.getSchemaAcl({path:e}),actions:io})}function ao(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lo=ze("top-queries","SEND_QUERY"),co=ze("top-queries","SET_QUERY_OPTIONS"),uo={loading:!1,wasLoaded:!1};function ho(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var po=ze("cluster","FETCH_HEALTHCHECK"),mo={loading:!1,wasLoaded:!1};function vo(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yo=ze("query","SEND_SHARD_QUERY"),bo=ze("query","SET_SHARD_QUERY_OPTIONS"),Co={loading:!1,wasLoaded:!1};function wo(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var So=ze("hot_keys","FETCH_HOT_KEYS"),Oo=ze("hot_keys","SET_HOT_KEYS_OPTIONS"),xo={loading:!0,data:{},wasLoaded:!1};function _o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_o(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var To=ze("query","SEND_OLAP_STATS_QUERY"),No=ze("query","SET_OLAP_STATS_OPTIONS"),Po={loading:!1,wasLoaded:!1};function Io(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}f={nodes:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{loading:!0,wasLoaded:!1},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case gn.REQUEST:return vn(vn({},e),{},{loading:!0,requestTime:(new Date).getTime()});case gn.SUCCESS:var n=(new Date).getTime()-e.requestTime;return vn(vn({},e),{},{data:t.data,loading:!1,wasLoaded:!0,timeoutForRequest:1e4<n?n:1e4,error:void 0});case gn.FAILURE:return vn(vn({},e),{},{error:t.error,loading:!1});case"CLEAR_NODES":return vn(vn({},e),{},{loading:!0,data:void 0,wasLoaded:!1,requestTime:(new Date).getTime(),error:void 0});default:return e}},cluster:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:En,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case wn.REQUEST:return Cn(Cn({},e),{},{loading:!0});case wn.SUCCESS:var n=t.data,r=n.cluster?n.cluster.cluster:n,i=(null===(i=n.cluster)||void 0===i?void 0:i.title)||n.Name;return Cn(Cn({},e),{},{data:Cn(Cn({},r),{},{balancer:null===(r=n.cluster)||void 0===r?void 0:r.balancer,solomon:null===(n=n.cluster)||void 0===n?void 0:n.solomon,Name:i}),loading:!1,wasLoaded:!0,error:void 0});case wn.FAILURE:return Cn(Cn({},e),{},{error:t.error,loading:!1});default:return e}},tenant:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{loading:!1,tenant:{}},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case _n.REQUEST:return xn(xn({},e),{},{loading:!0});case _n.SUCCESS:var n=(r=t.data).tenant,r=r.tenantNodes;return xn(xn({},e),{},{tenant:n,tenantNodes:r,loading:!1,error:void 0});case _n.FAILURE:return xn(xn({},e),{},{data:t.error,loading:!1});case"CLEAR_TENANT":return xn(xn({},e),{},{tenant:{},loading:!0});default:return e}},storage:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:yt,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case ft.REQUEST:return st(st({},e),{},{loading:!0});case ft.SUCCESS:return st(st({},e),{},{data:t.data,loading:!1,wasLoaded:!0,error:void 0});case ft.FAILURE:return st(st({},e),{},{error:t.error,loading:!1});case pt:return st({},yt);case mt:return st(st({},e),{},{filter:t.data});case vt:return st(st({},e),{},{visible:t.data});case gt:return st(st({},e),{},{type:t.data});default:return e}},node:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{data:{},loading:!0,wasLoaded:!1},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Pn.REQUEST:return Tn(Tn({},e),{},{loading:!0});case Pn.SUCCESS:return Tn(Tn({},e),{},{data:t.data,loading:!1,wasLoaded:!0,error:void 0});case Pn.FAILURE:return Tn(Tn({},e),{},{error:t.error,loading:!1});default:return e}},pdisk:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ln,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case An.REQUEST:return Rn(Rn({},e),{},{loading:!0});case An.SUCCESS:return Rn(Rn({},e),{},{data:t.data,loading:!1,wasLoaded:!0,error:void 0});case An.FAILURE:return Rn(Rn({},e),{},{error:t.error,loading:!1});case"CLEAR_STORE":return Ln;default:return e}},vdisk:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Hn,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Bn.REQUEST:return Fn(Fn({},e),{},{loading:!0});case Bn.SUCCESS:return Fn(Fn({},e),{},{data:t.data,loading:!1,wasLoaded:!0,error:void 0});case Bn.FAILURE:return Fn(Fn({},e),{},{error:t.error,loading:!1});case"CLEAR_STORE":return Hn;default:return e}},group:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Kn,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Xn.REQUEST:return Un(Un({},e),{},{loading:!0});case Xn.SUCCESS:return Un(Un({},e),{},{data:t.data,loading:!1,wasLoaded:!0,error:void 0});case Xn.FAILURE:return Un(Un({},e),{},{error:t.error,loading:!1});case"CLEAR_STORE":return Kn;default:return e}},tooltip:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:hr,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Qn:return lr(lr({},e),{},{currentHoveredRef:void 0,toolTipVisible:!1});case Zn:return"cell"===t.templateType&&w.a.isEqual(t.node,e.currentHoveredRef)?lr(lr({},e),{},{currentHoveredRef:void 0,toolTipVisible:!1}):lr(lr({},e),{},{toolTipVisible:!0,currentHoveredRef:t.node,positions:t.positions,data:t.data,additionalData:t.additionalData,type:t.templateType,template:ar[t.templateType]});default:return e}},tablets:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:mr,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case pr.REQUEST:return fr(fr({},e),{},{loading:!0,requestTime:(new Date).getTime()});case pr.SUCCESS:var n=(new Date).getTime()-e.requestTime;return fr(fr({},e),{},{data:t.data,loading:!1,timeoutForRequest:1e4<n?n:1e4,error:void 0,wasLoaded:!0});case pr.FAILURE:return fr(fr({},e),{},{error:t.error,loading:!1});case"CLEAR_WAS_LOADING_TABLETS":return fr(fr({},e),{},{wasLoaded:!1,loading:!0});case"SET_STATE_FILTER":return fr(fr({},e),{},{stateFilter:t.data});case"SET_TYPE_FILTER":return fr(fr({},e),{},{typeFilter:t.data});default:return e}},schema:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Er,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case yr.REQUEST:return gr(gr({},e),{},{loading:!0});case yr.SUCCESS:var n=JSON.parse(JSON.stringify(e.data));n[t.data.Path]=t.data;var r=e.currentSchemaPath?n[e.currentSchemaPath]:t.data,i=e.currentSchemaPath||t.data.Path;return gr(gr({},e),{},{error:void 0,data:n,currentSchema:r,currentSchemaPath:i,loading:!1,wasLoaded:!0});case yr.FAILURE:return gr(gr({},e),{},{error:t.error,loading:!1});case br:return gr(gr({},e),{},{currentSchemaPath:t.data});case Cr:return gr(gr({},e),{},{autorefresh:!0});case wr:return gr(gr({},e),{},{autorefresh:!1});default:return e}},olapStats:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Po,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case To.REQUEST:return ko(ko({},e),{},{loading:!0,error:void 0});case To.SUCCESS:return ko(ko({},e),{},{data:t.data,loading:!1,error:void 0,wasLoaded:!0});case To.FAILURE:return ko(ko({},e),{},{error:t.error||"Unauthorized",loading:!1});case No:return ko(ko({},e),t.data);default:return e}},host:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Tr,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case kr.REQUEST:return _r(_r({},e),{},{loading:!0});case kr.SUCCESS:return _r(_r({},e),{},{data:t.data.SystemStateInfo[0],loading:!1,wasLoaded:!0,error:void 0});case kr.FAILURE:return _r(_r({},e),{},{error:t.error,loading:!1});default:return e}},network:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{data:{},loading:!0,wasLoaded:!1},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Ir.REQUEST:return Pr(Pr({},e),{},{loading:!0});case Ir.SUCCESS:return Pr(Pr({},e),{},{data:t.data,loading:!1,wasLoaded:!0,error:void 0});case Ir.FAILURE:return Pr(Pr({},e),{},{error:t.error,loading:!1});default:return e}},pool:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{loading:!0,wasLoaded:!1},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Dr.REQUEST:return jr(jr({},e),{},{loading:!0});case Dr.SUCCESS:return jr(jr({},e),{},{data:t.data,loading:!1,wasLoaded:!0,error:void 0});case Dr.FAILURE:return jr(jr({},e),{},{error:t.error,loading:!1});default:return e}},tenants:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Fr,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Mr.REQUEST:return Lr(Lr({},e),{},{loading:!0});case Mr.SUCCESS:return Lr(Lr({},e),{},{tenants:t.data,loading:!1,wasLoaded:!0,error:void 0});case Mr.FAILURE:return Lr(Lr({},e),{},{error:t.error,loading:!1});default:return e}},tablet:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{loading:!1,tenantPath:"-"},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case zr.REQUEST:return Hr(Hr({},e),{},{loading:!0});case zr.SUCCESS:var n=(i=t.data).tablet,r=i.history,i=n.TabletId;return Hr(Hr({},e),{},{id:i,data:n,history:r,loading:!1,error:void 0});case zr.FAILURE:return Hr(Hr({},e),{},{error:t.error,loading:!1});case Ur.SUCCESS:return r=t.data.tenantPath,Hr(Hr({},e),{},{tenantPath:r,error:void 0});default:return e}},executeQuery:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$r,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case qr.REQUEST:return Wr(Wr({},e),{},{loading:!0,data:void 0,error:void 0});case qr.SUCCESS:return Wr(Wr({},e),{},{data:null!==(r=t.data.result)&&void 0!==r?r:t.data,stats:t.data.stats,loading:!1,error:void 0});case qr.FAILURE:return Wr(Wr({},e),{},{error:t.error||"Unauthorized",loading:!1});case Qr:return Wr(Wr({},e),{},{runAction:t.data});case Yr:return Wr(Wr({},e),{},{input:t.data.input});case Xr:var n=t.data,r=[].concat(J()(e.history.queries),[n]);n=r.length-1;return Wr(Wr({},e),{},{history:{queries:r,currentIndex:n}});case Kr:var i=Math.max(0,e.history.currentIndex-1);return Wr(Wr({},e),{},{history:Wr(Wr({},e.history),{},{currentIndex:i})});case Zr:return i=e.history.queries.length-1,i=Math.min(i,e.history.currentIndex+1),Wr(Wr({},e),{},{history:Wr(Wr({},e.history),{},{currentIndex:i})});default:return e}},explainQuery:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ri,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case ti.REQUEST:return ei(ei({},e),{},{loading:!0,data:void 0,error:void 0});case ti.SUCCESS:return ei(ei({},e),{},{data:t.data,loading:!1,error:void 0});case ti.FAILURE:return ei(ei({},e),{},{error:t.error||"Unauthorized",loading:!1});case ni.REQUEST:return ei(ei({},e),{},{loadingAst:!0,dataAst:void 0,errorAst:void 0});case ni.SUCCESS:return ei(ei({},e),{},{dataAst:t.data,loadingAst:!1,error:void 0});case ni.FAILURE:return ei(ei({},e),{},{errorAst:t.error||"Unauthorized",loadingAst:!1});default:return e}},tabletsFilters:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:si,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case ai.REQUEST:return oi(oi({},e),{},{loading:!0,requestTime:(new Date).getTime()});case ai.SUCCESS:var n=(new Date).getTime()-e.requestTime,r=(i=ae()(t.data,2))[0],i=i[1];return oi(oi({},e),{},{tabletsData:r,nodes:i,loading:!1,wasLoaded:!0,timeoutForRequest:1e4<n?n:1e4,error:void 0});case ai.FAILURE:return oi(oi({},e),{},{error:t.error||"Request-URI Too Large. Please reload the page",loading:!1});case"CLEAR_WAS_LOADING_TABLETS":return i=e.stateFilter,n=e.typeFilter,oi(oi({},si),{},{stateFilter:i,typeFilter:n});case"SET_STATE_FILTER":return oi(oi({},e),{},{stateFilter:t.data});case"SET_TYPE_FILTER":return oi(oi({},e),{},{typeFilter:t.data});default:return e}},heatmap:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Kt,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Yt.REQUEST:return qt(qt({},e),{},{loading:!0});case Yt.SUCCESS:return qt(qt(qt({},e),t.data),{},{loading:!1,wasLoaded:!0,error:void 0});case Yt.FAILURE:return qt(qt({},e),{},{error:t.error,loading:!1,wasLoaded:!1});case Xt:return qt(qt({},e),t.data);default:return e}},clusters:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ti,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case _i.REQUEST:return xi(xi({},e),{},{loading:!0});case _i.SUCCESS:var n=void 0===(n=t.data)?[]:n;return xi(xi({},e),{},{loading:!1,list:n,error:void 0});case _i.FAILURE:return xi(xi({},e),{},{error:t.error,loading:!1});case ki:return xi(xi({},e),t.data);default:return e}},clusterInfo:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:zi,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Bi.REQUEST:return Fi(Fi({},e),{},{loading:!0});case Bi.SUCCESS:var n=void 0===(n=t.data)?{}:n;return Fi(Fi(Fi({},e),n),{},{loading:!1,error:void 0});case Bi.FAILURE:return Fi(Fi({},e),{},{error:t.error,loading:!1});case Hi.REQUEST:return Fi(Fi({},e),{},{loading:!0});case Hi.SUCCESS:return n=void 0===(n=t.data)?[]:n,Fi(Fi({},e),{},{nodes:n,loading:!1,error:void 0});case Hi.FAILURE:return Fi(Fi({},e),{},{nodes:[],error:t.error,loading:!1});default:return e}},settings:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Wt,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Ut:return Ft(Ft({},e),{},{problemFilter:t.data});case Vt:var n=Ft(Ft({},e.userSettings),{},p()({},t.data.name,t.data.value));return Ft(Ft({},e),{},{userSettings:n});default:return e}},preview:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:qi,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Wi.REQUEST:return Vi(Vi({},e),{},{loading:!0,error:void 0});case Wi.SUCCESS:return Vi(Vi({},e),{},{data:t.data,loading:!1,error:void 0,wasLoaded:!0});case Wi.FAILURE:return Vi(Vi({},e),{},{error:t.error||"Unauthorized",loading:!1});case Gi:return Vi(Vi({},e),t.data);default:return e}},nodesList:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Zi,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Ki.REQUEST:return Xi(Xi({},e),{},{loading:!0});case Ki.SUCCESS:return Xi(Xi({},e),{},{data:t.data,loading:!1,wasLoaded:!0,error:void 0});case Ki.FAILURE:return Xi(Xi({},e),{},{error:t.error,loading:!1});default:return e}},describe:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{loading:!1,wasLoaded:!1,data:{}},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case eo.REQUEST:return Ji(Ji({},e),{},{loading:!0});case eo.SUCCESS:var n=JSON.parse(JSON.stringify(e.data));return n[t.data.Path]=t.data,Ji(Ji({},e),{},{data:n,currentDescribe:t.data,loading:!1,wasLoaded:!0,error:void 0});case eo.FAILURE:return Ji(Ji({},e),{},{error:t.error,loading:!1});default:return e}},schemaAcl:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{loading:!1,wasLoaded:!1,acl:void 0},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case io.REQUEST:return ro(ro({},e),{},{loading:!0});case io.SUCCESS:return ro(ro({},e),{},{error:void 0,acl:w.a.get(t.data,"Common.ACL"),owner:w.a.get(t.data,"Common.Owner"),loading:!1,wasLoaded:!0});case io.FAILURE:return ro(ro({},e),{},{error:t.error,loading:!1});default:return e}},executeTopQueries:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:uo,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case lo.REQUEST:return so(so({},e),{},{loading:!0,error:void 0});case lo.SUCCESS:return so(so({},e),{},{data:t.data,loading:!1,error:void 0,wasLoaded:!0});case lo.FAILURE:return so(so({},e),{},{error:t.error||"Unauthorized",loading:!1});case co:return so(so({},e),t.data);default:return e}},healthcheckInfo:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:mo,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case po.REQUEST:return fo(fo({},e),{},{loading:!0});case po.SUCCESS:var n=t.data;return fo(fo({},e),{},{data:n,wasLoaded:!0,loading:!1,error:void 0});case po.FAILURE:return fo(fo({},e),{},{error:t.error,loading:!1});default:return e}},shardsWorkload:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Co,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case yo.REQUEST:return go(go({},e),{},{loading:!0,error:void 0});case yo.SUCCESS:return go(go({},e),{},{data:t.data,loading:!1,error:void 0,wasLoaded:!0});case yo.FAILURE:return go(go({},e),{},{error:t.error||"Unauthorized",loading:!1});case bo:return go(go({},e),t.data);default:return e}},hotKeys:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:xo,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case So.REQUEST:return Eo(Eo({},e),{},{loading:!0});case So.SUCCESS:return Eo(Eo({},e),{},{data:t.data.hotkeys,loading:!1,error:void 0,wasLoaded:!0});case So.FAILURE:return Eo(Eo({},e),{},{error:t.error,loading:!1});case Oo:return Eo(Eo({},e),t.data);default:return e}},authentication:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Fe,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Ae.SUCCESS:return Re(Re({},e),{},{isAuthenticated:!1,user:"",error:""});case Le.SUCCESS:return Re(Re({},e),{},{isAuthenticated:!0,error:""});case Le.FAILURE:return Re(Re({},e),{},{error:t.error});case Me.SUCCESS:return Re(Re({},e),{},{user:t.data});default:return Re({},e)}}},H=Object(c.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},f));var Ro=window.web_version,jo=window.custom_backend,Do=(C=function(e){if(Ro){var t=re.a.parse(e,!0).query;return{basename:"/",backend:t.backend,clusterName:t.clusterName}}return jo?{basename:"/",backend:re.a.parse(e,!0).query.backend||window.custom_backend}:(e=window.location.pathname.match(/.*(?=\/monitoring)/)||[],{basename:[e=Boolean(e.length)&&e[0],"monitoring"].filter(Boolean).join("/"),backend:e||""})}(window.location.href)).backend,Ao=C.basename,Lo=C.clusterName,Mo=function(e){void 0===e&&(e={}),hn||ln(!1);var t,n,r=window.history,i=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,o=!(-1===window.navigator.userAgent.indexOf("Trident")),a=void 0!==(t=(n=e).forceRefresh)&&t,s=void 0===(t=n.getUserConfirmation)?dn:t,l=void 0===(n=n.keyLength)?6:n,c=e.basename?function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}(function(e){return"/"===e.charAt(0)?e:"/"+e}(e.basename)):"";function u(e){var t=(n=e||{}).key,n=(e=n.state,(n=window.location).pathname+n.search+n.hash);return un(n=c?function(e,t){return r=t,0===(n=e).toLowerCase().indexOf(r.toLowerCase())&&-1!=="/?#".indexOf(n.charAt(r.length))?e.substr(t.length):e;var n,r}(n,c):n,e,t)}function h(){return Math.random().toString(36).substr(2,l)}var d=function(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){null!=e?"string"==typeof(n="function"==typeof e?e(t,n):e)?"function"==typeof r?r(n,i):i(!0):i(!1!==n):i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}();function f(e){Object(nn.a)(O,e),O.length=r.length,d.notifyListeners(O.location,O.action)}function p(e){void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")||g(u(e.state))}function m(){g(u(pn()))}var v=!1;function g(e){v?(v=!1,f()):d.confirmTransitionTo(e,"POP",s,(function(t){t?f({action:"POP",location:e}):function(e){var t=O.location;-1===(t=y.indexOf(t.key))&&(t=0),-1===(e=y.indexOf(e.key))&&(e=0),(e=t-e)&&(v=!0,C(e))}(e)}))}var y=[(e=u(pn())).key];function b(e){return c+cn(e)}function C(e){r.go(e)}var w=0;function E(e){1===(w+=e)&&1===e?(window.addEventListener("popstate",p),o&&window.addEventListener(fn,m)):0===w&&(window.removeEventListener("popstate",p),o&&window.removeEventListener(fn,m))}var S=!1,O={length:r.length,action:"POP",location:e,createHref:b,push:function(e,t){var n=un(e,t,h(),O.location);d.confirmTransitionTo(n,"PUSH",s,(function(e){var t,o;e&&(t=b(n),o=n.key,e=n.state,i?(r.pushState({key:o,state:e},null,t),a?window.location.href=t:(e=y.indexOf(O.location.key),(e=y.slice(0,e+1)).push(n.key),y=e,f({action:"PUSH",location:n}))):window.location.href=t)}))},replace:function(e,t){var n=un(e,t,h(),O.location);d.confirmTransitionTo(n,"REPLACE",s,(function(e){var t,o;e&&(t=b(n),o=n.key,e=n.state,i?(r.replaceState({key:o,state:e},null,t),a?window.location.replace(t):(-1!==(e=y.indexOf(O.location.key))&&(y[e]=n.key),f({action:"REPLACE",location:n}))):window.location.replace(t))}))},go:C,goBack:function(){C(-1)},goForward:function(){C(1)},block:function(e){var t=d.setPrompt(e=void 0!==e&&e);return S||(E(1),S=!0),function(){return S&&(S=!1,E(-1)),t()}},listen:function(e){var t=d.appendListener(e);return E(1),function(){E(-1),t()}}};return O}({basename:Ao});t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.c;function Fo(e){var t=Object(Ho.a)();return t.displayName=e,t}Y=(Z=Mo,Y=H,Z={locationMiddleware:Object(g.createReduxLocationActions)(Jt,en,Z,Y,(function(e,t,n){var r,i,o=Object(E.stateToParams)(e,t,n),a=o.location;return a.search===tn?{location:n,shouldPush:!1}:(tn=a.search,/\?\w+/.test(n.search)&&(r=n,t=(e=a).search,n=v()(e,Zt),i=b.a.parse(r.search.slice(1)),e=(r=Object(x.getMatchingDeclaredPath)(Jt,e))&&Jt[r],w.a.each(w.a.keys(e),(function(e){delete i[e]})),w.a.each(w.a.keys(Jt.global||{}),(function(e){delete i[e]})),r=b.a.stringify(i,{encoder:encodeURIComponent}),e=t.startsWith("?")?"&":"?",a=$t({search:"".concat(t).concat(e).concat(r)},n)),$t($t({},o),{},{location:a}))})).locationMiddleware,reducersWithLocation:function(e,t,n){return function(r,i){var o=n(r,i),a=(a=o,i=(o=i).type,!(o=o.payload)||O.LOCATION_POP!==i&&O.LOCATION_PUSH!==i?a:(o.query=Object(S.parseQuery)(e,o),t(a,o)));return a!==r?a:r}}(Jt,en,Y)}).locationMiddleware,Z=Z.reducersWithLocation,V=t(Y=Object(c.a)(d,Y))(c.d)(Z),Object(g.listenForHistoryChange)(V,Mo);f=window.store=V;var Bo=(n(756),n(132)),Ho=n(530),zo=(C=n(433),n.n(C)),Uo=(n(447),n(126)),Vo=(H=n(288),n.n(H)),Wo=Fo("Router-History"),Go=Fo("Router"),qo=function(e){function t(t){var n=e.call(this,t)||this;return n.state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(Bo.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return i.a.createElement(Go.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.a.createElement(Wo.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.a.Component);i.a.Component;var Yo=function(e){function t(){return e.apply(this,arguments)||this}Object(Bo.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(i.a.Component),Xo={},Ko=0;function Zo(e,t){return void 0===t&&(t={}),"/"===(e=void 0===e?"/":e)?e:function(e){if(Xo[e])return Xo[e];var t=zo.a.compile(e);return Ko<1e4&&(Xo[e]=t,Ko++),t}(e)(t,{pretty:!0})}function Qo(e){var t=e.computedMatch,n=e.to,r=void 0!==(e=e.push)&&e;return i.a.createElement(Go.Consumer,null,(function(e){e||ln(!1);var o=e.history,a=(e=e.staticContext,r?o.push:o.replace),s=un(t?"string"==typeof n?Zo(n,t.params):Object(nn.a)({},n,{pathname:Zo(n.pathname,t.params)}):n);return e?(a(s),null):i.a.createElement(Yo,{onMount:function(){a(s)},onUpdate:function(e,t){var n=un(t.to);t=n,n=Object(nn.a)({},s,{key:n.key}),t.pathname===n.pathname&&t.search===n.search&&t.hash===n.hash&&t.key===n.key&&function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"!=typeof t&&"object"!=typeof n)return!1;var r=an(t),i=an(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}(t.state,n.state)||a(s)},to:n})}))}var $o={},Jo=0;function ea(e,t){var n,r=(n=t="string"==typeof(t=void 0===t?{}:t)||Array.isArray(t)?{path:t}:t).path,i=void 0!==(t=n.exact)&&t,o=void 0!==(t=n.strict)&&t,a=void 0!==(n=n.sensitive)&&n;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r,s=(t=(s=n,l=""+(r={end:i,strict:o,sensitive:a}).end+r.strict+r.sensitive,(t=$o[l]||($o[l]={}))[s]||(l=[],l={regexp:zo()(s,l,r),keys:l},Jo<1e4&&(t[s]=l,Jo++),l))).regexp,l=t.keys;if(!(t=s.exec(e)))return null;s=t[0];var c=t.slice(1);t=e===s;return i&&!t?null:{path:n,url:"/"===n&&""===s?"/":s,isExact:t,params:l.reduce((function(e,t,n){return e[t.name]=c[n],e}),{})}}),null)}var ta=function(e){function t(){return e.apply(this,arguments)||this}return Object(Bo.a)(t,e),t.prototype.render=function(){var e=this;return i.a.createElement(Go.Consumer,null,(function(t){t||ln(!1);var n=e.props.location||t.location,r=e.props.computedMatch||(e.props.path?ea(n.pathname,e.props):t.match),o=Object(nn.a)({},t,{location:n,match:r}),a=e.props;t=a.children,n=a.component,r=a.render;return Array.isArray(t)&&(a=t,0===i.a.Children.count(a))&&(t=null),i.a.createElement(Go.Provider,{value:o},o.match?t?"function"==typeof t?t(o):t:n?i.a.createElement(n,o):r?r(o):null:"function"==typeof t?t(o):null)}))},t}(i.a.Component);i.a.Component;var na=function(e){function t(){return e.apply(this,arguments)||this}return Object(Bo.a)(t,e),t.prototype.render=function(){var e=this;return i.a.createElement(Go.Consumer,null,(function(t){t||ln(!1);var n,r,o=e.props.location||t.location;return i.a.Children.forEach(e.props.children,(function(e){var a;null==r&&i.a.isValidElement(e)&&(a=(n=e).props.path||e.props.from,r=a?ea(o.pathname,Object(nn.a)({},e.props,{path:a})):t.match)})),r?i.a.cloneElement(n,{location:o,computedMatch:r}):null}))},t}(i.a.Component);function ra(e){function t(t){var n=t.wrappedComponentRef,r=Object(Uo.a)(t,["wrappedComponentRef"]);return i.a.createElement(Go.Consumer,null,(function(t){return t||ln(!1),i.a.createElement(e,Object(nn.a)({},r,t,{ref:n}))}))}var n="withRouter("+(e.displayName||e.name)+")";return t.displayName=n,t.WrappedComponent=e,Vo()(t,e)}var ia=i.a.useContext;function oa(){return ia(Wo)}function aa(){return ia(Go).location}var sa=n(168),la=(d=new sa.I18N,i.a.createContext({theme:"system",setTheme:function(){}})),ca=i.a.createContext({themeValue:""});function ua(){return window.matchMedia("(prefers-color-scheme: dark)")}var ha=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).state={theme:e.props.theme,themeValue:e.getThemeValue(e.props.theme),setTheme:function(t){e.setState({theme:t})}},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this;"object"===("undefined"==typeof window?"undefined":se()(window))&&(this.mediaListener=function(t){var n;"system"===e.state.theme&&(n=t.matches?"dark":"light",e.setState({themeValue:n},(function(){return e.updateBodyClassName(n)})))},ua().addListener(this.mediaListener)),this.updateBodyClassName(this.state.themeValue)}},{key:"componentDidUpdate",value:function(e,t){t.theme!==this.state.theme&&(t=this.getThemeValue(this.state.theme),this.setState({themeValue:t}),this.updateBodyClassName(t)),e.theme!==this.props.theme&&(e=this.getThemeValue(this.props.theme),this.setState({themeValue:e}),this.updateBodyClassName(e))}},{key:"componentWillUnmount",value:function(){this.mediaListener&&ua().removeListener(this.mediaListener)}},{key:"render",value:function(){return i.a.createElement(la.Provider,{value:this.state},i.a.createElement(ca.Provider,{value:{themeValue:this.state.themeValue}},this.props.children))}},{key:"getThemeValue",value:function(e){return"system"===e?"object"===("undefined"==typeof window?"undefined":se()(window))&&ua().matches?"dark":"light":e}},{key:"updateBodyClassName",value:function(e){var t=document.body;t.classList.contains("yc-root")||t.classList.add("yc-root"),t.classList.toggle("yc-root_theme_light","light"===e),t.classList.toggle("yc-root_theme_dark","dark"===e)}}]),n}(i.a.Component);function da(e,t){return function(e,t){void 0===t&&(t={});var n=function(e){return e&&e.sensitive?"":"i"}(t),r=t.encode,i=void 0===r?function(e){return e}:r,o=void 0===(t=t.validate)||t,a=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",n)}));return function(t){for(var n="",r=0;r<e.length;r++){var s=e[r];if("string"!=typeof s){var l=t?t[s.name]:void 0,c="?"===s.modifier||"*"===s.modifier,u="*"===s.modifier||"+"===s.modifier;if(Array.isArray(l)){if(!u)throw new TypeError('Expected "'+s.name+'" to not repeat, but got an array');if(0===l.length){if(c)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var h=0;h<l.length;h++){var d=i(l[h],s);if(o&&!a[r].test(d))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but got "'+d+'"');n+=s.prefix+d+s.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!c)throw new TypeError('Expected "'+s.name+'" to be '+(u?"an array":"a string"))}else{if(d=i(String(l),s),o&&!a[r].test(d))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+d+'"');n+=s.prefix+d+s.suffix}}else n+=s}return n}}(function(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var i=1,o="";if("?"===e[s=n+1])throw new TypeError('Pattern cannot start with "?" at '+s);for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--i){s++;break}}else if("("===e[s]&&(i++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at "+s);o+=e[s++]}else o+=e[s++]+e[s++];if(i)throw new TypeError("Unbalanced pattern at "+n);if(!o)throw new TypeError("Missing pattern at "+n);t.push({type:"PATTERN",index:n,value:o}),n=s}else{for(var a="",s=n+1;s<e.length;){var l=e.charCodeAt(s);if(!(48<=l&&l<=57||65<=l&&l<=90||97<=l&&l<=122||95===l))break;a+=e[s++]}if(!a)throw new TypeError("Missing parameter name at "+n);t.push({type:"NAME",index:n,value:a}),n=s}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),r=void 0===(e=t.prefixes)?"./":e,i="[^"+function(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}(t.delimiter||"/#?")+"]+?",o=[],a=0,s=0,l="",c=function(e){if(s<n.length&&n[s].type===e)return n[s++].value},u=function(e){if(void 0!==(t=c(e)))return t;var t=(r=n[s]).type,r=r.index;throw new TypeError("Unexpected "+t+" at "+r+", expected "+e)},h=function(){for(var e,t="";e=c("CHAR")||c("ESCAPED_CHAR");)t+=e;return t};s<n.length;){var d,f=c("CHAR"),p=c("NAME"),m=c("PATTERN");p||m?(-1===r.indexOf(d=f||"")&&(l+=d,d=""),l&&(o.push(l),l=""),o.push({name:p||a++,prefix:d,suffix:"",pattern:m||i,modifier:c("MODIFIER")||""})):(p=f||c("ESCAPED_CHAR"))?l+=p:(l&&(o.push(l),l=""),c("OPEN")?(d=h(),m=c("NAME")||"",f=c("PATTERN")||"",p=h(),u("CLOSE"),o.push({name:m||(f?a++:""),pattern:m&&!f?i:f,prefix:d,suffix:p,modifier:c("MODIFIER")||""})):u("END"))}return o}(e,t),t)}ha.defaultProps={theme:"system"};t=n(323);var fa=n.n(t);function pa(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function va(e,t,n){var r=2<arguments.length&&void 0!==n?n:{},i=r;n=Boolean(r.backend);return Do&&!n&&Ro&&(i=ma(ma({},r),{},{backend:Do})),r=Boolean(r.clusterName),Lo&&!r&&Ro&&(i=ma(ma({},i),{},{clusterName:Lo})),i=fa()(i)?"":"?".concat(b.a.stringify(i,{encode:!1})),"".concat(da(e)(t)).concat(i)}var ga="/cluster/:activeTab?",ya="/tenant/:page",ba="/node/:id/:activeTab?",Ca="/pdisk/:id",wa="/group/:id",Ea="/vdisk",Sa="/pool/:poolName",Oa="/tablet/:id",xa="/tabletsFilters",_a="/clusters",ka="/clusters/:name";function Ta(e,t){return"function"==typeof e?e(t):e}function Na(e,t){return"string"==typeof e?un(e,null,null,t):e}function Pa(e){return e}i.a.Component,i.a.Component;var Ia=i.a.forwardRef,Ra=(Ia=void 0===Ia?Pa:Ia)((function(e,t){var n=e.innerRef,r=e.navigate,o=e.onClick,a=(e=Object(Uo.a)(e,["innerRef","navigate","onClick"])).target;return(e=Object(nn.a)({},e,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}var t;e.defaultPrevented||0!==e.button||a&&"_self"!==a||(t=e).metaKey||t.altKey||t.ctrlKey||t.shiftKey||(e.preventDefault(),r())}})).ref=Pa!==Ia&&t||n,i.a.createElement("a",e)}));function ja(e){return e}var Da=Ia((function(e,t){var n=e.component,r=void 0===n?Ra:n,o=e.replace,a=e.to,s=e.innerRef,l=Object(Uo.a)(e,["component","replace","to","innerRef"]);return i.a.createElement(Go.Consumer,null,(function(e){e||ln(!1);var n=e.history,c=(c=Na(Ta(a,e.location),e.location))?n.createHref(c):"";c=Object(nn.a)({},l,{href:c,navigate:function(){var t=Ta(a,e.location),r=cn(e.location)===cn(Na(t));(o||r?n.replace:n.push)(t)}});return Pa!==Ia?c.ref=t||s:c.innerRef=s,i.a.createElement(r,c)}))})),Aa=i.a.forwardRef;(Aa=void 0===Aa?ja:Aa)((function(e,t){var n,r=void 0===(n=e["aria-current"])?"page":n,o=void 0===(n=e.activeClassName)?"active":n,a=e.activeStyle,s=e.className,l=e.exact,c=e.isActive,u=e.location,h=e.sensitive,d=e.strict,f=e.style,p=e.to,m=e.innerRef,v=Object(Uo.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.a.createElement(Go.Consumer,null,(function(e){e||ln(!1);var n=u||e.location,g=Na(Ta(p,n),n),y=(e=(y=g.pathname)&&y.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"))?ea(n.pathname,{path:e,exact:l,sensitive:h,strict:d}):null;e=!!(c?c(y,n):y),n="function"==typeof s?s(e):s,y="function"==typeof f?f(e):f;return e&&(n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(n,o),y=Object(nn.a)({},y,a)),g=Object(nn.a)({"aria-current":e&&r||null,className:n,style:y,to:g},v),ja!==Aa?g.ref=t||m:g.innerRef=m,i.a.createElement(Da,g)}))}));Y=n(215);var La=n.n(Y),Ma=((c=document.createElement("a").style).cssText="position:sticky; position:-webkit-sticky;",-1!==c.position.indexOf("sticky")),Fa="moving",Ba=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Ha(e,t,n,r){var i=e.name,o=e.defaultOrder,a=void 0===(s=t.sortOrder)?{}:s,s=(e=void 0===(l=t.sortColumns)?[]:l,2<arguments.length&&void 0!==n&&n),l=(t=3<arguments.length&&void 0!==r?r:{}).defaultOrder;n=t.disableSortReset,r=o||l,t={sortOrder:{},sortColumns:[]};return i?(o=e,r=(l=a[i])?l===r||n?1===l?-1:1:void 0:r,s?(a[t=i],t=Ba(a,["symbol"===se()(t)?t:t+""]),r?(t[i]=r,new Set(e).has(i)||(o=[].concat(J()(e),[i]))):o=e.filter((function(e){return e!==i})),{sortOrder:t,sortColumns:o}):r?{sortOrder:p()({},i,r),sortColumns:[i]}:t):s?{sortOrder:a,sortColumns:e}:t}function za(e,t,n){var r=2<arguments.length&&void 0!==n?n:{},i=t,o=e.sortAscending;return"function"==typeof o?function(e,t){return i*o(e,t)}:function(t,n){return t=e._getSortValue(t.row),n=e._getSortValue(n.row),null==t&&null!=n?r.nullBeforeNumbers?-i:1:null==n&&null!=t?r.nullBeforeNumbers?i:-1:t<n?Number(-i):n<t?Number(i):0}}function Ua(e,t,n,r){var i=n.sortOrder,o=(n=n.sortColumns,{});t.forEach((function(e){i[e.name]?o[e.name]=za(e,i[e.name],r):e.group&&e.autogroup&&(o[e.name]=za(e,1,r))}));var a,s,l=t.filter((function(e){return e.group})),c=0<l.length,u=[].concat(J()(l.map((function(e){return o[e.name]})).filter(Boolean)),J()(n.map((function(e){return o[e]})).filter(Boolean)));e=e.map((function(e,t){return c?{row:e,index:t,span:{}}:{row:e,index:t}}));return u.length&&!r.externalSort&&e.sort((function(e,t){var n=0;return u.some((function(r){return n=r(e,t),Boolean(n)})),n||e.index-t.index})),1<e.length&&c&&(a=[],s=[],e.forEach((function(e){l.every((function(t,n){var r=t._getValue(e.row);return a[n]&&r===s[n]?(a[n].span[t.name]+=1,!(e.span[t.name]=0)):(l.slice(n).forEach((function(t,r){a[n+r]=e,s[n+r]=t._getValue(e.row),e.span[t.name]=1})),!1)}))}))),e}function Va(e,t){return(Array.isArray(e)?e:[e]).reduce((function(e,n){return Ha({name:n.columnId,defaultOrder:n.order},e,!0,t)}),{sortOrder:{},sortColumns:[]})}n(778);var Wa={getSrcElement:function(){return null},onHeightChange:function(){}},Ga=function(){function e(t){var n=this;W()(this,e),this.prevHeight=0,this.params=Wa,this.checkAndUpdateHeight=function(){n.node?requestAnimationFrame((function(){var e=n.node;e?n.updateHeight(e.offsetHeight):n.updateHeight(0)})):n.updateHeight(0)},this.params=Object.assign({},t)}return q()(e,[{key:"destroy",value:function(){this.updateHeight(0),this.params=Wa}},{key:"node",get:function(){return this.params.getSrcElement()}},{key:"updateHeight",value:function(e){this.prevHeight!==e&&(this.prevHeight=e,this.params.onHeightChange(e))}}]),e}();function qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}var Ya=ie()("data-table"),Xa=r.createElement("svg",{className:Ya("icon"),viewBox:"0 0 10 6",width:"10",height:"6"},r.createElement("path",{fill:"currentColor",d:"M0 5h10l-5 -5z"})),Ka=r.createElement("svg",{className:Ya("icon"),viewBox:"0 0 10 6",width:"10",height:"6"},r.createElement("path",{fill:"currentColor",d:"M0 1h10l-5 5z"})),Za={ICON_ASC:Xa,ICON_DESC:Ka};function Qa(e){var t=e.sortOrder,n=e.sortIndex,i=e.sortable;e=e.defaultOrder;return i?r.createElement("span",{className:Ya("sort-icon",{shadow:!t}),"data-index":n},function(e){switch(e){case 1:return Za.ICON_ASC;case-1:return Za.ICON_DESC;default:return!1}}(t||e)):null}var $a=function(e){X()(n,e);var t=qa(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).onClick=function(t){var n,r;e.props.onClick&&(n=(r=e.props).row,r=r.index,e.props.onClick(n,r,t))},e}return q()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.columns,i=e.row,o=e.index,a=e.odd,s=e.footer,l=e.span,c=e.headerData;return r.createElement("tr",{className:Ya("row",{odd:a,footer:s,"header-data":c},t),onClick:this.onClick},n.map((function(e,t){var n;if(l){if(0===l[e.name])return null;n=l[e.name]}var a=e._getValue(i);return r.createElement("td",{key:t,className:e._className,title:e._getTitle(i),style:e.customStyle({row:i,index:o,name:e.name,header:!1,footer:s,headerData:c}),rowSpan:n,onClick:e._getOnClick({row:i,index:o,footer:s,headerData:c})},e._renderValue({value:a,row:i,index:o,footer:s,headerData:c}))})))}}]),n}(r.PureComponent);$a.defaultProps={footer:!1};var Ja=function(e){X()(n,e);var t=qa(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments))._dataRowsRef=null,e.renderedColumns=[],e.dataRowsRef=function(t){var n;(e._dataRowsRef=t)&&null!==(n=e.dataRowsHeightObserver)&&void 0!==n&&n.checkAndUpdateHeight()},e._getColumnRef=function(t){return function(n){e.renderedColumns[t]=n}},e.renderHeadCell=function(t){var n=t.column,i=t.rowSpan,o=t.colSpan,a=void 0!==(u=n.sortable)&&u,s=void 0===(h=n.header)?n.name:h,l=n.className,c=n.index,u=(t=n.columnIndex,n.align),h=void 0===(h=n.headerTitle)?"string"==typeof s&&s||void 0:h;return r.createElement("th",{ref:n.dataColumn?e._getColumnRef(t):null,className:Ya("th",{sortable:a,align:u},l),key:n.name,title:h,"data-index":c,colSpan:o,rowSpan:i,style:n.customStyle&&n.customStyle({header:!0,name:n.name}),onClick:e._getOnSortClick(n)},r.createElement("div",{className:Ya("head-cell")},s,r.createElement(Qa,Object.assign({},n))))},e.renderHeadLevel=function(t,n){return r.createElement("tr",{key:n,className:Ya("head-row")},t.map(e.renderHeadCell))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this;this._calculateColumnsWidth(),"function"==typeof this.props.onDataRowsHeightChange&&(this.dataRowsHeightObserver=new Ga({getSrcElement:function(){return e._dataRowsRef},onHeightChange:function(t){"function"==typeof e.props.onDataRowsHeightChange&&e.props.onDataRowsHeightChange(t)}}))}},{key:"componentDidUpdate",value:function(){var e;this._calculateColumnsWidth(),null!==(e=this.dataRowsHeightObserver)&&void 0!==e&&e.checkAndUpdateHeight()}},{key:"componentWillUnmount",value:function(){var e;null!==(e=this.dataRowsHeightObserver)&&void 0!==e&&e.destroy()}},{key:"_calculateColumnsWidth",value:function(){var e=this,t=this.props.onColumnsUpdated;"function"==typeof t&&requestAnimationFrame((function(){var n=e.renderedColumns.map((function(e){return e&&e.getBoundingClientRect().width}));t(n)}))}},{key:"onSort",value:function(e,t){var n;"function"==typeof(n=this.props.onSort)&&n(e,t)}},{key:"_getOnSortClick",value:function(e){var t=this,n=e.sortable;return"__index__"===e.name?function(){t.onSort()}:void 0!==n&&n?function(n){t.onSort(e,n.ctrlKey||n.metaKey)}:void 0}},{key:"render",value:function(){var e=(n=this.props).headColumns,t=n.dataColumns,n=n.renderedDataRows;return this.renderedColumns.length=t.length,r.createElement(r.Fragment,null,r.createElement("thead",{className:Ya("head")},e.map(this.renderHeadLevel)),void 0===n?null:r.createElement("tbody",{ref:this.dataRowsRef},n))}}]),n}(r.Component),es=function(e){X()(n,e);var t=qa(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).state={style:{top:n.defaultProps.top}},e._nodeRef=function(t){e._node=t},e.onDataRowsHeightChange=function(t){e.props.onDataRowsHeightChange(t+1)},e}return q()(n,[{key:"setScrollLeft",value:function(e){var t=this;requestAnimationFrame((function(){t._node&&(t._node.scrollLeft=e)}))}},{key:"setRightPosition",value:function(e){this.state.right===e||this.props.top||this.props.mode===Fa||this.setState({right:e})}},{key:"renderHeader",value:function(e){var t=void 0===(n=this.state.widths)?[]:n,n=t.reduce((function(e,t){return e+t}),0);return r.createElement("div",{className:Ya("table-wrapper",{sticky:!0})},r.createElement("table",{className:Ya("table",{sticky:!0}),style:{width:n||"auto"}},r.createElement("colgroup",null,t.map((function(e,t){return r.createElement("col",{key:t,style:{width:e}})}))),r.createElement(Ja,Object.assign({},e,{onDataRowsHeightChange:this.onDataRowsHeightChange}))))}},{key:"updateWidths",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this.state.widths,n=void 0===t?[]:t;e.some((function(e,t){return e!==n[t]}))&&this.setState({widths:e})}},{key:"render",value:function(){var e=(t=this.props).mode,t=(t.top,function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}(t,["mode","top"]));if(e===Fa){var n=this.state.style;return r.createElement("div",{className:Ya("sticky",{moving:!0,head:!0}),style:n},this.renderHeader(t))}return n=void 0===(n=(e=this.state).widths)?[]:n,e=void 0===(e=e.right)?0:e,n=n.reduce((function(e,t){return e+t}),0),r.createElement("div",{ref:this._nodeRef,className:Ya("sticky",{fixed:!0,head:!0}),style:{right:e,display:n?void 0:"none"}},this.renderHeader(t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.top===(null===(t=t.style)||void 0===t?void 0:t.top)||void 0===e.top?null:{style:{top:e.top}}}}]),n}(r.Component);es.defaultProps={top:0};var ts=function(e){X()(n,e);var t=qa(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).state={style:{bottom:0}},e._nodeFixed=null,e._nodeMoving=null,e._nodeFixedRef=function(t){e._nodeFixed=t},e._nodeMovingRef=function(t){var n;(e._nodeMoving=t)&&null!==(n=e.heightObserver)&&void 0!==n&&n.checkAndUpdateHeight()},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this;this.heightObserver=new Ga({getSrcElement:function(){return e._nodeMoving},onHeightChange:this.props.onMovingHeightChange})}},{key:"componentWillUnmount",value:function(){var e;null!==(e=this.heightObserver)&&void 0!==e&&e.destroy()}},{key:"componentDidUpdate",value:function(){var e;null!==(e=this.heightObserver)&&void 0!==e&&e.checkAndUpdateHeight()}},{key:"setScrollLeft",value:function(e){var t=this;requestAnimationFrame((function(){t._nodeFixed&&(t._nodeFixed.scrollLeft=e)}))}},{key:"setRightPosition",value:function(e){this.state.right!==e&&!this.props.bottom&&this._nodeFixed&&this.setState({right:e})}},{key:"renderFooter",value:function(e){var t=void 0===(n=this.state.widths)?[]:n,n=t.reduce((function(e,t){return e+t}),0);return r.createElement("div",{className:Ya("table-wrapper",{sticky:!0})},r.createElement("table",{className:Ya("table",{sticky:!0}),style:{width:n||"auto"}},r.createElement("colgroup",null,t.map((function(e,t){return r.createElement("col",{key:t,style:{width:e}})}))),r.createElement("tbody",null,e)))}},{key:"updateWidths",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this.state.widths,n=void 0===t?[]:t;e.some((function(e,t){return e!==n[t]}))&&this.setState({widths:e})}},{key:"render",value:function(){if(!this.props.renderedRows)return null;var e=(t=this.props).mode,t=t.renderedRows;if(e===Fa){var n=this.state.style;return r.createElement("div",{ref:this._nodeMovingRef,className:Ya("sticky",{footer:!0,moving:!0}),style:n},this.renderFooter(t))}return n=void 0===(n=(e=this.state).widths)?[]:n,e=void 0===(e=e.right)?0:e,n=n.reduce((function(e,t){return e+t}),0),r.createElement("div",{ref:this._nodeFixedRef,className:Ya("sticky",{footer:!0,fixed:!0}),style:{right:e,display:n?void 0:"none"}},this.renderFooter(t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.bottom===(null===(t=t.style)||void 0===t?void 0:t.bottom)||void 0===e.bottom?null:{style:{bottom:e.bottom}}}}]),n}(r.PureComponent);ts.defaultProps={bottom:0};var ns=function(e){X()(n,e);var t=qa(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).state={},e._refBody=function(t){e._body=t},e._refBox=function(t){e._box=t},e._refHead=function(t){e._head=t},e._refStickyHead=function(t){e._stickyHead=t},e._refStickyFooter=function(t){e._stickyFooter=t},e._onBoxScroll=function(){e._updateBoxConstraints()},e._onColumnsUpdated=function(t){e._stickyHead&&e._stickyHead.updateWidths(t),e._stickyFooter&&e._stickyFooter.updateWidths(t)},e.onMovingHeaderDataRowsHeightChange=function(t){var n;-t!==(null===(n=e.state.movingHeaderStyle)||void 0===n?void 0:n.marginTop)&&e.setState({movingHeaderStyle:{marginTop:-t}})},e.onMovingFooterHeightChange=function(t){var n;-t!==(null===(n=e.state.movingFooterStyle)||void 0===n?void 0:n.marginBottom)&&e.setState({movingFooterStyle:{marginBottom:-t}})},e.renderRow=function(t){var n=(i=e.props).data,r=i.onRowClick,i=(o=n[t]).row,o=(n=o.index,o.span);return e.renderRowImpl(i,n,{onRowClick:r,odd:t%2==0,span:o})},e.renderFooterRow=function(t,n){return e.renderRowImpl(t,n,{footer:!0})},e.renderHeaderRow=function(t,n){return e.renderRowImpl(t,n,{headerData:!0})},e.renderRowImpl=function(t,n){var i=(u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).onRowClick,o=u.odd,a=u.span,s=u.footer,l=u.headerData,c=(h=e.props).columns.dataColumns,u=h.rowClassName,h=h.rowKey;u="function"==typeof u?u(t,n,s,l):"";return r.createElement($a,{key:h(t,n),className:u,columns:c,row:t,index:n,span:a,odd:o,onClick:i,footer:s,headerData:l})},e.renderTable=function(t,n){var i=(l=e.props).footerData,o=l.columns.dataColumns,a=l.settings.stickyHead,s=(c=e.state).movingHeaderStyle,l=c.movingFooterStyle,c=e.getStickyFooterMode();return r.createElement("div",{className:Ya("table-wrapper"),style:c===os.MOVING?l:void 0},r.createElement("table",{className:Ya("table"),style:a===os.MOVING?s:void 0},r.createElement("colgroup",null,o.map((function(e,t){return e=e.width,r.createElement("col",{key:t,width:e})}))),e.renderHead(),r.createElement("tbody",{ref:n},t.length?t:e._getEmptyRow()),i&&r.createElement("tfoot",{className:Ya("foot",{"has-sticky-footer":c})},i.map(e.renderFooterRow))))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this,t=(n=this.props.settings).stickyHead,n=n.syncHeadOnResize;this._updateBoxConstraints(),t&&n&&!this._onWindowResize&&(this._onWindowResize=function(){e.syncHeadWidths()},window.addEventListener("resize",this._onWindowResize))}},{key:"componentDidUpdate",value:function(){this._updateBoxConstraints()}},{key:"componentWillUnmount",value:function(){this._onWindowResize&&(window.removeEventListener("resize",this._onWindowResize),delete this._onWindowResize)}},{key:"_updateBoxConstraints",value:function(){var e=this._stickyHead||this._stickyFooter;this._box&&e&&(e=this._box.offsetWidth-this._box.clientWidth,this._stickyHead&&(this._stickyHead.setRightPosition(e),this._stickyHead.setScrollLeft(this._box.scrollLeft)),this._stickyFooter&&(this._stickyFooter.setRightPosition(e),this._stickyFooter.setScrollLeft(this._box.scrollLeft)))}},{key:"syncHeadWidths",value:function(){this._head&&this._head._calculateColumnsWidth()}},{key:"_getEmptyRow",value:function(){var e,t=(e=this.props).columns.dataColumns,n=e.emptyDataMessage;return"function"==typeof(e=e.renderEmptyRow)?e(t):r.createElement("tr",{className:Ya("row")},r.createElement("td",{className:Ya("td",Ya("no-data")),colSpan:t.length},n))}},{key:"renderHead",value:function(){var e=(i=this.props).columns,t=i.onSort,n=this.props.settings.displayIndices,i=this.renderHeaderRows();return r.createElement(Ja,Object.assign({ref:this._refHead},e,{displayIndices:Boolean(n),onSort:t,onColumnsUpdated:this._onColumnsUpdated,renderedDataRows:i}))}},{key:"renderStickyHead",value:function(){var e=(o=this.props).columns,t=o.onSort,n=(a=this.props.settings).displayIndices,i=a.stickyTop,o=a.stickyHead,a="auto"===i&&this._body&&this._body.parentNode?this._body.parentNode.offsetTop:Number(i)||0;i=this.renderHeaderRows();return r.createElement(es,Object.assign({mode:o,top:a,ref:this._refStickyHead},e,{displayIndices:n,onSort:t,renderedDataRows:i,onDataRowsHeightChange:this.onMovingHeaderDataRowsHeightChange}))}},{key:"renderStickyFooter",value:function(){var e=this.props.columns,t=this.props.settings.stickyBottom,n=Number(t)||0;"auto"===t&&this._body&&this._body.parentNode&&(n=(i=this._body.parentNode).offsetTop+i.offsetHeight);var i=this.renderFooterRows();return r.createElement(ts,{ref:this._refStickyFooter,mode:this.getStickyFooterMode(),bottom:n,dataColumns:e.dataColumns,renderedRows:i,onMovingHeightChange:this.onMovingFooterHeightChange})}},{key:"renderTableDynamic",value:function(){var e=(c=this.props).data,t=(u=void 0===(u=c.settings)?{}:u).dynamicInnerRef,n=u.dynamicRenderType,i=u.dynamicRenderUseStaticSize,o=u.dynamicRenderThreshold,a=u.dynamicRenderMinSize,s=u.dynamicRenderScrollParentGetter,l=u.dynamicRenderScrollParentViewportSizeGetter,c=u.dynamicItemSizeEstimator,u=u.dynamicItemSizeGetter;return r.createElement(La.a,Object.assign({ref:t,type:void 0===n?"uniform":n,useStaticSize:i,threshold:o,minSize:a,itemSizeEstimator:c,itemSizeGetter:u,length:e.length,itemRenderer:this.renderRow,itemsRenderer:this.renderTable,scrollParentGetter:s},{scrollParentViewportSizeGetter:l}))}},{key:"renderTableSimple",value:function(){var e=this,t=this.props.data.map((function(t,n){return e.renderRow(n)}));return this.renderTable(t,null)}},{key:"renderHeaderRows",value:function(){var e=this.props.headerData;return e&&e.map(this.renderHeaderRow)}},{key:"renderFooterRows",value:function(){var e=this.props.footerData;return null==e?void 0:e.map(this.renderFooterRow)}},{key:"getStickyFooterMode",value:function(){var e=this.props.footerData;return!(null==e||!e.length)&&this.props.settings.stickyFooter}},{key:"render",value:function(){var e=this.props.className,t=(i=this.props.settings).stickyHead,n=i.dynamicRender,i=this.getStickyFooterMode();return r.createElement("div",{className:e,ref:this._refBody},t&&this.renderStickyHead(),r.createElement("div",{ref:this._refBox,className:Ya("box",{"sticky-head":t,"sticky-footer":i}),onScroll:this._onBoxScroll},n?this.renderTableDynamic():this.renderTableSimple()),i&&this.renderStickyFooter())}}]),n}(r.PureComponent),rs=r.memo((function(e){var t=e.column,n=e.value,i=e.row,o=e.index,a=e.footer;e=e.headerData;return r.createElement(r.Fragment,null,t.render({value:n,row:i,index:o,footer:a,headerData:e}))}));var is=function(e){X()(n,e);var t=qa(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).state=Object.assign({settings:{}},Va(e.props.initialSortOrder,e.props.settings)),e._tableRef=function(t){e.table=t},e.renderMemoizedCell=function(e){var t=e.column,n=e.value,i=e.row,o=e.index,a=e.footer;e=e.headerData;return r.createElement(rs,Object.assign({},{column:t,value:n,row:i,index:o,footer:a,headerData:e}))},e.getColumn=function(t,n){var r=(b=e.state.settings).defaultOrder,i=void 0===(p=(g=e.state).sortOrder)?{}:p,o=g.sortColumns,a=g.indexColumn,s=Number(Boolean(a)),l=e.isSortEnabled(),c=t.name,u=void 0===(y=t.accessor)?t.name:y,h=t.align,d=void 0===(C=t.sortable)?b.sortable:C,f=t.group,p=void 0===(w=t.autogroup)||w,m=t.sortAccessor,v=t.onClick,g=Ya("td",{align:h},t.className),y=(a="function"==typeof u?function(e){return u(e)}:function(e){return Object.prototype.hasOwnProperty.call(e,u)?e[u]:void 0},"function"==typeof t.title?function(e){return t.title(e)}:function(){return"string"==typeof t.title&&t.title||void 0}),b="function"==typeof m?function(e){return m(e)}:a,C="function"==typeof t.render?function(n){var r=n.value,i=n.row,o=n.index,a=n.footer;n=n.headerData;return e.renderMemoizedCell({column:t,value:r,row:i,index:o,footer:a,headerData:n})}:function(e){return e.value},w="function"==typeof t.customStyle?t.customStyle:function(){};h="function"==typeof v?function(e){return function(){return v(e,t)}}:function(){};return Object.assign(Object.assign({index:n-s,columnIndex:n,dataColumn:!0,defaultOrder:r},t),{sortable:d&&l,_className:g,_getValue:a,_getTitle:y,_getSortValue:b,_renderValue:C,_getOnClick:h,customStyle:w,group:f,autogroup:p,sortOrder:i[c]||void 0,sortIndex:1<o.length?o.indexOf(c)+1:void 0})},e.isSortEnabled=function(){var t=e.props.data;return Array.isArray(t)&&1<t.length},e.onSort=function(t,n){var r,i;t?(r=(n=Ha(t,e.state,n,e.props.settings)).sortOrder,n=n.sortColumns,e.setState({sortOrder:r,sortColumns:n}),"function"==typeof(n=e.props.onSort)&&n((i=r,Object.keys(i).map((function(e){return{columnId:e,order:i[e]}}))))):(e.setState({sortOrder:{},sortColumns:[]}),"function"==typeof(r=e.props.onSort)&&r([]))},e}return q()(n,[{key:"getComplexColumns",value:function(e){var t=this,n=[],r=[],i=[],o=this.state.indexColumn;return function e(o,a){n[a]||(n[a]=[]);var s=n[a];return o.reduce((function(n,o){var l=1,c=-1,u=o;return Array.isArray(o.sub)?l=e(o.sub,a+1):(o=t.getColumn(o,r.length),r.push(o),c=a,u=o),c={column:u,itemLevel:c,colSpan:l,rowSpan:0},i.push(c),s.push(c),l+n}),0)}(o?[o].concat(J()(e)):e,0),i.forEach((function(e){e.rowSpan=e.itemLevel<0?1:n.length-e.itemLevel})),{headColumns:n,dataColumns:r}}},{key:"resize",value:function(){this.table&&this.table.syncHeadWidths()}},{key:"render",value:function(){var e=(y=this.props).headerData,t=y.data,i=y.footerData,o=y.columns,a=y.startIndex,s=y.emptyDataMessage,l=y.rowClassName,c=y.rowKey,u=y.onRowClick,h=y.theme,d=y.renderEmptyRow,f=y.nullBeforeNumbers,p=(b=this.state).settings,m=b.sortOrder,v=b.sortColumns,g=p.highlightRows,y=p.stripedRows,b=p.headerMod;h=Ya({"highlight-rows":void 0!==g&&g,"striped-rows":void 0!==y&&y,header:void 0!==b&&b,theme:h}),o=this.getComplexColumns(o);return p.dynamicRender&&o.dataColumns.some((function(e){return e.group}))&&console.warn("Simultaneously used grouping cells and dynamic render. The table will render unpredictable."),r.createElement(ns,{ref:this._tableRef,className:h,settings:p,startIndex:a,columns:o,emptyDataMessage:s,renderEmptyRow:d,rowClassName:l,rowKey:c||n.defaultProps.rowKey,onRowClick:u,headerData:e,data:Ua(t,o.dataColumns,{sortOrder:m,sortColumns:v},{nullBeforeNumbers:f,externalSort:null==p?void 0:p.externalSort}),footerData:i,onSort:this.onSort})}}],[{key:"normalizeStickyHead",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return e!==Fa||Ma?e:(console.warn("Your browser does not support position: sticky, moving sticky headers will be disabled."),!1)}},{key:"calculateSettings",value:function(e){return Object.assign(Object.assign(Object.assign({},n.defaultProps.settings),e),{stickyHead:n.normalizeStickyHead(e.stickyHead),stickyFooter:n.normalizeStickyHead(e.stickyFooter)})}},{key:"getIndexColumn",value:function(e){var t=e.startIndex,n=e.data,r=e.visibleRowIndex;n=t+n.length+1;return{name:"__index__",header:"#",className:Ya("index"),render:function(e){var n=e.row,i=e.index,o=e.footer;return e.headerData?null!==(e=n.headerIndex)&&void 0!==e?e:t+i:o?null!==(o=n.footerIndex)&&void 0!==o?o:t+i:"function"==typeof r?r(n,i):t+i},sortable:!1,width:20+10*Math.ceil(Math.log10(n))}}},{key:"getDerivedStateFromProps",value:function(e){var t=n.calculateSettings(e.settings);return Object.assign({settings:t,indexColumn:Boolean(t.displayIndices)&&n.getIndexColumn(e)},e.sortOrder?Object.assign({},Va(e.sortOrder,e.settings)):void 0)}}]),n}(r.Component);is.defaultProps={startIndex:0,emptyDataMessage:"No data",settings:{displayIndices:!0,dynamicRenderMinSize:1,stickyHead:!1,stickyFooter:!1,sortable:!0,externalSort:!1,defaultOrder:1},rowKey:function(e,t){return Object.prototype.hasOwnProperty.call(e,"id")?e.id:t},initialSortOrder:{},initialSortColumns:[],theme:"internal"},is.getSortedData=Ua;var os=function(e){X()(n,e);var t=qa(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).state={},e._tableRef=function(t){e.table=t},e}return q()(n,[{key:"componentDidCatch",value:function(e){console.error(e),this.setState({error:e});var t=this.props.onError;"function"==typeof t&&t(e)}},{key:"resize",value:function(){this.table&&this.table.resize()}},{key:"render",value:function(){var e=this.state.error;return this.props.theme||console.warn("Starting from dt100@1.4.0 'theme' prop should be passed into the component"),e?r.createElement("pre",{className:Ya("error")},"DT100 got stuck in invalid state. Please tell developers about it.","\n\n",e.stack&&String(e.stack)||String(e)):r.createElement(is,Object.assign({ref:this._tableRef},this.props))}}],[{key:"setCustomIcons",value:function(e){Za.ICON_ASC=e.ICON_ASC||Xa,Za.ICON_DESC=e.ICON_DESC||Ka}}]),n}(r.PureComponent);os.displayName="DT100",os.FIXED="fixed",os.MOVING=Fa,os.ASCENDING=1,os.DESCENDING=-1,os.LEFT="left",os.CENTER="center",os.RIGHT="right";var as=os,ss=(Z=n(97),n.n(Z));function ls(e){var t=void 0===(t=e.container)?document.body:t;e=e.children;return a.a.createPortal(e,t)}var cs=new(function(){function e(){var t=this;W()(this,e),this.stack=[],this.mouseDownTarget=null,this.handleDocumentKeyDown=function(e){var n,r;"Escape"===e.code&&((n=t.getTopLayer()).disableEscapeKeyDown||(null!==(r=n.onEscapeKeyDown)&&void 0!==r&&r.call(n,e),null!==(r=n.onClose)&&void 0!==r&&r.call(n,e,"escapeKeyDown"))),"Enter"!==e.code||null!==(n=(r=t.getTopLayer()).onEnterKeyDown)&&void 0!==n&&n.call(r,e)},this.handleDocumentClick=function(e){var n,r=t.getTopLayer();!r.disableOutsideClick&&t.isOutsideClick(r,e)&&(null!==(n=r.onOutsideClick)&&void 0!==n&&n.call(r,e),null!==(n=r.onClose)&&void 0!==n&&n.call(r,e,"outsideClick"))},this.handleDocumentMouseDown=function(e){t.mouseDownTarget=e.target}}return q()(e,[{key:"add",value:function(e){this.stack.push(e),1===this.stack.length&&this.addListeners()}},{key:"remove",value:function(e){e=this.stack.indexOf(e),this.stack.splice(e,1),0===this.stack.length&&this.removeListeners()}},{key:"addListeners",value:function(){document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick,!0),document.addEventListener("mousedown",this.handleDocumentMouseDown,!0)}},{key:"removeListeners",value:function(){document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick,!0),document.removeEventListener("mousedown",this.handleDocumentMouseDown,!0)}},{key:"getTopLayer",value:function(){return this.stack[this.stack.length-1]}},{key:"isOutsideClick",value:function(e,t){var n=this,r=(e=e.contentRefs||[],t.target);return 0<e.length&&!e.some((function(e){var t,i;return(null===(t=null===(i=null==e?void 0:e.current)||void 0===i?void 0:i.contains)||void 0===t?void 0:t.call(i,r))||(null===(e=null===(i=null==e?void 0:e.current)||void 0===i?void 0:i.contains)||void 0===e?void 0:e.call(i,n.mouseDownTarget))}))}}]),e}());function us(e){var t=e.open,n=e.disableEscapeKeyDown,r=e.disableOutsideClick,o=e.onEscapeKeyDown,a=e.onEnterKeyDown,s=e.onOutsideClick,l=e.onClose,c=e.contentRefs,u=void 0===(e=e.enabled)||e,h=i.a.useRef({disableEscapeKeyDown:n,disableOutsideClick:r,onEscapeKeyDown:o,onEnterKeyDown:a,onOutsideClick:s,onClose:l,contentRefs:c});i.a.useEffect((function(){Object.assign(h.current,{disableEscapeKeyDown:n,disableOutsideClick:r,onEscapeKeyDown:o,onEnterKeyDown:a,onOutsideClick:s,onClose:l,contentRefs:c,enabled:u})}),[n,r,o,a,s,l,c,u]),i.a.useEffect((function(){if(t&&u){var e=h.current;return cs.add(e),function(){cs.remove(e)}}}),[t,u])}function hs(e){return null==e?window:"[object Window]"===e.toString()?e:(e=e.ownerDocument)&&e.defaultView||window}function ds(e){return e instanceof hs(e).Element||e instanceof Element}function fs(e){return e instanceof hs(e).HTMLElement||e instanceof HTMLElement}function ps(e){return"undefined"!=typeof ShadowRoot&&(e instanceof hs(e).ShadowRoot||e instanceof ShadowRoot)}var ms=Math.max,vs=Math.min,gs=Math.round;function ys(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;return fs(e)&&t&&(t=e.offsetHeight,0<(e=e.offsetWidth)&&(r=gs(n.width)/e||1),0<t&&(i=gs(n.height)/t||1)),{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function bs(e){return{scrollLeft:(e=hs(e)).pageXOffset,scrollTop:e.pageYOffset}}function Cs(e){return e?(e.nodeName||"").toLowerCase():null}function ws(e){return((ds(e)?e.ownerDocument:e.document)||window.document).documentElement}function Es(e){return ys(ws(e)).left+bs(e).scrollLeft}function Ss(e){return hs(e).getComputedStyle(e)}function Os(e){var t=(n=Ss(e)).overflow,n=(e=n.overflowX,n.overflowY);return/auto|scroll|overlay|hidden/.test(t+n+e)}function xs(e,t,n){void 0===n&&(n=!1);var r=fs(t),i=fs(t)&&(i=(a=t).getBoundingClientRect(),o=gs(i.width)/a.offsetWidth||1,a=gs(i.height)/a.offsetHeight||1,1!==o||1!==a),o=ws(t),a=ys(e,i);e={scrollLeft:0,scrollTop:0},i={x:0,y:0};return!r&&n||("body"===Cs(t)&&!Os(o)||(e=(n=t)!==hs(n)&&fs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:bs(n)),fs(t)?((i=ys(t,!0)).x+=t.clientLeft,i.y+=t.clientTop):o&&(i.x=Es(o))),{x:a.left+e.scrollLeft-i.x,y:a.top+e.scrollTop-i.y,width:a.width,height:a.height}}function _s(e){var t=ys(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function ks(e){return"html"===Cs(e)?e:e.assignedSlot||e.parentNode||(ps(e)?e.host:null)||ws(e)}function Ts(e,t){void 0===t&&(t=[]);e=(r=function e(t){return 0<=["html","body","#document"].indexOf(Cs(t))?t.ownerDocument.body:fs(t)&&Os(t)?t:e(ks(t))}(e))===(null==(n=e.ownerDocument)?void 0:n.body);var n=hs(r),r=e?[n].concat(n.visualViewport||[],Os(r)?r:[]):r;t=t.concat(r);return e?t:t.concat(Ts(ks(r)))}function Ns(e){return fs(e)&&"fixed"!==Ss(e).position?e.offsetParent:null}function Ps(e){for(var t=hs(e),n=Ns(e);n&&0<=["table","td","th"].indexOf(Cs(n))&&"static"===Ss(n).position;)n=Ns(n);return(!n||"html"!==Cs(n)&&("body"!==Cs(n)||"static"!==Ss(n).position))&&(n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&fs(e)&&"fixed"===Ss(e).position)return null;for(var n=ks(e);fs(n)&&["html","body"].indexOf(Cs(n))<0;){var r=Ss(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e))||t}var Is="top",Rs="bottom",js="right",Ds="left",As="auto",Ls=[Is,Rs,js,Ds],Ms="start",Fs="end",Bs="viewport",Hs="popper",zs=Ls.reduce((function(e,t){return e.concat([t+"-"+Ms,t+"-"+Fs])}),[]),Us=[].concat(Ls,[As]).reduce((function(e,t){return e.concat([t,t+"-"+Ms,t+"-"+Fs])}),[]),Vs=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];var Ws={placement:"bottom",modifiers:[],strategy:"absolute"};function Gs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}var qs={passive:!0};function Ys(e){return e.split("-")[0]}function Xs(e){return e.split("-")[1]}function Ks(e){return 0<=["top","bottom"].indexOf(e)?"x":"y"}function Zs(e){var t,n=e.reference,r=e.element,i=(e=(i=e.placement)?Ys(i):null,i?Xs(i):null),o=n.x+n.width/2-r.width/2,a=n.y+n.height/2-r.height/2;switch(e){case Is:t={x:o,y:n.y-r.height};break;case Rs:t={x:o,y:n.y+n.height};break;case js:t={x:n.x+n.width,y:a};break;case Ds:t={x:n.x-r.width,y:a};break;default:t={x:n.x,y:n.y}}var s=e?Ks(e):null;if(null!=s){var l="y"===s?"height":"width";switch(i){case Ms:t[s]=t[s]-(n[l]/2-r[l]/2);break;case Fs:t[s]=t[s]+(n[l]/2-r[l]/2)}}return t}var Qs={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $s(e){var t=e.popper,n=e.popperRect,r=e.placement,i=e.variation,o=e.offsets,a=e.position,s=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,u=e.isFixed,h=!0===c?(p=(v=o).x,m=v.y,v=window.devicePixelRatio||1,{x:gs(p*v)/v||0,y:gs(m*v)/v||0}):"function"==typeof c?c(o):o,d=void 0===(g=h.x)?0:g,f=h.y,p=(e=void 0===f?0:f,o.hasOwnProperty("x")),m=o.hasOwnProperty("y"),v=Ds,g=(c=Is,window);l&&(h="clientHeight",f="clientWidth",(o=Ps(t))===hs(t)&&"static"!==Ss(o=ws(t)).position&&"absolute"===a&&(h="scrollHeight",f="scrollWidth"),r!==Is&&(r!==Ds&&r!==js||i!==Fs)||(c=Rs,e-=(u&&g.visualViewport?g.visualViewport.height:o[h])-n.height,e*=s?1:-1),r!==Ds&&(r!==Is&&r!==Rs||i!==Fs)||(v=js,d-=(u&&g.visualViewport?g.visualViewport.width:o[f])-n.width,d*=s?1:-1));l=Object.assign({position:a},l&&Qs);return s?Object.assign({},l,((s={})[c]=m?"0":"",s[v]=p?"0":"",s.transform=(g.devicePixelRatio||1)<=1?"translate("+d+"px, "+e+"px)":"translate3d("+d+"px, "+e+"px, 0)",s)):Object.assign({},l,((l={})[c]=m?e+"px":"",l[v]=p?d+"px":"",l.transform="",l))}var Js={left:"right",right:"left",bottom:"top",top:"bottom"};function el(e){return e.replace(/left|right|bottom|top/g,(function(e){return Js[e]}))}var tl={start:"end",end:"start"};function nl(e){return e.replace(/start|end/g,(function(e){return tl[e]}))}function rl(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&ps(n)){var r=t;do{if(r&&e.isSameNode(r))return!0}while(r=r.parentNode||r.host)}return!1}function il(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ol(e,t){return t===Bs?il((o=hs(i=e),a=ws(i),s=o.visualViewport,l=a.clientWidth,c=a.clientHeight,a=o=0,s&&(l=s.width,c=s.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=s.offsetLeft,a=s.offsetTop)),{width:l,height:c,x:o+Es(i),y:a})):ds(t)?((r=ys(n=t)).top=r.top+n.clientTop,r.left=r.left+n.clientLeft,r.bottom=r.top+n.clientHeight,r.right=r.left+n.clientWidth,r.width=n.clientWidth,r.height=n.clientHeight,r.x=r.left,r.y=r.top,r):il((i=ws(e),a=ws(i),t=bs(i),r=null==(n=i.ownerDocument)?void 0:n.body,e=ms(a.scrollWidth,a.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),n=ms(a.scrollHeight,a.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),i=-t.scrollLeft+Es(i),t=-t.scrollTop,"rtl"===Ss(r||a).direction&&(i+=ms(a.clientWidth,r?r.clientWidth:0)-e),{width:e,height:n,x:i,y:t}));var n,r,i,o,a,s,l,c}function al(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function sl(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function ll(e,t){var n,r=void 0===(a=(l=t=void 0===t?{}:t).placement)?e.placement:a,i=void 0===(o=l.boundary)?"clippingParents":o,o=(t=void 0===(s=l.rootBoundary)?Bs:s,void 0===(a=l.elementContext)?Hs:a),a=void 0!==(s=l.altBoundary)&&s,s=al("number"!=typeof(l=void 0===(s=l.padding)?0:s)?l:sl(l,Ls)),l=e.rects.popper,c=(a=function(e,t,n){var r,i,o,a;return t="clippingParents"===t?(i=Ts(ks(r=e)),o=0<=["absolute","fixed"].indexOf(Ss(r).position),ds(a=o&&fs(r)?Ps(r):r)?i.filter((function(e){return ds(e)&&rl(e,a)&&"body"!==Cs(e)&&(!o||"static"!==Ss(e).position)})):[]):[].concat(t),n=(t=[].concat(t,[n]))[0],(n=t.reduce((function(t,n){return n=ol(e,n),t.top=ms(n.top,t.top),t.right=vs(n.right,t.right),t.bottom=vs(n.bottom,t.bottom),t.left=ms(n.left,t.left),t}),ol(e,n))).width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}(ds(a=e.elements[a?o===Hs?"reference":Hs:o])?a:a.contextElement||ws(e.elements.popper),i,t),t=Zs({reference:i=ys(e.elements.reference),element:l,strategy:"absolute",placement:r}),t=il(Object.assign({},l,t)),i=o===Hs?t:i,{top:a.top-i.top+s.top,bottom:i.bottom-a.bottom+s.bottom,left:a.left-i.left+s.left,right:i.right-a.right+s.right});e=e.modifiersData.offset;return o===Hs&&e&&(n=e[r],Object.keys(c).forEach((function(e){var t=0<=[js,Rs].indexOf(e)?1:-1,r=0<=[Is,Rs].indexOf(e)?"y":"x";c[e]+=n[r]*t}))),c}function cl(e,t,n){return ms(e,vs(t,n))}function ul(e,t,n){return{top:e.top-t.height-(n=void 0===n?{x:0,y:0}:n).y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function hl(e){return[Is,js,Rs,Ds].some((function(t){return 0<=e[t]}))}function dl(e){return e.reduce((function(e,t){var n=t[0];t=t[1];return e[n]=t,e}),{})}var fl=function(e){var t=e=void 0===e?{}:e,n=void 0===(e=t.defaultModifiers)?[]:e,r=void 0===(t=t.defaultOptions)?Ws:t;return function(e,t,i){void 0===i&&(i=r);var o,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ws,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(i){i="function"==typeof i?i(s.options):i,h(),s.options=Object.assign({},r,s.options,i),s.scrollParents={reference:ds(e)?Ts(e):e.contextElement?Ts(e.contextElement):[],popper:Ts(t)};var o,a;i=[].concat(n,s.options.modifiers),a=i.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),i=Object.keys(a).map((function(e){return a[e]})),o=function(e){var t=new Map,n=new Set,r=[];return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||function e(i){n.add(i.name),[].concat(i.requires||[],i.requiresIfExists||[]).forEach((function(r){n.has(r)||(r=t.get(r))&&e(r)})),r.push(i)}(e)})),r}(i),i=Vs.reduce((function(e,t){return e.concat(o.filter((function(e){return e.phase===t})))}),[]);return s.orderedModifiers=i.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options;"function"==typeof(e=e.effect)&&(n=e({state:s,name:t,instance:u,options:void 0===n?{}:n}),l.push(n||function(){}))})),u.update()},forceUpdate:function(){if(!c){var e,t=(e=s.elements).reference;if(Gs(t,e=e.popper)){s.rects={reference:xs(t,Ps(e),"fixed"===s.options.strategy),popper:_s(e)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var n,r,i,o=0;o<s.orderedModifiers.length;o++)!0!==s.reset?(n=(i=s.orderedModifiers[o]).fn,r=i.options,i=i.name,"function"==typeof n&&(s=n({state:s,options:void 0===r?{}:r,name:i,instance:u})||s)):(s.reset=!1,o=-1)}}},update:(o=function(){return new Promise((function(e){u.forceUpdate(),e(s)}))},function(){return a=a||new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(o())}))}))}),destroy:function(){h(),c=!0}};return Gs(e,t)&&u.setOptions(i).then((function(e){!c&&i.onFirstUpdate&&i.onFirstUpdate(e)})),u;function h(){l.forEach((function(e){return e()})),l=[]}}}({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=void 0===(e=r.scroll)||e,o=void 0===(r=r.resize)||r,a=hs(t.elements.popper),s=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&s.forEach((function(e){e.addEventListener("scroll",n.update,qs)})),o&&a.addEventListener("resize",n.update,qs),function(){i&&s.forEach((function(e){e.removeEventListener("scroll",n.update,qs)})),o&&a.removeEventListener("resize",n.update,qs)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state;e=e.name;t.modifiersData[e]=Zs({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=(e=void 0===(n=(r=e.options).gpuAcceleration)||n,void 0===(n=r.adaptive)||n),r=void 0===(r=r.roundOffsets)||r;e={placement:Ys(t.placement),variation:Xs(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:e,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,$s(Object.assign({},e,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:n,roundOffsets:r})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,$s(Object.assign({},e,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:r})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];fs(i)&&Cs(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{};e=Object.keys((t.styles.hasOwnProperty(e)?t.styles:n)[e]).reduce((function(e,t){return e[t]="",e}),{});fs(r)&&Cs(r)&&(Object.assign(r.style,e),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=void 0===(o=n.offset)?[0,0]:o,o=(e=Us.reduce((function(e,n){var r,o,a,s;return e[n]=(r=n,o=t.rects,a=i,s=Ys(r),n=0<=[Ds,Is].indexOf(s)?-1:1,a=(a=(r="function"==typeof a?a(Object.assign({},o,{placement:r})):a)[0])||0,r=((r=r[1])||0)*n,0<=[Ds,js].indexOf(s)?{x:r,y:a}:{x:a,y:r}),e}),{}),(n=e[t.placement]).x);n=n.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=o,t.modifiersData.popperOffsets.y+=n),t.modifiersData[r]=e}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=void 0===(a=n.mainAxis)||a,o=void 0===(e=n.altAxis)||e,a=n.fallbackPlacements,s=n.padding,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=void 0===(e=n.flipVariations)||e,d=n.allowedAutoPlacements,f=(n=Ys(e=t.options.placement),n=a||(n!==e&&h?function(e){if(Ys(e)===As)return[];var t=el(e);return[nl(e),t,nl(t)]}(e):[el(e)]),[e].concat(n).reduce((function(e,n){return e.concat(Ys(n)===As?(r=t,e=(o=i=void 0===(i={placement:n,boundary:l,rootBoundary:c,padding:s,flipVariations:h,allowedAutoPlacements:d})?{}:i).placement,a=o.boundary,u=o.rootBoundary,f=o.padding,i=o.flipVariations,p=void 0===(o=o.allowedAutoPlacements)?Us:o,e=(m=Xs(e))?i?zs:zs.filter((function(e){return Xs(e)===m})):Ls,v=(i=0===(i=e.filter((function(e){return 0<=p.indexOf(e)}))).length?e:i).reduce((function(e,t){return e[t]=ll(r,{placement:t,boundary:a,rootBoundary:u,padding:f})[Ys(t)],e}),{}),Object.keys(v).sort((function(e,t){return v[e]-v[t]}))):n);var r,i,o,a,u,f,p,m,v}),[])),p=t.rects.reference,m=t.rects.popper,v=new Map,g=!0,y=f[0],b=0;b<f.length;b++){var C=f[b],w=Ys(C),E=Xs(C)===Ms,S=(x=0<=[Is,Rs].indexOf(w))?"width":"height",O=ll(t,{placement:C,boundary:l,rootBoundary:c,altBoundary:u,padding:s}),x=x?E?js:Ds:E?Rs:Is;if(p[S]>m[S]&&(x=el(x)),E=el(x),S=[],i&&S.push(O[w]<=0),o&&S.push(O[x]<=0,O[E]<=0),S.every((function(e){return e}))){y=C,g=!1;break}v.set(C,S)}if(g)for(var _=h?3:1;0<_&&"break"!==function(e){var t=f.find((function(t){if(t=v.get(t))return t.slice(0,e).every((function(e){return e}))}));if(t)return y=t,"break"}(_);_--);t.placement!==y&&(t.modifiersData[r]._skip=!0,t.placement=y,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t,n,r,i=e.state,o=e.options,a=e.name,s=o.mainAxis,l=void 0===s||s,c=void 0!==(O=o.altAxis)&&O,u=o.boundary,h=o.rootBoundary,d=o.altBoundary,f=o.padding,p=void 0===(x=o.tether)||x,m=o.tetherOffset,v=void 0===m?0:m,g=ll(i,{boundary:u,rootBoundary:h,padding:f,altBoundary:d}),y=Ys(i.placement),b=Xs(i.placement),C=!b,w="x"===(r=Ks(y))?"y":"x",E=i.modifiersData.popperOffsets,S=i.rects.reference,O=(e=i.rects.popper,"number"==typeof(s="function"==typeof v?v(Object.assign({},i.rects,{placement:i.placement})):v)?{mainAxis:s,altAxis:s}:Object.assign({mainAxis:0,altAxis:0},s)),x=i.modifiersData.offset?i.modifiersData.offset[i.placement]:null;o={x:0,y:0};E&&(l&&(m="y"===r?"height":"width",h=(t=E[r])+g[u="y"===r?Is:Ds],n=t-g[f="y"===r?Rs:js],d=p?-e[m]/2:0,v=(b===Ms?S:e)[m],s=b===Ms?-e[m]:-S[m],l=i.elements.arrow,b=p&&l?_s(l):{width:0,height:0},u=(l=i.modifiersData["arrow#persistent"]?i.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0})[u],f=l[f],b=cl(0,S[m],b[m]),u=C?S[m]/2-d-b-u-O.mainAxis:v-b-u-O.mainAxis,s=C?-S[m]/2+d+b+f+O.mainAxis:s+b+f+O.mainAxis,f=(b=i.elements.arrow&&Ps(i.elements.arrow))?"y"===r?b.clientTop||0:b.clientLeft||0:0,b=t+s-(s=null!=(b=null==x?void 0:x[r])?b:0),n=cl(p?vs(h,t+u-s-f):h,t,p?ms(n,b):n),E[r]=n,o[r]=n-t),c&&(n="y"==w?"height":"width",c=(t=E[w])+g["x"===r?Is:Ds],g=t-g["x"===r?Rs:js],r=-1!==[Is,Ds].indexOf(y),x=null!=(y=null==x?void 0:x[w])?y:0,y=r?c:t-S[n]-e[n]-x+O.altAxis,x=r?t+S[n]+e[n]-x-O.altAxis:g,g=p&&r?(O=cl(y,O=t,r=x),r<O?r:O):cl(p?y:c,t,p?x:g),E[w]=g,o[w]=g-t),i.modifiersData[a]=o)},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n,r=e.state,i=e.name,o=e.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,l=Ys(r.placement),c=Ks(l),u=0<=[Ds,js].indexOf(l)?"height":"width";a&&s&&(n=r,e=al("number"!=typeof(t="function"==typeof(t=o.padding)?t(Object.assign({},n.rects,{placement:n.placement})):t)?t:sl(t,Ls)),l=_s(a),o="y"===c?Is:Ds,n="y"===c?Rs:js,t=r.rects.reference[u]+r.rects.reference[c]-s[c]-r.rects.popper[u],s=s[c]-r.rects.reference[c],a=(a=Ps(a))?"y"===c?a.clientHeight||0:a.clientWidth||0:0,o=e[o],n=a-l[u]-e[n],n=cl(o,s=a/2-l[u]/2+(t/2-s/2),n),r.modifiersData[i]=((i={})[c]=n,i.centerOffset=n-s,i))},effect:function(e){var t=e.state;null!=(e=void 0===(e=e.options.element)?"[data-popper-arrow]":e)&&("string"!=typeof e||(e=t.elements.popper.querySelector(e)))&&rl(t.elements.popper,e)&&(t.elements.arrow=e)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=ll(t,{elementContext:"reference"});e=ll(t,{altBoundary:!0}),r=ul(a,r),e=ul(e,i,o),i=hl(r),o=hl(e);t.modifiersData[n]={referenceClippingOffsets:r,popperEscapeOffsets:e,isReferenceHidden:i,hasPopperEscaped:o},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":i,"data-popper-escaped":o})}}]}),pl=(g=n(535),n.n(g)),ml="undefined"!=typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,vl=[],gl=function(e,t,n){void 0===n&&(n={});var i=r.useRef(null),o={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||vl},a=r.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=a[0],l=a[1],c=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state;e=Object.keys(t.elements);l({styles:dl(e.map((function(e){return[e,t.styles[e]||{}]}))),attributes:dl(e.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),u=r.useMemo((function(){var e={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[c,{name:"applyStyles",enabled:!1}])};return pl()(i.current,e)?i.current||e:i.current=e}),[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,c]),h=r.useRef();return ml((function(){h.current&&h.current.setOptions(u)}),[u]),ml((function(){if(null!=e&&null!=t){var r=(n.createPopper||fl)(e,t,u);return h.current=r,function(){r.destroy(),h.current=null}}}),[e,t,n.createPopper]),{state:h.current?h.current.state:null,styles:s.styles,attributes:s.attributes,update:h.current?h.current.update:null,forceUpdate:h.current?h.current.forceUpdate:null}},yl=["bottom-start","bottom","bottom-end","top-start","top","top-end","right-start","right","right-end","left-start","left","left-end"];n(515);var bl=oe("popup");function Cl(e){var t=e.styles,n=e.attributes;e=e.setArrowRef;return i.a.createElement("div",Object.assign({"data-popper-arrow":!0,ref:e,className:bl("arrow"),style:t},n),i.a.createElement("div",{className:bl("arrow-content")},i.a.createElement("div",{className:bl("arrow-circle-wrapper")},i.a.createElement("div",{className:bl("arrow-circle",{left:!0})})),i.a.createElement("div",{className:bl("arrow-circle-wrapper")},i.a.createElement("div",{className:bl("arrow-circle",{right:!0})}))))}function wl(e){var t=i.a.useRef();return i.a.useEffect((function(){t.current=e}),[e]),t.current}function El(){var e=i.a.useState({}),t=ae()(e,2)[1];return i.a.useCallback((function(){t({})}),[])}function Sl(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function Ol(e,t){return i.a.useMemo((function(){return null===e&&null===t?null:function(n){Sl(e,n),Sl(t,n)}}),[e,t])}var xl,_l=oe("popup");function kl(e){var t=void 0!==(E=e.keepMounted)&&E,n=void 0!==(S=e.hasArrow)&&S,r=void 0===(O=e.offset)?[0,4]:O,o=e.open,a=e.placement,s=e.anchorRef,l=e.disableEscapeKeyDown,c=e.disableOutsideClick,u=e.disableLayer,h=e.style,d=e.className,f=void 0===(_=e.modifiers)?[]:_,p=e.children,m=e.onEscapeKeyDown,v=e.onOutsideClick,g=e.onClose,y=e.onClick,b=e.onMouseEnter,C=e.onMouseLeave,w=e.container,E=e.strategy,S=e.qa,O=i.a.useRef(null),x=i.a.useRef(!1),_=i.a.useRef(!1),k=(e=wl(o),El());o&&(_.current=!0),void 0===e||x.current||(x.current=o!==e),us({open:o,disableEscapeKeyDown:l,disableOutsideClick:c,onEscapeKeyDown:m,onOutsideClick:v,onClose:g,contentRefs:[s,O],enabled:!u});m=(u=(v=(m={anchorRef:s,placement:a,offset:n?[r[0],r[1]+8]:r,strategy:E,modifiers:[{name:"computeStyles",options:{gpuAcceleration:!1}},{name:"arrow",options:{enabled:n,padding:4}},{name:"preventOverflow",options:{padding:1}}].concat(J()(f))}).anchorRef,u=void 0===(g=m.placement)?yl:g,s=m.offset,r=void 0===(a=m.modifiers)?[]:a,E=m.strategy,f=i.a.useState(null),a=(g=ae()(f,2))[0],m=g[1],f=i.a.useState(null),f=(g=ae()(f,2))[0],g=g[1],u=Array.isArray(u)?u:[u],{attributes:(u=gl(null==v?void 0:v.current,a,{strategy:E,modifiers:[{name:"arrow",options:{element:f}},{name:"offset",options:{offset:s}},{name:"flip",options:{fallbackPlacements:u.slice(1)}}].concat(J()(r)),placement:u[0]})).attributes,styles:u.styles,setPopperRef:m,setArrowRef:g})).attributes,g=u.styles;var T=u.setPopperRef;u=u.setArrowRef,O=Ol(O,(function(e){return T(e)}));return t||o||x.current?i.a.createElement(ls,{container:w},i.a.createElement("div",Object.assign({ref:O,"data-inited":_.current?"":void 0,onAnimationEnd:function(){x.current=!1,k()},onClick:y,onMouseEnter:b,onMouseLeave:C,tabIndex:-1,className:_l({open:o},d),style:Object.assign(Object.assign({},h),g.popper)},m.popper,{"data-qa":S}),n&&i.a.createElement(Cl,{styles:g.arrow,attributes:m.arrow,setArrowRef:u}),p)):null}function Tl(e){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24},e),r.createElement("path",{stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",d:"M7.357 7.357l9.286 9.286m0-9.286l-9.286 9.286"}))}n(798),(V=xl=xl||{}).Immediate="immediate",V.Delayed="delayed",V.DelayedClosing="delayedClosing";var Nl=ie()("yc-tooltip"),Pl=function(e){X()(n,e);var t=ss()(n);function n(){var e,r;W()(this,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(r=t.call.apply(t,[this].concat(a))).state={open:r.props.initialOpen},r.controlRef=i.a.createRef(),r.delayOpening=null,r.delayClosing=null,r.closedManually=!1,r.delayByBehavior=(e={},p()(e,xl.Immediate,[0,0]),p()(e,xl.Delayed,[300,300]),p()(e,xl.DelayedClosing,[0,300]),e),r.openTooltip=function(){r.unsetOpeningTimeout(),r.setTooltipOpen(!0)},r.closeTooltip=function(){r.unsetClosingTimeout(),r.setTooltipOpen(!1)},r.openTooltipDelayed=function(){r.delayOpening=null,r.openTooltip()},r.closeTooltipDelayed=function(){r.delayClosing=null,r.closeTooltip()},r.getButtonView=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];switch(r.props.theme){case"special":return e?"normal-contrast":"flat-contrast";case"announcement":return e?"normal-contrast":"outlined";default:return e?"normal":"flat"}},r.toggleTooltip=function(){r.state.open?(r.closeTooltip(),r.closedManually=!0):(r.openTooltip(),r.closedManually=!1)},r.onMouseEnter=function(){var e=r.props.disabled,t=ae()(r.delay,1)[0],n=r.state.open;r.unsetClosingTimeout(),n||e||r.closedManually||(r.delayOpening=setTimeout(r.openTooltipDelayed,t))},r.onMouseLeave=function(){var e=r.props.autoclosable,t=ae()(r.delay,2)[1];!e||r.closedManually||r.delayClosing||(r.unsetOpeningTimeout(),r.delayClosing=setTimeout(r.closeTooltipDelayed,t)),r.closedManually=!1},r.onClick=function(){var e=$()(ee.a.mark((function e(t){var n,i;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.props,n=i.onClick,i=i.disabled,e.t0=!i,!e.t0){e.next=9;break}if(e.t1=!n,e.t1){e.next=8;break}return e.next=7,n(t);case 7:e.t1=e.sent;case 8:e.t0=e.t1;case 9:if(!e.t0){e.next=11;break}r.toggleTooltip();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onCloseClick=function(){var e=$()(ee.a.mark((function e(t){var n;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.props.onCloseClick,r.closeTooltip(),null!=n&&n(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r}return q()(n,[{key:"componentDidUpdate",value:function(e){e.disabled!==this.props.disabled&&this.props.disabled&&this.closeTooltip()}},{key:"componentWillUnmount",value:function(){this.unsetOpeningTimeout(),this.unsetClosingTimeout()}},{key:"render",value:function(){var e=(a=this.props).openOnHover,t=a.className,n=a.children,r=a.offset,o=a.anchorRef,a=a.qa;return o?this.renderTooltip():i.a.createElement("div",{ref:this.controlRef,className:Nl(null,t),onMouseEnter:e?this.onMouseEnter:void 0,onMouseLeave:e?this.onMouseLeave:void 0,style:{top:r.top,left:r.left},"data-qa":a},i.a.createElement("span",{onClick:this.onClick},n),this.renderTooltip())}},{key:"setTooltipOpen",value:function(e){this.setState({open:e});var t=this.props.onOpenChange;t&&t(e)}},{key:"delay",get:function(){var e,t,n=(e=ae()(this.delayByBehavior[null!==(t=this.props.behavior)&&void 0!==t?t:xl.DelayedClosing],2))[0],r=e[1];return[void 0===(e=(t=this.props).delayOpening)?n:e,void 0===(t=t.delayClosing)?r:t]}},{key:"unsetOpeningTimeout",value:function(){this.delayOpening&&(clearTimeout(this.delayOpening),this.delayOpening=null)}},{key:"unsetClosingTimeout",value:function(){this.delayClosing&&(clearTimeout(this.delayClosing),this.delayClosing=null)}},{key:"renderTooltip",value:function(){var e=this.state.open,t=(c=this.props).placement,n=c.hasArrow,r=c.tooltipOffset,o=c.tooltipClassName,a=c.theme,s=c.size,l=c.anchorRef,c=c.hasClose;return i.a.createElement(kl,{anchorRef:l||this.controlRef,className:Nl("tooltip",p()({theme:a,size:s},"with-close",c),o),open:e,placement:t,hasArrow:n,offset:r,onClose:l?void 0:this.closeTooltip},i.a.createElement(i.a.Fragment,null,this.renderTitle(),this.renderContent(),this.renderLinks(),this.renderButtons(),this.renderClose()))}},{key:"renderTitle",value:function(){var e=this.props.title;return e?i.a.createElement("h3",{className:Nl("tooltip-title")},e):null}},{key:"renderContent",value:function(){var e=(o=this.props).title,t=o.theme,n=o.content,r=o.htmlContent,o=o.contentClassName;t=e&&"announcement"!==t;return r||n?r?i.a.createElement("div",{className:Nl("tooltip-content",{secondary:t}),dangerouslySetInnerHTML:{__html:r}}):n?i.a.createElement("div",{className:Nl("tooltip-content",{secondary:t},o)},n):null:null}},{key:"renderLinks",value:function(){var e=this.props.links;return e.length?i.a.createElement("div",{className:Nl("tooltip-links")},e.map((function(e,t){var n=e.text,r=e.href,o=void 0===(o=e.target)?"_blank":o;e=e.onClick;return i.a.createElement(i.a.Fragment,{key:"link-".concat(t)},i.a.createElement(we,{href:r,target:o,onClick:e,className:Nl("tooltip-link")},n),i.a.createElement("br",null))}))):null}},{key:"renderButtons",value:function(){var e=(t=this.props).tooltipActionButton,t=t.tooltipCancelButton;return e||t?i.a.createElement("div",{className:Nl("tooltip-buttons")},this.renderButton(e,!0),this.renderButton(t)):null}},{key:"renderButton",value:function(e){if(!e)return null;var t=e.text;e=e.onClick;return i.a.createElement(ge,{view:this.getButtonView(1<arguments.length&&void 0!==arguments[1]&&arguments[1]),width:"max",onClick:e,className:Nl("tooltip-button")},t)}},{key:"renderClose",value:function(){return this.props.hasClose?i.a.createElement("div",{className:Nl("tooltip-close")},i.a.createElement(ge,{size:"s",view:"clear",onClick:this.onCloseClick},i.a.createElement(he,{data:Tl,size:24}))):null}}]),n}(i.a.Component);function Il(e){return r.createElement("svg",Object.assign({viewBox:"0 0 16 16",width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M15.5 8C15.5 12.1421 12.1421 15.5 8 15.5C3.85786 15.5 0.5 12.1421 0.5 8C0.5 3.85786 3.85786 0.5 8 0.5C12.1421 0.5 15.5 3.85786 15.5 8Z",stroke:"currentColor",strokeOpacity:.15}),r.createElement("path",{opacity:.5,fillRule:"evenodd",clipRule:"evenodd",d:"M8.46436 9.92432H7.09473C7.09115 9.72738 7.08936 9.60742 7.08936 9.56445C7.08936 9.12044 7.16276 8.75521 7.30957 8.46875C7.45638 8.18229 7.75 7.86003 8.19043 7.50195C8.63086 7.14388 8.89404 6.90934 8.97998 6.79834C9.11247 6.62288 9.17871 6.42953 9.17871 6.21826C9.17871 5.92464 9.06144 5.6731 8.8269 5.46362C8.59237 5.25415 8.27637 5.14941 7.87891 5.14941C7.49577 5.14941 7.17529 5.25863 6.91748 5.47705C6.65967 5.69548 6.48242 6.02848 6.38574 6.47607L5 6.3042C5.03939 5.66325 5.31242 5.11898 5.81909 4.67139C6.32577 4.22379 6.99088 4 7.81445 4C8.68099 4 9.37028 4.22648 9.88232 4.67944C10.3944 5.13241 10.6504 5.65966 10.6504 6.26123C10.6504 6.59424 10.5564 6.90934 10.3684 7.20654C10.1804 7.50375 9.77849 7.90836 9.1626 8.42041C8.84391 8.68539 8.64608 8.89844 8.56909 9.05957C8.49211 9.2207 8.45719 9.50895 8.46436 9.92432ZM7.09473 11.9546V10.4453H8.604V11.9546H7.09473Z",fill:"currentColor"}))}Pl.defaultProps={offset:{},links:[],placement:["right","bottom"],hasArrow:!0,openOnHover:!0,autoclosable:!0,theme:"info",size:"s",hasClose:!1,initialOpen:!1,disabled:!1},n(809);var Rl=ie()("help-tooltip");function jl(e){return i.a.createElement(Pl,Object.assign({offset:{left:4}},e,{className:Rl(null,e.className)}),i.a.createElement(he,{data:Il,size:16}))}C=n(319);var Dl=n.n(C),Al=(H=n(325),n.n(H)),Ll=(t=n(532),n.n(t)),Ml=(n(787),ie()("yc-progress")),Fl=function(e){X()(n,e);var t=ss()(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=(t=this.props).view,t=t.className;return i.a.createElement("div",{className:Ml({view:e},t)},this.renderText(),this.renderContent())}},{key:"theme",get:function(){if(n.isProgressWithStack(this.props))throw new Error("Unexpected behavior");var e=this.props,t=e.theme,r=e.colorStops,i=e.colorStopsValue,o=e.value;return r&&(e=Al()(r,(function(e,t){return n.isBetween("number"==typeof i?i:o,1<t?r[t-1].stop:0,t<r.length-1?e.stop:100)})))?e.theme:t}},{key:"renderContent",value:function(){return n.isProgressWithStack(this.props)?this.renderStack(this.props):this.renderItem(this.props)}},{key:"renderItem",value:function(e){var t=e.value,r=Ml("item",{theme:this.theme}),o=n.getOffset(t);e={transform:"translateX(".concat(o,"%)")};return n.isFiniteNumber(t)?i.a.createElement("div",{className:r,style:e},this.renderInnerText(o)):null}},{key:"renderStack",value:function(e){var t=e.stack,r=e.stackClassName,o=Ml("stack",r),a=e.value||n.getValueFromStack(t),s=(r=n.getOffset(a),e={transform:"translateX(".concat(r,"%)")},{width:"".concat(-r,"%")});return i.a.createElement("div",{className:o,style:e},i.a.createElement("div",{className:Ml("item"),style:s}),Dl()(t,(function(e,t){var r=e.value,o=e.color,l=e.title,c=e.theme,u=e.className;e=e.content;return s={width:"".concat(r,"%"),backgroundColor:o},r={},void 0===o&&(r.theme=c||"default"),n.isFiniteNumber(a)?i.a.createElement("div",{key:t,className:Ml("item",r,u),style:s,title:l},e):null})),this.renderInnerText(r))}},{key:"renderInnerText",value:function(e){var t=this.props.text;if(!t)return null;var n=Ml("text-inner");e={transform:"translateX(".concat(-e,"%)")};return i.a.createElement("div",{className:n,style:e},t)}},{key:"renderText",value:function(){var e=this.props.text,t=Ml("text");return i.a.createElement("div",{className:t},e)}}],[{key:"isFiniteNumber",value:function(e){return isFinite(e)&&!isNaN(e)}},{key:"isBetween",value:function(e,t,n){return t<=e&&e<=n}},{key:"getOffset",value:function(e){return e<100?e-100:0}},{key:"getValueFromStack",value:function(e){return Ll()(e,(function(e){return e.value}))}},{key:"isProgressWithStack",value:function(e){return void 0!==e.stack}}]),n}(r.Component);Fl.defaultProps={text:"",theme:"default",view:"normal"},n(810);var Bl=ie()("yc-staff-card");function Hl(e){var t=e.login,o=e.className,a=(e=e.children,Object(r.useRef)(null)),s=Object(r.useRef)(null);return Object(r.useEffect)((function(){s.current?s.current.login=t:n.e(13).then(n.t.bind(null,1177,7)).then((function(e){e=e.default,s.current=new e(a.current,t)}))}),[t]),Object(r.useEffect)((function(){return function(){s.current&&"function"==typeof s.current.destruct&&s.current.destruct()}}),[]),i.a.createElement("div",{className:Bl({},o),ref:a},e)}Y=n(531);var zl,Ul=n.n(Y);(c=zl=zl||{}).Pending="pending",c.Success="success",c.Error="error";var Vl=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).state={status:n.INITIAL_STATUS},e.handleCopy=function(t,r){var i=(o=e.props).timeout,o=o.onCopy;e.setState({status:r?zl.Success:zl.Error}),clearTimeout(e.timerId),e.timerId=window.setTimeout((function(){e.setState({status:n.INITIAL_STATUS}),e.timerId=void 0}),i),o&&o(t,r)},e}return q()(n,[{key:"render",value:function(){var e=(t=this.props).children,t=t.text;e=e(this.state.status);if(!i.a.isValidElement(e))throw new Error("Content must be a valid react element");return i.a.createElement(Ul.a,{text:String(t),onCopy:this.handleCopy},e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerId)}}]),n}(i.a.Component);function Wl(e){return i.a.createElement("path",{stroke:"currentColor",fill:"transparent",className:Gl("state"),strokeWidth:"1.5",d:e})}Vl.INITIAL_STATUS=zl.Pending,n(766);var Gl=oe("clipboard-icon"),ql=(Z={},p()(Z,zl.Success,Wl("M9.5 13l3 3l5 -5")),p()(Z,zl.Error,Wl("M9.5 10l8 8m-8 0l8 -8")),Z);function Yl(e){var t=e.size,n=e.status;e=e.className;return i.a.createElement("svg",{width:t,height:t,viewBox:"0 0 24 24",className:Gl(null,e)},i.a.createElement("path",{fill:"currentColor",d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"}),n!==zl.Pending?ql[n]:null)}n(763);var Xl=oe("clipboard-button");function Kl(e){var t=e.text,n=e.size,r=void 0===n?24:n,o=e.className,a=e.qa;return i.a.createElement(Vl,{text:t,timeout:1e3},(function(e){return i.a.createElement("span",{className:Xl(null,o),"data-qa":a},i.a.createElement(Yl,{status:e,size:r,className:Xl("icon")}))}))}n(772);var Zl=oe("loader");function Ql(e){var t=e.size;e=e.className;return i.a.createElement("div",{className:Zl({size:void 0===t?"s":t},e)},i.a.createElement("div",{className:Zl("left")}),i.a.createElement("div",{className:Zl("center")}),i.a.createElement("div",{className:Zl("right")}))}var $l=oe("text-input");function Jl(e){var t=e.name,n=e.id,r=e.tabIndex,o=e.autoFocus,a=e.autoComplete,s=e.placeholder,l=e.value,c=e.defaultValue,u=e.onChange,h=e.onFocus,d=e.onBlur,f=e.onKeyDown,p=e.onKeyUp,m=e.onKeyPress,v=e.controlRef,g=e.controlProps,y=e.disabled,b=e.rows,C=void 0===(C=e.minRows)?1:C,w=e.maxRows,E=i.a.useRef(null),S=(v=Ol(v,E),C=b||C,i.a.useCallback((function(){var e,t,n,r,i,o=null==E?void 0:E.current;o&&!b&&(e=((l||o.value).match(/\n/g)||[]).length+1,i=getComputedStyle(o),t=parseInt(i.getPropertyValue("line-height"),10),n=parseInt(i.getPropertyValue("border-top-width"),10),r=parseInt(i.getPropertyValue("padding-top"),10),i=Math.floor(o.scrollHeight/t),w&&w<Math.max(i,e)?(o.style.height="auto",o.style.height="".concat(w*t+2*r+2*n,"px")):(o.style.height="auto",o.style.height="".concat(o.scrollHeight+2*n,"px")))}),[b,w,l]));return i.a.useEffect(S,[S]),i.a.createElement("textarea",Object.assign({},g,{ref:v,style:Object.assign(Object.assign({},null==g?void 0:g.style),{height:b?"auto":void 0}),className:$l("control",{type:"textarea"}),name:t,id:n,tabIndex:r,placeholder:s,value:l,defaultValue:c,rows:C,autoFocus:o,autoComplete:a,onChange:function(e){u?u(e):S()},onFocus:h,onBlur:d,onKeyDown:f,onKeyUp:p,onKeyPress:m,disabled:y}))}var ec=oe("text-input");function tc(e){var t=e.type,n=e.name,r=e.id,o=e.tabIndex,a=e.autoFocus,s=e.autoComplete,l=e.placeholder,c=e.value,u=e.defaultValue,h=e.onChange,d=e.onFocus,f=e.onBlur,p=e.onKeyDown,m=e.onKeyUp,v=e.onKeyPress,g=e.controlProps,y=e.controlRef;e=e.disabled;return i.a.createElement("input",Object.assign({},g,{ref:y,className:ec("control",{type:"input"}),type:t,name:n,id:r,tabIndex:o,placeholder:l,value:c,defaultValue:u,autoFocus:a,autoComplete:s,onChange:h,onFocus:d,onBlur:f,onKeyDown:p,onKeyUp:m,onKeyPress:v,disabled:e}))}n(779);var nc,rc=oe("text-input"),ic=i.a.forwardRef((function(e,t){var n=void 0===(g=e.view)?"normal":g,r=void 0===(y=e.size)?"m":y,o=void 0===(b=e.pin)?"round-round":b,a=e.name,s=e.value,l=e.defaultValue,c=void 0!==(C=e.disabled)&&C,u=void 0!==(w=e.multiline)&&w,h=void 0!==(k=e.hasClear)&&k,d=e.error,f=e.autoComplete,p=e.onUpdate,m=e.onChange,v=e.id,g=e.tabIndex,y=e.style,b=e.className,C=e.qa,w=i.a.useState(null!=l?l:""),E=(l=(k=ae()(w,2))[0],k[1]),S=i.a.useRef(null),O=(w=i.a.useState(!1),(k=ae()(w,2))[0]),x=k[1],_=void 0!==s,k=(w=_?s:l,Ol(e.controlRef,S));return i.a.useEffect((function(){var e=S.current;e&&u&&(e=e.scrollHeight>e.clientHeight,O!==e&&x(e))}),[u,w,O]),s=i.a.useMemo((function(){return function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).error?"error":void 0}({error:d})}),[d]),l="string"==typeof d,w=Boolean(h&&!c&&w),f={id:v,tabIndex:g,name:a,onChange:function(e){var t=e.target.value;_||E(t),m&&m(e),p&&p(t)},autoComplete:"boolean"==typeof(f=f)?f?"on":"off":f},i.a.createElement("span",{ref:t,style:y,className:rc({view:n,size:r,pin:"clear"===n?void 0:o,disabled:c,state:s,"has-clear":h,"has-scrollbar":O},b),"data-qa":C},e.multiline?i.a.createElement(Jl,Object.assign({},e,f,{controlRef:k})):i.a.createElement(tc,Object.assign({},e,f,{controlRef:k})),l&&i.a.createElement("div",{className:rc("error")},d),h&&i.a.createElement("span",{className:rc("clear",{visible:w}),onClick:function(e){var t=S.current;t&&(t.focus(),(e=Object.create(e)).target=t,(e.currentTarget=t).value="",m&&m(e),p&&p("")),_||E("")}},i.a.createElement(he,{data:Ee})))})),oc=(g=n(46),n.n(g)),ac=(V=n(427),n.n(V)),sc=(C=n(326),n.n(C)),lc=(H=n(273),n.n(H)),cc=(t=n(194),n.n(t)),uc=(Y=n(322),n.n(Y)),hc=(c=n(247),n.n(c)),dc=(Z=n(287),n.n(Z)),fc=(g=n(434),n.n(g)),pc=(V=n(435),n.n(V));(C=nc=nc||{}).IOS="ios",C.ANDROID="android";H={mobile:!(C.BROWSER="browser"),platform:nc.BROWSER,useHistory:function(){return{action:"",replace:function(){},push:function(){},goBack:function(){}}},useLocation:function(){return{pathname:"",search:"",hash:""}},setMobile:function(){},setPlatform:function(){}};var mc=i.a.createContext(H);function vc(e,t){W()(this,vc),this.x=void 0,this.y=void 0,this.timeStamp=void 0,this.x=e,this.y=t,this.timeStamp=Date.now()}var gc=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:5;W()(this,e),this.pointsLen=void 0,this.points=[],this.pointsLen=t,this.clear()}return q()(e,[{key:"clear",value:function(){this.points=new Array(this.pointsLen)}},{key:"addMovement",value:function(e){var t=e.x;e=e.y;this.points.pop(),this.points.unshift(new vc(t,e))}},{key:"getYAcceleration",value:function(){var e=this.points[0],t=this.points[0<arguments.length&&void 0!==arguments[0]?arguments[0]:1];return e&&t?(e.y-t.y)/Math.pow(e.timeStamp-t.timeStamp,2):0}}]),e}(),yc=(n(516),ie()("yc-mobile-modal")),bc=[];(t=function(e){X()(n,e);var t=ss()(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).veilRef=i.a.createRef(),e.modalRef=i.a.createRef(),e.modalTopRef=i.a.createRef(),e.modalContentRef=i.a.createRef(),e.modalInnerContentRef=i.a.createRef(),e.velocityTracker=new gc,e.observer=null,e.transitionDuration="0.3s",e.state={startScrollTop:0,startY:0,deltaY:0,prevInnerContentHeight:0,swipeAreaTouched:!1,contentTouched:!1,veilTouched:!1,isAnimating:!1,inWindowResizeScope:!1},e.setStyles=function(t){var n,r=t.status,i=t.deltaHeight,o=void 0===i?0:i;e.modalRef.current&&e.veilRef.current&&(n=e.modalHeight-o,t="showing"===r?"translate3d(0, -".concat(n,"px, 0)"):"translate3d(0, 0, 0)",i=0,"showing"===r&&(i=0===o?1:n/e.modalHeight),e.veilRef.current.style.opacity=String(i),e.modalRef.current.style.transform=t)},e.show=function(){e.setState({isAnimating:!0},(function(){e.setStyles({status:"showing"}),e.setHash()}))},e.hide=function(){e.setState({isAnimating:!0},(function(){e.setStyles({status:"hiding"}),e.removeHash()}))},e.onSwipeAreaTouchStart=function(t){e.velocityTracker.clear(),e.setState({startY:t.nativeEvent.touches[0].clientY,swipeAreaTouched:!0})},e.onContentTouchStart=function(t){e.props.allowHideOnContentScroll&&!e.state.swipeAreaTouched&&(e.velocityTracker.clear(),e.setState({startY:t.nativeEvent.touches[0].clientY,startScrollTop:e.modalScrollTop,contentTouched:!0}))},e.onSwipeAriaTouchMove=function(t){var n=t.nativeEvent.touches[0].clientY-e.state.startY;e.velocityTracker.addMovement({x:t.nativeEvent.touches[0].clientX,y:t.nativeEvent.touches[0].clientY}),e.setState({deltaY:n}),n<=0||e.setStyles({status:"showing",deltaHeight:n})},e.onContentTouchMove=function(t){var n,r;e.props.allowHideOnContentScroll&&(r=(n=e.state).startScrollTop,n.swipeAreaTouched||0<e.modalScrollTop||0<r&&r!==e.modalScrollTop||(r=t.nativeEvent.touches[0].clientY-e.state.startY,e.velocityTracker.addMovement({x:t.nativeEvent.touches[0].clientX,y:t.nativeEvent.touches[0].clientY}),e.setState({deltaY:r}),r<=0||e.setStyles({status:"showing",deltaHeight:r})))},e.onTouchEndAction=function(t){var n=e.velocityTracker.getYAcceleration();e.modalHeight<=t?e.props.hideModal():50<t&&n<=.08&&-.02<=n||.08<n?e.hide():0<t&&e.show()},e.onSwipeAriaTouchEnd=function(){var t=e.state.deltaY;e.onTouchEndAction(t),e.setState({startY:0,deltaY:0,swipeAreaTouched:!1})},e.onContentTouchEnd=function(){var t=(n=e.state).deltaY,n=n.swipeAreaTouched;e.props.allowHideOnContentScroll&&!n&&(e.onTouchEndAction(t),e.setState({startY:0,deltaY:0,contentTouched:!1}))},e.onVeilClick=function(){e.setState({veilTouched:!0}),e.hide()},e.onVeilTransitionEnd=function(){e.setState({isAnimating:!1}),"0"===e.veilOpacity&&e.props.hideModal()},e.onContentTransitionEnd=function(t){"height"===t.propertyName&&e.modalContentRef.current&&(e.modalContentRef.current.style.transition="none")},e.onResizeWindow=function(){e.setState({inWindowResizeScope:!0}),e.onResize(),setTimeout((function(){return e.setState({inWindowResizeScope:!1})}),0)},e.onResize=function(){var t=e.state.prevInnerContentHeight!==e.innerContentHeight;e.modalRef.current&&e.modalContentRef.current&&t&&(e.modalContentRef.current.style.transition=e.state.prevInnerContentHeight>e.innerContentHeight?"height 0s ease ".concat(e.transitionDuration):"none",e.setState({prevInnerContentHeight:e.innerContentHeight}),e.modalContentRef.current.style.height="".concat(e.innerContentHeight,"px"),e.modalRef.current.style.transform="translate3d(0, -".concat(e.innerContentHeight+e.modalTopHeight,"px, 0)"))},e}return q()(n,[{key:"componentDidMount",value:function(){this.addListeners(),this.show(),this.setInitialStyles(),this.setState({prevInnerContentHeight:this.innerContentHeight})}},{key:"componentDidUpdate",value:function(e){var t=(n=this.props).visible,n=n.location;!e.visible&&t&&this.show(),(e.visible&&!t||this.shouldClose(e))&&this.hide(),e.location.pathname!==n.pathname&&(bc=[])}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=(c=this.props).content,t=c.contentClassName,n=c.swipeAreaClassName,r=c.title,o=(u=this.state).deltaY,a=u.swipeAreaTouched,s=u.contentTouched,l=u.veilTouched,c=u.isAnimating,u=(l={"with-transition":!o||l},{"with-transition":!u.inWindowResizeScope&&l["with-transition"]});a={"without-scroll":0<o&&s||a};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:this.veilRef,className:yc("veil",l),onClick:c?void 0:this.onVeilClick,onTransitionEnd:this.onVeilTransitionEnd}),i.a.createElement("div",{ref:this.modalRef,className:yc("modal",u)},i.a.createElement("div",{ref:this.modalTopRef,className:yc("modal-top")},i.a.createElement("div",{className:yc("modal-top-resizer")})),i.a.createElement("div",{className:yc("modal-swipe-area",n),onTouchStart:this.onSwipeAreaTouchStart,onTouchMove:this.onSwipeAriaTouchMove,onTouchEnd:this.onSwipeAriaTouchEnd}),i.a.createElement("div",{ref:this.modalContentRef,className:yc("modal-content",a,t),onTouchStart:this.onContentTouchStart,onTouchMove:this.onContentTouchMove,onTouchEnd:this.onContentTouchEnd,onTransitionEnd:this.onContentTransitionEnd},r&&i.a.createElement("div",{className:yc("modal-content-title")},r),i.a.createElement("div",{ref:this.modalInnerContentRef},e))))}},{key:"veilOpacity",get:function(){var e;return(null===(e=this.veilRef.current)||void 0===e?void 0:e.style.opacity)||0}},{key:"modalTopHeight",get:function(){var e;return(null===(e=this.modalTopRef.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0}},{key:"modalHeight",get:function(){var e;return(null===(e=this.modalRef.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0}},{key:"innerContentHeight",get:function(){var e;return(null===(e=this.modalInnerContentRef.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0}},{key:"modalScrollTop",get:function(){var e;return(null===(e=this.modalContentRef.current)||void 0===e?void 0:e.scrollTop)||0}},{key:"setInitialStyles",value:function(){var e;this.modalContentRef.current&&this.modalInnerContentRef.current&&(this.transitionDuration=getComputedStyle(this.modalContentRef.current).getPropertyValue("--yc-mobile-modal-transition-duration"),e=this.modalHeight-this.modalTopHeight,this.modalContentRef.current.style.height="".concat(e,"px"))}},{key:"addListeners",value:function(){window.addEventListener("resize",this.onResizeWindow),this.modalRef.current&&(this.observer=new MutationObserver(this.onResize),this.observer.observe(this.modalRef.current,{subtree:!0,childList:!0}))}},{key:"removeListeners",value:function(){window.removeEventListener("resize",this.onResizeWindow),this.observer&&this.observer.disconnect()}},{key:"setHash",value:function(){var e=this.props,t=e.id,n=e.platform,r=e.location,i=e.history;if(n!==nc.BROWSER){var o=oc()(oc()({},r),{},{hash:t});switch(n){case nc.IOS:r.hash&&bc.push(r.hash),i.replace(o);break;case nc.ANDROID:i.push(o)}}}},{key:"removeHash",value:function(){var e,t=this.props,n=t.id,r=t.platform,i=t.location,o=t.history;if(r!==nc.BROWSER&&i.hash==="#".concat(n))switch(r){case nc.IOS:o.replace(oc()(oc()({},i),{},{hash:null!==(e=bc.pop())&&void 0!==e?e:""}));break;case nc.ANDROID:o.goBack()}}},{key:"shouldClose",value:function(e){var t=(i=this.props).id,n=i.platform,r=i.location,i=i.history;return n!==nc.BROWSER&&"POP"===i.action&&e.location.hash!==r.hash&&r.hash!=="#".concat(t)}}]),n}(i.a.Component)).defaultProps={id:"modal",allowHideOnContentScroll:!0};var Cc,wc,Ec=(Y=(wc=t).displayName||wc.name||"Component",Sc.displayName="withRouterWrapper(".concat(Y,")"),c=(Cc=Sc).displayName||Cc.name||"Component",(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){return i.a.createElement(Cc,Object.assign({},this.props,{mobile:this.context.mobile,platform:this.context.platform,useHistory:this.context.useHistory,useLocation:this.context.useLocation,setMobile:this.context.setMobile,setPlatform:this.context.setPlatform}))}}]),n}(i.a.Component)).displayName="withMobile(".concat(c,")"),Z.contextType=mc,Z);function Sc(e){var t=e.useHistory,n=e.useLocation;e=v()(e,["useHistory","useLocation"]);return i.a.createElement(wc,Object.assign({},e,{history:t(),location:n()}))}var Oc=ie()("yc-mobile-modal"),xc=function(e){X()(n,e);var t=ss()(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).bodyScrollLocked=!1,e.state={visible:!1},e.showModal=function(){e.lockBodyScroll(),e.setState({visible:!0})},e.hideModal=function(){e.restoreBodyScroll(),e.props.onClose&&e.props.onClose(),e.setState({visible:!1})},e}return q()(n,[{key:"componentDidMount",value:function(){this.props.visible&&this.showModal()}},{key:"componentDidUpdate",value:function(e){!e.visible&&this.props.visible&&this.showModal()}},{key:"componentWillUnmount",value:function(){this.restoreBodyScroll()}},{key:"lockBodyScroll",value:function(){n.lockBodyScroll(),this.bodyScrollLocked=!0}},{key:"restoreBodyScroll",value:function(){this.bodyScrollLocked&&(n.restoreBodyScroll(),this.bodyScrollLocked=!1)}},{key:"render",value:function(){return this.state.visible?a.a.createPortal(this.renderModal(),document.body):null}},{key:"renderModal",value:function(){var e=(l=this.props).id,t=l.children,n=l.className,r=l.contentClassName,o=l.swipeAreaClassName,a=l.title,s=l.visible,l=l.allowHideOnContentScroll;return i.a.createElement("div",{className:Oc(null,n)},i.a.createElement(Ec,{id:e,content:t,contentClassName:r,swipeAreaClassName:o,title:a,visible:s,allowHideOnContentScroll:l,hideModal:this.hideModal}))}}],[{key:"lockBodyScroll",value:function(){1==++n.bodyScrollLocksCount&&(n.bodyInitialOverflow=document.body.style.overflow,document.body.style.overflow="hidden")}},{key:"restoreBodyScroll",value:function(){0!==n.bodyScrollLocksCount&&0==--n.bodyScrollLocksCount&&(document.body.style.overflow=n.bodyInitialOverflow||"",n.bodyInitialOverflow=void 0)}}]),n}(i.a.Component);xc.bodyScrollLocksCount=0,xc.bodyInitialOverflow=void 0,g=new sa.I18N,V=n(533),C=n(534),H="yc-select",g.registerKeyset(sa.I18N.LANGS.en,H,V),g.registerKeyset(sa.I18N.LANGS.ru,H,C);var _c=g.keyset(H),kc=(n(792),ie()("yc-select-search")),Tc=function(e){X()(n,e);var t=ss()(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).focusInput=function(){var t,n,r;e.inputNode&&(t=(r=window).scrollX,n=r.scrollY,r=document.body.scrollTop,e.inputNode.focus(),window.scrollTo(t,n),document.body.scrollTop=r)},e._setInputNode=function(t){e.inputNode||(e.inputNode=t)},e._handleOnClick=function(){e.focusInput(),e.props.onClick&&e.props.onClick()},e}return q()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.width,o=t.minWidth,a=t.searchButtonSettings,s=a.isCleaning,l=a.visible,c=t.onInputUpdate,u=t.selectAllItems;return i.a.createElement(mc.Consumer,null,(function(t){var a,h=t.mobile;t=h?"xl":"m";return h||(a={width:r,minWidth:o}),i.a.createElement("div",{className:kc(),style:a,onClick:e._handleOnClick},i.a.createElement("div",{className:kc("input-wrap")},i.a.createElement(ic,{controlRef:h?void 0:e._setInputNode,view:"clear",size:t,value:n,placeholder:_c("search_placeholder"),onUpdate:c,clear:!0})),l&&i.a.createElement(ge,{view:"flat",size:t,onClick:u},_c(s?"search_clear":"search_select_all")))}))}}]),n}(i.a.PureComponent),Nc=n(217),Pc=n(61),Ic=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Rc(e,t){if(e.length!==t.length)return!1;for(var n,r,i=0;i<e.length;i++)if(!((n=e[i])===(r=t[i])||Ic(n)&&Ic(r)))return!1;return!0}var jc=function(e,t){var n;void 0===t&&(t=Rc);var r,i=[],o=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o&&n===this&&t(a,i)||(r=e.apply(this,a),o=!0,n=this,i=a),r}},Dc="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function Ac(e){cancelAnimationFrame(e.id)}var Lc=null;function Mc(e){if(void 0===e&&(e=!1),null===Lc||e){var t=document.createElement("div"),n=t.style;return n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl",(n=(e=document.createElement("div")).style).width="100px",n.height="100px",t.appendChild(e),document.body.appendChild(t),Lc=0<t.scrollLeft?"positive-descending":(t.scrollLeft=1,0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Lc}return Lc}function Fc(e,t){return e}function Bc(e,t){var n=e.itemCount,r=t.itemMetadataMap,i=t.estimatedItemSize;e=t.lastMeasuredIndex,t=0;return(t=0<=(e=n<=e?n-1:e)?(r=r[e]).offset+r.size:t)+(n-e-1)*i}var Hc=function(e,t,n){var r=e.itemSize,i=n.itemMetadataMap,o=n.lastMeasuredIndex;if(o<t){var a=0;0<=o&&(a=(e=i[o]).offset+e.size);for(var s=o+1;s<=t;s++){var l=r(s);i[s]={offset:a,size:l},a+=l}n.lastMeasuredIndex=t}return i[t]},zc=function(e,t,n,r,i){for(;r<=n;){var o=r+Math.floor((n-r)/2),a=Hc(e,o,t).offset;if(a===i)return o;a<i?r=o+1:i<a&&(n=o-1)}return 0<r?r-1:0},Uc=function(e){var t,n=e.getItemOffset,i=e.getEstimatedTotalSize,o=e.getItemSize,a=e.getOffsetForIndexAndAlignment,s=e.getStartIndexForOffset,l=e.getStopIndexForStartIndex,c=e.initInstanceProps,u=e.shouldResetStyleCacheOnItemSizeChange,h=e.validateProps;return e=t=function(e){function t(t){var r=e.call(this,t)||this;return r._instanceProps=c(r.props,Object(Pc.a)(Object(Pc.a)(r))),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:Object(Pc.a)(Object(Pc.a)(r)),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof r.props.initialScrollOffset?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=jc((function(e,t,n,i){return r.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:i})})),r._callOnScroll=void 0,r._callOnScroll=jc((function(e,t,n){return r.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n})})),r._getItemStyle=void 0,r._getItemStyle=function(e){var t,i,a=r.props,s=a.direction,l=a.itemSize,c=a.layout,h=r._getItemStyleCache(u&&l,u&&c,u&&s);return h.hasOwnProperty(e)?t=h[e]:(i=n(r.props,e,r._instanceProps),a=o(r.props,e,r._instanceProps),c=(l="horizontal"===s||"horizontal"===c)?i:0,h[e]=t={position:"absolute",left:(s="rtl"===s)?void 0:c,right:s?c:void 0,top:l?0:i,height:l?"100%":a,width:l?a:"100%"}),t},r._getItemStyleCache=void 0,r._getItemStyleCache=jc((function(e,t,n){return{}})),r._onScrollHorizontal=function(e){var t=(e=e.currentTarget).clientWidth,n=e.scrollLeft,i=e.scrollWidth;r.setState((function(e){if(e.scrollOffset===n)return null;var o=r.props.direction,a=n;if("rtl"===o)switch(Mc()){case"negative":a=-n;break;case"positive-descending":a=i-t-n}return a=Math.max(0,Math.min(a,i-t)),{isScrolling:!0,scrollDirection:e.scrollOffset<n?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._onScrollVertical=function(e){var t=(e=e.currentTarget).clientHeight,n=e.scrollHeight,i=e.scrollTop;r.setState((function(e){if(e.scrollOffset===i)return null;var r=Math.max(0,Math.min(i,n-t));return{isScrolling:!0,scrollDirection:e.scrollOffset<r?"forward":"backward",scrollOffset:r,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var t=r.props.outerRef;r._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},r._resetIsScrollingDebounced=function(){null!==r._resetIsScrollingTimeoutId&&Ac(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=function(e,t){var n=Dc(),r={id:requestAnimationFrame((function i(){Dc()-n>=t?e.call(null):r.id=requestAnimationFrame(i)}))};return r}(r._resetIsScrolling,150)},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},(function(){r._getItemStyleCache(-1,null)}))},r}Object(Bo.a)(t,e),t.getDerivedStateFromProps=function(e,t){return function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance}(e,t),h(e),null};var d=t.prototype;return d.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},d.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props.itemCount,r=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1)),this.scrollTo(a(this.props,e,t,r,this._instanceProps))},d.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,r=e.layout;"number"==typeof n&&null!=this._outerRef&&(e=this._outerRef,"horizontal"===t||"horizontal"===r?e.scrollLeft=n:e.scrollTop=n),this._callPropsCallbacks()},d.componentDidUpdate=function(){var e,t=(e=this.props).direction,n=e.layout,r=(e=this.state).scrollOffset;if(e.scrollUpdateWasRequested&&null!=this._outerRef){var i=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(Mc()){case"negative":i.scrollLeft=-r;break;case"positive-ascending":i.scrollLeft=r;break;default:var o=i.clientWidth,a=i.scrollWidth;i.scrollLeft=a-o-r}else i.scrollLeft=r;else i.scrollTop=r}this._callPropsCallbacks()},d.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&Ac(this._resetIsScrollingTimeoutId)},d.render=function(){var e,t=(e=this.props).children,n=e.className,o=e.direction,a=e.height,s=e.innerRef,l=e.innerElementType,c=e.innerTagName,u=e.itemCount,h=e.itemData,d=void 0===(w=e.itemKey)?Fc:w,f=e.layout,p=e.outerElementType,m=e.outerTagName,v=e.style,g=e.useIsScrolling,y=e.width,b=this.state.isScrolling,C="horizontal"===o||"horizontal"===f,w=C?this._onScrollHorizontal:this._onScrollVertical,E=(f=(e=this._getRangeToRender())[0],e[1]),S=[];if(0<u)for(var O=f;O<=E;O++)S.push(Object(r.createElement)(t,{data:h,key:d(O,h),index:O,isScrolling:g?b:void 0,style:this._getItemStyle(O)}));return f=i(this.props,this._instanceProps),Object(r.createElement)(p||m||"div",{className:n,onScroll:w,ref:this._outerRefSetter,style:Object(nn.a)({position:"relative",height:a,width:y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:o},v)},Object(r.createElement)(l||c||"div",{children:S,ref:s,style:{height:C?"100%":f,pointerEvents:b?"none":void 0,width:C?f:"100%"}}))},d._callPropsCallbacks=function(){var e,t,n,r;"function"==typeof this.props.onItemsRendered&&0<this.props.itemCount&&(e=(n=this._getRangeToRender())[0],r=n[1],t=n[2],n=n[3],this._callOnItemsRendered(e,r,t,n)),"function"==typeof this.props.onScroll&&(t=(r=this.state).scrollDirection,n=r.scrollOffset,r=r.scrollUpdateWasRequested,this._callOnScroll(t,n,r))},d._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,r=this.state,i=r.isScrolling,o=r.scrollDirection,a=r.scrollOffset;return 0===t?[0,0,0,0]:(e=s(this.props,a,this._instanceProps),r=l(this.props,e,a,this._instanceProps),a=i&&"backward"!==o?1:Math.max(1,n),n=i&&"forward"!==o?1:Math.max(1,n),[Math.max(0,e-a),Math.max(0,Math.min(t-1,r+n)),e,r])},t}(r.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}({getItemOffset:function(e,t,n){return Hc(e,t,n).offset},getItemSize:function(e,t,n){return n.itemMetadataMap[t].size},getEstimatedTotalSize:Bc,getOffsetForIndexAndAlignment:function(e,t,n,r,i){var o=e.direction,a=e.height,s=e.layout,l=e.width,c=(a="horizontal"===o||"horizontal"===s?l:a,t=Hc(e,t,i),i=Bc(e,i),Math.max(0,Math.min(i-a,t.offset))),u=Math.max(0,t.offset-a+t.size);switch(n="smart"===n?u-a<=r&&r<=c+a?"auto":"center":n){case"start":return c;case"end":return u;case"center":return Math.round(u+(c-u)/2);default:return u<=r&&r<=c?r:r<u?u:c}},getStartIndexForOffset:function(e,t,n){return r=e,i=t,t=(e=n).itemMetadataMap,i<=(0<(n=e.lastMeasuredIndex)?t[n].offset:0)?zc(r,e,n,0,i):function(e,t,n,r){for(var i=e.itemCount,o=1;n<i&&Hc(e,n,t).offset<r;)n+=o,o*=2;return zc(e,t,Math.min(n,i-1),Math.floor(n/2),r)}(r,e,Math.max(0,n),i);var r,i},getStopIndexForStartIndex:function(e,t,n,r){for(var i=e.direction,o=e.height,a=e.itemCount,s=e.layout,l=e.width,c=n+(l="horizontal"===i||"horizontal"===s?l:o),u=(o=Hc(e,t,r)).offset+o.size,h=t;h<a-1&&u<c;)u+=Hc(e,++h,r).size;return h},initInstanceProps:function(e,t){var n={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,r){void 0===r&&(r=!0),n.lastMeasuredIndex=Math.min(n.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),r&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}});function Vc(e){return new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"i")}function Wc(e){return null===e?_c("null"):""===e?_c("empty_string"):e}function Gc(e){return!e}function qc(e){return r.createElement("svg",Object.assign({width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{fillRule:"evenodd",fill:"currentColor",d:"M13.1191 0.625L8.98047 0.650391C8.77734 0.650391 8.625 0.802734 8.625 1.00586V1.84375C8.625 2.04688 8.77734 2.22461 8.98047 2.22461L10.8594 2.14844L10.9102 2.19922L3.82617 9.2832C3.77539 9.33398 3.72461 9.43555 3.72461 9.48633C3.72461 9.5625 3.77539 9.66406 3.82617 9.71484L4.41016 10.2988C4.46094 10.3496 4.5625 10.4004 4.63867 10.4004C4.68945 10.4004 4.79102 10.3496 4.8418 10.2988L11.9258 3.21484L11.9766 3.26562L11.9004 5.14453C11.9004 5.34766 12.0781 5.5 12.2812 5.5H13.1191C13.3223 5.5 13.4746 5.34766 13.4746 5.14453L13.5 1.00586C13.5 0.802734 13.3223 0.625 13.1191 0.625ZM11.4688 7.9375H11.0625C10.834 7.9375 10.6562 8.14062 10.6562 8.34375V12.2539C10.6562 12.3555 10.5801 12.4062 10.5039 12.4062H1.87109C1.76953 12.4062 1.71875 12.3555 1.71875 12.2539V3.62109C1.71875 3.54492 1.76953 3.46875 1.87109 3.46875H5.78125C5.98438 3.46875 6.1875 3.29102 6.1875 3.0625V2.65625C6.1875 2.45312 5.98438 2.25 5.78125 2.25H1.71875C1.0332 2.25 0.5 2.80859 0.5 3.46875V12.4062C0.5 13.0918 1.0332 13.625 1.71875 13.625H10.6562C11.3164 13.625 11.875 13.0918 11.875 12.4062V8.34375C11.875 8.14062 11.6719 7.9375 11.4688 7.9375Z"}))}function Yc(e){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:16,height:16},e),r.createElement("path",{fill:"currentColor",d:"M5.95 11.008L1.863 6.572.392 7.927l5.533 6.003 9.67-10.114-1.444-1.381z",fillRule:"evenodd"}))}n(794);var Xc=ie()("yc-select-item"),Kc=ie()("yc-select-item-wrap"),Zc="left",Qc=function(e){X()(n,e);var t=ss()(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={startX:0,deltaX:0,actionNodes:[],swipeDirection:null,opening:!1},e._itemRef=i.a.createRef(),e._onlyButtonRef=i.a.createRef(),e._linkButtonRef=i.a.createRef(),e._handleTouchedItem=function(){var t=(n=e.props.getTouchedItem()).item,n=n.actions;t&&t!==e._itemRef.current&&(t.style.left="0px",n.forEach((function(e){e.style.right="".concat(-80,"px")}))),e.props.setTouchedItem({item:e._itemRef.current,actions:e.state.actionNodes})},e._handleItemMovement=function(t){var n,r=(i=e.state).actionNodes,i=i.opening;t*=r.length;i?0<(n=t)?n=0:Math.abs(n)>80*r.length&&(n=80*-r.length):0<(n=80*-r.length+t)?n=0:n<80*-r.length&&(n=80*-r.length),e._itemRef.current.style.left="".concat(n,"px")},e._handleActionsMovement=function(t){e.state.actionNodes.forEach((function(n,r){var i=t*(r+1);(r=80*r)<(i=e.state.opening?Math.abs(i)-80:r-i)?i=r:i<-80&&(i=-80),n.style.right="".concat(i,"px")}))},e._setItemToExtremePosition=function(){var t=(n=e.state).actionNodes,n=n.swipeDirection;e._itemRef.current&&(t=n===Zc?80*-t.length:0,e._itemRef.current.style.left="".concat(t,"px"))},e._setActionsToExtremePosition=function(){var t=e.state,n=t.actionNodes,r=t.swipeDirection;n.forEach((function(e,t){t=r===Zc?80*t:-80,e.style.right="".concat(t,"px")}))},e._onOnlyButtonClick=function(t){var n=(r=e.props).item,r=r.selectOnlyCurrentItem;t.stopPropagation(),r(n)},e._onItemClick=function(){return e.props.onItemClick(e.props.item)},e._onTouchStart=function(t){e._handleTouchedItem(),e.setState({startX:t.nativeEvent.touches[0].clientX,opening:0===e.prevLeft})},e._onTouchMove=function(t){var n=t.nativeEvent.touches[0].clientX-e.state.startX;t=e.state.deltaX>n?Zc:"right";e.state.opening&&0<n||(e._handleItemMovement(n),e._handleActionsMovement(n)),e.setState({deltaX:n,swipeDirection:t})},e._onTouchEnd=function(){var t=e.state.deltaX;e.setState({startX:0,deltaX:0,opening:!1},(function(){0!==t&&(e._setItemToExtremePosition(),e._setActionsToExtremePosition())}))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=[];this._linkButtonRef.current&&e.push(this._linkButtonRef.current),this._onlyButtonRef.current&&e.push(this._onlyButtonRef.current),this.setState({actionNodes:e})}},{key:"height",get:function(){if(this._itemRef.current)return this._itemRef.current.getBoundingClientRect().height}},{key:"prevLeft",get:function(){return this._itemRef.current&&this._itemRef.current.style.left?parseFloat(this._itemRef.current.style.left):0}},{key:"_renderItemIcon",value:function(){var e=(n=this.props).showItemIcon,t=n.showItemMeta,n=n.item.icon;return e&&n?i.a.createElement("div",{className:Xc("icon",{small:!t,large:t})},n):null}},{key:"_renderItemInfo",value:function(){var e=(r=(o=this.props).item).title,t=r.meta,n=r.hint,r=o.showItemMeta,o=Wc(e);return i.a.createElement("div",{className:Xc("info")},i.a.createElement("div",{className:Xc("title",{secondary:""===e||null===e}),title:null!=n?n:"string"==typeof o&&o||""},o),r&&t&&i.a.createElement("div",{className:Xc("meta"),title:t},t))}},{key:"_renderOnlyButton",value:function(){var e=(a=this.props).item.value,t=(o=void 0===(o=a.selectedCurrentItem)?{}:o).value,n=a.selectType,r=a.mobile,o=a.style,a=this.state.deltaX;return"multiple"!==n?null:(e=_c(t===e?"item_except":"item_only"),r?i.a.createElement("div",{ref:this._onlyButtonRef,className:Xc("only-btn",{mobile:!0,"with-transition":0===a}),style:{top:o.top,height:this.height},onClick:this._onOnlyButtonClick},e):i.a.createElement(ge,{view:"clear",size:"s",className:Xc("only-btn"),onClick:this._onOnlyButtonClick},e))}},{key:"_renderExternalUrl",value:function(){var e=(r=this.props).item.url,t=r.mobile,n=r.style,r=this.state.deltaX;return e?t?i.a.createElement("div",{ref:this._linkButtonRef,className:Xc("ext-link",{mobile:!0,"with-transition":0===r}),style:{top:n.top,height:this.height},onClick:function(){return window.open(e,"_blank")}},i.a.createElement(he,{data:qc})):i.a.createElement(ge,{view:"clear",size:"s",href:e,target:"_blank",onClick:function(e){return e.stopPropagation()},className:Xc("ext-link")},i.a.createElement(he,{data:qc})):null}},{key:"_renderTickIcon",value:function(){var e=this.props.mobile?14:10;return i.a.createElement("div",{className:Xc("tick-wrap")},i.a.createElement(he,{data:Yc,className:Xc("tick"),width:e,height:e}))}},{key:"render",value:function(){var e=(h=(u=this.props).item).value,t=h.disabled,n=h.modifier,r=h.meta,o=u.selectType,a=u.showItemMeta,s=u.isSelected,l=u.mobile,c=u.style,u=(h=this.state).actionNodes,h=h.deltaX;o="multiple"===o,u=l&&u.length,t={disabled:t,selected:s,multiple:o},p()(t,n,Boolean(n)),p()(t,"show-meta",Boolean(a&&r)),p()(t,"with-transition",0===h),t=t;return i.a.createElement("div",{className:Kc()},i.a.createElement("div",{ref:this._itemRef,className:Xc(t),style:c,"data-value":e,onClick:this._onItemClick,onTouchStart:u?this._onTouchStart:void 0,onTouchMove:u?this._onTouchMove:void 0,onTouchEnd:u?this._onTouchEnd:void 0},this._renderItemIcon(),this._renderItemInfo(),!l&&this._renderOnlyButton(),!l&&this._renderExternalUrl(),s&&o&&this._renderTickIcon()),l&&this._renderOnlyButton(),l&&this._renderExternalUrl())}}]),n}(i.a.PureComponent),$c=(n(793),ie()("yc-select-items")),Jc=function(e){X()(n,e);var t=ss()(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={items:[],touchedItem:{},minHeight:void 0,isAddingUserItem:!1,isFetchingNextItems:!1,hasItems:!1},e.addedItemsCount=0,e.ref=i.a.createRef(),e.listRef=i.a.createRef(),e.observer=null,e.getTouchedItem=function(){return e.state.touchedItem},e.setTouchedItem=function(t){e.setState({touchedItem:t})},e._onResize=function(){var t;!e.ref.current||e.state.minHeight<(t=e.ref.current.getBoundingClientRect().height)&&e.setState({minHeight:t})},e._getItemHeight=function(){var t=e.props,n=t.showItemMeta;return t.mobile?n?60:40:n?48:28},e._getItemSize=function(t){var n=e.items,r=e._getItemHeight();return n[t]&&n[t].groupTitle?21:r},e._fetchNextItems=$()(ee.a.mark((function t(){var n;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.fetchItems,e.setState({isFetchingNextItems:!0}),t.next=4,n();case 4:e.setState({isFetchingNextItems:!1});case 5:case"end":return t.stop()}}),t)}))),e._addUserItem=$()(ee.a.mark((function t(){var n,r;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.inputValue,r=r.addNewItem,e.setState({isAddingUserItem:!0}),t.next=4,r(n);case 4:e.setState({isAddingUserItem:!1});case 5:case"end":return t.stop()}}),t)}))),e._onAddButtonClick=function(t){t.stopPropagation(),e._addUserItem()},e._onAutosizerListScroll=function(t){var n=t.scrollOffset;(t=e.props.setAllowHideOnContentScroll)&&t(0===n)},e._renderItem=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=e.props.innerValue.has(t.value);return n.left&&delete n.left,i.a.createElement(Qc,Object.assign({},e.props,{key:t.key||t.value,style:n,item:t,isSelected:r,getTouchedItem:e.getTouchedItem,setTouchedItem:e.setTouchedItem}))},e._renderGroupTitle=function(e){return i.a.createElement("div",{style:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},key:e,className:$c("group-title")},e)},e._itemRenderer=function(t){var n=t.index,r=t.style,o=e.state.isFetchingNextItems,a=e.items;t=a[n];return n===a.length&&o?i.a.createElement("div",{className:$c("loader"),style:r},i.a.createElement(Ql,{size:"s"})):t?t.groupTitle?e._renderGroupTitle(t.groupTitle,r):e._renderItem(t,r):null},e._onItemsRendered=function(t){var n=t.visibleStopIndex,r=e.props.showMoreItems,i=(o=e.state).items,o=(t=o.isFetchingNextItems,Math.round(e.addedItemsCount/3));r&&!t&&i.length-n<o&&e._fetchNextItems()},e}return q()(n,[{key:"componentDidMount",value:function(){this.addedItemsCount=this.state.items.length,this._setPopupWidth()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.isDynamic,r=this.state.isFetchingNextItems,i=this.listRef.current;(e.innerValue!==this.props.innerValue&&i||r&&i)&&i.forceUpdate(),e.inputValue&&!this.props.inputValue&&n&&i&&i.scrollTo(0),t.items.length!==this.state.items.length&&(this.addedItemsCount=t.items.length>this.state.items.length?this.state.items.length:this.state.items.length-t.items.length),e.showItemMeta!==this.props.showItemMeta&&i&&i.resetAfterIndex(0),e.errorContent&&!this.props.errorContent&&this._setPopupWidth()}},{key:"componentWillUnmount",value:function(){this._removeObserver()}},{key:"items",get:function(){var e=this.props.isItemsGrouped,t=this.state.items;return e&&(t=[],this.state.items.forEach((function(e){t.push({groupTitle:e.groupTitle}),t=t.concat(e.items)}))),t}},{key:"_addObserver",value:function(){this.observer=new MutationObserver(this._onResize),this.observer.observe(this.ref.current,{subtree:!0,childList:!0})}},{key:"_setPopupWidth",value:function(){var e;this.ref.current&&(e=this.ref.current.getBoundingClientRect().width,this.props.setPopupWidth(e+this._getScrollbarWidth()),this.props.mobile&&this._addObserver())}},{key:"_removeObserver",value:function(){this.observer&&this.observer.disconnect()}},{key:"_getScrollbarWidth",value:function(){if(!this.ref.current)return 0;var e=-1!==(t=navigator.userAgent).indexOf("Firefox")&&3.6<=parseFloat(t.substring(t.indexOf("Firefox")+8))?"Firefox":-1!==t.indexOf("Safari")&&-1!==t.indexOf("Version")&&5<=parseFloat(t.substring(t.indexOf("Version")+8).split(" ")[0])?"Safari":"Good Browser",t=0;return"Firefox"==e||"Safari"==e?this.ref.current.offsetWidth-this.ref.current.clientWidth:t}},{key:"_renderItemsWithoutVirtualized",value:function(){var e=this,t=this.props.isItemsGrouped,n=this.state.items;return t?n.map((function(t){var n=t.groupTitle,r=t.items;return n||r?(n=e._renderGroupTitle(n),(r=r.map((function(t){return e._renderItem(t)}))).length?[n].concat(J()(r)):null):e._renderItem(t)})):n.map((function(t){return e._renderItem(t)}))}},{key:"render",value:function(){var e=this,t=(b=this.props).virtualizeThreshold,n=b.inputValue,r=b.showSearch,o=b.showApply,a=b.isDynamic,s=b.showMoreItems,l=b.selectedItemsPopup,c=b.mobile,u=b.addNewItem,h=b.fetchItems,d=b.isFetchingItems,f=b.isItemsGrouped,p=b.fetchError,m=b.itemsListTestAnchor,v=b.errorContent,g=(C=this.state).minHeight,y=C.hasItems,b=C.isAddingUserItem,C=C.isFetchingNextItems,w=this.items;if(!y)return null;if(d&&!C)return i.a.createElement("div",{ref:this.ref,className:$c("loader"),style:{minHeight:g}},i.a.createElement(Ql,{size:"s"}));if(p||v){var E=(C=this.props).onFetchErrorDetails;C=C.fetchErrorDetailsTitle;return i.a.createElement("div",{ref:this.ref,className:$c("prompt"),style:{minHeight:g}},v||i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,_c("items_fetch_error")),i.a.createElement("div",{className:$c("buttons")},i.a.createElement(ge,{disabled:b,className:$c("prompt-button",{retry:!0}),onClick:h},_c("refresh_button_text")),E&&i.a.createElement(ge,{view:"flat",className:$c("prompt-button"),onClick:function(){return E(p)}},C||_c("error_details_button_text")))))}if(a&&!n&&!w.length)return i.a.createElement("div",{ref:this.ref,className:$c("prompt"),style:{minHeight:g}},i.a.createElement("span",null,_c("items_prompt")));if(!w.length||f&&w.every((function(e){return e.items&&!e.items.length})))return i.a.createElement("div",{ref:this.ref,className:$c("prompt"),style:{minHeight:g}},i.a.createElement("span",null,_c("items_not_found",{inputValue:n})),u&&!f&&i.a.createElement(ge,{disabled:b,className:$c("prompt-button"),onClick:this._onAddButtonClick},_c("items_add_new")));if(c={"with-search":!l&&r,"with-selected-title":l,"with-apply-button":o,grouped:f,mobile:c},!a&&w.length<t)return c["without-virtualized"]=!0,i.a.createElement("div",{ref:this.ref,className:$c(c),style:{minHeight:g},"data-qa":m},this._renderItemsWithoutVirtualized());var S=this._getItemHeight(),O=s?w.length+1:w.length;s=1===w.length?8:4;return i.a.createElement("div",{ref:this.ref,className:$c(c),style:{minHeight:g,height:O*S+s},"data-qa":m},i.a.createElement(Nc.a,null,(function(t){var n=t.width;t=t.height;return i.a.createElement(Uc,{ref:e.listRef,style:{overflowX:"hidden"},width:n,height:t,itemSize:e._getItemSize,itemData:w,itemCount:O,overscanCount:5,estimatedItemSize:S,onItemsRendered:e._onItemsRendered,onScroll:e._onAutosizerListScroll},e._itemRenderer)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return e.visible&&(n.items=e.selectedItemsPopup?e.items:e.items.filter((function(e){return!e.missing})),t.hasItems||(n.hasItems=!0)),0<Object.keys(n).length?n:null}}]),n}(i.a.PureComponent);function eu(e){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:16,height:16},e),r.createElement("path",{stroke:"currentColor",fill:"none",d:"M3 6l5 5 5-5"}))}function tu(e){return ru(p()({},e,!0)).split(" ")[1]}function nu(e){var t=e.items,n=e.isItemsGrouped,r=e.innerValue;return n?lc()(t,(function(e){return e.items.filter((function(e){return r.has(e.value)}))})):t.filter((function(e){return r.has(e.value)}))}Jc.defaultProps={showMoreItems:!1},n(791);var ru=ie()("yc-select"),iu=ie()("yc-select-control"),ou=ie()("yc-select-action"),au=ie()("yc-select-popup"),su=ie()("yc-select-mobile-modal"),lu=["bottom-start","bottom-end","top-start","top-end"],cu=function(e){X()(n,e);var t=ss()(n);function n(e){var r;W()(this,n),(r=t.call(this,e))._updateControlWidth=cc()((function(){var e;r._isMounted&&(e=Math.ceil(r.controlRef.current.getBoundingClientRect().width),r.state.controlWidth!==e&&r.setState({controlWidth:e}))}),33),r.selectItem=function(e){var t=r.props.allowEmptyValue,n=new Set(r.state.innerValue);e=t&&n.has(e.value)?new Set:new Set([e.value]);r.setState({innerValue:e,showMainPopup:!1},(function(){r._onUpdate(),r._onOpenChange({open:!1})}))},r.selectItems=function(e){var t=r.props.getItems,n=r.state.items,i=new Set(r.state.innerValue);i.has(e.value)?i.delete(e.value):i.add(e.value),e={innerValue:i,selectedCurrentItem:void 0},t&&(e.selectItems=J()(new Set([].concat(J()(r.state.selectItems),J()(r.state.selectedPopupItems),J()(n)))).filter((function(e){return i.has(e.value)}))),r.setState(e,r._beforeOnUpdate)},r.onSingleSearchButtonClick=function(){r.setState({innerValue:new Set,showMainPopup:!1},r._onUpdate)},r.onMultipleSearchButtonClick=function(){var e=r.props.getItems,t=r.state,n=t.items,i=t.shownItems,o={},a=t.isItemsGrouped?new Set(lc()(i,(function(e){return e.items.filter((function(e){return!e.disabled})).map((function(e){return e.value}))}))):new Set(i.filter((function(e){return!e.disabled&&!e.missing})).map((function(e){return e.value}))),s=new Set([].concat(J()(r.state.innerValue),J()(a)));s.size===r.state.innerValue.size&&(s=new Set(J()(r.state.innerValue).filter((function(e){return!a.has(e)})))),o.innerValue=s,e&&(n=new Set([].concat(J()(n),J()(r.state.selectedPopupItems),J()(r.state.selectItems||[]))),o.selectItems=J()(n).filter((function(e){return s.has(e.value)}))),r.setState(o,r._beforeOnUpdate)},r.selectOnlyCurrentItem=function(e){var t,n=r.props.getItems,i=(u=r.state).items,o=(c=void 0===(c=u.selectedCurrentItem)?{}:c).value,a=u.shownItems,s=u.selectedPopupItems,l=u.showSelectedPopup,c=u.isItemsGrouped,u={selectedCurrentItem:void 0};e.value===o?(a=l?s:a,t=c?new Set(lc()(a,(function(t){return t.items.filter((function(t){return!t.disabled&&t.value!==e.value})).map((function(e){return e.value}))}))):new Set(a.filter((function(t){return!t.disabled&&t.value!==e.value})).map((function(e){return e.value}))),u.innerValue=t,n&&(i=new Set([].concat(J()(i),J()(r.state.selectedPopupItems))),u.selectItems=J()(i).filter((function(e){return t.has(e.value)})))):(u.innerValue=new Set([e.value]),u.selectedCurrentItem=e,n&&(u.selectItems=[e])),r.setState(u,r._beforeOnUpdate)},r.addNewItem=function(){var e=$()(ee.a.mark((function e(t){var n,i;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.props,n=i.getItems,i=i.addItem,e.next=3,i(t);case 3:n?r._onInputUpdateDynamic(t):r._onInputUpdateStatic(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.setPopupWidth=function(e){r.setState({popupWidth:e})},r.setAllowHideOnContentScroll=function(e){r.setState({allowHideOnContentScroll:e})},r._handleSelectorScroll=sc()((function(e){e=(e.target||{}).scrollTop,r._publishEvent({eventId:"selector-scroll",meta:{scrollTop:e}})}),200),r._initItems=$()(ee.a.mark((function e(){var t,i,o,a,s,l,c,u,h,d,f;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=r.props,t=d.value,i=d.initialItems,o=d.showMissingItems,a=r.state.initialNextPageToken,f=new Set(Array.isArray(t)?t.filter(Boolean):[t]),e.next=5,r.props.getItems({exactKeys:J()(f.values())});case 5:h=e.sent,s=h.items,l=h.nextPageToken,u=c=s,!i||l!==a&&a||(c=uc()(r.state.items,s),u=c),d=n.getMissingItems(s,t,o),f=n.getInnerValueState(r.props,d.length?hc()(s.concat(d),"value"):s),h=f.innerValue,d=f.singleSelectItem,f=f.titles,r.setState({items:c,shownItems:u,selectItems:s,innerValue:h,titles:f,singleSelectItem:d,nextPageToken:l,initialNextPageToken:l,isInitPending:!1});case 14:case"end":return e.stop()}}),e)}))),r._fetchItems=$()(ee.a.mark((function e(){var t,n,i,o,a,s;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props,t=n.getItems,s=n.itemsPageSize,t)return o=r.state,n=o.inputValue,i=o.nextPageToken,o=void 0===(o=o.selectItems)?[]:o,r.setState({isFetchingItems:!0},r.popupRef.current&&r.popupRef.current.forceUpdate),e.prev=4,r.fetchCounter+=1,e.next=8,t({searchPattern:n,itemsPageSize:s,nextPageToken:i});e.next=24;break;case 8:if(a=e.sent,--r.fetchCounter,0<r.fetchCounter)return r.setState({fetchError:null,isFetchingItems:!0},r.popupRef.current&&r.popupRef.current.forceUpdate),e.abrupt("return");e.next=13;break;case 13:s=uc()(i?r.state.items.concat(a.items):a.items,o),r.setState({items:s,shownItems:s,nextPageToken:a.nextPageToken,fetchError:null,isFetchingItems:!1},r.popupRef.current&&r.popupRef.current.forceUpdate),e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(4),--r.fetchCounter,0<r.fetchCounter)return r.setState({fetchError:null,isFetchingItems:!0}),e.abrupt("return");e.next=23;break;case 23:r.setState({fetchError:e.t0,isFetchingItems:!1});case 24:case"end":return e.stop()}}),e,null,[[4,17]])}))),r._getPreviousValue=function(){var e=(i=r.props).value,t=i.allowNullableValues,i=(o=r.state).items,o=o.selectItems;o=hc()(i.concat(o),"value");return{innerValue:t=n.getInnerValue(e,t),titles:n.getTitles(o,t)}},r._onInputUpdateStatic=function(e){var t,n=r.props.showItemMeta,i=(o=r.state).items,o=o.isItemsGrouped;i=e?(t=Vc(e),o?i.map((function(e){var r=e.items.filter((function(e){return t.test(e.title)||n&&t.test(e.meta)}));return{groupTitle:e.groupTitle,items:r}})).filter((function(e){return e.items.length})):i.filter((function(e){return t.test(e.title)||n&&t.test(e.meta)}))):J()(i),r.setState({shownItems:i,inputValue:e})},r._onInputUpdateDynamic=function(e){var t,n=r.props.initialItems;e?(t=r.state.nextPageToken,r.setState({inputValue:e,prevInputValue:r.state.inputValue,nextPageToken:e===r.state.inputValue?t:void 0,isFetchingItems:!0},(function(){r.debouncedFetchItems&&r.debouncedFetchItems.cancel(),r.debouncedFetchItems=sc()(r._fetchItems,350),r.debouncedFetchItems(),r.popupRef.current&&r.popupRef.current.forceUpdate()}))):r.setState({items:n||[],shownItems:n||[],inputValue:"",nextPageToken:r.state.initialNextPageToken,fetchError:!1,isFetchingItems:!1},(function(){r.popupRef.current&&r.popupRef.current.forceUpdate(),r.debouncedFetchItems&&r.debouncedFetchItems.cancel()}))},r._onBadgeClick=function(e){var t=(h=r.props).getItems,n=h.showApply,i=h.applyOnOutsideClick,o=h.loadingItems,a=(d=r.state).items,s=d.innerValue,l=d.showSelectedPopup,c=d.selectItems,u=d.isItemsGrouped,h=d.isControlClicked,d=d.showMainPopup;if(e.target===r.badgeRef.current){var f={showSelectedPopup:!l,showMainPopup:!1};if(o)return f={showMainPopup:!d,showSelectedPopup:!1},void r.setState(f);(f=n&&!i?oc()(oc()({},f),r._getPreviousValue()):f).selectedPopupItems=t?hc()([].concat(J()(a.filter((function(e){return(f.innerValue||s).has(e.value)}))),J()(c)),"value"):u?a.map((function(e){var t=e.items.filter((function(e){return(f.innerValue||s).has(e.value)}));return{groupTitle:e.groupTitle,items:t}})):a.filter((function(e){return(f.innerValue||s).has(e.value)})),h||(f.isControlClicked=!0),d||r._onOpenChange({open:f.showSelectedPopup}),r.setState(f)}},r._onControlClick=function(e){var t=(s=r.state).showMainPopup,n=s.isControlClicked,i=s.showSelectedPopup,o=r.props,a=o.showApply,s=o.applyOnOutsideClick;o.disabled||e.target===r.badgeRef.current||(e={showMainPopup:!t,showSelectedPopup:!1},t&&a&&(s?r._onUpdate({isOutsideClick:!0}):e=oc()(oc()({},e),r._getPreviousValue())),n||(e.isControlClicked=!0),i||r._onOpenChange({open:e.showMainPopup}),r.setState(e))},r._onControlKeyPress=function(e){"Enter"!==e.nativeEvent.code&&"Space"!==e.nativeEvent.code||(r._onControlClick(e),e.preventDefault())},r._onApplyClick=function(){r._onUpdate(),r.setState({showMainPopup:!1,showSelectedPopup:!1})},r._onUpdate=function(){var e,t,i=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).isOutsideClick,o=(l=r.props).type,a=l.allowNullableValues,s=l.onUpdate,l=r.state.innerValue;l=J()(l);1<s.length&&(t=r._getOutputItems()),o===n.SINGLE?(o=a?void 0:null,e=(a?fc.a:Gc)(l[0])?o:l[0],t=t?t[0]:o):e=l,s(e,{items:t,isOutsideClick:i})},r._onOutsideMainPopupClick=function(){var e=(n=r.props).showApply,t=n.applyOnOutsideClick,n=(i=r.state).shownItems,i=i.isItemsGrouped?n.every((function(e){return e.items&&!e.items.length})):!n.length;n={showMainPopup:!1};e&&!i&&(t?r._onUpdate({isOutsideClick:!0}):n=oc()(oc()({},n),r._getPreviousValue())),r.setState(n),r._onOpenChange({open:n.showMainPopup})},r._onOutsideSelectedItemsPopupClick=function(){var e=(n=r.props).showApply,t=n.applyOnOutsideClick,n=(i=r.state).selectedPopupItems,i=i.isItemsGrouped?n.every((function(e){return e.items&&!e.items.length})):!n.length;n={showSelectedPopup:!1};e&&!i&&(t?r._onUpdate({isOutsideClick:!0}):n=oc()(oc()({},n),r._getPreviousValue())),r.setState(n),r._onOpenChange({open:n.showSelectedPopup})},r._onOpenChange=function(e){var t=r.props.onOpenChange;t&&"function"==typeof t&&t(e)};var o=(m=r.props).type,a=m.value,s=m.showItemIcon,l=m.showMissingItems,c=m.allowNullableValues,u=m.getItems,h=m.initialItems,d=m.controlTestAnchor;r.controlRef=i.a.createRef(),r.badgeRef=i.a.createRef(),r.searchRef=i.a.createRef(),r.popupRef=i.a.createRef(),r.selectorRef=i.a.createRef(),r._publishEvent=fe.withEventPublisher("select",d),r.fetchCounter=0;var f,p=[],m=(e=[],!1);d=new Set;return!u||r.isEmpty()&&!h?u||(p=n.getMissingItems(r.props.items,a,l).concat(r.props.items||[]),d=n.getInnerValue(a,c),e=n.getTitles(p,d)):(p=n.getMissingItems(h,a,l).concat(h||[]),m=!0,d=n.getInnerValue(a,c)),o===n.SINGLE&&s&&(f=n.getSingleSelectedItem(p,d)),r.state={items:p,titles:e,innerValue:d,isInitPending:m,singleSelectItem:f,prevPropsItems:p,prevPropsValue:a,shownItems:p,selectedPopupItems:[],selectItems:[],inputValue:"",showMainPopup:!1,showSelectedPopup:!1,isFetchingItems:!1,isControlClicked:!1,isItemsGrouped:n.isItemsGrouped(p),allowHideOnContentScroll:!1,fetchError:null},r}return q()(n,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,setTimeout((function(){e._updateControlWidth()}),0),this.state.isInitPending&&this._initItems()}},{key:"componentDidUpdate",value:function(e){var t=this.props.controlWidth;if(!e.getItems&&this.props.getItems||e.getItems&&this.props.getItems&&!dc()(e.initialItems,this.props.initialItems)){var r=(h=this.props).type,i=h.value,o=h.showItemIcon,a=h.showMissingItems,s=h.allowNullableValues,l=h.initialItems;this.fetchCounter=0;var c,u=[],h=(e=!1,new Set);return this.isEmpty()&&!l||(u=n.getMissingItems(l,i,a).concat(l),e=!0,h=n.getInnerValue(i,s)),s=n.getTitles(u,h),r===n.SINGLE&&o&&(c=n.getSingleSelectedItem(u,h)),void this.setState({items:u,titles:s,innerValue:h,isInitPending:e,singleSelectItem:c,prevPropsItems:u,prevPropsValue:i,shownItems:u,inputValue:""})}this.state.showMainPopup&&this.searchRef.current&&this.searchRef.current.focusInput(),this.state.isInitPending&&this._initItems(),t||(this._updateControlWidth(),this.selectorRef.current&&(this.state.showMainPopup?this.selectorRef.current.addEventListener("scroll",this._handleSelectorScroll,!0):this.selectorRef.current.removeEventListener("scroll",this._handleSelectorScroll,!0)))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.selectorRef.current&&this.selectorRef.current.removeEventListener("scroll",this._handleSelectorScroll,!0)}},{key:"isEmpty",value:function(){var e=(t=this.props).type,t=t.value;return e===n.SINGLE?!t:0===(t||[]).filter(Boolean).length}},{key:"_getSearchButtonSettings",value:function(){var e=(i=this.props).type,t=i.allowEmptyValue,r=i.showSelectAll,i=void 0===(o=(a=this.state).shownItems)?[]:o,o=a.isItemsGrouped,a={isCleaning:!0,visible:r};return e===n.SINGLE?(a.visible=Boolean(r&&this.state.innerValue.size&&t),a):i.length?(i=o?new Set(lc()(i,(function(e){return e.items.filter((function(e){return!e.disabled})).map((function(e){return e.value}))}))):new Set(i.filter((function(e){return!e.disabled})).map((function(e){return e.value}))),i=new Set([].concat(J()(this.state.innerValue),J()(i))),a.isCleaning=i.size===this.state.innerValue.size,a):(a.visible=!1,a)}},{key:"_getOutputItems",value:function(){var e=(o=this.state).innerValue,t=o.items,n=o.selectItems,r=o.selectedPopupItems,i=o.showSelectedPopup,o=o.isItemsGrouped;return nu(i?{innerValue:e,isItemsGrouped:o,items:r}:{innerValue:e,isItemsGrouped:o,items:n=hc()(t.concat(n),"value")})}},{key:"_beforeOnUpdate",value:function(){var e=(i=this.props).getItems,t=i.showApply,r=(o=this.state).selectItems,i=o.innerValue,o=this.state.items;e&&(o=J()(new Set(o.concat(r||[])))),t?this.setState({titles:n.getTitles(o,i)}):this._onUpdate()}},{key:"_getPopupMinWidth",value:function(){var e=(i=this.props).controlWidth,t=i.type,r=i.showSearch,i=i.onFetchErrorDetails,o=(i=this.state.fetchError&&i?250:void 0,t=(r={withSearch:r,multiple:t===n.MULTIPLE}).withSearch,r=r.multiple,t&&r?o=200:t?o=170:r&&(o=150),o);return pc()([i,o,e||this.state.controlWidth])}},{key:"_getPopupClassNames",value:function(){var e=(r=this.props).popupClassName,t=r.type,r={search:r.showSearch,multi:t===n.MULTIPLE};t=tu("desktop");return e&&(t+=" "+e),au(r,t)}},{key:"_getPopupStyles",value:function(){var e=(i=this.props).controlWidth,t=i.virtualizeThreshold,n=i.getItems,r=i.errorContent,i=void 0===(o=this.state.shownItems)?[]:o,o={minWidth:this._getPopupMinWidth()};return r||(n||i.length>t||this.props.popupWidth?(e=this.props.popupWidth||e||this.state.controlWidth,o.width=170<e?e:170):this.state.popupWidth&&(o.width=this.state.popupWidth)),o}},{key:"_renderTokens",value:function(){var e,t=this.props.placeholder,r=(o=this.state).titles,o=o.isInitPending;t&&"object"===se()(t)?(e=t.icon,a=t.text):t&&(a=t);var a=o?n.INIT_ITEMS_PLACEHOLDER:a||"—";o=!r.length;return i.a.createElement("div",{className:iu("tokens")},e&&!r.length&&i.a.createElement("div",{className:iu("placeholder-icon")},e),i.a.createElement("span",{className:iu("tokens-text",{empty:o})},o?a:this._renderTitles(r)))}},{key:"_renderTitles",value:function(e){return e.map((function(t,n){return i.a.createElement(i.a.Fragment,{key:n},t,n===e.length-1?"":", ")}))}},{key:"_renderControl",value:function(){var e=(b=this.props).controlWidth,t=b.size,r=b.type,o=b.className,a=b.label,s=b.showArrow,l=b.showItemIcon,c=b.stretched,u=b.disabled,h=b.loading,d=b.renderSwitcher,f=b.switcherClassName,p=b.controlTestAnchor,m=b.errorContent,v=(C=this.state).showMainPopup,g=C.showSelectedPopup,y=C.innerValue,b=C.isInitPending,C=(C=void 0===(C=C.singleSelectItem)?{}:C).icon;return d?i.a.createElement("div",{ref:this.controlRef,className:ru("switcher",f),onClick:this._onControlClick,"data-qa":p},d()):(b={size:t,focused:v||g,stretched:c,disabled:u||b||h,"without-animation":500<(e||this.state.controlWidth),error:Boolean(m)},m={clicked:g,"without-arrow":!s},g=r===n.MULTIPLE,r={},e&&(r.width=e),i.a.createElement("div",{ref:this.controlRef,tabIndex:u?-1:0,className:o?iu(b,o):iu(b),style:r,onClick:this._onControlClick,onKeyPress:this._onControlKeyPress,"data-qa":p},h?i.a.createElement("div",{className:iu("loader")},i.a.createElement(Ql,{size:"s"})):i.a.createElement(i.a.Fragment,null,a&&i.a.createElement("span",{className:iu("label")},a),!g&&l&&C&&i.a.createElement("div",{className:iu("selected-item-icon")},C),this._renderTokens(),g&&Boolean(y.size)&&i.a.createElement("div",{ref:this.badgeRef,className:iu("badge",m),onClick:this._onBadgeClick},y.size)),s&&i.a.createElement("div",{className:iu("arrow",{loading:h})},i.a.createElement(he,{data:eu}))))}},{key:"_renderSearch",value:function(){var e,t=this,r=(c=this.props).controlWidth,o=c.type,a=c.virtualizeThreshold,s=c.getItems,l=(u=this.state).inputValue,c=u.shownItems,u=s?this._onInputUpdateDynamic:this._onInputUpdateStatic;return s||c.length>a||this.props.popupWidth?e=170<(e=this.props.popupWidth||r||this.state.controlWidth)?e:170:this.state.popupWidth&&(e=this.state.popupWidth>this.state.controlWidth?this.state.popupWidth:this.state.controlWidth),i.a.createElement(Tc,{ref:this.searchRef,value:l,width:this.props.popupWidth||e,minWidth:pc()([this._getPopupMinWidth(),r||this.state.controlWidth]),searchButtonSettings:this._getSearchButtonSettings(),onInputUpdate:u,selectAllItems:o===n.MULTIPLE?this.onMultipleSearchButtonClick:this.onSingleSearchButtonClick,onClick:function(){return t._publishEvent({eventId:"search-tap"})}})}},{key:"_renderItems",value:function(){var e=void 0!==(E=(S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).selectedPopup)&&E,t=void 0!==(O=S.mobile)&&O,r=(x=this.props).virtualizeThreshold,o=x.type,a=x.showSearch,s=x.showApply,l=x.showItemIcon,c=x.showItemMeta,u=x.getItems,h=x.addItem,d=x.onFetchErrorDetails,f=x.fetchErrorDetailsTitle,p=x.itemsListTestAnchor,m=x.errorContent,v=(_=this.state).shownItems,g=_.selectedPopupItems,y=_.showMainPopup,b=_.showSelectedPopup,C=_.selectedCurrentItem,w=_.inputValue,E=_.isFetchingItems,S=_.isItemsGrouped,O=_.innerValue,x=_.nextPageToken,_=_.fetchError;t=oc()({innerValue:O,inputValue:w,virtualizeThreshold:r,selectedCurrentItem:C,selectType:o,showSearch:a,showApply:s,showItemIcon:l,showItemMeta:c,isItemsGrouped:S,mobile:t,itemsListTestAnchor:p,onItemClick:o===n.MULTIPLE?this.selectItems:this.selectItem,selectOnlyCurrentItem:this.selectOnlyCurrentItem,setPopupWidth:this.setPopupWidth,errorContent:m},t&&{setAllowHideOnContentScroll:this.setAllowHideOnContentScroll}),t=e?oc()(oc()({},t),{},{items:g,visible:b,selectedItemsPopup:!0}):oc()(oc()({},t),{},{items:v,visible:y,showMoreItems:Boolean(x),isDynamic:Boolean(u),isFetchingItems:E,fetchError:_,onFetchErrorDetails:d,fetchErrorDetailsTitle:f,fetchItems:this._fetchItems,addNewItem:h?this.addNewItem:void 0});return i.a.createElement(Jc,t)}},{key:"_renderApplyButton",value:function(){var e=(s=this.props).type,t=s.showApply,r=(l=this.state).shownItems,o=l.selectedPopupItems,a=l.isItemsGrouped,s=l.showMainPopup,l=l.showSelectedPopup;return e===n.MULTIPLE&&t?(l=!s&&!l,o=s?a?r.every((function(e){return e.items&&!e.items.length})):!r.length:a?o.every((function(e){return e.items&&!e.items.length})):!o.length,i.a.createElement("div",{className:ou()},i.a.createElement(ge,{view:"action",size:"l",width:"max",onClick:this._onApplyClick,disabled:o||l},_c("apply_button_text")))):null}},{key:"_renderPopupContent",value:function(e){var t=e.isMobile,n=(o=this.props).showSearch,r=o.errorContent,o=(e=o.loadingItems,o.itemsLoaderClassName);r=n&&!r&&(t||this.state.popupWidth);return e?i.a.createElement("div",{className:au("loader",{mobile:t},o)},i.a.createElement(Ql,{size:"s"})):i.a.createElement(i.a.Fragment,null,r&&this._renderSearch(),i.a.createElement("div",{ref:this.selectorRef},this._renderItems({mobile:t})),this._renderApplyButton())}},{key:"_renderDesktopContent",value:function(){var e=this.state,t=e.showMainPopup,n=e.showSelectedPopup;return e.isControlClicked?(e=this._getPopupStyles(),i.a.createElement(i.a.Fragment,null,i.a.createElement(kl,{className:this._getPopupClassNames(),style:e,open:t,anchorRef:this.controlRef,placement:lu,onClose:this._onOutsideMainPopupClick},this._renderPopupContent({isMobile:!1})),i.a.createElement(kl,{className:this._getPopupClassNames(),style:e,open:n,anchorRef:this.controlRef,placement:lu,onClose:this._onOutsideSelectedItemsPopupClick},i.a.createElement("div",{className:au("select-title")},_c("selected_popup_title")),this._renderItems({selectedPopup:!0}),this._renderApplyButton()))):null}},{key:"_renderMobileContent",value:function(){var e=this.props.label,t=(r=this.state).showMainPopup,n=r.showSelectedPopup,r=r.allowHideOnContentScroll;return i.a.createElement(i.a.Fragment,null,i.a.createElement(xc,{id:"yc-select-main",title:e,visible:t,contentClassName:su(null,tu("mobile")),allowHideOnContentScroll:r,onClose:this._onOutsideMainPopupClick},this._renderPopupContent({isMobile:!0})),i.a.createElement(xc,{id:"yc-select-selected",title:e,visible:n,contentClassName:su(null,tu("mobile")),allowHideOnContentScroll:r,onClose:this._onOutsideSelectedItemsPopupClick},i.a.createElement("div",{className:au("select-title")},_c("selected_popup_title")),this._renderItems({selectedPopup:!0,mobile:!0}),this._renderApplyButton()))}},{key:"render",value:function(){var e=this;return i.a.createElement(mc.Consumer,null,(function(t){return t=t.mobile,i.a.createElement(i.a.Fragment,null,e._renderControl(),t?e._renderMobileContent():e._renderDesktopContent())}))}}],[{key:"getInnerValue",value:function(e,t){var n=t?fc.a:Gc;return n(e)?new Set:Array.isArray(e)?new Set(e.filter((function(e){return!n(e)}))):new Set([e])}},{key:"getMissingItems",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;if(!(2<arguments.length?arguments[2]:void 0))return[];var n=new Set(e.map((function(e){return e.value})));return(Array.isArray(t)?t:[t]).filter((function(e){return!n.has(e)})).map((function(e){return{value:e,title:e,missing:!0}}))}},{key:"getDerivedStateFromProps",value:function(e,t){var r,i,o,a,s={},l=e.items!==t.prevPropsItems&&!e.getItems;return l&&(i=n.getMissingItems(e.items,e.value,e.showMissingItems).concat(e.items),s.prevPropsItems=e.items,s.items=i,s.isItemsGrouped=n.isItemsGrouped(e.items),t.inputValue?(r=Vc(t.inputValue),s.isItemsGrouped?s.shownItems=e.items.map((function(e){var t=e.items.filter((function(e){return r.test(e.title)}));return{groupTitle:e.groupTitle,items:t}})).filter((function(e){return e.items.length})):s.shownItems=i.filter((function(e){return r.test(e.title)}))):s.shownItems=i),e.value===t.prevPropsValue&&!l||(a=n.getMissingItems(e.getItems?t.items.concat(t.selectItems):e.items,e.value,e.showMissingItems),i=n.isItemsGrouped(e.items)?e.items:a.concat((e.getItems?t:e).items),e.getItems&&(i=hc()(i.concat(t.selectItems),"value")),s.prevPropsValue=e.value,l=n.getInnerValueState(e,i),o=l.innerValue,a=l.singleSelectItem,l=l.titles,Object.assign(s,{innerValue:o,singleSelectItem:a,titles:l}),e.getItems&&(0!==(a=null==(a=e.value)?0:Array.isArray(a)?a.length:1)&&l.length!==a?s.isInitPending=!0:s.selectItems=ac()(t.selectItems,(function(e){return o.has(e.value)}))),e.showMissingItems&&(s.items=i)),0<Object.keys(s).length?s:null}},{key:"getInnerValueState",value:function(e,t){var r=e.value,i=e.type,o=e.showItemIcon,a=e.allowNullableValues;return(e={}).innerValue=n.getInnerValue(r,a),i===n.SINGLE&&o&&(e.singleSelectItem=n.getSingleSelectedItem(t,e.innerValue)),e.titles=n.getTitles(t,e.innerValue),e}},{key:"getTitles",value:function(e,t){return t.size?n.isItemsGrouped(e)?lc()(e,(function(e){return e.items.filter((function(e){return t.has(e.value)})).map((function(e){return e.title}))})):e.filter((function(e){return t.has(e.value)})).map((function(e){return Wc(e.title)})):[]}},{key:"getSingleSelectedItem",value:function(e,t){return n.isItemsGrouped(e)?e.map((function(e){return e.items.find((function(e){return t.has(e.value)}))})).filter(Boolean)[0]:e.find((function(e){return t.has(e.value)}))}},{key:"isItemsGrouped",value:function(e){return!(!e||!e.length)&&Object.prototype.hasOwnProperty.call(e[0],"groupTitle")}}]),n}(i.a.PureComponent);cu.SINGLE="single",cu.MULTIPLE="multiple",cu.INIT_ITEMS_PLACEHOLDER="Fetching initial items...",t={size:"s",itemsPageSize:100,virtualizeThreshold:100,type:cu.SINGLE,items:[],showSearch:!0,showArrow:!0,stretched:!0,showApply:!1,showItemIcon:!1,showItemMeta:!1,showMissingItems:!1,allowEmptyValue:!1,allowNullableValues:!1,showSelectAll:!0,hiding:!1,disabled:!1,loading:!1,applyOnOutsideClick:!0,loadingItems:!1},cu.defaultProps=t;var uu=n(439),hu=n(341),du=n(274),fu=n(275),pu=n(345),mu=n(342),vu=n(343),gu=n(94),yu=(Y=n(230),n.n(Y)),bu=n(566),Cu=(c=n(44),Z=n.n(c),Object(fu.a)(wu,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){-1!==(t=this.getIndex(e,t))&&this.refs[e].splice(t,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(Eu)}}]),wu);function wu(){Object(du.a)(this,wu),Object(gu.a)(this,"refs",{})}function Eu(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function Su(e,t){return Object.keys(e).reduce((function(n,r){return-1===t.indexOf(r)&&(n[r]=e[r]),n}),{})}var Ou={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},xu=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"];return"ms"!==(e=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1])?e&&e.length?e[0].toUpperCase()+e.substr(1):"":"ms"}();function _u(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function ku(e,t){e.style["".concat(xu,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function Tu(e,t){e.style["".concat(xu,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function Nu(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function Pu(e,t,n){return Math.max(e,Math.min(n,t))}function Iu(e){return"px"===e.substr(-2)?parseFloat(e):0}function Ru(e,t){return(t=t.displayName||t.name)?"".concat(e,"(").concat(t,")"):e}function ju(e,t){return{top:(e=e.getBoundingClientRect()).top+t.top,left:e.left+t.left}}function Du(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function Au(e,t,n){if(n=2<arguments.length&&void 0!==n?n:{left:0,top:0},e)return n={left:n.left+e.offsetLeft,top:n.top+e.offsetTop},e.parentNode===t?n:Au(e.parentNode,t,n)}function Lu(e){var t=e.lockOffset,n=e.width,r=e.height,i=t,o=t,a="px";return"string"==typeof t&&(e=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t),yu()(null!==e,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),i=parseFloat(t),o=parseFloat(t),a=e[1]),yu()(isFinite(i)&&isFinite(o),"lockOffset value should be a finite. Given %s",t),"%"===a&&(i=i*n/100,o=o*r/100),{x:i,y:o}}function Mu(e){return e instanceof HTMLElement?(t=window.getComputedStyle(e),n=/(auto|scroll)/,["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))?e:Mu(e.parentNode)):null;var t,n}V=27,C=32,H=37,t=38,Y=39,c=40;var Fu={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Bu(e){return null!=e.sortableHandle}var Hu=(Object(fu.a)(zu,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,i=e.maxTranslate,o=e.width,a=e.height,s={x:0,y:0},l={x:1,y:1},c=(m=this.container).scrollTop,u=m.scrollLeft,h=m.scrollHeight,d=m.scrollWidth,f=m.clientHeight,p=0===c,m=(e=0===u,d-u-m.clientWidth==0);n.y>=i.y-a/2&&h-c-f!=0?(s.y=1,l.y=10*Math.abs((i.y-a/2-n.y)/a)):n.x>=i.x-o/2&&!m?(s.x=1,l.x=10*Math.abs((i.x-o/2-n.x)/o)):n.y<=r.y+a/2&&!p?(s.y=-1,l.y=10*Math.abs((n.y-a/2-r.y)/a)):n.x<=r.x+o/2&&!e&&(s.x=-1,l.x=10*Math.abs((n.x-o/2-r.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===s.x&&0===s.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:l.x*s.x,top:l.y*s.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),zu);function zu(e,t){Object(du.a)(this,zu),this.container=e,this.onScrollCallback=t}var Uu={axis:Z.a.oneOf(["x","y","xy"]),contentWindow:Z.a.any,disableAutoscroll:Z.a.bool,distance:Z.a.number,getContainer:Z.a.func,getHelperDimensions:Z.a.func,helperClass:Z.a.string,helperContainer:Z.a.oneOfType([Z.a.func,"undefined"==typeof HTMLElement?Z.a.any:Z.a.instanceOf(HTMLElement)]),hideSortableGhost:Z.a.bool,keyboardSortingTransitionDuration:Z.a.number,lockAxis:Z.a.string,lockOffset:Z.a.oneOfType([Z.a.number,Z.a.string,Z.a.arrayOf(Z.a.oneOfType([Z.a.number,Z.a.string]))]),lockToContainerEdges:Z.a.bool,onSortEnd:Z.a.func,onSortMove:Z.a.func,onSortOver:Z.a.func,onSortStart:Z.a.func,pressDelay:Z.a.number,pressThreshold:Z.a.number,keyCodes:Z.a.shape({lift:Z.a.arrayOf(Z.a.number),drop:Z.a.arrayOf(Z.a.number),cancel:Z.a.arrayOf(Z.a.number),up:Z.a.arrayOf(Z.a.number),down:Z.a.arrayOf(Z.a.number)}),shouldCancelStart:Z.a.func,transitionDuration:Z.a.number,updateBeforeSortStart:Z.a.func,useDragHandle:Z.a.bool,useWindowAsScrollContainer:Z.a.bool},Vu={lift:[C],drop:[C],cancel:[V],up:[t,H],down:[c,Y]},Wu={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){return{height:(e=e.node).offsetHeight,width:e.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Vu,shouldCancelStart:function(e){return-1!==[Fu.Input,Fu.Textarea,Fu.Select,Fu.Option,Fu.Button].indexOf(e.target.tagName)||!!Nu(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},Gu=Object.keys(Uu),qu=Object(r.createContext)({manager:{}});function Yu(e,t){var n,i=1<arguments.length&&void 0!==t?t:{withRef:!1};return n=r.Component,Object(vu.a)(a,n),Object(fu.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document,n=e.props.contentWindow||e.document.defaultView||window,e.contentWindow="function"==typeof n?n():n,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:Mu(e.container)||e.container,e.autoScroller=new Hu(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return Ou[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return Ou[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t,n=(l=this.props).lockAxis,r=l.lockOffset,i=l.lockToContainerEdges,o=l.transitionDuration,a=void 0===(t=l.keyboardSortingTransitionDuration)?o:t,s=this.manager.isKeySorting,l=e.ignoreTransition;(t={x:(o=Du(e)).x-this.initialOffset.x,y:o.y-this.initialOffset.y}).y-=window.pageYOffset-this.initialWindowScroll.top,t.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=t,i&&(o=(e={height:this.height,lockOffset:r,width:this.width}).height,i=e.width,r=e.lockOffset,e=Array.isArray(r)?r:[r,r],yu()(2===e.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r),e=(r=Object(uu.a)(e,2))[0],r=r[1],e=[Lu({height:o,lockOffset:e,width:i}),Lu({height:o,lockOffset:r,width:i})],r=(o=Object(uu.a)(e,2))[0],i=o[1],e=this.width/2-r.x,o=this.height/2-r.y,r=this.width/2-i.x,i=this.height/2-i.y,t.x=Pu(this.minTranslate.x+e,this.maxTranslate.x-r,t.x),t.y=Pu(this.minTranslate.y+o,this.maxTranslate.y-i,t.y)),"x"===n?t.y=0:"y"===n&&(t.x=0),s&&a&&!l&&Tu(this.helper,a),ku(this.helper,t)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=e.onSortOver,i=this.containerScrollDelta,o=this.windowScrollDelta,a=this.manager.getOrderedRefs(),s=this.offsetEdge.left+this.translate.x+i.left,l=this.offsetEdge.top+this.translate.y+i.top,c=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var h=0,d=a.length;h<d;h++){var f=a[h].node,p=f.sortableInfo.index,m=f.offsetWidth,v=f.offsetHeight,g=this.height>v?v/2:this.height/2,y=this.width>m?m/2:this.width/2,b=c&&p>this.index&&p<=u,C=c&&p<this.index&&u<=p,w={x:0,y:0},E=a[h].edgeOffset;E||(E=Au(f,this.container),a[h].edgeOffset=E,c&&(a[h].boundingClientRect=ju(f,i)));var S=h<a.length-1&&a[h+1];m=0<h&&a[h-1];S&&!S.edgeOffset&&(S.edgeOffset=Au(S.node,this.container),c&&(S.boundingClientRect=ju(S.node,i))),p!==this.index?(t&&Tu(f,t),this.axis.x?this.axis.y?C||p<this.index&&(s+o.left-y<=E.left&&l+o.top<=E.top+g||l+o.top+g<=E.top)?(w.x=this.width+this.marginOffset.x,E.left+w.x>this.containerBoundingRect.width-y&&S&&(w.x=S.edgeOffset.left-E.left,w.y=S.edgeOffset.top-E.top),null===this.newIndex&&(this.newIndex=p)):(b||p>this.index&&(s+o.left+y>=E.left&&l+o.top+g>=E.top||l+o.top+g>=E.top+v))&&(w.x=-(this.width+this.marginOffset.x),E.left+w.x<this.containerBoundingRect.left+y&&m&&(w.x=m.edgeOffset.left-E.left,w.y=m.edgeOffset.top-E.top),this.newIndex=p):b||p>this.index&&s+o.left+y>=E.left?(w.x=-(this.width+this.marginOffset.x),this.newIndex=p):(C||p<this.index&&s+o.left<=E.left+y)&&(w.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=p)):this.axis.y&&(b||p>this.index&&l+o.top+g>=E.top?(w.y=-(this.height+this.marginOffset.y),this.newIndex=p):(C||p<this.index&&l+o.top<=E.top+g)&&(w.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=p))),ku(f,w),a[h].translate=w):n&&_u(this.sortableGhost=f,{opacity:0,visibility:"hidden"})}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=u),e=c?this.prevIndex:u,r&&this.newIndex!==e&&r({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:e,isKeySorting:c,nodes:a,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return yu()(i.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var e;return"function"!=typeof(e=this.props.getContainer)?Object(o.findDOMNode)(this):e(i.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=i.withRef?this.wrappedInstance:null;return Object(r.createElement)(qu.Provider,{value:this.sortableContextValue},Object(r.createElement)(e,Object(nn.a)({ref:t},Su(this.props,Gu))))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),n=t=a,Object(gu.a)(t,"displayName",Ru("sortableList",e)),Object(gu.a)(t,"defaultProps",Wu),Object(gu.a)(t,"propTypes",Uu),n;function a(e){var t;Object(du.a)(this,a),t=Object(pu.a)(this,Object(mu.a)(a).call(this,e)),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"state",{}),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"handleStart",(function(e){var n,r,i=t.props,o=i.distance,a=i.shouldCancelStart;2===e.button||a(e)||(t.touched=!0,t.position=Du(e),(r=Nu(e.target,(function(e){return null!=e.sortableInfo})))&&r.sortableInfo&&t.nodeIsChild(r)&&!t.state.sorting&&(n=t.props.useDragHandle,a=(i=r.sortableInfo).index,r=i.collection,i.disabled||n&&!Nu(e.target,Bu)||(t.manager.active={collection:r,index:a},(a=e).touches&&a.touches.length||a.changedTouches&&a.changedTouches.length||e.target.tagName!==Fu.Anchor||e.preventDefault(),o||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay)))))})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"handleMove",(function(e){var n,r=t.props,i=r.distance,o=r.pressThreshold;t.state.sorting||!t.touched||t._awaitingUpdateBeforeSortStart||(n=Du(e),r={x:t.position.x-n.x,y:t.position.y-n.y},n=Math.abs(r.x)+Math.abs(r.y),t.delta=r,i||o&&!(o<=n)?i&&i<=n&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0)))})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"handlePress",(function(e){try{var n=t.manager.getActive(),r=function(){if(n){var r,i=function(){var n,r,i=d.sortableInfo.index,c=(g=d,{bottom:Iu((g=window.getComputedStyle(g)).marginBottom),left:Iu(g.marginLeft),right:Iu(g.marginRight),top:Iu(g.marginTop)}),m=(r=t.container,"grid"===(r=window.getComputedStyle(r)).display?{x:Iu(r.gridColumnGap),y:Iu(r.gridRowGap)}:{x:0,y:0}),v=t.scrollContainer.getBoundingClientRect(),g=a({index:i,node:d,collection:f});t.node=d,t.margin=c,t.gridGap=m,t.width=g.width,t.height=g.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=d.getBoundingClientRect(),t.containerBoundingRect=v,t.index=i,t.newIndex=i,t.axis={x:0<=o.indexOf("x"),y:0<=o.indexOf("y")},t.offsetEdge=Au(d,t.container),t.initialOffset=Du(p?Object(hu.a)({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((r="input, textarea, select, canvas, [contenteditable]",n=(m=d).querySelectorAll(r),m=m.cloneNode(!0),Object(bu.a)(m.querySelectorAll(r)).forEach((function(e,t){"file"!==e.type&&(e.value=n[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===Fu.Canvas&&0<n[t].width&&0<n[t].height&&e.getContext("2d").drawImage(n[t],0,0)})),m)),_u(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-c.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-c.top,"px"),width:"".concat(t.width,"px")}),p&&t.helper.focus(),l&&_u(t.sortableGhost=d,{opacity:0,visibility:"hidden"}),t.minTranslate={},t.maxTranslate={},p?(r=(g=h?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect).top,m=g.left,c=g.width,g=r+g.height,c=m+c,t.axis.x&&(t.minTranslate.x=m-t.boundingClientRect.left,t.maxTranslate.x=c-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=r-t.boundingClientRect.top,t.maxTranslate.y=g-(t.boundingClientRect.top+t.height))):(t.axis.x&&(t.minTranslate.x=(h?0:v.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(h?t.contentWindow.innerWidth:v.left+v.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(h?0:v.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(h?t.contentWindow.innerHeight:v.top+v.height)-t.boundingClientRect.top-t.height/2)),s&&s.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?e.target:t.contentWindow,p?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(Ou.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),Ou.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:i}),u&&u({node:d,index:i,collection:f,isKeySorting:p,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),p&&t.keyMove(0)},o=(r=t.props).axis,a=r.getHelperDimensions,s=r.helperClass,l=r.hideSortableGhost,c=r.updateBeforeSortStart,u=r.onSortStart,h=r.useWindowAsScrollContainer,d=n.node,f=n.collection,p=t.manager.isKeySorting;return(r=function(){if("function"==typeof c){t._awaitingUpdateBeforeSortStart=!0;var n=function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}((function(){var t=d.sortableInfo.index;return Promise.resolve(c({collection:f,index:t,node:d,isKeySorting:p},e)).then((function(){}))}),(function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n}));if(n&&n.then)return n.then((function(){}))}}())&&r.then?r.then(i):i()}}();return Promise.resolve(r&&r.then?r.then((function(){})):void 0)}catch(r){return Promise.reject(r)}})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"handleSortMove",(function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.cancelable&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"handleSortEnd",(function(e){var n=(i=t.props).hideSortableGhost,r=i.onSortEnd,i=(o=t.manager).active.collection,o=o.isKeySorting,a=t.manager.getOrderedRefs();t.listenerNode&&(o?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(Ou.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),Ou.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),n&&t.sortableGhost&&_u(t.sortableGhost,{opacity:"",visibility:""});for(var s=0,l=a.length;s<l;s++){var c=a[s],u=c.node;c.edgeOffset=null,ku(u,c.boundingClientRect=null),Tu(u,null),c.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof r&&r({collection:i,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:o,nodes:a},e),t.touched=!1})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var r=Object(hu.a)({},t.translate);e=0,n=0;return t.axis.x&&(r.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),e=t.translate.x-r.x),t.axis.y&&(r.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),n=t.translate.y-r.y),t.translate=r,ku(t.helper,t.translate),t.scrollContainer.scrollLeft+=e,void(t.scrollContainer.scrollTop+=n)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"handleKeyDown",(function(e){var n=e.keyCode,r=(i=t.props).shouldCancelStart,i=void 0===(i=i.keyCodes)?{}:i;i=Object(hu.a)({},Vu,i);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||i.lift.includes(n)&&!r(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),i.lift.includes(n)&&!t.manager.active?t.keyLift(e):i.drop.includes(n)&&t.manager.active?t.keyDrop(e):i.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):i.up.includes(n)?t.keyMove(-1):i.down.includes(n)&&t.keyMove(1))})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"keyLift",(function(e){var n=e.target,r=(i=Nu(n,(function(e){return null!=e.sortableInfo})).sortableInfo).index,i=i.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:r,collection:i},t.handlePress(e)})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"keyMove",(function(e){var n,r,i,o,a=t.manager.getOrderedRefs(),s=a[a.length-1].node.sortableInfo.index,l=t.newIndex+e,c=t.newIndex;l<0||s<l||(t.prevIndex=c,t.newIndex=l,r=t.newIndex,i=t.prevIndex,o=t.index,n=r<o&&i<r?r-1:o<r&&r<i?r+1:r,o=(s=a.find((function(e){return e.node.sortableInfo.index===n}))).node,i=t.containerScrollDelta,r=s.boundingClientRect||ju(o,i),a=s.translate||{x:0,y:0},s=r.top+a.y-i.top,i=r.left+a.x-i.left,l=(c=c<l)&&t.axis.x?o.offsetWidth-t.width:0,o=c&&t.axis.y?o.offsetHeight-t.height:0,t.handleSortMove({pageX:i+l,pageY:s+o,ignoreTransition:0===e}))})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(t)),"isValidSortingTarget",(function(e){var n=t.props.useDragHandle,r=e.target;return(e=Nu(r,(function(e){return null!=e.sortableInfo})))&&e.sortableInfo&&!e.sortableInfo.disabled&&(n?Bu(r):r.sortableInfo)}));var n=new Cu;return e=e,yu()(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time."),t.manager=n,t.wrappedInstance=Object(r.createRef)(),t.sortableContextValue={manager:n},t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}}var Xu={index:Z.a.number.isRequired,collection:Z.a.oneOfType([Z.a.number,Z.a.string]),disabled:Z.a.bool},Ku=Object.keys(Xu);function Zu(e){return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 10",width:"6",height:"10",fill:"currentColor"},e),i.a.createElement("path",{d:"M0 0h2v2H0zm0 4h2v2H0zm0 4h2v2H0zm4-8h2v2H4zm0 4h2v2H4zm0 4h2v2H4z"}))}function Qu(e){return String(e)}var $u=oe("list"),Ju=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).ref=i.a.createRef(),e.getRef=function(){return e.ref},e.onClick=function(){var t,n;return null===(n=(t=e.props).onClick)||void 0===n?void 0:n.call(t,e.props.item,e.props.itemIndex)},e.onMouseMove=function(){var t,n;return null===(n=(t=e.props).onMouseMove)||void 0===n?void 0:n.call(t,e.props.itemIndex)},e}return q()(n,[{key:"render",value:function(){var e=(s=this.props).item,t=s.style,n=s.sortable,r=s.sortHandleAlign,o=s.itemClassName,a=s.selected,s=s.active;return i.a.createElement("div",{className:$u("item",{sortable:n,active:s,selected:a,inactive:e.disabled,"sort-handle-align":r},o),style:t,onClick:this.onClick,onMouseMove:this.onMouseMove,ref:this.ref},this.renderSortIcon(),this.renderContent())}},{key:"renderSortIcon",value:function(){return this.props.sortable?i.a.createElement("div",{className:$u("item-sort-icon")},i.a.createElement(Zu,null)):null}},{key:"renderContent",value:function(){var e=void 0===(n=(r=this.props).renderItem)?Qu:n,t=r.item,n=r.active,r=r.itemIndex;return i.a.createElement("div",{className:$u("item-content")},e(t,n,r))}}]),n}(i.a.Component),eh=(H=n(536),n.n(H));function th(e){return eh()(e).reduce((function(e,t){return e[t]=i.a.createRef(),e}),{})}var nh=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(e){var r;return W()(this,n),(r=t.call(this,e)).state=th(e.itemCount),r}return q()(n,[{key:"render",value:function(){var e=this,t=i.a.Children.map(this.props.children,(function(t,n){return i.a.cloneElement(t,{ref:e.state[n]})}));return i.a.createElement("div",null,t)}},{key:"scrollToItem",value:function(e){!(e=null===(e=this.state[e])||void 0===e?void 0:e.current)||"function"!=typeof e.getRef||(e=e.getRef()).current&&e.current.scrollIntoView({block:"nearest"})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return(e=e.itemCount)===Object.keys(t).length?t:th(e)}}]),n}(i.a.Component);n(812);var rh=oe("list"),ih=function(e,t){var n,i=1<arguments.length&&void 0!==t?t:{withRef:!1};return n=r.Component,Object(vu.a)(a,n),Object(fu.a)(a,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e,t=(e=this.props).collection,n=e.disabled,r=e.index;(e=Object(o.findDOMNode)(this)).sortableInfo={collection:t,disabled:n,index:r,manager:this.context.manager},this.node=e,this.ref={node:e},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return yu()(i.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=i.withRef?this.wrappedInstance:null;return Object(r.createElement)(e,Object(nn.a)({ref:t},Su(this.props,Ku)))}}]),n=t=a,Object(gu.a)(t,"displayName",Ru("sortableElement",e)),Object(gu.a)(t,"contextType",qu),Object(gu.a)(t,"propTypes",Xu),Object(gu.a)(t,"defaultProps",{collection:0}),n;function a(){var e;Object(du.a)(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=Object(pu.a)(this,(e=Object(mu.a)(a)).call.apply(e,[this].concat(n))),Object(gu.a)(Object(Pc.a)(Object(Pc.a)(e)),"wrappedInstance",Object(r.createRef)()),e}}(Ju),oh=Yu(Uc,{withRef:!0}),ah=Yu(nh),sh=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).state={items:e.props.items,filter:""},e.refFilter=i.a.createRef(),e.refContainer=i.a.createRef(),e.blurTimer=null,e.onKeyDown=function(t){var n=e.state,r=n.activeItem,i=n.pageSize;switch(t.key){case"ArrowDown":e.handleKeyMove(t,1,-1);break;case"ArrowUp":e.handleKeyMove(t,-1);break;case"PageDown":e.handleKeyMove(t,i);break;case"PageUp":e.handleKeyMove(t,-i);break;case"Home":e.handleKeyMove(t,e.state.items.length-(r||0));break;case"End":e.handleKeyMove(t,-(r||0)-1);break;case"Enter":r&&!isNaN(r)&&e.props.onItemClick&&e.props.onItemClick(e.state.items[r],r,!0);break;default:e.refFilter.current&&e.refFilter.current.focus()}},e.renderItem=function(t){var n=t.index,r=t.style,o=e.props.sortHandleAlign,a=(s=e.state).items,s=(t=s.activeItem,a[n]);a=e.props.sortable&&1<a.length&&!e.getFilter(),t=n===t||n===e.props.activeItemIndex;return i.a.createElement(a?ih:Ju,{key:n,style:r,index:n,itemIndex:n,item:s,sortable:a,sortHandleAlign:o,renderItem:e.props.renderItem,itemClassName:e.props.itemClassName,active:t,selected:n===e.props.selectedItemIndex,onMouseMove:e.onItemMouseMove,onClick:e.props.onItemClick})},e.filterItem=function(e){return function(t){return String(t).includes(e)}},e.scrollToIndex=function(t){var n=e.getContainer();n&&n.scrollToItem(t)},e.deactivate=function(){e.props.deactivateOnLeave&&e.setState({activeItem:void 0})},e.handleFocus=function(){e.blurTimer&&(clearTimeout(e.blurTimer),e.blurTimer=null)},e.handleBlur=function(){e.blurTimer||(e.blurTimer=setTimeout(e.deactivate,50))},e.onUpdateFilterInternal=function(t){var n=e.props,r=n.items,i=void 0===(i=n.filterItem)?e.filterItem:i,o=n.onFilterEnd;e.setState({filter:t,items:t?r.filter(i(t)):r},(function(){o&&o({items:e.state.items})}))},e.onFilterUpdate=function(t){e.props.onFilterUpdate?e.props.onFilterUpdate(t):e.onUpdateFilterInternal(t)},e.onItemsRendered=function(t){var n=t.visibleStartIndex;t=t.visibleStopIndex;e.setState({pageSize:t-n})},e.onItemMouseMove=function(t){e.state.sorting||e.activateItem(t,!1)},e.onMouseLeave=function(){e.deactivate()},e.onSortStart=function(){e.setState({sorting:!0})},e.onSortEnd=function(t){e.props.onSortEnd&&e.props.onSortEnd(t),e.setState({sorting:!1,activeItem:t.newIndex})},e.getItemHeight=function(t){var n=e.props.itemHeight;return"function"!=typeof n?n:n(e.state.items[t])},e.getVirtualizedItemHeight=function(t){return e.getItemHeight(t)||28},e}return q()(n,[{key:"componentDidUpdate",value:function(e){this.props.items!==e.items&&((e=this.getFilter())&&!this.props.onFilterUpdate?this.onUpdateFilterInternal(e):this.setState({items:this.props.items}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.emptyPlaceholder,r=t.virtualized,o=t.className,a=t.itemsClassName,s=this.state.items;return i.a.createElement(mc.Consumer,null,(function(t){return t=t.mobile,i.a.createElement("div",{className:rh({mobile:t},o),tabIndex:-1,onFocus:e.handleFocus,onBlur:e.handleBlur,onKeyDown:e.onKeyDown},e.renderFilter(),i.a.createElement("div",{className:rh("items",{virtualized:r},a),style:e.getItemsStyle(),onMouseLeave:e.onMouseLeave},e.renderItems(),0===s.length&&Boolean(n)&&i.a.createElement("div",{className:rh("empty-placeholder")},n)))}))}},{key:"getItems",value:function(){return this.state.items}},{key:"getActiveItem",value:function(){return"number"==typeof this.state.activeItem?this.state.activeItem:null}},{key:"activateItem",value:function(e){"number"!=typeof e||1<arguments.length&&void 0!==arguments[1]&&!arguments[1]||this.scrollToIndex(e),this.setState({activeItem:e})}},{key:"renderFilter",value:function(){var e=(o=this.props).size,t=o.filterable,n=void 0===(r=o.filter)?this.state.filter:r,r=o.filterPlaceholder,o=o.filterClassName;return t?i.a.createElement("div",{className:rh("filter",void 0===o?"":o)},i.a.createElement(ic,{controlRef:this.refFilter,size:e,placeholder:r,value:n,hasClear:!0,onUpdate:this.onFilterUpdate})):null}},{key:"renderSimpleContainer",value:function(){var e=this,t=this.props.sortable,n=this.state.items;return i.a.createElement(t?ah:nh,{helperClass:rh("item",{sorting:!0}),distance:5,lockAxis:"y",onSortStart:this.onSortStart,onSortEnd:this.onSortEnd,itemCount:n.length,ref:this.refContainer},n.map((function(t,n){return e.renderItem({index:n,style:{height:e.getItemHeight(n)}})})))}},{key:"renderVirtualizedContainer",value:function(){var e=this,t=this.props.sortable?oh:Uc;return i.a.createElement(Nc.a,null,(function(n){var r=n.width;n=n.height;return i.a.createElement(t,{ref:e.refContainer,width:r,height:n,itemSize:e.getVirtualizedItemHeight,itemData:e.state.items,itemCount:e.state.items.length,overscanCount:10,helperClass:rh("item",{sorting:!0}),distance:5,lockAxis:"y",onItemsRendered:e.onItemsRendered,onSortStart:e.onSortStart,onSortEnd:e.onSortEnd,activeItem:e.state.activeItem},e.renderItem)}))}},{key:"renderItems",value:function(){return this.props.virtualized?this.renderVirtualizedContainer():this.renderSimpleContainer()}},{key:"getContainer",value:function(){var e=this.refContainer.current,t=e&&"getWrappedInstance"in e&&"function"==typeof e.getWrappedInstance&&e.getWrappedInstance();return this.props.sortable?t:e}},{key:"getFilter",value:function(){var e=this.props.filter;return void 0===e?this.state.filter:e}},{key:"getItemsStyle",value:function(){var e=this.props.itemsHeight;return(e="function"==typeof e?e(this.state.items):e)?{height:e}:void 0}},{key:"handleKeyMove",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;e.preventDefault(),e=this.state.activeItem,this.activateItem(n.findNextIndex(this.state.items,(void 0===e?r:e)+t,Math.sign(t)))}}],[{key:"moveListElement",value:function(e,t,n){return t!==n&&(t=e.splice(t,1),t=ae()(t,1)[0],e.splice(n,0,t)),e}},{key:"findNextIndex",value:function(e,t,n){for(var r=e.length,i=(t+r)%r,o=0;o<r;o+=1){if(e[i]&&!e[i].disabled)return i;i=(i+r+n)%r}}}]),n}(i.a.Component);function lh(e){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24},e),r.createElement("path",{fill:"currentColor",d:"M11.844 16.156a4 4 0 1 1 0-8 4 4 0 0 1 0 8m6-4c0-.029-.004-.058-.004-.087l1.848-.34-.362-1.968-1.852.342a5.992 5.992 0 0 0-1.454-2.246l1.068-1.55-1.646-1.134-1.07 1.55a5.95 5.95 0 0 0-2.528-.567c-.03 0-.058.004-.087.004l-.341-1.848-1.967.363.34 1.851A5.996 5.996 0 0 0 7.546 7.98l-1.55-1.068L4.86 8.558l1.55 1.07a5.95 5.95 0 0 0-.567 2.528c0 .03.004.058.004.087L4 12.584l.362 1.967 1.852-.342a5.992 5.992 0 0 0 1.454 2.246L6.6 18.005l1.646 1.134 1.069-1.55a5.95 5.95 0 0 0 2.529.567c.029 0 .058-.004.087-.004L12.27 20l1.968-.363-.341-1.85a5.996 5.996 0 0 0 2.245-1.455l1.55 1.068 1.134-1.646-1.55-1.069a5.95 5.95 0 0 0 .567-2.529"}))}function ch(e){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:16,height:16},e),r.createElement("path",{d:"M5.75 6.232C5.75 3.811 6.953 3.5 8 3.5s2.25.31 2.25 2.732V7h-4.5v-.768zm6 .768v-.768C11.75 2.55 9.4 2 8 2s-3.75.55-3.75 4.232V7H3v7h10V7h-1.25z",fill:"currentColor",fillRule:"evenodd"}))}sh.defaultProps={items:[],itemClassName:"",filterable:!0,sortable:!1,virtualized:!0,deactivateOnLeave:!0},c=n(537),Y=n(538),H="table-column-setup",g.registerKeyset(sa.I18N.LANGS.en,H,c),g.registerKeyset(sa.I18N.LANGS.ru,H,Y);var uh=g.keyset(H),hh=(n(811),ie()("yc-table-column-setup")),dh=function(e){X()(n,e);var t=ss()(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={},e.refControl=i.a.createRef(),e.onUpdate=function(t){e.setState({currentItems:t})},e.setInitialState=function(){var t=e.state.items,r=n.getRequiredItems(t);t=n.getConfigurableItems(t);e.setState({focused:!1,requiredItems:r,currentItems:t})},e.onClosePopup=function(){e.setInitialState()},e.onControlClick=function(){var t,r,i;e.props.disabled||(i=(r=e.state).items,t=r.focused,r=n.getRequiredItems(i),i=n.getConfigurableItems(i),e.setState({focused:!t,requiredItems:r,currentItems:i}))},e.onApplyClick=function(){var t=(r=e.state).items,n=r.currentItems,r=r.requiredItems;e.setInitialState(),t!==(n=r.concat(n))&&e.props.onUpdate(n)},e.renderItem=function(t){var n=e.props.getItemTitle;return i.a.createElement("div",{className:hh("item-content")},t.required?i.a.createElement("div",{className:hh("lock-wrap",{visible:t.selected})},i.a.createElement(he,{data:ch})):i.a.createElement("div",{className:hh("tick-wrap",{visible:t.selected})},i.a.createElement(he,{data:Yc,className:hh("tick"),width:10,height:10})),i.a.createElement("div",{className:hh("title")},n(t)))},e.onItemClick=function(t){var n=e.state.currentItems.map((function(e){return e===t?oc()(oc()({},e),{},{selected:!e.selected}):e}));e.onUpdate(n)},e.makeOnSortEnd=function(t){return function(n){var r=n.oldIndex;n=n.newIndex;e.onUpdate(sh.moveListElement(t.slice(),r,n))}},e.getCountSelected=function(){return e.state.items.reduce((function(e,t){return t.selected?e+1:e}),0)},e.renderStatus=function(){var t=(n=e.props).showStatus,n=n.items;return t?(t=e.getCountSelected(),n=n.length,n="".concat(t,"/").concat(n),i.a.createElement("span",{className:hh("status")},n)):null},e.renderRequiredColumns=function(){var t=e.props.filterable,r=e.state.requiredItems;return r.length?i.a.createElement(sh,{items:r,itemHeight:n.LIST_ITEM_HEIGHT,itemsHeight:n.getRequiredListHeight,filterable:t,renderItem:e.renderItem,itemsClassName:hh("items"),itemClassName:hh("item"),virtualized:!1}):null},e.renderConfigurableColumns=function(){var t=(o=e.props).sortable,r=o.filterable,o=e.state.currentItems;return i.a.createElement(sh,{items:o,itemHeight:n.LIST_ITEM_HEIGHT,itemsHeight:n.getListHeight,sortable:t,filterable:r,sortHandleAlign:"right",onSortEnd:e.makeOnSortEnd(o),onItemClick:e.onItemClick,renderItem:e.renderItem,itemsClassName:hh("items"),itemClassName:hh("item"),virtualized:!1})},e}return q()(n,[{key:"render",value:function(){var e=(a=this.props).switcher,t=a.disabled,n=a.popupWidth,r=a.popupPlacement,o=a.className,a=this.state.focused;return i.a.createElement("div",{className:hh(null,o)},i.a.createElement("div",{className:hh("control"),ref:this.refControl,onClick:this.onControlClick},e||i.a.createElement(ge,{disabled:t},i.a.createElement(he,{data:lh}),uh("label_columns"),this.renderStatus())),i.a.createElement(kl,{anchorRef:this.refControl,placement:r||["bottom-start","bottom-end","top-start","top-end"],open:a,onClose:this.onClosePopup,className:hh("popup"),style:{width:n}},this.renderRequiredColumns(),this.renderConfigurableColumns(),i.a.createElement("div",{className:hh("controls")},i.a.createElement(ge,{view:"action",width:"max",onClick:this.onApplyClick},uh("button_apply")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return(e=e.items)===t.items?null:{items:e,requiredItems:n.getRequiredItems(e),currentItems:n.getConfigurableItems(e)}}}]),n}(i.a.Component);dh.defaultProps={getItemTitle:function(e){return e.title},sortable:!0,filterable:!1},dh.getRequiredItems=function(e){return e.filter((function(e){return e.required})).map((function(e){return oc()(oc()({},e),{},{disabled:!0})}))},dh.getConfigurableItems=function(e){return e.filter((function(e){return!e.required}))},dh.LIST_ITEM_HEIGHT=36,dh.getListHeight=function(e){var t=dh.LIST_ITEM_HEIGHT;return Math.min(5,e.length)*t+t/2},dh.getRequiredListHeight=function(e){return e.length*dh.LIST_ITEM_HEIGHT},n(758);var fh=ie()("progress-viewer"),ph=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=(d=this.props).value,t=d.capacity,n=d.formatValues,r=d.percents,o=d.size,a=d.className,s=d.colorizeProgress,l=d.inverseColorize,c=100<(c=Math.round(parseFloat(e)/parseFloat(t)*100))?100:c,u=Math.round(e),h=t,d="/";return n?(t=n(e,t),u=(t=ae()(t,2))[0],h=t[1]):r&&(u=c+"%",d=h=""),r=l?"scarlet":"apple",s&&(60<c&&c<=80?r="saffron":80<c&&(r=l?"apple":"scarlet")),s={width:c+"%"},l=60<c?"contrast0":"contrast70",isNaN(c)?i.a.createElement("div",{className:"".concat(fh({size:o})," ").concat(a," error")},"no data"):i.a.createElement("div",{className:fh({size:o})},i.a.createElement("div",{className:fh("line",{bg:r}),style:s}),i.a.createElement("span",{className:fh("text",{text:l})},"".concat(u," ").concat(d," ").concat(h)))}}]),n}(i.a.Component);ph.defaultProps={size:"ns",colorizeProgress:!1,capacity:100,inverseColorize:!1};var mh=ph,vh={TITLE:"title",VERSIONS:"versions",CLUSTER:"cluster",SERVICE:"service",STATUS:"status",NODES:"nodes",LOAD:"load",STORAGE:"storage",HOSTS:"hosts",OWNER:"owner",DESCRIPTION:"description",BALANCER:"balancer"},gh=[vh.TITLE,vh.VERSIONS,vh.SERVICE,vh.STATUS,vh.NODES,vh.LOAD,vh.STORAGE,vh.HOSTS,vh.OWNER,vh.BALANCER],yh=(Y={},p()(Y,vh.TITLE,"Cluster"),p()(Y,vh.VERSIONS,"Versions"),p()(Y,vh.CLUSTER,"DC"),p()(Y,vh.SERVICE,"Service"),p()(Y,vh.STATUS,"Status"),p()(Y,vh.NODES,"Nodes"),p()(Y,vh.LOAD,"Load"),p()(Y,vh.STORAGE,"Storage"),p()(Y,vh.HOSTS,"Hosts"),p()(Y,vh.OWNER,"Owner"),p()(Y,vh.DESCRIPTION,"Description"),p()(Y,vh.BALANCER,"Balancer"),Y),bh=[{value:"production",title:"Production"},{value:"preprod",title:"Preprod"},{value:"testing",title:"Testing"},{value:"development",title:"Development"}];function Ch(e){var t=e.name,n=e.height,r=e.width,o=e.viewBox,a=e.className;e=e.onClick;return i.a.createElement(he,{data:{id:"icon.".concat(t),viewBox:o},height:n,width:r,className:a,onClick:e})}Ch.defaultProps={height:16,width:16,viewBox:"0 0 16 16"},n(759);var wh=ie()("entity-status");(H=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"renderIcon",value:function(){var e=this.props,t=e.status,n=e.size;return e.showStatus?i.a.createElement("div",{className:wh("status-icon",{state:t.toLowerCase(),size:n})}):null}},{key:"renderStatusLink",value:function(){var e=this.props.iconPath;return i.a.createElement(we,{target:"_blank",href:e},this.renderIcon())}},{key:"renderLink",value:function(){var e=(n=this.props).externalLink,t=n.name,n=n.path;return e?i.a.createElement(we,{href:n},t):n?i.a.createElement(Da,{title:t,to:n},t):t&&i.a.createElement("span",{className:wh("name"),title:t},t)}},{key:"render",value:function(){var e=(s=this.props).name,t=s.label,n=s.iconPath,r=s.hasClipboardButton,o=s.visibleClipboardButton,a=s.hasMonitoringButton,s=s.solomon;return i.a.createElement("div",{className:wh()},n?this.renderStatusLink():this.renderIcon(),t&&i.a.createElement("span",{title:t,className:wh("label")},t),this.renderLink(),r&&i.a.createElement("span",{className:wh("clipboard-button",{visible:o})},i.a.createElement(Kl,{text:e,size:16})),a&&s&&i.a.createElement("span",{className:wh("clipboard-button",{visible:!1})},i.a.createElement(we,{target:"_blank",href:Lt(s,e)},i.a.createElement(Ch,{name:"monitoring",viewBox:"0 0 32 32",width:16,height:16}))))}}]),n}(i.a.Component)).defaultProps={status:"gray",text:"",size:"m",label:"",showStatus:!0,externalLink:!1};var Eh=H;n(767);var Sh=ie()("info-viewer");function Oh(e){var t=e.text;e=e.type;return i.a.createElement("div",{className:_h({type:e})},t)}(Y=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=(n=this.props).info,t=n.className,n=n.title;return i.a.createElement("div",{className:"".concat(Sh()," ").concat(t)},n&&i.a.createElement("div",{className:Sh("title")},n),e&&0<e.length?i.a.createElement("div",{className:Sh("items")},e.map((function(e,t){return i.a.createElement("div",{className:Sh("row"),key:t},i.a.createElement("div",{className:Sh("label")},e.label,i.a.createElement("div",{className:Sh("dots")})),i.a.createElement("div",{className:Sh("value")},e.value))}))):i.a.createElement("div",null,"no ",n," data"))}}]),n}(i.a.Component)).defaultProps={className:""};var xh=Y,_h=(n(768),ie()("tag"));n(769);var kh=ie()("tags");(H=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=this.props,t=e.tags,n=e.className,r=e.tagsType;return i.a.createElement("div",{className:"".concat(kh()," ").concat(n)},t&&t.map((function(e,t){return i.a.createElement(Oh,{text:e,key:t,type:r})})))}}]),n}(i.a.Component)).defaultProps={className:""};var Th=H,Nh=ie()("yc-link");function Ph(e){var t=e.to,n=e.children,r=e.onClick;e=e.className;return t?i.a.createElement(Da,{className:Nh({view:"normal"},e),to:t,onClick:r},n):n}n(770);var Ih=ie()("tablet");(Y=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).ref=i.a.createRef(),e._onTabletMouseEnter=function(){var t=e.props.tablet;e.props.onMouseEnter(e.ref.current,t,"tablet")},e._onTabletClick=function(){var t=e.props.tablet;(void 0===t?{}:t).TabletId&&e.props.onMouseLeave()},e}return q()(n,[{key:"render",value:function(){var e=void 0===(n=this.props.tablet)?{}:n,t=e.TabletId,n=null===(n=e.Overall)||void 0===n?void 0:n.toLowerCase();return i.a.createElement(Ph,{onClick:this._onTabletClick,to:t&&va(Oa,{id:t}),className:Ih("wrapper")},i.a.createElement("div",{ref:this.ref,className:Ih({status:n}),onMouseEnter:this._onTabletMouseEnter,onMouseLeave:this.props.onMouseLeave},i.a.createElement("div",{className:Ih("type")},[h(e.Type)])))}}]),n}(i.a.PureComponent)).defaultProps={onMouseEnter:function(){},onMouseLeave:function(){}};var Rh=Y;n(771);var jh=ie()("cluster-info"),Dh=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).renderContent=function(){var t=void 0===(l=(s=e.props).cluster)?{}:l,r=s.showTooltip,o=s.hideTooltip,a=s.clusterTitle,s=void 0===(l=t.Name)?"Unknown cluster":l,l=e.getInfo();return i.a.createElement("div",{className:jh()},i.a.createElement("div",{className:jh("common")},i.a.createElement("span",{className:jh("title")},"cluster"),i.a.createElement("div",{className:jh("url")},i.a.createElement(Eh,{size:"m",status:t.Overall,name:null!=a?a:s})),i.a.createElement(Th,{tags:t.DataCenters}),i.a.createElement("div",{className:jh("system-tablets")},t.SystemTablets&&t.SystemTablets.sort(n.compareTablets).map((function(e,t){return i.a.createElement(Rh,{onMouseEnter:r,onMouseLeave:o,key:t,tablet:e})})))),i.a.createElement(xh,{dots:!0,info:l}))},e}return q()(n,[{key:"shouldComponentUpdate",value:function(e){return e=e.cluster,0===!Object.keys(e).length}},{key:"getInfo",value:function(){var e=void 0===(n=this.props.cluster)?{}:n,t=e.StorageTotal,n=e.StorageUsed;t=[{label:"Nodes",value:i.a.createElement(mh,{className:jh("metric-field"),value:e.NodesAlive,capacity:e.NodesTotal})},{label:"Load",value:i.a.createElement(mh,{className:jh("metric-field"),value:e.LoadAverage,capacity:e.NumberOfCpus})},{label:"Storage",value:i.a.createElement(mh,{className:jh("metric-field"),value:n,capacity:t,formatValues:Xe})},{label:"Versions",value:i.a.createElement("div",null,null===(t=e.Versions)||void 0===t?void 0:t.join(", "))}];return e.solomon&&t.push({label:"Solomon",value:i.a.createElement(we,{target:"_blank",href:"https://solomon.yandex-team.ru/?project=kikimr&cluster=".concat(e.solomon)},e.solomon)}),e.balancer&&(e=Et(e.balancer,!0,!0),t.push({label:"Balancer",value:i.a.createElement("div",{className:jh("balancer")},e,i.a.createElement(Kl,{text:e,size:14,className:jh("clipboard-button")}))})),t}},{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}},{key:"render",value:function(){return this.renderContent()}}],[{key:"compareTablets",value:function(e,t){return e.Type===N?1:t.Type===N?-1:0}}]),n}(i.a.Component);function Ah(e){var t=e.name,n=e.value,r=e.id,o=e.defaultChecked,a=e.checked,s=e.indeterminate,l=e.onUpdate,c=e.onChange,u=e.controlRef,h=e.controlProps,d=e.onFocus,f=e.onBlur,p=e.disabled,m=i.a.useRef(null),v=i.a.useState(null!=o&&o),g=(v=(e=ae()(v,2))[0],e[1]),y="boolean"==typeof a;e=y?a:v,v=!s&&a,a=s?"mixed":e,u=Ol(u,m);return i.a.useLayoutEffect((function(){m.current&&(m.current.indeterminate=Boolean(s))}),[s]),{checked:e,inputProps:Object.assign(Object.assign({},h),{name:t,value:n,id:r,onFocus:d,onBlur:f,disabled:p,type:"checkbox",onChange:function(e){y||g(e.target.checked),c&&c(e),l&&l(e.target.checked)},defaultChecked:o,checked:v,"aria-checked":a,ref:u})}}n(780);var Lh=oe("switch"),Mh=i.a.forwardRef((function(e,t){var n=void 0===(u=e.size)?"m":u,r=void 0!==(h=e.disabled)&&h,o=e.content,a=e.children,s=e.title,l=e.style,c=e.className,u=e.qa,h=(e=(h=Ah(e)).checked,h.inputProps);a=o||a;return i.a.createElement("label",{ref:t,title:s,style:l,className:Lh({size:n,disabled:r,checked:e},c),"data-qa":u},i.a.createElement("span",{className:Lh("indicator")},i.a.createElement("input",Object.assign({},h,{className:Lh("control")})),i.a.createElement("span",{className:Lh("outline")}),i.a.createElement("span",{className:Lh("slider")})),a&&i.a.createElement("span",{className:Lh("text")},a))}));n(773);var Fh=ie()("pool-bar"),Bh=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).bar=i.a.createRef(),e._onBarHover=function(){e.props.onMouseEnter(e.bar.current,e.props.data,"pool")},e._onBarLeave=function(){e.props.onMouseLeave()},e}return q()(n,[{key:"render",value:function(){var e=this.props.data.Usage,t=Math.min(100*(void 0===e?0:e),100);e=75<=(e=t)?"danger":50<=e&&e<75?"warning":"normal";return i.a.createElement("div",{ref:this.bar,className:Fh({type:e}),onMouseEnter:this._onBarHover,onMouseLeave:this._onBarLeave},i.a.createElement("div",{style:{height:"".concat(t,"%")},className:Fh("value",{type:e})}))}}]),n}(i.a.Component);n(774);var Hh=ie()("pools-graph");(H=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=this,t=this.props.pools;return i.a.createElement("div",{className:Hh()},t.map((function(t,n){return i.a.createElement(Bh,Object.assign({key:n,data:t},e.props))})))}}]),n}(i.a.Component)).defaultProps={pools:[]};var zh=H;n(775);var Uh=ie()("tablets-statistic"),Vh=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).renderTabletInfo=function(t,n){var r=(o=e.props).path,o=o.nodeIds;return i.a.createElement(Da,{to:va(xa,null,{nodeIds:o,state:t.state,type:t.type,path:r}),key:n,className:Uh("tablet",{state:null===(n=t.state)||void 0===n?void 0:n.toLowerCase()})},t.label,": ",t.count)},e}return q()(n,[{key:"render",value:function(){var e=(void 0===(e=this.props.tablets)?[]:e).map((function(e){return{label:h(e.Type),type:e.Type,count:e.Count,state:e.State}})).sort((function(e,t){return e.label.localeCompare(t.label)}));return i.a.createElement("div",{className:Uh()},e.map(this.renderTabletInfo))}}]),n}(i.a.Component),Wh=1;function Gh(){return i.a.useRef("".concat("yc-","uniq-").concat(Wh++)).current}var qh=oe("radio-button"),Yh=i.a.forwardRef((function(e,t){var n,r,o,a,s,l,c,u,h,d,f,p,m,v,g,y,b=void 0!==(E=e.disabled)&&E,C=e.content,w=e.children,E=(e=(r=(n=e).name,o=n.value,a=n.checked,s=n.defaultChecked,l=n.disabled,c=n.controlRef,u=n.controlProps,h=n.onUpdate,d=n.onChange,f=n.onFocus,p=n.onBlur,m=n.id,v=Gh(),E=i.a.useRef(null),e=i.a.useState(null!=s&&s),e=(n=ae()(e,2))[0],g=n[1],e=(y="boolean"==typeof a)?a:e,E=Ol(c,E),{checked:e,inputProps:Object.assign(Object.assign({},u),{name:r||v,value:o,id:m,onFocus:f,onBlur:p,disabled:l,type:"radio",onChange:function(e){y||g(e.target.checked),d&&d(e),h&&h(e.target.checked)},checked:a,defaultChecked:s,"aria-checked":e,ref:E})})).inputProps;w=C||w;return i.a.createElement("label",{className:qh("option",{disabled:b,checked:e.checked}),ref:t},i.a.createElement("input",Object.assign({},E,{className:qh("option-control")})),i.a.createElement("span",{className:qh("option-outline")}),w&&i.a.createElement("span",{className:qh("option-text")},w))}));n(776);var Xh=oe("radio-button"),Kh=i.a.forwardRef((function(e,t){var n,o,a,s,l,c,u,h,d,f,p,m=e.size,v=void 0===m?"m":m,g=e.width,y=e.style,b=e.className,C=e.qa,w=e.children,E=(E=e.options)||i.a.Children.toArray(w).map((function(e){return{value:(e=e.props).value,content:e.content||e.children,disabled:e.disabled}})),S=Object(r.useRef)(null),O=Object(r.useRef)(),x=Object(r.useCallback)((function(e){var t,n,r;!e||(t=S.current)&&((n=O.current)&&n!==e&&((r=function(e){t.style.left="".concat(e.offsetLeft,"px"),t.style.width="".concat(e.offsetWidth,"px")})(n),t.hidden=!1,r(e)),O.current=e)}),[]),_=Object(r.useCallback)((function(e){e.currentTarget.hidden=!0}),[]);E=(m=Object.assign(Object.assign({},e),{options:E}),n=m.name,w=m.value,e=m.defaultValue,E=void 0===(E=m.options)?[]:E,o=m.disabled,a=m.onUpdate,s=m.onChange,l=Gh(),c=i.a.useState(null!=e?e:null===(u=null===(c=E[0])||void 0===c?void 0:c.value)||void 0===u?void 0:u.toString()),u=ae()(c,2),c=u[0],h=u[1],f=(d="string"==typeof w)?w:c,p=i.a.useCallback((function(e){d||h(e.target.value),s&&s(e),a&&a(e.target.value)}),[d,a,s]),{optionsProps:E.map((function(e){return{name:n||l,value:String(e.value),content:e.content,checked:f===String(e.value),disabled:o||e.disabled,onChange:p}}))}).optionsProps;return i.a.createElement("div",{ref:t,style:y,className:Xh({size:v,width:g},b),"data-qa":C},i.a.createElement("div",{ref:S,className:Xh("plate"),onTransitionEnd:_,hidden:!0}),E.map((function(e){return i.a.createElement(Yh,Object.assign({},e,{key:e.value,ref:e.checked?x:void 0}))})))}));function Zh(e){var t=e.value,n=e.onChange;e=e.className;return i.a.createElement(Kh,{value:t,onUpdate:function(e){return n(e)},className:e},i.a.createElement(Kh.Option,{value:D},D),i.a.createElement(Kh.Option,{value:A},A))}function Qh(e){return function(t){X()(r,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(r);function r(){var e;W()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).state={searchQuery:""},e.handleSearchQuery=function(t){e.setState({searchQuery:t})},e}return q()(r,[{key:"render",value:function(){var t=this.state.searchQuery;return i.a.createElement(e,Object.assign({},this.props,{searchQuery:t,handleSearchQuery:this.handleSearchQuery}))}}]),r}(i.a.Component)}Kh.Option=Yh,Z.a.oneOf([D,A]);var $h="healthcheck",Jh=[{id:"schema",name:"Schema",icon:i.a.createElement(Ch,{name:"schema",viewBox:"0 0 576 512"})},{id:"storage",name:"Storage",icon:i.a.createElement(Ch,{name:"storage",viewBox:"0 0 448 512"})},{id:"compute",name:"Compute",icon:i.a.createElement(Ch,{name:"compute",viewBox:"0 0 384 512"})},{id:"network",name:"Network",icon:i.a.createElement(Ch,{name:"network",viewBox:"0 0 640 512"})},{id:$h,name:"Healthcheck",icon:i.a.createElement(Ch,{name:"healthcheck",viewBox:"0 0 512 512"})}];n(777);var ed=ie()("tenants"),td={displayIndices:!1,stickyHead:as.MOVING,syncHeadOnResize:!0,dynamicRender:!0};function nd(e){var t=e.id,n=e.title,o=e.meta,a=e.hint,s=e.active,l=e.disabled,c=e.direction,u=e.onClick;e=Object(r.useMemo)((function(){return void 0!==a?a:"string"==typeof n?n:void 0}),[a,n]);return i.a.createElement("div",{className:ld({active:s,disabled:l,direction:c}),title:e,onClick:function(){u(t)}},i.a.createElement("div",{className:ld("title")},n||t),c===rd.Vertical&&o&&i.a.createElement("div",{className:ld("meta")},o))}(Y=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={formatValues:!1},e.handleFormatChange=function(){e.setState({formatValues:!e.state.formatValues})},e.getControlPlaneValue=function(e){var t=(t=w.a.get(e,"Name",[]).split("/")).length?t.slice(-1):"—";return w.a.get(e,"ControlPlane.name",t)},e.renderTable=function(){var t=void 0===(h=(d=e.props).tenants)?[]:h,r=d.searchQuery,o=d.showTooltip,a=d.hideTooltip,s=d.filter,l=d.handleSearchQuery,c=d.solomon,u=e.state.formatValues,h=t.filter((function(t){return t.Name.includes(r)||e.getControlPlaneValue(t).includes(r)}),s),d=n.filterTenants(h,s);h=[{name:"Name",header:"Database",render:function(e){var t=e.value;e=e.row;return i.a.createElement(Eh,{externalLink:Boolean(e.backend),className:ed("name"),name:t||"unknown database",status:e.Overall,hasClipboardButton:!0,hasMonitoringButton:!0,solomon:c,path:va(ya,{page:Jh[0].id},{name:t,backend:Ro&&e.backend?xt(e.backend):void 0})})},width:440,sortable:!0,defaultOrder:as.DESCENDING},{name:"ControlPlaneName",header:"Name",render:function(t){return t=t.row,e.getControlPlaneValue(t)},width:200,sortable:!0,defaultOrder:as.DESCENDING},{name:"Type",width:200,render:function(e){var n=e.value;e=e.row;if("Serverless"!==n)return n;var r=w.a.find(t,{Id:e.ResourceId}).Name;return i.a.createElement("div",{className:ed("type")},i.a.createElement("span",{className:ed("type-value")},n),i.a.createElement(ge,{className:ed("type-button"),onClick:function(){return l(r)}},"Show shared"))}},{name:"State",width:80,render:function(e){return(e=e.value)?e.toLowerCase():"—"},customStyle:function(){return{textTransform:"capitalize"}}},{name:"cpu",header:"CPU",width:80,sortAccessor:function(e){var t=void 0===(t=e.Metrics)?{}:t;t=void 0!==(e=e.CoresUsed)?1e6*Number(e):t.CPU;return isNaN(Number(t))?0:Number(t)},accessor:function(e){var t=void 0===(t=e.Metrics)?{}:t;e=e.CoresUsed;return isNaN(Number(e))?Number(t.CPU)?Qe(Number(t.CPU)):"—":Math.round(100*Number(e))/100||"—"},align:as.RIGHT,defaultOrder:as.DESCENDING},{name:"memory",header:"Memory",width:120,accessor:function(e){var t=void 0===(t=e.Metrics)?{}:t;e=e.MemoryUsed;return isNaN(Number(e))?Number(t.Memory):Number(e)},sortAccessor:function(e){var t=e.Metrics;t=null!=(e=e.MemoryUsed)?e:(void 0===t?{}:t).Memory;return isNaN(Number(t))?0:Number(t)},render:function(e){return(e=e.value)?(u?Ze:nt)(e):"—"},align:as.RIGHT,defaultOrder:as.DESCENDING},{name:"storage",header:"Storage",width:120,accessor:function(e){var t=void 0===(t=e.Metrics)?{}:t;e=e.StorageAllocatedSize;return isNaN(Number(e))?Number(t.Storage):Number(e)},sortAccessor:function(e){var t=e.Metrics;t=null!=(e=e.StorageAllocatedSize)?e:(void 0===t?{}:t).Storage;return isNaN(Number(t))?0:Number(t)},render:function(e){return(e=e.value)?(u?Ze:nt)(e):"—"},align:as.RIGHT,defaultOrder:as.DESCENDING},{name:"StorageGroups",header:"Groups",width:100,sortAccessor:function(e){return e=e.StorageGroups,isNaN(Number(e))?0:Number(e)},render:function(e){return null!=(e=e.value)?e:"—"},align:as.RIGHT,defaultOrder:as.DESCENDING},{name:"PoolStats",header:"Pools",width:100,sortAccessor:function(e){return(void 0===(e=e.PoolStats)?[]:e).reduce((function(e,t){return e+t.Usage}),0)},defaultOrder:as.DESCENDING,align:as.CENTER,render:function(e){return e=e.value,i.a.createElement(zh,{onMouseEnter:o,onMouseLeave:a,rowInfo:e,pools:e})}},{name:"Tablets",header:"Tablets States",sortable:!1,width:370,render:function(e){var t=e.value;e=e.row;return t?i.a.createElement(Vh,{path:e.Name,tablets:t,nodeIds:e.NodeIds}):"—"}}];return 0===d.length&&s===D?i.a.createElement("div",{className:"error"}," no tenants data"):0===d.length?i.a.createElement("div",{className:"no-problem"}):i.a.createElement("div",{className:ed("table-wrapper")},i.a.createElement("div",{className:ed("table-content")},i.a.createElement(as,{theme:"internal",data:d,columns:h,settings:td,dynamicRender:!0})))},e.renderContent=function(){return i.a.createElement("div",{className:ed()},e.renderControls(),e.renderTable())},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this;this.autofetcher=new uf,this.props.getTenantsInfo(Lo),this.autofetcher.fetch((function(){return e.props.getTenantsInfo(Lo)}))}},{key:"componentWillUnmount",value:function(){this.autofetcher.stop()}},{key:"renderControls",value:function(){var e=(o=this.props).searchQuery,t=o.handleSearchQuery,n=o.filter,r=o.changeFilter,o=this.state.formatValues;return i.a.createElement("div",{className:ed("controls")},i.a.createElement("div",{className:ed("controls-left")},i.a.createElement(ic,{className:ed("search"),placeholder:"Database name…",text:e,onUpdate:t,hasClear:!0}),i.a.createElement(Zh,{value:n,onChange:r})),i.a.createElement(Mh,{onUpdate:this.handleFormatChange,checked:o,content:"raw"}))}},{key:"render",value:function(){var e=(r=this.props).loading,t=r.wasLoaded,r=r.error;return e&&!t?n.renderLoader():r?i.a.createElement("div",null,r.statusText):this.renderContent()}}],[{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}},{key:"filterTenants",value:function(e,t){return t===D?e:w.a.filter(e,(function(e){return e.Overall&&"Green"!==e.Overall}))}}]),n}(i.a.Component)).defaultProps={className:""};H={getTenantsInfo:function(e){return Ue({request:Pt.getTenants(e),actions:Mr,dataHandler:function(e){var t;return Ro?null===(t=e.databases)||void 0===t?void 0:t.map((function(e){var t=e.Nodes?e.Nodes[0]:{},n=t.Host&&t.Endpoints&&null!==(n=w.a.find(t.Endpoints,{Name:"http-mon"}))&&void 0!==n?n.Address:void 0;n=t.Host?"".concat(t.Host).concat(n||""):void 0;return Lr(Lr({},e),{},{backend:n})})):e.TenantInfo}})},hideTooltip:cr,showTooltip:ur,changeFilter:zt};var rd,id=Qh(Object(l.b)((function(e){var t=e.tenants;return{tenants:t.tenants,wasLoaded:t.wasLoaded,loading:t.loading,error:t.error,filter:e.settings.problemFilter,solomon:e.cluster.data.solomon}}),H)(Y)),od=(n(802),oe("label")),ad=i.a.forwardRef((function(e,t){function n(e){return i.a.createElement("div",{ref:t,onClick:C?g:void 0,className:od({theme:E?"normal":a,size:s,style:l,type:o,"is-interactive":w,"has-right-icon":E,"has-left-icon":Boolean(c),disabled:f},d)},S,O,(e=e,b&&i.a.createElement("div",{className:od("icon",{right:!0,copy:!0})},i.a.createElement(Yl,{status:e||zl.Pending,size:r}))),x)}var r,o=void 0===(p=e.type)?"default":p,a=void 0===(y=e.theme)?"normal":y,s=void 0===(m=e.size)?"s":m,l=void 0===(v=e.style)?"default":v,c=e.icon,u=e.children,h=e.onClose,d=e.className,f=e.disabled,p=e.copyText,m=void 0!==(y=e.interactive)&&y,v=e.onCopy,g=e.onClick,y="default"===o,b=(e="close"===o,"copy"===o),C=Boolean(g)&&y,w=C||m,E=e||b,S=(m="s"===s?(r=12,8):(r=16,10),c&&i.a.createElement("div",{className:od("icon",{left:!0})},c)),O=i.a.createElement("div",{className:od("text")},u),x=e&&i.a.createElement("div",{onClick:h,className:od("icon",{right:!0,cross:!0})},i.a.createElement(he,{size:m,data:Ee}));return b&&p&&!f?i.a.createElement("div",{onClick:function(e){e.stopPropagation()}},i.a.createElement(Vl,{text:p,onCopy:v,timeout:1e3},n)):n()})),sd=i.a.forwardRef((function(e,t){var n=e.tooltip;e=v()(e,["tooltip"]),t=i.a.createElement(ad,Object.assign({},e,{ref:t}));return"object"!==se()(n)||e.disabled?t:i.a.createElement(Pl,n,t)})),ld=(n(805),oe("tabs-item")),cd=(n(804),oe("tabs"));function ud(e){function t(e){c&&c(e)}var n=void 0===(l=e.direction)?rd.Horizontal:l,o=e.activeTab,a=void 0!==(l=e.allowNotSelected)&&l,s=void 0===(l=e.items)?[]:l,l=e.className,c=e.onSelectTab,u=e.wrapTo,h=(e=e.qa,Object(r.useMemo)((function(){return o||(a||0===s.length?void 0:s[0].id)}),[o,a,s]));return i.a.createElement("div",{className:cd({direction:n},l),"data-qa":e},s.map((function(e,r){var o=i.a.createElement(nd,Object.assign({direction:n,key:e.id},e,{active:e.id===h,onClick:t}));return u?u(e,o,r):o})))}(Z=rd=rd||{}).Horizontal="horizontal",Z.Vertical="vertical",n(781);var hd=ie()("pool-usage"),dd=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e,t=(e=void 0===(r=this.props.data)?{}:r).Threads,n=void 0===(o=e.Name)?"Unknown":o,r=e.Usage&&t,o=100<(e=void 0===(o=e.Usage)?"":Math.floor(100*o))?100:e;return i.a.createElement("div",{className:hd()},i.a.createElement("div",{className:hd("info")},i.a.createElement("div",{className:hd("pool-name")},n),r&&i.a.createElement("div",{className:hd("value")},i.a.createElement("div",{className:hd("percents")},e<1?"<1":e,"%"),i.a.createElement("div",{className:hd("threads")},"(×",t,")"))),i.a.createElement("div",{className:hd("visual")},i.a.createElement("div",{className:hd("usage-line",{type:(e="green",60<(t=o)&&t<=80?e="yellow":80<t&&(e="red"),e)}),style:{width:"".concat(o,"%")}})))}}]),n}(i.a.Component);n(782);var fd=ie()("full-node-viewer");(H=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=(o=this.props).node,t=o.className,n=o.backend,r=Tt({node:e,backend:n}),o=[{label:"Version",value:e.Version},{label:"Uptime",value:$e(e.StartTime)},{label:"DC",value:e.DataCenterDescription},{label:"Rack",value:e.Rack}];n=e.LoadAverage.map((function(e,t){return{label:I["".concat(t)],value:i.a.createElement(mh,{value:e,percents:!0,colorizeProgress:!0})}}));return i.a.createElement("div",{className:"".concat(fd()," ").concat(t)},e?i.a.createElement("div",null,i.a.createElement("div",{className:fd("row")},i.a.createElement("div",{className:fd("title")},"Node"),i.a.createElement(Eh,{status:e.SystemState,name:e.Host}),Ro&&r&&i.a.createElement("a",{rel:"noopener noreferrer",className:fd("link",{external:!0}),href:r,target:"_blank"},i.a.createElement(Ch,{name:"external"})),i.a.createElement("div",{className:fd("row",{id:!0})},i.a.createElement("label",{className:fd("label",{id:!0})},"NodeID"),i.a.createElement("label",null,e.NodeId)),i.a.createElement(Th,{tags:[e.DataCenter]}),i.a.createElement(Th,{tags:e.Roles,tagsType:"blue"})),i.a.createElement("div",{className:fd("common-info")},i.a.createElement("div",null,i.a.createElement("div",{className:fd("section-title")},"Pools"),i.a.createElement("div",{className:fd("section",{pools:!0})},e.PoolStats.map((function(e,t){return i.a.createElement(dd,{key:t,data:e})})))),i.a.createElement(xh,{title:"Common info",className:fd("section"),info:o}),i.a.createElement(xh,{title:"Load average",className:fd("section",{average:!0}),info:n}))):i.a.createElement("div",{className:"error"},"no data"))}}]),n}(i.a.Component)).defaultProps={className:""};var pd=H,md="storage",vd="tablets",gd=[{id:md,name:"Storage"},{id:vd,name:"Tablets"}],yd=(Y=n(216),n.n(Y));n(783);var bd=ie()("tablets"),Cd=(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).autofetcher=void 0,e.state={filteredTablets:[]},e.makeRequestIfPathOrNodeExist=function(){var t=(n=e.props).nodeId,n=n.path;void 0!==t?e.props.getTabletsInfo({nodes:[t]}).then(e.updateFilteredTablets):void 0!==n&&e.props.getTabletsInfo({path:n}).then(e.updateFilteredTablets)},e.handleStateFilterChange=function(t){e.props.setStateFilter(t),e.updateFilteredTablets()},e.handleTypeFilterChange=function(t){e.props.setTypeFilter(t),e.updateFilteredTablets()},e.renderTablet=function(t,n){return i.a.createElement(Rh,{onMouseLeave:e.props.hideTooltip,onMouseEnter:e.props.showTooltip,tablet:e.state.filteredTablets[parseInt(n,10)],key:n,size:e.props.size,className:bd("tablet")})},e.updateFilteredTablets=function(){var t=(r=e.props).stateFilter,n=r.typeFilter,r=e.props.tablets;0<n.length&&(r=r.filter((function(e){return n.some((function(t){return e.Type===t}))}))),0<t.length&&(r=r.filter((function(e){return t.some((function(t){return e.State===t}))}))),e.setState({filteredTablets:r})},e.renderOverall=function(t){var n=e.props,r=n.hideTooltip,o=n.showTooltip,a=t.length,s=t.reduce((function(e,t){return e[t=t.Overall.toLowerCase()]?e[t]++:e[t]=1,e}),{}),l=[];return Object.keys(s).forEach((function(e){var n=s[e]/a*100,r=s[e];s[e]=n,l.push({color:e,percents:n,value:r,total:t.length})})),Object.keys(s).forEach((function(e){var t,n;s[e]<3&&(n=(t=s)[e],Object.keys(t).some((function(e){return 10<t[e]&&(t[e]-=3-n,!0)})),s[e]=3)})),(n=Object.keys(s).map((function(e){return{color:"var(--color-status-".concat(e,"-solid-70)"),colorKey:e,value:s[e]}}))).sort((function(e,t){return j[t.colorKey]-j[e.colorKey]})),i.a.createElement("div",{className:bd("row",{overall:!0})},i.a.createElement("span",{className:bd("label",{overall:!0})},"Overall"),i.a.createElement("div",{onMouseLeave:r,onMouseEnter:function(e){return o(e.target,l,"tabletsOverall")}},i.a.createElement(Fl,{value:100,stack:n})))},e.renderContent=function(t){var n=Array.from(yd()(Set,[t.map((function(e){return e.State}))])).map((function(e){return{value:e,title:e}})),r=Array.from(yd()(Set,[t.map((function(e){return e.Type}))])).map((function(e){return{value:e,title:e}})),o=e.state.filteredTablets,a=(s=e.props).stateFilter,s=s.typeFilter;return i.a.createElement("div",{className:bd()},e.renderOverall(t),i.a.createElement("div",{className:bd("filters")},i.a.createElement(cu,{className:bd("filter-control"),type:cu.MULTIPLE,placeholder:"All",label:"States:",items:n,value:a,onUpdate:e.handleStateFilterChange}),i.a.createElement(cu,{className:bd("filter-control"),type:cu.MULTIPLE,placeholder:"All",label:"Types:",items:r,value:s,onUpdate:e.handleTypeFilterChange})),i.a.createElement("div",{className:bd("items")},i.a.createElement(La.a,{itemRenderer:e.renderTablet,length:o.length,type:"uniform"})))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this;this.makeRequestIfPathOrNodeExist(),this.autofetcher=new uf,this.props.autorefresh&&(this.autofetcher.start(),this.autofetcher.fetch((function(){return e.makeRequestIfPathOrNodeExist()})))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.autorefresh;e.path&&this.props.path&&e.path!==this.props.path&&(this.props.clearWasLoadingFlag(),this.makeRequestIfPathOrNodeExist()),n&&!e.autorefresh&&(this.makeRequestIfPathOrNodeExist(),this.autofetcher.stop(),this.autofetcher.start(),this.autofetcher.fetch((function(){return t.makeRequestIfPathOrNodeExist()}))),!n&&e.autorefresh&&this.autofetcher.stop()}},{key:"componentWillUnmount",value:function(){this.autofetcher.stop()}},{key:"render",value:function(){var e=(o=this.props).loading,t=o.wasLoaded,r=o.error,o=o.tablets;return e&&!t?n.renderLoader():r?i.a.createElement("div",null,r.statusText):0<o.length?this.renderContent(o):i.a.createElement("div",{className:"error"},"no tablets data")}}],[{key:"renderLoader",value:function(){return i.a.createElement("div",{className:bd("loader-wrapper")},i.a.createElement(Ql,{size:"m"}))}}]),n}(i.a.Component),H={getTabletsInfo:function(e){return Ue({request:Pt.getTabletsInfo(e),actions:pr})},hideTooltip:cr,showTooltip:ur,clearWasLoadingFlag:function(){return{type:"CLEAR_WAS_LOADING_TABLETS"}},setStateFilter:function(e){return{type:"SET_STATE_FILTER",data:e}},setTypeFilter:function(e){return{type:"SET_TYPE_FILTER",data:e}}},Object(l.b)((function(e){var t=(a=e.tablets).data,n=a.wasLoaded,r=a.loading,i=a.timeoutForRequest,o=a.stateFilter,a=a.typeFilter;e=e.schema.autorefresh;return{tablets:void 0===(t=(void 0===t?{}:t).TabletStateInfo)?[]:t,timeoutForRequest:i,wasLoaded:n,loading:r,stateFilter:o,typeFilter:a,autorefresh:e}}),H)(Z));function wd(e){var t,n=Object(r.useState)(""),o=ae()(n,2),a=(n=o[0],o[1]);return Object(r.useEffect)((function(){return function(){return clearTimeout(t)}}),[]),Object(r.useEffect)((function(){a(""),e.changeReduxStorageFilter("")}),[e.storageType]),o=e.storageType===ht?"Group ID, Pool name":"Node ID, FQDN",i.a.createElement(ic,{autoFocus:!0,placeholder:o,value:n,onUpdate:function(n){clearTimeout(t),a(n),t=setTimeout((function(){e.changeReduxStorageFilter(n)}),200)},hasClear:!0})}n(795);var Ed=ie()("storage-disk-progress-bar"),Sd={0:"Grey",1:"Green",2:"Blue",3:"Yellow",4:"Orange",5:"Red"};function Od(e){var t=void 0===(n=e.diskAllocatedPercent)?-1:n,n=e.severity,r=e.href;return i.a.createElement("div",{className:void 0!==n?Ed(p()({},Sd[n].toLowerCase(),!0)):void 0,onClick:function(){r&&Mo.push(r)}},0<=t&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Ed("filled"),style:{width:"".concat(t,"%")}}),i.a.createElement("div",{className:Ed("filled-title",{light:7<t})},"".concat(Math.round(t),"%"))))}function xd(e){return null!==(e=Nd[e])&&void 0!==e?e:Pd.Grey}function _d(e){return null!==(e=Pd[e])&&void 0!==e?e:Pd.Grey}n(796);var kd,Td=ie()("vdisk-storage"),Nd={Initial:3,LocalRecoveryError:5,SyncGuidRecoveryError:5,SyncGuidRecovery:3,PDiskError:5,OK:1},Pd={Grey:0,Green:1,Blue:2,Yellow:3,Orange:4,Red:5};function Id(e){var t=Object(r.useState)(xd(e.VDiskState)),n=ae()(t,2),o=n[0],a=n[1],s=Object(r.useState)(!1),l=ae()(s,2),c=l[0],u=l[1],h=Object(r.useRef)();Object(r.useEffect)((function(){var t=e.DiskSpace,n=e.VDiskState,r=e.FrontQueues,i=e.Replicated;t=_d(t),n=xd(n),r=Math.min(Pd.Orange,_d(r)),r=Math.max(t,n,r);i||r!==Pd.Green||(r=Pd.Blue),a(r)}),[e.VDiskState,e.DiskSpace,e.FrontQueues,e.Replicated]);var d,f,p,m,v,g,y,b,C,E,S=Object(r.useMemo)((function(){var t=e.AvailableSize,n=e.AllocatedSize,r=e.PDisk;if(r=t||(null==r?void 0:r.AvailableSize))return isNaN(Number(n))?void 0:100*Number(n)/(Number(r)+Number(n))}),[e.AllocatedSize,e.AvailableSize,null===(C=e.PDisk)||void 0===C?void 0:C.AvailableSize]);return i.a.createElement(i.a.Fragment,null,(E=e.VDiskId,m=e.VDiskState,v=e.PoolName,g=e.SatisfactionRank,y=e.DiskSpace,b=e.FrontQueues,t=e.Replicated,n=e.UnsyncedVDisks,s=e.AllocatedSize,l=e.ReadThroughput,C=e.WriteThroughput,(E=[{property:"VDisk",value:rt(E)}]).push({property:"State",value:null!=m?m:"not available"}),v&&E.push({property:"StoragePool",value:v}),g&&(null===(d=g.FreshRank)||void 0===d?void 0:d.Flag)!==Sd[Pd.Green]&&E.push({property:"Fresh",value:g.FreshRank.Flag}),g&&(null===(d=g.LevelRank)||void 0===d?void 0:d.Flag)!==Sd[Pd.Green]&&E.push({property:"Level",value:g.LevelRank.Flag}),g&&null!==(f=g.FreshRank)&&void 0!==f&&f.RankPercent&&E.push({property:"Fresh",value:g.FreshRank.RankPercent}),g&&null!==(p=g.LevelRank)&&void 0!==p&&p.RankPercent&&E.push({property:"Level",value:g.LevelRank.RankPercent}),y&&y!==Sd[Pd.Green]&&E.push({property:"Space",value:y}),b&&b!==Sd[Pd.Green]&&E.push({property:"FrontQueues",value:b}),t||E.push({property:"Replicated",value:"NO"}),n&&E.push({property:"UnsyncVDisks",value:n}),Boolean(Number(s))&&E.push({property:"Allocated",value:At(s)}),Boolean(Number(l))&&E.push({property:"Read",value:Dt(l)}),Boolean(Number(C))&&E.push({property:"Write",value:Dt(C)}),C=E,E=function(){var t=e.PDisk,n=e.nodes,r=[Sd[Pd.Orange],Sd[Pd.Red],Sd[Pd.Yellow]];if(t&&n){var i=[{property:"PDisk",value:qe(t)}];return i.push({property:"State",value:t.State||"not available"}),t.NodeId&&i.push({property:"Node Id",value:t.NodeId}),t.NodeId&&n[t.NodeId]&&i.push({property:"Host",value:n[t.NodeId]}),t.Path&&i.push({property:"Path",value:t.Path}),i.push({property:"Available",value:"".concat(At(t.AvailableSize)," of ").concat(At(t.TotalSize))}),r.includes(t.Realtime)&&i.push({property:"Realtime",value:t.Realtime}),r.includes(t.Device)&&i.push({property:"Device",value:t.Device}),i}return null}(),i.a.createElement(kl,{className:Td("popup-wrapper"),anchorRef:h,open:c,placement:["top"],hasArrow:!0},i.a.createElement("div",{className:Td("popup-content")},i.a.createElement("div",{className:Td("popup-section-name")},"VDisk"),w.a.map(C,(function(e){return i.a.createElement(i.a.Fragment,{key:e.property},i.a.createElement("div",{className:Td("property")},e.property),i.a.createElement("div",{className:Td("value")},e.value))})),i.a.createElement("div",{className:Td("popup-section-name")},"PDisk"),w.a.map(E,(function(e){return i.a.createElement(i.a.Fragment,{key:e.property},i.a.createElement("div",{className:Td("property")},e.property),i.a.createElement("div",{className:Td("value")},e.value))}))))),i.a.createElement("div",{className:Td(),ref:h,onMouseEnter:function(){u(!0)},onMouseLeave:function(){u(!1)}},i.a.createElement(Od,{diskAllocatedPercent:S,severity:o,href:va(Ea,null,{vdiskId:rt(e.VDiskId),pdiskId:null===(o=e.PDisk)||void 0===o?void 0:o.PDiskId,nodeId:e.NodeId})})))}n(797),(Y=kd=kd||{}).PoolName="PoolName",Y.GroupID="GroupID",Y.Used="Used",Y.Limit="Limit",Y.UsedPercents="UsedPercents",Y.UsedSpaceFlag="UsedSpaceFlag";var Rd={PoolName:"Pool Name",GroupID:"Group ID",Used:"Used",Limit:"Limit",UsedSpaceFlag:"Space",UsedPercents:"Used percents",Read:Y.Read="Read",Write:Y.Write="Write",VDisks:Y.VDisks="VDisks",Missing:Y.Missing="Missing"},jd=ie()("global-storage-groups");function Dd(e){var t=e.data,n=e.tableSettings,r=e.visibleEntities,o=e.nodes,a=[{name:kd.PoolName,header:Rd[kd.PoolName],width:160,render:function(e){var t=e.value;e=null==t?void 0:t.split("/");return i.a.createElement("div",{className:jd("pool-name-wrapper")},e&&i.a.createElement(Pl,{content:i.a.createElement("span",{className:jd("tooltip")},t),placement:["right"],behavior:xl.Immediate},i.a.createElement("span",{className:jd("pool-name")},e[e.length-1])))},align:as.LEFT},{name:kd.GroupID,header:Rd[kd.GroupID],width:130,render:function(e){return e=e.value,i.a.createElement("span",{className:jd("group-id")},e)},align:as.RIGHT},{name:kd.Used,header:Rd[kd.Used],width:100,render:function(e){return At(e.value,!0)},align:as.RIGHT},{name:kd.Limit,header:Rd[kd.Limit],width:100,render:function(e){return At(e.value)},align:as.RIGHT},{name:kd.UsedSpaceFlag,header:Rd[kd.UsedSpaceFlag],width:110,render:function(e){var t=e.value;e="Red";return t<100?e="Green":t<1e4&&(e="Yellow"),i.a.createElement(Eh,{status:e})},align:as.CENTER},{name:kd.Read,header:Rd[kd.Read],width:100,render:function(e){return(e=e.value)?Dt(e):"-"},align:as.RIGHT},{name:kd.Write,header:Rd[kd.Write],width:100,render:function(e){return(e=e.value)?Dt(e):"-"},align:as.RIGHT},{name:kd.Missing,header:Rd[kd.Missing],width:100,align:as.CENTER,defaultOrder:as.DESCENDING},{name:kd.VDisks,header:Rd[kd.VDisks],render:function(e){var t=e.value,n=e.row;return i.a.createElement("div",{className:jd("vdisks-wrapper")},w.a.map(t,(function(e){return i.a.createElement(Id,Object.assign({key:rt(e.VDiskId)},e,{PoolName:n[kd.PoolName],nodes:o}))})))},align:as.CENTER,sortable:!1}];e=a;return r===ut&&(e=a.filter((function(e){return e.name!==kd.Missing}))),r===ct&&(e=a.filter((function(e){return e.name!==kd.UsedSpaceFlag}))),t?i.a.createElement(as,{key:r,theme:"internal",data:t,columns:e,settings:n,initialSortOrder:function(e){switch(e){case lt:return{columnId:kd.GroupID,order:as.ASCENDING};case ct:return{columnId:kd.Missing,order:as.DESCENDING};case ut:return{columnId:kd.UsedSpaceFlag,order:as.ASCENDING};default:return}}(r),emptyDataMessage:"No such groups."}):null}function Ad(e){return e?Fd[e]:Bd.Grey}n(799);var Ld,Md=ie()("pdisk-storage"),Fd={Initial:0,Normal:1,InitialFormatRead:3,InitialSysLogRead:3,InitialCommonLogRead:3,InitialFormatReadError:5,InitialSysLogReadError:5,InitialSysLogParseError:5,InitialCommonLogReadError:5,InitialCommonLogParseError:5,CommonLoggerInitError:5,OpenFileError:5,ChunkQuotaError:5,DeviceIoError:5},Bd={Grey:0,Green:1,Blue:2,Yellow:3,Orange:4,Red:5};function Hd(e){var t=Object(r.useState)(Ad(e.State)),n=ae()(t,2),o=n[0],a=n[1],s=Object(r.useState)(!1),l=ae()(s,2),c=l[0],u=l[1],h=Object(r.useRef)(null);Object(r.useEffect)((function(){var t=Ad(e.State);o!==t&&a(t)}),[e.State]);var d,f,p,m,v,g,y=Object(r.useMemo)((function(){var t=e.AvailableSize,n=e.TotalSize;if(t&&n)return isNaN(Number(t))||isNaN(Number(n))?void 0:Math.round(100*(Number(n)-Number(t))/Number(n))}),[e.AvailableSize,e.TotalSize]);return i.a.createElement(i.a.Fragment,null,(d=e.AvailableSize,f=e.TotalSize,p=e.State,g=e.PDiskId,m=e.NodeId,v=e.Host,t=e.Path,n=e.Realtime,s=e.Device,l=[Sd[Bd.Orange],Sd[Bd.Red],Sd[Bd.Yellow]],(g=[{property:"PDisk",value:qe({NodeId:m,PDiskId:g})}]).push({property:"State",value:p||"not available"}),m&&g.push({property:"Node Id",value:m}),v&&g.push({property:"Host",value:v}),t&&g.push({property:"Path",value:t}),g.push({property:"Available",value:"".concat(At(d)," of ").concat(At(f))}),n&&l.includes(n)&&g.push({property:"Realtime",value:n}),s&&l.includes(s)&&g.push({property:"Device",value:s}),i.a.createElement(kl,{className:Md("popup-wrapper"),anchorRef:h,open:c,placement:["top"],hasArrow:!0},i.a.createElement("div",{className:Md("popup-content")},i.a.createElement("div",{className:Md("popup-section-name")},"PDisk"),w.a.map(g,(function(e){return i.a.createElement(i.a.Fragment,{key:e.property},i.a.createElement("div",{className:Md("property")},e.property),i.a.createElement("div",{className:Md("value")},e.value))}))))),i.a.createElement("div",{className:Md(),ref:h,onMouseEnter:function(){u(!0)},onMouseLeave:function(){u(!1)}},i.a.createElement(Od,{diskAllocatedPercent:y,severity:o,href:va(Ea,null,{pdiskId:e.PDiskId,nodeId:e.NodeId})})))}n(800),(H=Ld=Ld||{}).NodeId="NodeId",H.FQDN="FQDN",H.uptime="uptime";var zd={NodeId:"Node ID",FQDN:"FQDN",uptime:"Uptime",PDisks:H.PDisks="PDisks",Missing:H.Missing="Missing"},Ud=ie()("global-storage-groups");function Vd(e){var t=e.data,n=e.tableSettings,r=e.visibleEntities,o=[{name:Ld.NodeId,header:zd[Ld.NodeId],width:100,align:as.RIGHT},{name:Ld.FQDN,header:zd[Ld.FQDN],width:350,render:function(e){return e=e.value,i.a.createElement("div",{className:Ud("tooltip-wrapper")},i.a.createElement(Pl,{content:i.a.createElement("span",{className:Ud("tooltip")},e),placement:["right"],behavior:xl.Immediate},i.a.createElement("span",{className:Ud("pool-name")},e)))},align:as.LEFT},{name:Ld.uptime,header:zd[Ld.uptime],width:130,sortAccessor:function(e){return-e.StartTime},align:as.RIGHT},{name:Ld.Missing,header:zd[Ld.Missing],width:100,align:as.CENTER,defaultOrder:as.DESCENDING},{name:Ld.PDisks,header:zd[Ld.PDisks],render:function(e){var t=e.value,n=e.row;return i.a.createElement("div",{className:Ud("pdisks-wrapper")},w.a.map(t,(function(e){return i.a.createElement(Hd,Object.assign({key:e.PDiskId},e,{NodeId:n.NodeId}))})))},align:as.CENTER,sortable:!1}];e=o;return r===ut&&(e=o.filter((function(e){return e.name!==Ld.Missing}))),t?i.a.createElement(as,{key:r,theme:"internal",data:t,columns:e,settings:n,initialSortOrder:function(e){switch(e){case lt:return{columnId:Ld.NodeId,order:as.ASCENDING};case ct:return{columnId:Ld.Missing,order:as.DESCENDING};default:return}}(r),emptyDataMessage:"No such nodes."}):null}n(801);var Wd=ie()("global-storage"),Gd={Missing:"missing",Space:"space"},qd={displayIndices:!1,stickyHead:as.MOVING,syncHeadOnResize:!0,dynamicRender:!0,defaultOrder:as.DESCENDING,stripedRows:!0,stickyTop:68},Yd=(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onGroupVisibilityChange=function(t){(0,e.props.setVisibleEntities)(t)},e.onStorageTypeChange=function(t){(0,e.props.setStorageType)(t)},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.tenant,r=t.nodeId,i=t.setVisibleEntities,o=t.storageType;this.autofetcher=new uf,this.props.getNodesList(),n||r?i(lt):(this.props.getStorageInfo({tenant:n,nodeId:r,filter:Gd.Missing,type:o}),this.autofetcher.fetch((function(){return e.props.getStorageInfo({tenant:n,nodeId:r,filter:Gd.Missing,type:o})})))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.tenant,r=t.visibleEntities,i=t.getStorageInfo,o=t.nodeId,a=t.storageType;a===e.storageType&&r===e.visibleEntities||(this.autofetcher.stop(),this.autofetcher.start(),this.autofetcher.fetch((function(){return i({tenant:n,filter:Gd[r],nodeId:o,type:a})})),i({tenant:n,filter:Gd[r],nodeId:o,type:a}))}},{key:"componentWillUnmount",value:function(){this.autofetcher.stop(),this.props.setInitialState()}},{key:"renderLoader",value:function(){return i.a.createElement("div",{className:Wd("loader")},i.a.createElement(Ql,{size:"l"}))}},{key:"renderDataTable",value:function(){var e=(r=this.props).flatListStorageEntities,t=r.visibleEntities,n=r.nodes,r=r.storageType;return i.a.createElement("div",{className:Wd("table-wrapper")},r===ht&&i.a.createElement(Dd,{visibleEntities:t,data:e,tableSettings:qd,nodes:n}),r===dt&&i.a.createElement(Vd,{visibleEntities:t,data:e,tableSettings:qd}))}},{key:"renderControls",value:function(){var e=(r=this.props).setStorageFilter,t=r.visibleEntities,n=r.storageType,r=r.flatListStorageEntities;return i.a.createElement("div",{className:Wd("controls")},i.a.createElement("div",{className:Wd("filter")},i.a.createElement(wd,{changeReduxStorageFilter:e,storageType:n})),i.a.createElement(Kh,{value:t,onUpdate:this.onGroupVisibilityChange,className:Wd("control")},i.a.createElement(Kh.Option,{value:ct},ct),i.a.createElement(Kh.Option,{value:ut},ut),i.a.createElement(Kh.Option,{value:lt},lt)),i.a.createElement(Kh,{value:n,onUpdate:this.onStorageTypeChange,className:Wd("control")},i.a.createElement(Kh.Option,{value:ht},ht),i.a.createElement(Kh.Option,{value:dt},dt)),i.a.createElement(sd,{theme:"info",size:"m"},"".concat(n===ht?"Groups":"Nodes",": ").concat(r.length)))}},{key:"render",value:function(){var e=(n=this.props).loading,t=n.wasLoaded,n=n.error;return e&&!t?this.renderLoader():n?i.a.createElement("div",null,n.statusText):i.a.createElement("div",{className:Wd()},this.renderControls(),this.renderDataTable())}}]),n}(i.a.Component),Y={getStorageInfo:function(e){var t=e.tenant,n=e.filter,r=e.nodeId;e=e.type;return Ue({request:Pt.getStorageInfo({tenant:t,filter:n,nodeId:r,type:e}),actions:ft})},setInitialState:function(){return{type:pt}},setStorageFilter:function(e){return{type:mt,data:e}},setVisibleEntities:function(e){return{type:vt,data:e}},getNodesList:function(){return Ue({request:Pt.getNodeInfo(),actions:Ki,dataHandler:function(e){return void 0===(e=e.SystemStateInfo)?[]:e}})},setStorageType:function(e){return{type:gt,data:e}}},Object(l.b)((function(e){var t=(a=e.storage).loading,n=a.wasLoaded,r=a.error,i=a.visible,o=a.type,a=a.filter;return{flatListStorageEntities:wt(e),nodes:(e=e,w.a.reduce(null===(e=e.nodesList)||void 0===e?void 0:e.data,(function(e,t){return e[t.NodeId]=t.Host,e}),{})),loading:t,wasLoaded:n,error:r,visibleEntities:i,storageType:o,filter:a}}),Y)(Z));function Xd(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Kd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xd(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(803);var Zd=ie()("node"),Qd="Storage";(H=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={activeTab:""},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({activeTab:this.props.activeTab}),this.props.getNodeInfo(t),this.reloadDescriptor=setInterval((function(){return e.props.getNodeInfo(t)}),1e4)}},{key:"componentDidUpdate",value:function(){var e=this.props.node,t=this.props.activeTab;e&&(w.a.find(e.Roles,(function(e){return e===Qd}))||(t=vd),this.setState((function(e){if(e.activeTab!==t)return{activeTab:t}})))}},{key:"componentWillUnmount",value:function(){clearInterval(this.reloadDescriptor)}},{key:"renderTabs",value:function(){var e=this.props.node,t=this.props.match.params.id;e=(w.a.find(null==e?void 0:e.Roles,(function(e){return e===Qd}))?gd:gd.filter((function(e){return e.id!==md}))).map((function(e){return Kd(Kd({},e),{},{path:va(ba,{id:t,activeTab:e.id})})}));return i.a.createElement("div",{className:Zd("tabs")},i.a.createElement(ud,{items:e,activeTab:this.state.activeTab,wrapTo:function(e,t){var n=e.path;e=e.id;return i.a.createElement(Da,{to:n,key:e,className:Zd("tab")},t)},allowNotSelected:!0}))}},{key:"renderTabContent",value:function(){var e=this.state.activeTab,t=this.props.match.params.id;switch(e){case md:return i.a.createElement("div",{className:Zd("storage")},i.a.createElement(Yd,{nodeId:t}));case vd:return i.a.createElement(Cd,{nodeId:t});default:return!1}}},{key:"render",value:function(){var e=(a=this.props).className,t=a.loading,r=a.wasLoaded,o=a.error,a=a.node;return t&&!r?n.renderLoader():o?i.a.createElement("div",null,o.statusText):a?i.a.createElement("div",{className:"".concat(Zd()," ").concat(e)},i.a.createElement(pd,{node:a,backend:Do}),this.renderTabs(),i.a.createElement("div",{className:Zd("content")},this.renderTabContent())):i.a.createElement("div",{className:"error"},"no node data")}}],[{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}}]),n}(i.a.Component)).defaultProps={className:""};Y={getNodeInfo:Nn};var $d=ra(Object(l.b)((function(e,t){var n=(r=e.node).wasLoaded,r=r.loading;t=t.match.params.activeTab;return{node:e=(e=e.node.data)&&(e.SystemStateInfo?e.SystemStateInfo[0]:void 0),activeTab:t,wasLoaded:n,loading:r}}),Y)(H));function Jd(e){var t=e.showTooltip,n=e.hideTooltip,r=e.tabletsPath;return[{name:"NodeId",header:"#",width:"80px",align:as.RIGHT},{name:"NodeRef",header:"",sortable:!1,render:function(e){return e=e.row,e=Tt({node:e,backend:Do}),Ro&&e&&i.a.createElement(we,{href:e},i.a.createElement(Ch,{name:"external"}))},width:"40px",align:as.LEFT},{name:"Host",render:function(e){var t=e.row,n=e.value;e=w.a.find(null==t?void 0:t.Roles,(function(e){return e===Qd}));return void 0===n?i.a.createElement("span",null,"—"):i.a.createElement(Eh,{name:t.Host,status:t.Overall,path:va(ba,{id:t.NodeId,activeTab:e?md:vd}),hasClipboardButton:!0})},width:"350px",align:as.LEFT},{name:"DataCenter",header:"DC",align:as.LEFT,render:function(e){return(e=e.value)||"—"},width:"60px"},{name:"Version",width:"200px",align:as.LEFT,render:function(e){return e=e.value,i.a.createElement(Pl,{content:e},e)}},{name:"uptime",header:"Uptime",sortAccessor:function(e){return-e.StartTime},align:as.LEFT,width:"110px"},{name:"MemoryUsed",header:"Memory",sortAccessor:function(e){return e=e.MemoryUsed,Number(void 0===e?0:e)},defaultOrder:as.DESCENDING,render:function(e){var t=e.value;e=e.row;return t?nt(t):e.Metrics?nt(e.Metrics.Memory):"—"},align:as.RIGHT,width:"120px"},{name:"PoolStats",header:"CPU",sortAccessor:function(e){return(void 0===(e=e.PoolStats)?[]:e).reduce((function(e,t){return e+t.Usage}),0)},defaultOrder:as.DESCENDING,render:function(e){return(e=e.value)?i.a.createElement(zh,{onMouseEnter:t,onMouseLeave:n,pools:e}):"—"},align:as.LEFT,width:"120px"},{name:"LoadAverage",header:"Load average",sortAccessor:function(e){return(void 0===(e=e.LoadAverage)?[]:e).slice(0,1).reduce((function(e,t){return e+t}),0)},defaultOrder:as.DESCENDING,render:function(e){return(e=e.value)&&0<e.length?i.a.createElement(mh,{value:e[0],percents:!0,colorizeProgress:!0}):"—"},align:as.LEFT,width:"140px"},{name:"Tablets",width:"330px",render:function(e){return(e=e.row).Tablets?i.a.createElement(Vh,{path:null!=r?r:e.TenantName,nodeIds:[e.NodeId],tablets:e.Tablets}):"—"},align:as.LEFT}]}function ef(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(806);var nf=ie()("cluster-nodes"),rf={displayIndices:!1,stickyHead:as.MOVING,syncHeadOnResize:!0,dynamicRender:!0},of=(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleSearchQueryChange=function(t){e.props.handleSearchQuery(t)},e.handleFilterChange=function(t){e.props.changeFilter(t)},e.renderTable=function(){var t=void 0===(n=(o=e.props).nodes)?[]:n,n=o.filter,r=o.searchQuery,o=Jd({showTooltip:o.showTooltip,hideTooltip:o.hideTooltip});return 0===(t=(t=r?t.filter((function(e){return!e.Host||e.Host.includes(r)||String(e.NodeId).includes(r)})):t).map((function(e){return tf(tf({},e),{},{uptime:$e(e.StartTime)})}))).length?n===D?i.a.createElement("div",{className:"error"},"no nodes data"):i.a.createElement("div",{className:"no-problem"}):i.a.createElement("div",{className:nf("table-wrapper")},i.a.createElement("div",{className:nf("table-content")},i.a.createElement(as,{theme:"internal",data:t,columns:o,settings:rf,initialSortOrder:{columnId:"NodeId",order:as.ASCENDING}})))},e.renderContent=function(){return i.a.createElement("div",{className:nf(null,e.props.className)},e.renderControls(),e.renderTable())},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this;this.props.getNodesList(),this.reloadDescriptor=setInterval((function(){return e.props.getNodesList()}),1e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.reloadDescriptor)}},{key:"renderControls",value:function(){var e=(n=this.props).searchQuery,t=n.filter,n=n.nodes;return i.a.createElement("div",{className:nf("controls")},i.a.createElement("div",{className:nf("controls-left")},i.a.createElement(ic,{className:nf("search"),size:"s",placeholder:"Host name…",text:e,onUpdate:this.handleSearchQueryChange,hasClear:!0}),i.a.createElement(Zh,{value:t,onChange:this.handleFilterChange}),i.a.createElement(sd,{theme:"info",size:"m"},"Nodes: ".concat(n.length))))}},{key:"render",value:function(){var e=(r=this.props).loading,t=r.wasLoaded,r=r.error;return e&&!t?n.renderLoader():r?i.a.createElement("div",null,r.statusText):this.renderContent()}}],[{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}}]),n}(i.a.Component),Y={getNodesList:yn,hideTooltip:cr,showTooltip:ur,changeFilter:zt},Qh(Object(l.b)((function(e){var t=(r=e.nodes).wasLoaded,n=r.loading,r=r.error;return{nodes:Qi(e),wasLoaded:t,loading:n,error:r,filter:e.settings.problemFilter}}),Y)(Z)));n(807);var af=ie()("cluster"),sf="tenants",lf="nodes",cf="storage",uf=function(){function e(){W()(this,e),this.timeout=e.DEFAULT_TIMEOUT,this.active=!0,this.timer=void 0}var t;return q()(e,[{key:"wait",value:function(e){var t=this;return new Promise((function(n){t.timer=setTimeout(n,e)}))}},{key:"fetch",value:(t=$()(ee.a.mark((function t(n){var r,i;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.active){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.wait(this.timeout);case 4:if(this.active)return r=Date.now(),t.next=8,n();t.next=15;break;case 8:i=Date.now(),i-=r,i=e.MIN_TIMEOUT<i?i:e.MIN_TIMEOUT,this.timeout=i,this.fetch(n),t.next=16;break;case 15:return t.abrupt("return");case 16:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"stop",value:function(){clearTimeout(this.timer),this.active=!1}},{key:"start",value:function(){this.active=!0}}]),e}();uf.DEFAULT_TIMEOUT=3e4,uf.MIN_TIMEOUT=3e4;H=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).renderContent=function(){var t=e.props.cluster;return i.a.createElement("div",{className:af()},i.a.createElement(Dh,{cluster:t,showTooltip:e.props.showTooltip,hideTooltip:e.props.hideTooltip}),e.renderTabContent())},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this;this.props.getClusterInfo(Lo),this.autofetcher=new uf,this.autofetcher.fetch((function(){return e.props.getClusterInfo(Lo)}))}},{key:"componentDidCatch",value:function(e,t){console.log(e),console.log(t)}},{key:"componentWillUnmount",value:function(){this.autofetcher.stop()}},{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}},{key:"renderTabContent",value:function(){switch(this.props.activeTab){case sf:return i.a.createElement(id,this.props);case lf:return i.a.createElement(of,this.props);case cf:return i.a.createElement(Yd,this.props);default:return null}}},{key:"render",value:function(){var e=(n=this.props).error,t=n.loading,n=n.wasLoaded;return t&&!n?this.renderLoader():e?i.a.createElement("div",null,e.statusText):this.renderContent()}}]),n}(i.a.Component),Y={getClusterInfo:Sn,hideTooltip:cr,showTooltip:ur};var hf=Object(l.b)((function(e,t){var n=(i=e.cluster).data,r=i.loading,i=(e=i.error,i.wasLoaded);return{activeTab:void 0===(t=t.match.params.activeTab)?sf:t,cluster:n,loading:r,wasLoaded:i,error:e}}),Y)(H);n(808);var df=ie()("clusters"),ff={stickyHead:as.MOVING,syncHeadOnResize:!0,displayIndices:!1,stripedRows:!1},pf=i.a.createElement("span",{className:df("empty-cell")},"—"),mf=[{name:vh.TITLE,header:yh[vh.TITLE],width:230,render:function(e){var t=e.row,n=e.value,r=void 0===(a=t.clusterVersions)?[]:a,o=t.balancer,a=(e=t.name,!r.some((function(e){return e.version.includes("stable-29")})));r=o.startsWith("https://".concat(St))||o.startsWith("https://".concat(Ot))?"https://":"https://".concat(kt(o),"/"),o=Et(o),r=a?va("".concat(ga),{activeTab:sf},{backend:"".concat(r).concat(o),clusterName:e}):"".concat(r).concat(o,"/"),o=null===(o=t.cluster)||void 0===o?void 0:o.Overall;return i.a.createElement("div",{className:df("cluster")},o?i.a.createElement(we,{href:r},i.a.createElement("div",{className:df("cluster-status",{type:o&&o.toLowerCase()})})):i.a.createElement("div",{className:df("cluster-status")},i.a.createElement(jl,{content:i.a.createElement("span",{className:df("tooltip-content")},null===(t=t.cluster)||void 0===t?void 0:t.error),offset:{left:0}})),i.a.createElement("div",{className:df("cluster-name")},i.a.createElement(we,{href:r},n)))},defaultOrder:as.ASCENDING},{name:vh.VERSIONS,header:yh[vh.VERSIONS],width:300,defaultOrder:as.DESCENDING,sortAccessor:function(e){return e.clusterVersions.map((function(e){return e.version.replace(/^[0-9]+\./g,"")})).sort((function(e,t){return e.localeCompare(t)}))[0]||void 0},render:function(e){var t=e.row,n=t.clusterVersions;if(!(e=void 0===(e=t.versions)?[]:e).length||e.some((function(e){return!e.version})))return pf;var r=e.reduce((function(e,t){return e+t.count}),0);e=e.map((function(e){return{value:e.count/r*100,color:w.a.find(n,{version:e.version}).color}}));return 0<n.length&&i.a.createElement(Da,{className:df("cluster-versions"),to:va(ka,{name:t.name})},i.a.createElement(i.a.Fragment,null,n.map((function(e,t){return i.a.createElement("div",{className:df("cluster-version"),style:{color:e.color},key:t,title:e.version},e.version)})),i.a.createElement(Fl,{view:"thin",value:100,stack:e})))}},{name:vh.CLUSTER,header:yh[vh.CLUSTER],width:120,sortable:!1,render:function(e){return e=(e=e.row).cluster&&e.cluster.DataCenters||[],i.a.createElement("div",{className:df("cluster-dc")},e.join(", ")||pf)}},{name:vh.SERVICE,header:yh[vh.SERVICE],width:100,sortable:!0},{name:vh.STATUS,header:yh[vh.STATUS],width:150,sortable:"true"},{name:vh.NODES,header:yh[vh.NODES],width:150,defaultOrder:as.DESCENDING,sortAccessor:function(e){return void 0===(e=e.cluster.NodesTotal)?0:e},render:function(e){e=(n=(t=e.row).cluster).NodesAlive;var t,n=n.NodesTotal;return(t=t.cluster.Overall)?t&&i.a.createElement(ph,{value:void 0===e?0:e,capacity:void 0===n?0:n}):pf}},{name:vh.LOAD,header:yh[vh.LOAD],width:150,defaultOrder:as.DESCENDING,sortAccessor:function(e){return e.cluster.NumberOfCpus},render:function(e){e=(n=(t=e.row).cluster).LoadAverage;var t,n=n.NumberOfCpus;return(t=t.cluster.Overall)?t&&i.a.createElement(ph,{value:void 0===e?0:e,capacity:void 0===n?0:n}):pf}},{name:vh.STORAGE,header:yh[vh.STORAGE],width:150,defaultOrder:as.DESCENDING,sortAccessor:function(e){return(e=e.cluster.StorageTotal)&&parseInt(Xe(e))},render:function(e){e=(n=(t=e.row).cluster).StorageUsed;var t,n=n.StorageTotal;return(t=t.cluster.Overall)?t&&i.a.createElement(ph,{value:void 0===e?0:e,capacity:void 0===n?0:n,formatValues:Xe}):pf}},{name:vh.HOSTS,header:yh[vh.HOSTS],width:80,defaultOrder:as.DESCENDING,sortAccessor:function(e){return e=e.cluster,Number(e.Hosts)||0},render:function(e){return e=e.row,Number(e.cluster.Hosts)||pf}},{name:vh.OWNER,header:yh[vh.OWNER],sortable:!1,width:120,render:function(e){return(e=null===(e=e.row.owner)||void 0===e?void 0:e.split(", ")).length?e.map((function(e){return i.a.createElement(Hl,{key:e,login:e,className:df("text")},e)})):pf}},{name:vh.DESCRIPTION,header:yh[vh.DESCRIPTION],sortable:!1,width:150,render:function(e){return(e=e.value)?i.a.createElement("div",{className:df("description")},e):pf}},{name:vh.BALANCER,header:yh[vh.BALANCER],sortable:!1,width:290,render:function(e){var t=e.value;e=Et(t,!0,!0);return t?i.a.createElement("div",{className:df("balancer-cell")},i.a.createElement("div",{className:df("balancer-text")},e),i.a.createElement(Kl,{size:14,text:e,className:df("balancer-icon")})):pf}}],vf=(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={localFilter:""},e.changeStatus=function(t){e.props.changeControlsFilters({status:t})},e.changeService=function(t){e.props.changeControlsFilters({service:t})},e.changeClusterName=function(t){clearTimeout(e.timer),e.setState({localFilter:t}),e.timer=setTimeout((function(){e.props.changeControlsFilters({clusterName:t})}),200)},e.changeVersion=function(t){e.props.changeControlsFilters({version:t})},e.selectColumns=function(t){var n=e.props.setSettingValue;t=JSON.stringify(t.filter((function(e){return e.selected})).map((function(e){return e.id})));n(B,t)},e.renderAggregationStatistics=function(){var t=(c=e.props).aggregation,n=c.filteredClusters,r=t.NodesTotal,o=t.NodesAlive,a=t.Hosts,s=t.LoadAverage,l=t.NumberOfCpus,c=t.StorageUsed;t=t.StorageTotal;return i.a.createElement("div",{className:df("aggregation")},i.a.createElement("div",{className:df("aggregation-value-container")},i.a.createElement("span",{className:df("aggregation-label")},"Clusters"),n.length),i.a.createElement("div",{className:df("aggregation-value-container")},i.a.createElement("span",{className:df("aggregation-label")},"Hosts"),a),i.a.createElement("div",{className:df("aggregation-value-container")},i.a.createElement("span",{className:df("aggregation-label")},"Nodes"),i.a.createElement(ph,{size:"ns",value:o,capacity:r,colorizeProgress:!0,inverseColorize:!0})),i.a.createElement("div",{className:df("aggregation-value-container")},i.a.createElement("span",{className:df("aggregation-label")},"Load"),i.a.createElement(ph,{size:"ns",value:s,capacity:l,colorizeProgress:!0})),i.a.createElement("div",{className:df("aggregation-value-container")},i.a.createElement("span",{className:df("aggregation-label")},"Storage"),i.a.createElement(ph,{size:"ns",value:c,capacity:t,formatValues:function(e,t){return[e,"".concat(t," TB")]},colorizeProgress:!0})))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchClustersList(),this.getClustersTimeout=setInterval((function(){e.props.fetchClustersList()}),25e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.getClustersTimeout),clearTimeout(this.timer)}},{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}},{key:"render",value:function(){var e,t=void 0===(d=(h=this.props).clusters)?[]:d,n=h.loading,r=h.status,o=h.service,a=h.version,s=h.versions,l=h.filteredClusters,c=h.selectedColumns,u=new Set,h=(e=(d=c)?It(d):gh,d=mf.filter((function(t){return e.find((function(e){return e===t.name}))})),[Object.keys(vh).map((function(t){return{title:yh[vh[t]],selected:Boolean(e.find((function(e){return e===vh[t]}))),id:vh[t],required:vh[t]===vh.TITLE}})),d]),d=(c=ae()(h,2))[0];h=c[1];return t.forEach((function(e){u.add(e.service)})),c=Array.from(u).map((function(e){return{value:e,title:e}})),n&&!t.length?this.renderLoader():i.a.createElement("div",{className:df()},this.renderAggregationStatistics(),i.a.createElement("div",{className:df("controls")},i.a.createElement("div",{className:df("control",{wide:!0})},i.a.createElement(ic,{autoFocus:!0,placeholder:"Cluster name, version, host",text:this.state.localFilter,onUpdate:this.changeClusterName,hasClear:!0})),i.a.createElement("div",{className:df("control")},i.a.createElement(cu,{type:cu.MULTIPLE,placeholder:"All",label:"Status:",value:r,items:bh,onUpdate:this.changeStatus})),i.a.createElement("div",{className:df("control")},i.a.createElement(cu,{type:cu.MULTIPLE,placeholder:"All",label:"Service:",value:o,items:c,onUpdate:this.changeService})),i.a.createElement("div",{className:df("control")},i.a.createElement(cu,{type:cu.MULTIPLE,placeholder:"All",label:"Version:",value:a,items:s,onUpdate:this.changeVersion})),i.a.createElement("div",{className:df("control")},i.a.createElement("div",{"data-qa":F},i.a.createElement(dh,{key:"TableColumnSetup",popupWidth:"242px",items:d,showStatus:!0,onUpdate:this.selectColumns})))),i.a.createElement("div",{className:df("table-wrapper")},i.a.createElement("div",{className:df("table-content")},i.a.createElement(as,{theme:"common",data:l,columns:h,settings:ff,initialSortOrder:{columnId:"title",order:as.ASCENDING}}))))}}]),n}(i.a.Component),Y={fetchClustersList:function(){return Ue({request:Pt.getClustersList(),actions:_i,dataHandler:function(e){e=e.clusters;var t={};(e=void 0===e?[]:e).forEach((function(e){e=e.cluster.Versions,t=gi(void 0===e?[]:e,t)}));var n=yi(t);return e.map((function(e){return r=n,e=(void 0===(e=(t=e).versions)?[]:e).filter((function(e){return e.version})),e=w.a.uniqBy(e,"version").map((function(e){return vi(vi({},e),{},{minorVersion:Ei(e.version)})})).reduce((function(e,t){var n=r.get(t.minorVersion);return e.push(vi(vi({},t),{},{color:n})),e}),[]),vi(vi({},t),{},{clusterVersions:e});var t,r}))}})},changeControlsFilters:function(e){return{type:ki,data:e}},setSettingValue:Bt},Object(l.b)((function(e){return{clusters:Ni(e),aggregation:Li(e),clusterName:Pi(e),status:Ii(e),service:Ri(e),loading:e.clusters.loading,filteredClusters:Di(e),version:ji(e),versions:Ai(e),selectedColumns:Ht(e,B)}}),Y)(Z)),gf=(H=n(436),n.n(H));function yf(e){return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10",width:"16",height:"16",fill:"currentColor"},e),i.a.createElement("path",{d:"M.49 5.385l1.644-1.644 4.385 4.385L4.874 9.77.49 5.385zm4.384 1.096L10.356 1 12 2.644 6.519 8.126 4.874 6.48v.001z"}))}function bf(e){return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 17",width:"16",height:"16",fill:"currentColor"},e),i.a.createElement("path",{d:"M4 7h9v3H4z"}))}function Cf(e){var t=e.children,n=e.nodeLabel,r=e.onClick,o=e.collapsed,a=void 0!==(l=e.clickableLabel)&&l,s=e.className,l=void 0===(l=e.hasArrow)||l;e=v()(e,Of),n=i.a.createElement("div",{className:xf("node-wrapper",{clickable:a}),onClick:a?r:void 0},l?i.a.createElement("span",{className:xf("arrow-icon",{extended:!o}),onClick:a?void 0:r},i.a.createElement(Ch,{name:"arrow-right",viewBox:"0 0 6 11",width:"6",height:"11"})):null,n);return i.a.createElement(Sf.a,Object.assign({},e,{treeViewClassName:xf(null,s),nodeLabel:n,collapsed:o}),t)}n(822);var wf=oe("checkbox"),Ef=i.a.forwardRef((function(e,t){var n=void 0===(h=e.size)?"m":h,r=e.indeterminate,o=void 0!==(d=e.disabled)&&d,a=e.content,s=e.children,l=e.title,c=e.style,u=e.className,h=e.qa,d=(e=(d=Ah(e)).checked,d.inputProps);s=a||s;return i.a.createElement("label",{ref:t,title:l,style:c,className:wf({size:n,disabled:o,indeterminate:r,checked:e},u),"data-qa":h},i.a.createElement("span",{className:wf("indicator")},i.a.createElement("span",{className:wf("icon"),"aria-hidden":!0},r?i.a.createElement(bf,{className:wf("icon-svg",{type:"dash"})}):i.a.createElement(yf,{className:wf("icon-svg",{type:"tick"})})),i.a.createElement("input",Object.assign({},d,{className:wf("control")})),i.a.createElement("span",{className:wf("outline")})),s&&i.a.createElement("span",{className:wf("text")},s))})),Sf=(Y=n(539),n.n(Y)),Of=(n(819),["children","nodeLabel","onClick","collapsed","clickableLabel","className","hasArrow"]),xf=ie()("km-tree-view");function _f(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function kf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_f(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tf(e){var t=e.title,n=e.nodes,r=e.items,o=e.versionColor;e=e.versionsValues,n=r?r.reduce((function(e,t){return e+t.nodes.length}),0):n.length;return i.a.createElement("div",{className:If("overview")},i.a.createElement("div",{className:If("overview-container")},o?i.a.createElement("div",{className:If("version-color"),style:{background:o}}):null,i.a.createElement("span",{className:If("overview-title")},t)),i.a.createElement("div",{className:If("overview-info")},i.a.createElement("div",null,i.a.createElement("span",{className:If("info-value")},n),i.a.createElement("span",{className:If("info-label",{margin:"left"})},"Nodes")),e?i.a.createElement("div",{className:If("version-progress")},i.a.createElement("span",{className:If("info-label",{margin:"right"})},"Versions"),i.a.createElement(Fl,{view:"thin",value:100,stack:e})):null))}function Nf(e){var t=e.title,n=e.nodes,o=e.items,a=e.expanded,s=e.versionColor,l=e.versionsValues,c=e.showTooltip,u=e.hideTooltip,h=(e=Object(r.useState)(!1),(e=ae()(e,2))[0]),d=e[1];return Object(r.useEffect)((function(){d(a)}),[a]),l=i.a.createElement(Tf,{title:t,nodes:n,items:o,versionColor:s,versionsValues:l}),o?i.a.createElement(Cf,{clickableLabel:!0,key:l,nodeLabel:l,collapsed:!h,onClick:function(){return d(!h)},className:If()},o.map((function(e,t){return i.a.createElement(Nf,{key:t,index:t,title:e.title,nodes:e.nodes,expanded:a,versionColor:e.versionColor,showTooltip:c,hideTooltip:u})}))):(o=[{name:"NodeId",header:"#",width:"80px",align:as.LEFT},{name:"Host",render:function(e){var t=e.row,n=(e=t.Endpoints&&(null===(n=t.Endpoints.find((function(e){return"http-mon"===e.Name})))||void 0===n?void 0:n.Address),t.Host&&"".concat(t.Host).concat(e||""));e=n||"unknown";return i.a.createElement(Eh,{className:If("name"),name:e,path:va("".concat(ba),{id:t.NodeId,activeTab:"storage"},{backend:xt(n)}),hasClipboardButton:!0,showStatus:!1,externalLink:!0})},width:"400px",align:as.LEFT},{name:"Endpoints",sortable:!1,render:function(e){return(e=e.value)?e.map((function(e){var t=e.Name;e=e.Address;return"".concat(t," ").concat(e)})).join(", "):"-"},width:"300px",align:as.LEFT},{name:"uptime",header:"Uptime",sortAccessor:function(e){return-e.StartTime},width:"120px",align:as.LEFT},{name:"MemoryUsed",header:"Memory used",sortAccessor:function(e){return e=e.MemoryUsed,Number(void 0===e?0:e)},defaultOrder:as.DESCENDING,render:function(e){return(e=e.value)?nt(e):"—"},width:"120px",align:as.RIGHT},{name:"MemoryLimit",header:"Memory limit",sortAccessor:function(e){return e=e.MemoryLimit,Number(void 0===e?0:e)},defaultOrder:as.DESCENDING,render:function(e){return(e=e.value)?nt(e):"—"},width:"120px",align:as.RIGHT},{name:"PoolStats",header:"Pools",sortAccessor:function(e){return(void 0===(e=e.PoolStats)?[]:e).reduce((function(e,t){return e+t.Usage}),0)},defaultOrder:as.DESCENDING,width:"120px",render:function(e){return(e=e.value)?i.a.createElement(zh,{onMouseEnter:c,onMouseLeave:u,pools:e}):"—"},align:as.LEFT},{name:"LoadAverage",header:"Load average",sortAccessor:function(e){return(void 0===(e=e.LoadAverage)?[]:e).slice(0,1).reduce((function(e,t){return e+t}),0)},defaultOrder:as.DESCENDING,width:"200px",render:function(e){return(e=e.value)&&0<e.length?i.a.createElement(mh,{value:e[0],percents:!0,colorizeProgress:!0}):"—"},align:as.LEFT}],n=n.map((function(e){return kf(kf({},e),{},{uptime:$e(e.StartTime)})})),i.a.createElement(Cf,{clickableLabel:!0,key:l,nodeLabel:l,collapsed:!h,onClick:function(){return d(!h)},className:If()},i.a.createElement("div",{className:If("dt-wrapper")},i.a.createElement(as,{data:n,columns:o,settings:{displayIndices:!1}}))))}function Pf(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=gi(e.map((function(e){return e.version}))),r=yi(n),i=w.a.reduce(e,(function(e,n){return!t||t.has(n.version)?e+n.count:e}),0);return{versionsValues:w.a.map(e,(function(e){if(!t||t.has(e.version))return{value:e.count/i*100,color:r.get(Ei(e.version)),version:e.version,title:e.version}})).filter(Boolean),versionToColor:r}}n(820);var If=ie()("grouped-node-tree"),Rf="Version",jf=(n(821),["loading","nodes","cluster"]);function Df(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Af(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Df(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Df(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lf=ie()("cluster-page"),Mf=(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={groupBy:Rf,expanded:!1,isFirstFetchData:!0},e.sortByTitle=function(e,t){return e.title.localeCompare(t.title)},e.onChange=function(t,n){e.setState(p()({},t,n))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.name;this.props.getCluster(t).then((function(){return e.setState({isFirstFetchData:!1})})).catch((function(){return e.setState({isFirstFetchData:!1})}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.cluster.name!==this.props.cluster.name&&this.props.cluster.balancer&&(this.props.getClusterNodesInfo(this.props.cluster.balancer),this.reloadNodes=setInterval((function(){t.props.getCluster(t.props.name),t.props.getClusterNodesInfo(t.props.cluster.balancer)}),5e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.reloadNodes)}},{key:"renderLoader",value:function(){return i.a.createElement("div",{className:Lf("loader")},i.a.createElement(Ql,{size:"l"}))}},{key:"renderPlaceholder",value:function(){return i.a.createElement("div",{className:Lf("placeholder")},"Not found")}},{key:"getGroupedTenantNodes",value:function(){var e=this,t=this.props,n=t.nodes,r=t.versionToColor,i=t.cluster.versions;if(this.state.groupBy===Rf){var o=w.a.groupBy(n,"Version");return Object.keys(o).map((function(t){var n=ui()([hi()((function(e){return e=e.Tenants,Boolean(e)})),gf()("Tenants")])(o[t]),i=Object.keys(n).map((function(e){return{title:e,nodes:n[e]}})).sort(e.sortByTitle);return i.length?{title:t,items:i,versionColor:r.get(Ei(t))}:null})).filter(Boolean)}var a=ui()([hi()((function(e){return e=e.Tenants,Boolean(e)})),gf()("Tenants")])(n);return Object.keys(a).map((function(e){var t=w.a.groupBy(a[e],"Version"),n=Object.keys(t).map((function(e){return{title:e,nodes:t[e],versionColor:r.get(e)}}));if(!n.length)return null;var o=n.map((function(e){return e.title}));o=new Set(o);return{title:e,items:n,versionsValues:Pf(i,o).versionsValues}})).filter(Boolean).sort(this.sortByTitle)}},{key:"getGroupedStorageNodes",value:function(){var e=this.props,t=e.nodes,n=e.versionToColor,r=(t=t.filter((function(e){return null==(e=e.Roles)?void 0:e.includes("Storage")})),w.a.groupBy(t,"Version"));return Object.keys(r).map((function(e){return{title:e,nodes:r[e],versionColor:n.get(Ei(e))}}))}},{key:"getOtherNodes",value:function(){var e=this.props,t=e.nodes,n=e.versionToColor,r=(t=t.filter((function(e){return!e.Roles})),w.a.groupBy(t,"Version"));return Object.keys(r).map((function(e){return{title:e,nodes:r[e],versionColor:n.get(Ei(e))}}))}},{key:"renderGroupedNodes",value:function(){var e=this,t=this.getGroupedTenantNodes(),n=this.getGroupedStorageNodes(),r=this.getOtherNodes(),o=this.state.expanded;n=null!=n&&n.length?i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"Storage nodes"),n.map((function(t,n){var r=t.title,o=t.nodes,a=t.items;t=t.versionColor;return i.a.createElement(Nf,{key:"storage-nodes-".concat(n),title:r,nodes:o,items:a,index:n,versionColor:t,showTooltip:e.props.showTooltip,hideTooltip:e.props.hideTooltip})}))):null,t=null!=t&&t.length?i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"Database nodes"),this.renderControls(),t.map((function(t,n){var r=t.title,a=t.nodes,s=t.items,l=t.versionColor;t=t.versionsValues;return i.a.createElement(Nf,{key:"tenant-nodes-".concat(n),title:r,nodes:a,items:s,expanded:o,versionColor:l,versionsValues:t,index:n,showTooltip:e.props.showTooltip,hideTooltip:e.props.hideTooltip})}))):null,r=null!=r&&r.length?i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"Other nodes"),r.map((function(t,n){var r=t.title,o=t.nodes,a=t.items,s=t.versionColor;t=t.versionsValues;return i.a.createElement(Nf,{key:"other-nodes-".concat(n),title:r,nodes:o,items:a,versionColor:s,versionsValues:t,index:n,showTooltip:e.props.showTooltip,hideTooltip:e.props.hideTooltip})}))):null;return i.a.createElement("div",{className:Lf("versions")},n,t,r)}},{key:"renderGroupControl",value:function(){var e=this,t=this.state.groupBy;return i.a.createElement("div",{className:Lf("group")},i.a.createElement("span",{className:Lf("label")},"Group by:"),i.a.createElement(Kh,{value:t,onUpdate:function(t){return e.onChange("groupBy",t)}},i.a.createElement(Kh.Option,{value:"Database"},"Database"),i.a.createElement(Kh.Option,{value:Rf},Rf)))}},{key:"renderControls",value:function(){var e=this,t=this.state.expanded;return i.a.createElement("div",{className:Lf("controls")},this.renderGroupControl(),i.a.createElement(Ef,{className:Lf("checkbox"),onChange:function(){return e.onChange("expanded",!t)},checked:t},"All expanded"))}},{key:"renderVersionProgress",value:function(){var e=this.props.versionsValues;return i.a.createElement("div",{className:Lf("version-progress")},i.a.createElement("h3",{className:Lf("progress-label")},"Versions"),i.a.createElement(Fl,{value:100,stack:e}))}},{key:"renderClusterInfo",value:function(){var e=(n=this.props).cluster,t=n.clusterInfo,n=e.title;return e&&t?i.a.createElement("div",{className:Lf()},i.a.createElement("div",{className:Lf("header")},i.a.createElement(Dh,{cluster:Af(Af({},t),{},{Versions:e.versions.map((function(e){return e.version}))}),showTooltip:this.props.showTooltip,hideTooltip:this.props.hideTooltip,clusterTitle:n}),this.renderVersionProgress()),i.a.createElement("div",{className:Lf("content")},this.renderGroupedNodes())):this.renderPlaceholder()}},{key:"render",value:function(){var e=this.props.loading,t=this.state.isFirstFetchData;return e&&t?this.renderLoader():this.renderClusterInfo()}}]),n}(i.a.Component),H={getCluster:function(e){return Ue({request:Pt.getClustersList(),actions:Bi,dataHandler:function(t){return(void 0===(t=t.clusters)?[]:t).filter((function(t){return t.name===e}))[0]}})},getClusterNodesInfo:function(e){return Ue({request:Pt.getClusterNodesInfo(e),actions:Hi,dataHandler:function(e){return void 0===(e=e.SystemStateInfo)?[]:e}})},hideTooltip:cr,showTooltip:ur},Object(l.b)((function(e,t){var n,r,i=t.match.params.name,o=(r=e.clusterInfo).loading;t=void 0===(n=r.nodes)?[]:n,e=r.cluster;return{name:i,cluster:n=v()(r,jf),clusterInfo:e,nodes:t,loading:o,versionsValues:(r=Pf(n.versions)).versionsValues,versionToColor:r.versionToColor}}),H)(Z));function Ff(e){return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16"},e),i.a.createElement("path",{stroke:"currentColor",fill:"none",d:"M3 6l5 5 5-5"}))}n(824);var Bf=oe("arrow-toggle");function Hf(e){var t=void 0===(n=e.size)?16:n,n=e.direction;e=e.className;return i.a.createElement("span",{style:{width:t,height:t},className:Bf({direction:void 0===n?"bottom":n},e)},i.a.createElement(he,{data:Ff,size:t}))}n(823);var zf=ie()("yc-collapse");function Uf(e){var t,n,o=e.title,a=e.children,s=void 0===(c=e.arrowView)?"icon":c,l=void 0===(h=e.emptyState)?"No data":h,c=void 0===(u=e.titleSize)?"l":u,u=void 0===(h=e.contentMarginTop)?12:h,h=e.defaultIsExpand,d=(e=e.onChange,h=Object(r.useState)(h),(h=ae()(h,2))[0]),f=h[1];h=d?"top":"bottom",h="button"===s?i.a.createElement(ge,{view:"flat",className:zf("arrow-button")},i.a.createElement(Hf,{className:zf("arrow"),direction:h,size:20})):i.a.createElement(Hf,{className:zf("arrow"),direction:h,size:20});return t=e,e=[d],n=Object(r.useRef)(!0),Object(r.useEffect)((function(){return n.current?void(n.current=!1):t()}),e),i.a.createElement("div",{className:zf()},i.a.createElement("div",{className:zf("panel",{"no-data":!a}),onClick:function(){f(!d)}},"string"==typeof o?i.a.createElement("h2",{className:zf("title",{size:c})},o):o,a&&i.a.createElement("div",{className:zf("arrow-wrapper")},h)),!a&&i.a.createElement("h4",{className:zf("empty-state-title")},l),a&&i.a.createElement("div",{className:zf("content",{visible:d}),style:{marginTop:u}},a))}n(825);var Vf=ie()("tenant-overview"),Wf=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onChangeCollapseState=function(){window.dispatchEvent(new Event("resize"))},e}return q()(n,[{key:"render",value:function(){var e=(h=this.props).tenant,t=h.systemTablets,n=h.hideTooltip,r=h.showTooltip,o=void 0===(f=e.Metrics)?{}:f,a=e.PoolStats,s=void 0===(d=e.StateStats)?[]:d,l=e.MemoryUsed,c=e.CoresUsed,u=e.StorageGroups,h=e.StorageAllocatedSize,d=(f=null!=l?l:o.Memory)&&At(f)||"no data",f=(l=o.Storage&&At(o.Storage)||"no data",null!=u?u:"no data");u=h&&At(h)||"no data",h=o.Storage&&h?"".concat((100*o.Storage/h).toFixed(2),"%"):"no data",u=[{label:"Memory",value:d},{label:"CPU",value:Qe(o=void 0!==c?1e6*Number(c):o.CPU)},{label:"Tablet storage",value:l},{label:"Storage groups",value:f},{label:"Blob storage",value:u},{label:"Storage efficiency",value:h}],h=s.map((function(e){return{label:_[e.VolatileState],value:e.Count}})),s=i.a.createElement("span",{className:Vf("collapse-title")},"Database info");return i.a.createElement("div",{className:Vf()},i.a.createElement("div",{className:Vf("top")},i.a.createElement("span",{className:Vf("top-label")},"database"),function(e){if(e){var t=e.Name;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ph,{to:va(ya,{page:$h},{name:t})},i.a.createElement(Eh,{status:e.State})),i.a.createElement("span",null,t))}return i.a.createElement("div",null,"no tenant data")}(e),this.props.solomon&&this.props.tenant.Name&&i.a.createElement(we,{target:"_blank",href:Lt(this.props.solomon,this.props.tenant.Name),className:Vf("solomon")},i.a.createElement(Pl,{content:"Monitoring dashboard",placement:["bottom"]},i.a.createElement(Ch,{name:"monitoring",viewBox:"0 0 32 32",width:20,height:20}))),i.a.createElement("div",{className:Vf("system-tablets")},t&&t.map((function(e,t){return i.a.createElement(Rh,{onMouseEnter:r,onMouseLeave:n,key:t,tablet:e})})))),i.a.createElement(Uf,{title:s,onChange:this.onChangeCollapseState,titleSize:"m"},i.a.createElement("div",{className:Vf("common-info")},a?i.a.createElement("div",null,i.a.createElement("div",{className:Vf("section-title")},"Pools"),i.a.createElement("div",{className:Vf("section",{pools:!0})},a.map((function(e,t){return i.a.createElement(dd,{key:t,data:e})})))):i.a.createElement("div",{className:"error"},"no pools data"),i.a.createElement(xh,{title:"Metrics",className:Vf("section",{metrics:!0}),info:u}),i.a.createElement("div",{className:Vf("section")},i.a.createElement(xh,{info:h,title:"Tablets"})))))}}]),n}(i.a.Component);n(826);var Gf=ie()("nodes-viewer"),qf={displayIndices:!1,stickyHead:as.MOVING,syncHeadOnResize:!0,dynamicRender:!0};(Y=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={filteredNodes:[],nodesToShow:[]},e.onChangeProblemFilter=function(t){var r=(i=e.props).nodes,i=i.changeFilter;r=n.filterNodes(r,t);i(t),e.setState({filteredNodes:r})},e}return q()(n,[{key:"renderControls",value:function(){var e=(o=this.props).searchQuery,t=o.handleSearchQuery,r=o.filter,o=n.selectNodesToShow(this.state.filteredNodes,e);return i.a.createElement("div",{className:Gf("controls")},i.a.createElement(ic,{className:Gf("search"),size:"s",placeholder:"Host name…",text:e,onUpdate:t,hasClear:!0}),i.a.createElement(Zh,{value:r,onChange:this.onChangeProblemFilter}),i.a.createElement(sd,{theme:"info",size:"m"},"Nodes: ".concat(o.length)))}},{key:"render",value:function(){var e=(c=this.props).className,t=c.searchQuery,r=c.path,o=c.filter,a=c.showControls,s=c.hideTooltip,l=c.showTooltip,c=this.state.filteredNodes;l=Jd({tabletsPath:r,hideTooltip:s,showTooltip:l});return c&&Array.isArray(c)?(t=n.selectNodesToShow(c,t),i.a.createElement("div",{className:"".concat(Gf()," ").concat(e)},a?this.renderControls():null,i.a.createElement("div",{className:Gf("table-wrapper")},0===t.length?i.a.createElement("div",{className:"no-problem"}):i.a.createElement("div",{className:Gf("table-content")},i.a.createElement(as,{theme:"internal",key:o,data:t,columns:l,settings:qf}))))):i.a.createElement("div",{className:"error"},"no nodes data")}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.nodes;e=e.filter;return w.a.isEqual(r,t.nodes)?null:{nodes:r,filteredNodes:n.filterNodes(r,e)}}},{key:"filterNodes",value:function(e,t){return t===D?e:w.a.filter(e,(function(e){return e.Overall&&"Green"!==e.Overall}))}},{key:"selectNodesToShow",value:function(e,t){var n=e;return e&&Array.isArray(e)?e.map((function(e){return e.uptime=$e(e.StartTime),e})).filter((function(e){return!e.Host||e.Host.includes(t)})):n}}]),n}(i.a.PureComponent)).defaultProps={className:"",showSearch:!0,showControls:!0};H={changeFilter:zt,hideTooltip:cr,showTooltip:ur};var Yf=Qh(Object(l.b)((function(e){return{filter:e.settings.problemFilter}}),H)(Y));n(827);var Xf=ie()("compute");Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getNodes,n=e.tenantName;n&&(t(n),this.reloadDescriptor=setInterval((function(){return t(n)}),1e4))}},{key:"componentWillUnmount",value:function(){this.props.clearNodes(),clearInterval(this.reloadDescriptor)}},{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}},{key:"render",value:function(){var e,t=(e=this.props).nodes,n=e.loading,r=e.wasLoaded,o=e.error;return(e=e.tenantName)?n&&!r?this.renderLoader():o?i.a.createElement("div",null,o.statusText):i.a.createElement("div",{className:Xf()},i.a.createElement(Yf,{backend:Do,nodes:t,path:e,hideTooltip:this.props.hideTooltip,showTooltip:this.props.showTooltip})):i.a.createElement("div",{className:"error"},"no tenant name in the query string")}}]),n}(i.a.Component);function Kf(){}H={getNodes:yn,clearNodes:function(){return{type:"CLEAR_NODES"}},hideTooltip:cr,showTooltip:ur};var Zf=ra(Object(l.b)((function(e,t){var n=(o=e.nodes).data,r=o.loading,i=o.wasLoaded,o=(e=o.error,o.timeoutForRequest);t=t.location.search,t=b.a.parse(t,{ignoreQueryPrefix:!0}).name;return{nodes:n&&n.Tenants&&n.Tenants[0]&&n.Tenants[0].Nodes||{},tenantName:t,timeoutForRequest:o,loading:r,wasLoaded:i,error:e}}),H)(Z)),Qf=(Y="undefined"!=typeof window)?r.useLayoutEffect:r.useEffect,$f={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},Jf=Y&&void 0!==window.ResizeObserver?function(){var e=(i=Object(r.useState)(null))[0],t=i[1],n=Object(r.useState)($f),i=n[0],o=n[1],a=Object(r.useMemo)((function(){return new window.ResizeObserver((function(e){var t,n,r,i,a,s,l;e[0]&&(t=(l=e[0].contentRect).x,n=l.y,r=l.width,i=l.height,a=l.top,s=l.left,e=l.bottom,l=l.right,o({x:t,y:n,width:r,height:i,top:a,left:s,bottom:e,right:l}))}))}),[]);return Qf((function(){if(e)return a.observe(e),function(){a.disconnect()}}),[e]),[t,i]}:function(){return[Kf,$f]};function ep(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(828);var np=ie()("split");function rp(e){var t=e.className,n=e.children,i=e.size,o=e.split,a=e.style,s=e.hide,l=e.innerRef,c=r.useState(!0===s),u=(e=(d=ae()(c,2))[0],d[1]),h=(c=r.useState(!0===s),c=(d=ae()(c,2))[0],d[1]),d=void 0===i;return r.useLayoutEffect((function(){u(!0),h(!0===s);var e=window.setTimeout((function(){return u(!1)}),200);return function(){clearTimeout(e)}}),[s]),e=tp(tp(tp({},a),d?void 0:(a={},p()(a,"vertical"===o?"width":"height",c?0:i),p()(a,"opacity",c?0:1),a)),e?{overflow:"hidden",transition:"".concat("vertical"===o?"width":"height"," ").concat(200,"ms, opacity ").concat(200,"ms")}:void 0),r.createElement("div",{ref:l,className:np("pane",{secondary:d,hide:!d&&s},op(t,o)),style:e},n)}function ip(e){var t=e.className,n=e.split,i=e.style,o=e.onClick,a=e.onDoubleClick,s=e.onMouseDown,l=e.onTouchEnd,c=e.onTouchStart,u=e.allowResize;e=e.active;return r.createElement("span",{role:"presentation",className:np("resizer",op(t,n,u?"":"disabled",e?"active":"")),style:i,onMouseDown:function(e){return s(e)},onTouchStart:function(e){e.preventDefault(),c(e)},onTouchEnd:function(e){e.preventDefault(),l(e)},onClick:function(e){o&&(e.preventDefault(),o(e))},onDoubleClick:function(e){a&&(e.preventDefault(),a(e))}})}function op(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function ap(e){null!==(e=e.getSelection())&&void 0!==e&&e.removeAllRanges()}function sp(e,t,n,r,i,o){return r=3<arguments.length&&void 0!==r?r:50,o=5<arguments.length?o:void 0,i=lp(e,t,i=4<arguments.length?i:void 0),"number"==typeof o?Math.max(r,Math.min(i,o)):void 0!==n?"number"==typeof n?Math.max(r,Math.min(i,n)):n:r}function lp(e,t,n){return t="vertical"===e?t.width:t.height,n="number"==typeof n?0<=n?n:t+n:t,Math.min(n,t)}function cp(e){var t=e.className,n=e.children,i=void 0===(S=e.split)?"vertical":S,o=e.style,a=e.size,s=void 0===(O=e.minSize)?50:O,l=void 0===(x=e.maxSize)?-8:x,c=e.defaultSize,u=e.step,h=void 0===(_=e.primary)?"first":_,d=void 0===(k=e.allowResize)||k,f=e.hidePane,p=e.onResizerClick,m=e.onResizerDoubleClick,v=e.onChange,g=e.onDragStarted,y=e.onDragFinished,b=e.paneStyle,C=e.pane1Style,w=e.pane2Style,E=e.paneClassName,S=e.pane1ClassName,O=e.pane2ClassName,x=e.resizerClassName,_=e.resizerStyle,k=Jf(),T=(k=(e=ae()(k,2))[0],(e=e[1]).width),N=e.height,P=r.useRef(null),I=r.useRef(null),R=(e=r.useState((function(){return void 0===a?sp(i,{width:T,height:N},c,s,l):a})),(e=ae()(e,2))[0]),j=e[1],D=(e=r.useState(!1),(e=ae()(e,2))[0]),A=e[1],L=r.useRef(),M=r.useRef(),F=r.useRef(),B=r.useRef(),H=r.useRef(0),z=r.useRef(0);function U(e){d&&(ap(window),H.current="vertical"===i?e.touches[0].clientX:e.touches[0].clientY,z.current=0,"function"==typeof g&&g(),A(!0))}function V(e){if(d&&D){ap(window);var t="first"===h,n=(t?P:I).current,r=(t?I:P).current;if(n&&r&&n.getBoundingClientRect){var o="vertical"===i?e.touches[0].clientX:e.touches[0].clientY;e=H.current-o;if(u){if(Math.abs(e)<u)return;e=Math.floor(e/u)*u}o=t?e:-e,t=parseInt(window.getComputedStyle(n).order,10),parseInt(window.getComputedStyle(r).order,10)<t&&(o=-o),r=lp(i,{width:T,height:N},l),t=n.getBoundingClientRect(),n=t.width,t=t.height,t="vertical"===i?n:t,o=z.current+t-o,H.current=H.current-e,o<s?(z.current=o-s,o=s):void 0!==r&&r<o?(z.current=o-r,o=r):z.current=0,v&&v(o),L.current=o,j(o)}}}M.current=c,F.current=s,B.current=l,r.useLayoutEffect((function(){var e;D||(e=void 0===a?sp(i,{width:T,height:N},M.current,F.current,B.current,L.current):a,void 0!==a&&(L.current=a),j(e))}),[a,c,i,T,N,D]);var W=r.useRef(V);function G(e){V(Object.assign({},e,{touches:[{clientX:e.clientX,clientY:e.clientY}]}))}W.current=V;var q=r.useRef(G);function Y(){d&&D&&("function"==typeof y&&"number"==typeof R&&y(R),A(!1))}q.current=G;var X=r.useRef(Y);return X.current=Y,r.useEffect((function(){function e(){var e;null!==(e=X.current)&&void 0!==e&&e.call(X)}function t(e){var t;null!==(t=q.current)&&void 0!==t&&t.call(q,e)}function n(e){var t;null!==(t=W.current)&&void 0!==t&&t.call(W,e)}return document.addEventListener("mouseup",e),document.addEventListener("mousemove",t),document.addEventListener("touchmove",n),function(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",t),document.removeEventListener("touchmove",n)}}),[]),n=r.Children.toArray(n).filter(Boolean),r.createElement("div",{className:np(null,op(t,i,d?"":"disabled")),ref:k,style:o},r.createElement(rp,{innerRef:P,className:op(E,S),split:i,style:tp(tp({},b),C),size:"first"===h?R:void 0,hide:f},n[0]),r.createElement(ip,{className:x,style:_,onClick:p,onDoubleClick:m,onMouseDown:function(e){U(Object.assign({},e,{touches:[{clientX:e.clientX,clientY:e.clientY}]}))},onTouchEnd:Y,onTouchStart:U,split:i,allowResize:d&&!f,active:D}),r.createElement(rp,{innerRef:I,className:op(E,O),split:i,style:tp(tp({},b),w),size:"second"===h?R:void 0,hide:f},n[1]))}n(829),n(830);var up=ie()("schema-viewer"),hp=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).formatTabletMetricsValue=function(e,t){return"CPU"===e?Qe(t):"Memory"===e||"Storage"===e?nt(t):t},e}return q()(n,[{key:"render",value:function(){var e=this;if(o=this.props.data){var t=void 0===(o=(r=o.PathDescription).TableStats)?{}:o,n=void 0===(o=r.TabletMetrics)?{}:o,r=t&&Object.keys(t).map((function(e){return{label:e,value:t[e].toString()}})),o=t&&Object.keys(n).map((function(t){return{label:t,value:e.formatTabletMetricsValue(t,n[t].toString())}}));r=Object.assign(r,o),r=Object.assign(r),o=Object.keys(r).length;return i.a.createElement("div",{className:up()},i.a.createElement("div",{className:up("item")},Boolean(o)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:up("title")},"General"),i.a.createElement(xh,{info:r}))))}return i.a.createElement("div",{className:"error"},"no schema data")}}]),n}(i.a.Component);n(831);var dp=ie()("schema-viewer"),fp=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=void 0===(n=this.props.data)?{}:n,t=null!==(r=e.KeyColumnIds)&&void 0!==r?r:[],n=t.map((function(t){return Al()(e.Columns,{Id:t})})),r=null!==(r=null===(r=e.Columns)||void 0===r?void 0:r.filter((function(e){return!t.includes(e.Id)})))&&void 0!==r?r:[];r=[].concat(J()(n),J()(r));return i.a.createElement("div",{className:dp()},i.a.createElement("div",{className:dp("title")},"Schema"),0<r.length?i.a.createElement("table",{className:dp("table")},r.map((function(e,n){return i.a.createElement("tr",{key:n,className:dp("row")},i.a.createElement("td",null,t.includes(e.Id)&&i.a.createElement("div",{className:dp("key-icon")},i.a.createElement(Ch,{name:"key",viewBox:"0 0 12 7",width:12,height:7}))),i.a.createElement("td",{className:dp("type")},i.a.createElement("span",null,e.Type)),i.a.createElement("td",{className:dp("name")},i.a.createElement("span",null,e.Name)))}))):i.a.createElement("div",null,"no schema data"))}}]),n}(i.a.Component);var pp,mp,vp=ie()("schema-info"),gp=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e,t,n,r=(s=this.props).currentItem,o=s.tableSchema,a=s.olapStats,s=r.Path,l=this.props.type===sg?(n=(t=o).Name,l=t.Schema,e=(t=void 0===l?{}:l).Columns,t=null==(l=t.KeyColumnNames)?void 0:l.map((function(t){return(null==e?void 0:e.find((function(e){return e.Name===t}))).Id})),{Columns:e,KeyColumnNames:l,Name:n,KeyColumnIds:t}):o;r=this.props.type===sg?(n=a,a=(t=o).ColumnShardCount,o=null==n?void 0:n.reduce((function(e,t){return e+(null!==(t=parseInt(t.Bytes))&&void 0!==t?t:0)}),0),t=null==n?void 0:n.reduce((function(e,t){return e+(null!==(t=parseInt(t.Rows))&&void 0!==t?t:0)}),0),n=null==n?void 0:n.reduce((function(e,t){return e.add(t.TabletId),e}),new Set),{PathDescription:{TableStats:{ColumnShardCount:a,Bytes:null!==(o=null==o?void 0:o.toLocaleString("ru-RU",{useGrouping:!0}))&&void 0!==o?o:0,Rows:null!==(t=null==t?void 0:t.toLocaleString("ru-RU",{useGrouping:!0}))&&void 0!==t?t:0,Parts:null!==(n=null==n?void 0:n.size)&&void 0!==n?n:0}}}):r;return i.a.createElement("div",{className:vp()},i.a.createElement(hp,{fullPath:s,data:r}),l&&i.a.createElement(fp,{data:l}))}}]),n}(i.a.Component),yp="Info",bp="Describe",Cp="Top queries",wp="Top shards",Ep=[{id:yp,name:"Info"},{id:"Preview",name:"Preview"},{id:"Graph",name:"Graph"},{id:bp,name:bp},{id:"Query",name:"Query"},{id:"Tablets",name:"Tablets"},{id:"ACL",name:"ACL"},{id:Cp,name:"Top queries"},{id:wp,name:"Top shards"}],Sp=[{id:"Hot keys",name:"Hot keys"}];(H=pp=pp||{}).Arrow="arrow",H.Line="line",(Z=mp=mp||{}).Normal="normal",Z.Ellipsis="ellipsis";var Op=n(106),xp=(Y=function(){function e(t,n){W()(this,e),this.children=[],this.members=[],this.data=t,this.canvasNode=n}return q()(e,[{key:"add",value:function(t,n){this.children.push(new e(t,n))}},{key:"addNode",value:function(e){this.children.push(e)}},{key:"addNodes",value:function(e){this.children=this.children.concat(e)}},{key:"addCanvasNode",value:function(e){this.canvasNode=e}},{key:"hasChildren",value:function(){return 0<this.children.length}}]),e}(),H=function(){function e(t){W()(this,e),this.root=t}return q()(e,[{key:"traverseBF",value:function(e){for(var t=[this.root];0<t.length;){var n=t.shift();n&&(t.push.apply(t,J()(n.children)),e(n))}}},{key:"traverseByLevels",value:function(e){var t=0,n=this.root.children;for(e([this.root],0);0<n.length;)e(n,++t),n=n.reduce((function(e,t){return e.concat(t.children)}),[])}},{key:"getTreeDepth",value:function(){var e=0;return this.traverseByLevels((function(t,n){e=n})),e}}]),e}(),{success:"rgba(59, 201, 53, 0.75)",error:"#ff0400",warning:"#ff7700",mute:"rgba(0,0,0,0.15)",stroke:"rgba(0,0,0,0.3)",fill:"#fafafa",nodeFill:"#ffffff",nodeShadow:"rgba(0,0,0,0.15)",titleColor:"#000000",textColor:"rgba(0,0,0,0.7)",buttonBorderColor:"rgba(0,0,0,0.07)",groupBorderColor:"rgba(2, 123, 243, 0.14)",groupFill:"rgba(2, 123, 243, 0.08)",titleHoverColor:"#004080"}),_p={hasControls:!1,hasRotatingPoint:!1,lockMovementX:!0,lockMovementY:!0,selectable:!1,hoverCursor:"default",subTargetCheck:!0},kp=239,Tp=58,Np=249,Pp=4,Ip=8,Rp=8,jp=8,Dp=8,Ap=13,Lp=1.38,Mp=12,Fp=1.16,Bp=205,Hp=205,zp=10,Up=10,Vp=3,Wp=8;function Gp(e,t,n){return new Op.fabric.Circle({top:e,left:t,radius:Vp,fill:n.nodeFill,stroke:n.stroke})}Z=n(428);var qp=n.n(Z);function Yp(e,t){for(var n=Math.ceil(e.getLineWidth(0));t<n;){var r=e.text||"";e.set("text",r.slice(0,r.length-4)+"..."),n=Math.ceil(e.getLineWidth(0))}}function Xp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}var Kp,Zp=function(e){X()(n,e);var t=Xp(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"getCanvasObject",value:function(e,t,n,r,i,o){var a,s,l,c,u,h,d,f,p,m,v=[],g=this.data;return 0<r.length?(a=n+16,s=t+16+16+14,c=l=0,u=r.reduce((function(t,n){n.setCanvas(e),n.setNodesWithChildren(o);var r=(u=n.getCanvasObjects(s,a,i)).nodes,u=(n=u.bottom,u.right);return s=n+15,l<n&&(l=n),c<u&&(c=u),t.push.apply(t,J()(r)),t}),[]),h=g.name,d={top:t,left:n,width:c-n-16,height:l-t-16},f=i.colors,p=o.includes(this.data.name),r=d.left,m=d.top,g=d.width,d=(d=d.height)+14+((h=new Op.fabric.Text(h||"",{fontSize:Ap,lineHeight:18,left:16,top:16,fontFamily:"YS Text",fill:f.titleColor})).height||0),g=g+16+16,p&&(g+=Wp),h=[new Op.fabric.Rect({width:g,height:d,stroke:f.groupBorderColor,fill:f.groupFill,rx:Pp,ry:Pp}),h],p&&h.push(Gp(d/2-Vp,g-jp-2*Pp,f)),m=new Op.fabric.Group(h,Object.assign({left:r,top:m},_p)),v.push.apply(v,J()(u))):m=function(e,t,n,r){var i=t.left,o=t.top,a=t.node,s=n.colors,l=n.renderNodeTitle,c=n.onTitleClick,u=n.prepareCopyText,h=n.textOverflow||mp.Ellipsis,d=(t=l?l(a):a.name,new Op.fabric.Text(t||"",{fontSize:Ap,lineHeight:Lp,left:jp,top:Ip,fontFamily:"YS Text",fill:s.titleColor,hoverCursor:"function"==typeof c?"pointer":"default"}));"function"==typeof c&&(d.on("mouseover",(function(){d.set("fill",s.titleHoverColor),e.requestRenderAll()})),d.on("mouseout",(function(){d.set("fill",s.titleColor),e.requestRenderAll()})),d.on("mousedown",(function(){c(a)}))),l=new Op.fabric.Text(a.meta||"",{fontSize:Mp,lineHeight:Fp,left:jp,top:Ip+d.getBoundingRect().height+zp,fontFamily:"YS Text",fill:s.textColor}),a.status&&(f=new Op.fabric.Rect({width:12,height:12,fill:function(e,t){switch(e){case"ALIVE":return t.success;case"DEGRADED":return t.warning;case"DEAD":return t.error;default:return t.mute}}(a.status,s),rx:3,ry:3}),p=new Op.fabric.Text(a.status,{fontSize:Mp,lineHeight:Fp,left:16,fontFamily:"YS Text",fill:s.textColor}),O=new Op.fabric.Group([f,p],{top:l.getBoundingRect().top+l.getBoundingRect().height-l.getHeightOfLine(0),left:kp-p.getLineWidth(0)-16-12,padding:12}));var f=r?Np:kp,p=Tp;h===mp.Ellipsis?(Yp(d,Bp),Yp(l,Hp)):(g=d.getBoundingRect().width,y=l.getBoundingRect().width,b=O?O.getBoundingRect().width:0,f=Math.max(f,jp+Math.max(g,y)+Math.max(8+Dp,b)+(r?Up:0)),O&&(O.left=f-b+12-(r?Up:0))),(1<t.split("\n").length||a.meta&&1<a.meta.split("\n").length)&&(p=Ip+d.getBoundingRect().height+zp+l.getBoundingRect().height+Rp),h=new Op.fabric.Rect({width:f,height:p,fill:s.nodeFill,rx:Pp,ry:Pp,shadow:new Op.fabric.Shadow({color:s.nodeShadow,offsetY:1,blur:5})});var m,v,g,y,b,C,w,E,S=(m=e,v=a,g=Ip,y=f-jp-Dp,t=(b=n).colors,C=n.prepareCopyText,b=new Op.fabric.Path("\n    M19,21\n    H8\n    V7\n    H19\n    M19,5\n    H8\n    A2,2 0 0,0 6,7\n    V21\n    A2,2 0 0,0 8,23\n    H19\n    A2,2 0 0,0 21,21\n    V7\n    A2,2 0 0,0 19,5\n    M16,1\n    H4\n    A2,2 0 0,0 2,3\n    V17\n    H4\n    V3\n    H16\n    V1\n    Z\n",{fill:t.stroke,hoverCursor:"pointer"}),w=new Op.fabric.Path("M9.5 13l3 3l5 -5",{stroke:t.stroke,fill:"",hoverCursor:"pointer",opacity:0}),E=new Op.fabric.Path("M9.5 10l8 8m-8 0l8 -8",{stroke:t.stroke,fill:"",hoverCursor:"pointer",opacity:0}),y=new Op.fabric.Group([b,w,E],{top:g,left:y-8,scaleX:.6,scaleY:.6}),"function"==typeof C&&y.on("mousedown",(function(){var e=C(v),t=qp()(e)?w:E;t.animate("opacity",1,{duration:150,onChange:m.requestRenderAll.bind(m),easing:Op.fabric.util.ease.easeInOutSine,onComplete:function(){setTimeout((function(){t.set("opacity",0),m.requestRenderAll()}),1e3)}})})),y);S.set("visible",!1);var O=[h,d,S,l,O].filter(Boolean);return r&&O.push(Gp(p/2-Vp,f-Wp-2*Pp,s)),o=new Op.fabric.Group(O,Object.assign({left:i,top:o},_p)),"function"==typeof u&&(o.on("mouseover",(function(){S.set("visible",!0),e.requestRenderAll()})),o.on("mouseout",(function(){S.set("visible",!1),e.requestRenderAll()}))),o}(e,{left:n,top:t,node:this.data},i,o.includes(this.data.name)),this.addCanvasNode(m),{object:m,membersObjects:v,top:t,left:n,width:m.getScaledWidth(),height:m.getScaledHeight()}}}]),n}(Y),Qp=function(e){X()(n,e);var t=Xp(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).nodesWithChildren=[],e}return q()(n,[{key:"getCanvasObjects",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,r=2<arguments.length?arguments[2]:void 0,i=t,o=n,a=[],s=[],l=0,c=0;return this.traverseByLevels((function(t,n){var u=[],h=0,d=0;t=t.map((function(t,a){var l=o+40*n+c;a=i+u.reduce((function(e,t){return e+t.getScaledHeight()||0}),0)+15*a,l=(a=t.getCanvasObject(e.canvas,a,l,t.members,r,e.nodesWithChildren)).object;return 0<(a=a.membersObjects).length&&s.push.apply(s,J()(a)),h+=l.getScaledHeight()+15,a=l.getScaledWidth(),d<a&&(d=a),t.addCanvasNode(l),u.push(l),l}));a.push.apply(a,J()(t)),a.push.apply(a,s),c+=d,l<(h-=15)&&(l=h)})),n=40*this.getTreeDepth(),{nodes:a,bottom:l+i,right:c+o+n}}},{key:"setCanvas",value:function(e){this.canvas=e}},{key:"setNodesWithChildren",value:function(e){this.nodesWithChildren=e}}]),n}(H);(Kp=Kp||{}).Group="GROUP";var $p=function(){function e(t){W()(this,e),this.nodes=new Map,this.data=t}return q()(e,[{key:"parseData",value:function(){var e=this,t=this.data,n=this.getGroups(t),r=J()(t.nodes);n.forEach((function(e,t){r.push({name:t,children:e,type:Kp.Group})}));n=this.findSources(r,t.links);var i=[],o={},a=new Map;return n.forEach((function(n){n=e.mapNodesToTree(n,r,t.links),o=Object.assign(Object.assign({},n.groups),o),a=new Map([].concat(J()(a),J()(n.notGroupMemebersChildren))),i.push(n.tree)})),a.forEach((function(e,t){o[t]&&o[t].addNodes(e)})),i=i.reduce((function(e,t){var n=t.root.data.group;return(n?o[n].members:e).push(t),e}),[])}},{key:"getGroups",value:function(e){e=e.nodes;var t=new Map;return e.forEach((function(e){var n;e.group&&((n=t.get(e.group))?n.push(e.name):t.set(e.group,[e.name]))})),t}},{key:"findSources",value:function(e,t){var n=t.map((function(e){return e.to}));return e.reduce((function(e,t){return n.includes(t.name)||e.push(t),e}),[])}},{key:"mapNodesToTree",value:function(e,t,n){var r=this.createNode(e),i={};this.appendGoup(i,r);t=t.map((function(e){var t=n.reduce((function(t,n){return n.from===e.name&&t.push(n.to),t}),[]);return Object.assign(Object.assign({},e),{children:t})})),t=this.getAppender(t,i)(r,(null===(t=t.find((function(t){return t.name===e.name})))||void 0===t?void 0:t.children)||[]);return{tree:new Qp(r),groups:i,notGroupMemebersChildren:t}}},{key:"appendGoup",value:function(e,t){var n=t.data;t.data.type===Kp.Group&&(e[n.name]=t)}},{key:"getAppender",value:function(e,t){var n=this,r=new Map;return function i(o,a){a=a.map((function(r){var o=e.find((function(e){return e.name===r})),a=n.createNode(o);return n.appendGoup(t,a),0<o.children.length&&i(a,o.children),a}));var s=o.data.group,l=Boolean(s),c=[],u=[];return a.forEach((function(e){var t=e.data.group;(l&&s!==t?u:c).push(e)})),o.addNodes(c),s&&0<u.length&&((o=r.get(s))?o.push.apply(o,u):r.set(s,u)),r}}},{key:"createNode",value:function(e){var t=new Zp(e);return this.nodes.set(e.name,t),t}}]),e}();Z=n(540);var Jp=n.n(Z),em=["YS Text","YS Display"];function tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nm(e,t){var n=document.createElement("button");return n.innerText=e,n.className="paranoid-button paranoid-button_".concat(t),n}var rm=function(){function e(t,n,r){W()(this,e),this.nodesWithChildren=r.links.reduce((function(e,t){return e.set(t.from,[]),e}),new Map);var i=document.getElementById(t);if(!i)throw new Error("Not found element with id ".concat(t));i.style.position="relative",this.opts=n,r=nm("+","plus"),t=nm("-","minus"),n=nm("1:1","normal"),this.plus=r,this.minus=t,this.normalZoom=n,this.canvRoot=i}return q()(e,[{key:"render",value:function(e){var t=this;this.parser=e,Promise.all(em.map((function(e){return new Jp.a(e).load().catch((function(t){console.error("Wasn't able to load font: ".concat(e)),console.error(t)}))}))).then((function(){var n,r=e.parseData();t.canvas=t.initCanvas(),t.renderControllers(),t.initZoom(),t.initPan(),r.forEach((function(e){e.setCanvas(t.canvas),e.setNodesWithChildren(t.getNodesWithChildren());e=(r=e.getCanvasObjects(n,void 0,t.opts)).nodes;var r=r.bottom;n=r+15,r=t.getLinks(),t.renderIntoCanvas(e,r)}))}))}},{key:"updateGraph",value:function(e){var t=this;this.parser=new $p(e),this.setNodeWithChildren(e);var n,r=this.parser.parseData();r.forEach((function(e,i){e.setCanvas(t.canvas),e.setNodesWithChildren(t.getNodesWithChildren());e=(o=e.getCanvasObjects(n,void 0,t.opts)).nodes;var o=o.bottom;n=o+15,o=t.getLinks(),t.renderIntoCanvas(e,o,r.length-1===i)}))}},{key:"renderIntoCanvas",value:function(e,t,n){var r;this.canvas&&(this.clearCanvas(),(r=this.canvas).add.apply(r,J()(e).concat(J()(t))),this.bringNodesToFront(),this.rendered=n)}},{key:"clearCanvas",value:function(){if(this.canvas&&this.rendered){try{this.canvas.clear(),this.canvas.clearContext(this.canvas.getContext())}catch(e){console.error(e)}this.rendered=!1}}},{key:"setNodeWithChildren",value:function(e){this.nodesWithChildren=e.links.reduce((function(e,t){return e.set(t.from,[]),e}),new Map)}},{key:"initCanvas",value:function(){var e=document.createElement("canvas");return e.setAttribute("id","C"),e.setAttribute("width",String(this.canvRoot.offsetWidth)),e.setAttribute("height",String(this.canvRoot.offsetHeight)),this.canvRoot.appendChild(e),e=this.opts.colors||{},new Op.fabric.Canvas("C",{selection:!1,backgroundColor:e.fill,defaultCursor:"grab"})}},{key:"initZoom",value:function(){var e=this.canvas;this.minus.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),t=e.getZoom(),e.setZoom(t=(t-=.2)<.2?.2:t)})),this.plus.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),t=e.getZoom(),e.setZoom(t=1<(t+=.2)?1:t)})),this.normalZoom.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.setZoom(1)}))}},{key:"initPan",value:function(){var e=this.canvas,t=!1,n=0,r=0;e.on("mouse:down",(function(e){e=e.e,t=!0,n=e.clientX,r=e.clientY})),e.on("mouse:move",(function(i){t&&(i=i.e,e.viewportTransform[4]+=i.clientX-n,e.viewportTransform[5]+=i.clientY-r,e.requestRenderAll(),n=i.clientX,r=i.clientY)})),e.on("mouse:up",(function(){t=!1,e.getObjects().forEach((function(e){return e.setCoords()}))}))}},{key:"renderControllers",value:function(){var e=document.createElement("div"),t=this.opts.colors;e.className="paranoid-controls";var n=document.createElement("style");n.innerText="\n            .paranoid-controls {\n                position: absolute;\n                top: 10px;\n                right: 10px;\n            }\n            .paranoid-button {\n                margin-left: 12px;\n                border-radius: 4px;\n                height: 28px;\n                width: 28px;\n                line-height: 13px;\n                font-family: YS Text;\n                font-size: 13px;\n                text-align: center;\n                padding: 0;\n                box-shadow: 0px 2px 3px ".concat(t.nodeShadow,";\n                border: 1px solid ").concat(t.buttonBorderColor,";\n                background-color: ").concat(t.nodeFill,";\n                color: ").concat(t.textColor,";\n                cursor: pointer;\n            }\n            .paranoid-button:focus {\n                outline: none;\n            }\n            .paranoid-button:active {\n                border: 1px solid ").concat(t.buttonBorderColor,";\n            }\n            .paranoid-button_plus {\n                margin-left: 0;\n                border-left: none;\n                border-top-left-radius: 0;\n                border-bottom-left-radius: 0;\n            }\n            .paranoid-button_minus {\n                border-top-right-radius: 0;\n                border-bottom-right-radius: 0;\n            }\n        "),e.appendChild(n),e.appendChild(this.minus),e.appendChild(this.plus),e.appendChild(this.normalZoom),this.canvRoot.appendChild(e)}},{key:"getNodesWithChildren",value:function(){var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return tm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tm(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}(this.nodesWithChildren.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"getLinks",value:function(){var e=this,t=this.parser;return t?t.data.links.reduce((function(n,r){var i=r.from;r=r.to,i=t.nodes.get(i),r=t.nodes.get(r);return null!=i&&i.canvasNode&&null!=r&&r.canvasNode&&n.push(function(e,t,n,r){var i=(e=(i=(a=e).left,s=a.top,{x:(void 0===i?0:i)+(void 0===(o=a.width)?0:o),y:(void 0===s?0:s)+(void 0===(a=a.height)?0:a)/2})).x,o=e.y,a=(t={x:void 0===(a=(s=t).left)?0:a,y:(void 0===(e=s.top)?0:e)+(void 0===(s=s.height)?0:s)/2}).x,s={y:o,x:i+4};return t={y:e=t.y,x:a-12},t=[new Op.fabric.Path("M ".concat(i," ").concat(o,"\n        H ").concat(s.x,"\n        ").concat((s=(t=t).y-(s=s).y,Math.abs(s),"L ".concat(t.x," ").concat(t.y)),"\n        H ").concat(a,"\n        "),{fill:"",stroke:n.stroke,strokeWidth:1})],r!==pp.Line&&(n=new Op.fabric.Path("M ".concat((e={x1:a,y1:e=e,x2:a-8,y2:e-3,x3:a-8,y3:e+3}).x1," ").concat(e.y1,"\n    L ").concat(e.x3," ").concat(e.y3,"\n    L ").concat(e.x2," ").concat(e.y2,"\n    L ").concat(e.x1," ").concat(e.y1,"\n    "),{fill:n.stroke,stroke:n.stroke,strokeWidth:1}),t.push(n)),new Op.fabric.Group(t,Object.assign({},_p))}(i.canvasNode,r.canvasNode,e.opts.colors,e.opts.linkType)),n}),[]):[]}},{key:"bringNodesToFront",value:function(){var e=null===(e=this.parser)||void 0===e?void 0:e.nodes;e&&e.forEach((function(e){e.data.type!==Kp.Group&&e.canvasNode&&e.canvasNode.bringToFront()}))}}]),e}(),im={linkType:pp.Arrow};var om=n(338),am=(Y=n(231),n.n(Y));var sm=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.settings;am.a&&(this.preparedSettings=this.prepareSettings(t),am.a.filter=function(e){var t=am.a.getScope();return e=((e=e).target||e.srcElement).tagName,!(/^(INPUT|TEXTAREA|SELECT)$/.test(e)&&"all"===t)},this.preparedSettings.forEach((function(t){e.bindKey(t.combo,t.scope,t.handler,t.preventDefault)})))}},{key:"componentWillUnmount",value:function(){var e=this;am.a&&this.preparedSettings.forEach((function(t){e.unbindKey(t.combo,t.scope)}))}},{key:"prepareSettings",value:function(e){var t=[];return e.forEach((function(e){var n=e.keys.split(/\s*,\s*/),r=e.scope.split(/\s*,\s*/),i=void 0===e.preventDefault||e.preventDefault;n.forEach((function(n){r.forEach((function(r){"function"==typeof e.handler&&t.push({combo:n,scope:r,handler:e.handler,preventDefault:i})}))}))})),t}},{key:"bindKey",value:function(e,t,n,r){am()(e,t,(function(e,t){am.a.getScope()===t.scope&&(n(e,t),r&&e.preventDefault())}))}},{key:"unbindKey",value:function(e,t){am.a.unbind(e,t)}},{key:"render",value:function(){return null}}]),n}(r.Component);n(905);var lm,cm=ie()("elements-pagination"),um=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"renderComponent",value:function(e,t){var n=[{keys:t.hotkey,scope:t.hotkeyScope,handler:t.hotkeyHandler}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(ge,{view:"outlined",onClick:t.handler,disabled:t.disabled,title:t.tooltip,className:cm("control")},i.a.createElement(Ch,{name:e,viewBox:"0 0 6 11",width:"6",height:"11"})),i.a.createElement(sm,{settings:n}))}},{key:"render",value:function(){var e=(t=this.props).previous,t=t.next;return i.a.createElement("div",{className:cm()},this.renderComponent("previous",e),i.a.createElement("div",{className:cm("divider")}),this.renderComponent("next",t))}}]),n}(i.a.Component),hm=0;n(909);var dm=oe("modal");function fm(e){var t=void 0!==(p=e.open)&&p,n=void 0!==(m=e.keepMounted)&&m,r=void 0!==(v=e.disableBodyScrollLock)&&v,o=e.disableEscapeKeyDown,a=e.disableOutsideClick,s=e.onEscapeKeyDown,l=e.onEnterKeyDown,c=e.onOutsideClick,u=e.onClose,h=e.children,d=e.style,f=e.className,p=e.qa,m=i.a.useRef(null),v=i.a.useRef(!1),g=i.a.useRef(!1),y=(e=wl(t),El());return t&&(v.current=!0),void 0===e||g.current||(g.current=t!==e),function(e){var t=e.enabled;i.a.useLayoutEffect((function(){if(t)return 1==++hm&&function(){var e=window.innerWidth-document.documentElement.clientWidth,t=window.innerHeight-document.documentElement.clientHeight,n=function(){var e=window.getComputedStyle(document.body);return{top:Number.parseFloat(e.paddingTop),right:Number.parseFloat(e.paddingRight),bottom:Number.parseFloat(e.paddingBottom),left:Number.parseFloat(e.paddingLeft)}}();lm=document.body.style.cssText,document.body.style.overflow="hidden",e&&(document.body.style.paddingRight="".concat(n.right+e,"px")),t&&(document.body.style.paddingBottom="".concat(n.bottom+t,"px"))}(),function(){0==--hm&&(lm?document.body.style.cssText=lm:document.body.removeAttribute("style"))}}),[t])}({enabled:!r&&(t||g.current)}),us({open:t,disableEscapeKeyDown:o,disableOutsideClick:a,onEscapeKeyDown:s,onEnterKeyDown:l,onOutsideClick:c,onClose:u,contentRefs:[m]}),n||t||g.current?i.a.createElement(ls,null,i.a.createElement("div",{"data-inited":v.current?"":void 0,onAnimationEnd:function(e){e.target===e.currentTarget&&(g.current=!1,y())},style:d,className:dm({open:t},f),"data-qa":p},i.a.createElement("div",{className:dm("table")},i.a.createElement("div",{className:dm("cell")},i.a.createElement("div",{ref:m,tabIndex:-1,role:"dialog","aria-modal":t,className:dm("content")},h))))):null}n(911);var pm=oe("dialog-footer");(H=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).errorTooltipRef=i.a.createRef(),e.handleKeyDown=function(t){"Enter"===t.key&&(t.preventDefault(),e.props.onClickButtonApply&&e.props.onClickButtonApply(t))},e}return q()(n,[{key:"componentDidMount",value:function(){this.props.listenKeyEnter&&this.attachKeyDownListeners()}},{key:"componentDidUpdate",value:function(e){!this.props.listenKeyEnter&&e.listenKeyEnter&&this.detachKeyDownListeners(),this.props.listenKeyEnter&&!e.listenKeyEnter&&this.attachKeyDownListeners()}},{key:"componentWillUnmount",value:function(){this.detachKeyDownListeners()}},{key:"render",value:function(){var e=(d=this.props).onClickButtonCancel,t=d.onClickButtonApply,n=d.loading,r=d.textButtonCancel,o=d.textButtonApply,a=d.propsButtonCancel,s=d.propsButtonApply,l=d.preset,c=d.children,u=d.errorText,h=d.showError,d=d.renderButtons;a=i.a.createElement("div",{className:pm("button",{action:"cancel"})},i.a.createElement(ge,Object.assign({view:o?"flat":"normal",size:"l",width:"max",onClick:e,disabled:n},a),r)),u=i.a.createElement("div",{className:pm("button",{action:"apply"})},i.a.createElement(ge,Object.assign({ref:this.errorTooltipRef,type:"submit",view:"action",size:"l",width:"max",onClick:t,loading:n,className:pm("button-apply",{preset:l})},s),o),u&&i.a.createElement(kl,{open:h,anchorRef:this.errorTooltipRef,placement:["bottom","top"],hasArrow:!0},i.a.createElement("div",{className:pm("error")},u)));return i.a.createElement("div",{className:pm()},i.a.createElement("div",{className:pm("children")},c),i.a.createElement("div",{className:pm("bts-wrapper")},d?d(u,a):i.a.createElement(i.a.Fragment,null,r&&a,o&&u)))}},{key:"attachKeyDownListeners",value:function(){var e=this;setTimeout((function(){window.addEventListener("keydown",e.handleKeyDown)}),0)}},{key:"detachKeyDownListeners",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}}]),n}(i.a.Component)).defaultProps={preset:"default",showError:!1,listenKeyEnter:!1},n(912);var mm=oe("dialog-header");n(913);var vm=oe("dialog-body");n(914);var gm=oe("dialog-divider");n(910);var ym=oe("dialog-btn-close");function bm(e){var t=e.onClose;return i.a.createElement("div",{className:ym()},i.a.createElement(ge,{view:"flat",size:"l",className:ym("btn"),onClick:function(e){return t(e,{isOutsideClick:!1})}},i.a.createElement(he,{data:Ee,size:12})))}n(908);var Cm=oe("dialog"),wm=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).handleCloseButtonClick=function(t){(0,e.props.onClose)(t.nativeEvent,"closeButtonClick")},e}return q()(n,[{key:"render",value:function(){var e=(m=this.props).children,t=m.open,n=m.disableBodyScrollLock,r=m.disableEscapeKeyDown,o=m.disableOutsideClick,a=m.keepMounted,s=m.size,l=m.className,c=m.modalClassName,u=m.hasCloseButton,h=m.onEscapeKeyDown,d=m.onEnterKeyDown,f=m.onOutsideClick,p=m.onClose,m=m.qa;return i.a.createElement(fm,{open:t,disableBodyScrollLock:n,disableEscapeKeyDown:r,disableOutsideClick:o,keepMounted:a,onEscapeKeyDown:h,onEnterKeyDown:d,onOutsideClick:f,onClose:p,className:Cm("modal",c),qa:m},i.a.createElement("div",{className:Cm({size:s,"has-close":u},l)},e,u&&i.a.createElement(bm,{onClose:this.handleCloseButtonClick})))}}]),n}(i.a.Component);wm.defaultProps={disableBodyScrollLock:!1,disableEscapeKeyDown:!1,disableOutsideClick:!1,keepMounted:!1,hasCloseButton:!0},wm.Footer=H,wm.Header=function(e){var t=void 0===(r=e.caption)?"":r,n=e.insertBefore,r=e.insertAfter;e=e.className;return i.a.createElement("div",{className:mm(null,e)},n,i.a.createElement("div",{className:mm("caption")},t),r)},wm.Body=function(e){var t=e.className;return i.a.createElement("div",{className:vm(null,t)},e.children)},wm.Divider=function(e){return e=e.className,i.a.createElement("div",{className:gm(null,e)})},Z=n(189),Y=n.n(Z);var Em=oe("menu"),Sm=(H=i.a.forwardRef((function(e,t){var n=e.icon,r=e.title,o=e.disabled,a=e.active,s=e.href,l=e.target,c=e.rel,u=e.onClick,h=e.style,d=e.className,f=e.theme,p=e.extraProps;e=e.children,d={title:r,onClick:u,style:h,tabIndex:o?-1:0,className:Em("item",{disabled:o,active:a,theme:f},d)},e=[n&&i.a.createElement("div",{key:"icon",className:Em("item-icon")},n),i.a.createElement("div",{key:"content",className:Em("item-content")},e)],e=s?i.a.createElement("a",Object.assign({},p,d,{href:s,target:l,rel:c}),e):i.a.createElement("div",Object.assign({},p,d),e);return i.a.createElement("li",{ref:t,className:Em("list-item")},e)})),oe("menu")),Om=(Z=i.a.forwardRef((function(e,t){var n=e.label,r=e.children,o=e.style,a=e.className,s=e.qa;e=Gh();return i.a.createElement("li",{ref:t,className:Sm("list-group-item")},i.a.createElement("div",{style:o,className:Sm("group",a),"data-qa":s},n&&i.a.createElement("div",{id:e,className:Sm("group-label")},n),i.a.createElement("ul",{role:"group","aria-labelledby":e,className:Sm("group-list")},r)))})),n(917),oe("menu")),xm=i.a.forwardRef((function(e,t){var n=e.size,r=e.children,o=e.style,a=e.className;e=e.qa;return i.a.createElement("ul",{ref:t,role:"menu",style:o,className:Om({size:void 0===n?"m":n},a),"data-qa":e},r)}));xm.Item=H,xm.Group=Z;var _m=oe("dropdown-menu"),km={text:"",action:function(){}},Tm=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).renderMenuItem=function(t,n){var r=t===km,o=t.text,a=t.action,s=t.className;t=Object(de.a)(t,["text","action","className"]);return i.a.createElement(xm.Item,Object.assign({key:n,className:_m("menu-item",{separator:r},s),onClick:function(t){return e.props.onMenuItemClick(t,a)}},t),o)},e}return q()(n,[{key:"render",value:function(){var e,t=(l=this.props).open,n=l.anchorRef,r=l.items,o=l.onClose,a=l.popupClassName,s=l.placement,l=l.children;return i.a.createElement(kl,{open:t,anchorRef:n,className:a,placement:s,onClose:o},l||i.a.createElement(xm,{className:_m("menu")},(e=!1,r.reduce((function(t,n){if(Array.isArray(n)){var r=n.filter((function(e){return!e.hidden}));return 0<t.length&&0<r.length&&t.push(km),e=0<r.length,t.concat(r)}return n.hidden||(e&&t.push(km),t.push(n),e=!1),t}),[]).map(this.renderMenuItem))))}}]),n}(i.a.PureComponent);n(916);var Nm=oe("dropdown-menu"),Pm=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;return W()(this,n),(e=t.apply(this,arguments)).state={popupIsShowed:!1},e.anchorRef=i.a.createRef(),e.onMenuItemClick=function(t,n){n(t,e.props.data),e.props.onMenuToggle(),e.hidePopup()},e.onSwitcherClick=function(t){e.props.disabled||(e.props.onMenuToggle(),e.props.onSwitcherClick&&e.props.onSwitcherClick(t),e.state.popupIsShowed?e.hidePopup():e.showPopup())},e.onScroll=function(t){for(var n=e.anchorRef.current;n&&n!==t.target;)n=n.parentNode;n===t.target&&(e.props.onMenuToggle(),e.hidePopup())},e.handleClose=function(){e.hidePopup(),e.props.onMenuToggle()},e}return q()(n,[{key:"componentWillUnmount",value:function(){this.props.hideOnScroll&&document.removeEventListener("scroll",this.onScroll,!0)}},{key:"render",value:function(){var e=(a=this.props).items,t=a.switcher,n=a.popupClassName,r=a.switcherWrapperClassName,o=a.popupPlacement,a=a.children;t=t||this.renderDefaultSwitcher();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:this.anchorRef,className:Nm("switcher-wrapper",r),onClick:this.onSwitcherClick},t),i.a.createElement(Tm,{open:this.state.popupIsShowed,anchorRef:this.anchorRef,items:e,onMenuItemClick:this.onMenuItemClick,onClose:this.handleClose,popupClassName:n,placement:o},a))}},{key:"renderDefaultSwitcher",value:function(){var e=(n=this.props).defaultSwitcherClassName,t=n.defaultSwitcherProps,n=n.icon;return i.a.createElement(ge,Object.assign({view:"flat",size:"s"},t,{className:Nm("switcher-button",e),disabled:this.props.disabled}),n)}},{key:"showPopup",value:function(){this.setState({popupIsShowed:!0}),this.props.hideOnScroll&&document.addEventListener("scroll",this.onScroll,!0)}},{key:"hidePopup",value:function(){this.setState({popupIsShowed:!1}),this.props.hideOnScroll&&document.removeEventListener("scroll",this.onScroll,!0)}}]),n}(i.a.PureComponent);Pm.defaultProps={items:[],icon:i.a.createElement(he,{data:function(e){return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor"},e),i.a.createElement("path",{d:"M14 6.125a1.874 1.874 0 1 1 .001 3.749A1.874 1.874 0 0 1 14 6.125zm-5.906 0a1.874 1.874 0 1 1 0 3.749 1.874 1.874 0 0 1 0-3.749zM2 6.125a1.874 1.874 0 1 1 .001 3.749A1.874 1.874 0 0 1 2 6.125z"}))}}),onMenuToggle:Y.a,hideOnScroll:!0},n(906);var Im=ie()("kv-truncated-query");function Rm(e){var t=e.value,n=e.maxQueryHeight;return(e=t.split("\n")).length>n?(n=e.slice(0,n).join("\n"),i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:Im()},n),i.a.createElement("span",{className:Im({color:"secondary"})},"\n...\nThe request was truncated. Click on the line to show the full query on the query tab"))):t}n(907);var jm=ie()("saved-queries");function Dm(e){function t(e){e.stopPropagation(),v()}var n=e.savedQueries,o=e.changeUserInput,a=e.onDeleteQuery,s=e.setQueryNameToEdit,l=Object(r.useState)(!1),c=(h=ae()(l,2))[0],u=h[1],h=(e=Object(r.useState)(!1),(l=ae()(e,2))[0]),d=l[1],f=(e=Object(r.useState)(null),(l=ae()(e,2))[0]),p=l[1],m=(e=Object(r.useState)(null),e=(l=ae()(e,2))[0],l[1]),v=(l=Object(r.useRef)(null),function(){d(!1),p(null)});return i.a.createElement(i.a.Fragment,null,i.a.createElement(ge,{ref:l,onClick:function(){u(!0)}},"Saved queries"),c&&i.a.createElement(kl,{key:e,className:jm("popup-wrapper"),anchorRef:l,open:c,placement:["top"],onClose:function(){u(!1)}},i.a.createElement("div",{className:jm()},i.a.createElement("div",{className:jm("saved-queries-row",{header:!0})},i.a.createElement("div",{className:jm("query-name")},"Name"),i.a.createElement("div",{className:jm("query-body",{header:!0})},i.a.createElement("span",null,"QueryText"))),i.a.createElement("div",null,w.a.sortBy(n,(function(e){return e.name.toLowerCase()})).map((function(e){return i.a.createElement("div",{className:jm("saved-queries-row"),onClick:(n=e.body,r=e.name,function(){o({input:n}),s(r),u(!1)}),key:e.name},i.a.createElement("div",{className:jm("query-name")},e.name),i.a.createElement("div",{className:jm("query-body")},i.a.createElement(Rm,{value:e.body,maxQueryHeight:3})),i.a.createElement("div",{className:jm("query-controls")},i.a.createElement(Ch,{name:"pencil",viewBox:"0 0 24 24",height:14,width:14,className:jm("control-button")}),i.a.createElement(Ch,{name:"trash",viewBox:"0 0 24 24",height:14,width:14,className:jm("control-button"),onClick:(t=e.name,function(e){e.stopPropagation(),d(!0),p(t)})})));var t,n,r}))))),h&&f&&i.a.createElement(wm,{open:h,hasCloseButton:!1,size:"s",onClose:t},i.a.createElement(wm.Header,{caption:"Delete query"}),i.a.createElement(wm.Body,{className:jm("dialog-body")},"Are you sure you want to delete query",i.a.createElement("span",{className:jm("dialog-query-name")}," ".concat(f,"?"))),i.a.createElement(wm.Footer,{textButtonApply:"Delete",textButtonCancel:"Cancel",onClickButtonCancel:t,onClickButtonApply:function(e){e.stopPropagation(),a(f),v(),m(f)}})))}n(915);var Am=ie()("kv-save-query");function Lm(e){function t(){d(!0),C(null)}function n(e){return i.a.createElement(ge,{onClick:e,disabled:s},"Save query")}var o=e.savedQueries,a=e.onSaveQuery,s=e.saveButtonDisabled,l=e.changeUserInput,c=e.onDeleteQuery,u=Object(r.useState)(!1),h=(f=ae()(u,2))[0],d=f[1],f=(e=Object(r.useState)(!1),(u=ae()(e,2))[0]),p=u[1],m=(e=Object(r.useState)(""),(u=ae()(e,2))[0]),v=u[1],g=(e=Object(r.useState)(null),(u=ae()(e,2))[0]),y=u[1],b=(e=Object(r.useState)(null),(u=ae()(e,2))[0]),C=u[1],E=(e=Object(r.useRef)(),u=Object(r.useMemo)((function(){return o&&0<o.length}),[o]),function(){d(!1),v(""),y(null)}),S=function(e){return w.a.some(o,(function(t){return t.name.toLowerCase()===e.trim().toLowerCase()}))?"This name already exists":null};return i.a.createElement(i.a.Fragment,null,b?i.a.createElement(Pm,{items:[{action:t,text:"Save as new"},{action:function(){a(b),C(null)},text:"Edit existing"}],switcher:n(),popupPlacement:["top"]}):n(t),h&&i.a.createElement(wm,{open:h,hasCloseButton:!1,size:"s",onClose:E},i.a.createElement(wm.Header,{caption:"Save query"}),i.a.createElement(wm.Body,{className:Am("dialog-body")},i.a.createElement("span",{className:Am("field-title","required")},"Query name"),i.a.createElement("div",{className:Am("control-wrapper")},i.a.createElement(ic,{placeholder:"Enter query name",text:m,onUpdate:function(e){v(e),y(S(e))},hasClear:!0}),i.a.createElement("span",{className:Am("error")},g))),i.a.createElement(wm.Footer,{textButtonApply:"Save",textButtonCancel:"Cancel",onClickButtonCancel:E,onClickButtonApply:function(){m&&!g&&a(m),E()},propsButtonApply:{disabled:!m||Boolean(g)}})),u&&i.a.createElement(Dm,{savedQueries:o,changeUserInput:l,onDeleteQuery:c,setQueryNameToEdit:C}),!Ro&&i.a.createElement(i.a.Fragment,null,i.a.createElement(kl,{className:Am("embedded-popup"),anchorRef:e,placement:["top"],open:f,hasArrow:!0},"Please be aware: after cookies delete your saved queries will be lost."),i.a.createElement("div",{className:Am("embedded-tooltip"),ref:e,onMouseEnter:function(){p(!0)},onMouseLeave:function(){p(!1)}},i.a.createElement(Ch,{name:"question",height:18,width:18,viewBox:"0 0 24 24"}))))}n(918);var Mm=ie()("kv-query-result"),Fm="result",Bm=[{id:Fm,title:"Result"},{id:"stats",title:"Stats"}];function Hm(e){var t=Object(r.useState)(Fm),n=ae()(t,2),o=(t=n[0],n[1]);return i.a.createElement(i.a.Fragment,null,e.stats&&i.a.createElement(ud,{items:Bm,onSelectTab:function(e){o(e)},activeTab:t,className:Mm("tabs")}),i.a.createElement("div",{className:Mm("result")},t===Fm&&e.result,"stats"===t&&i.a.createElement($n.a,{data:e.stats,isExpanded:function(){return!0},className:Mm("inspector"),searchOptions:{debounceTime:300}})))}H=n(438);var zm="s-expression";n(923);var Um=ie()("kv-query-explain"),Vm={automaticLayout:!0,selectOnLineNumbers:!0,readOnly:!0,minimap:{enabled:!1},wrappingIndent:"indent"},Wm="schema",Gm=[{id:Wm,title:"Schema"},{id:"json",title:"JSON"},{id:"ast",title:"AST"}];function qm(e){var t=Object(r.useState)(Wm),n=(t=ae()(t,2))[0],o=t[1];return Object(r.useEffect)((function(){e.ast||"ast"!==n||e.astQuery()}),[n]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Um("tabs-wrapper")},i.a.createElement(ud,{items:Gm,onSelectTab:function(e){o(e)},activeTab:n,className:Um("tabs")})),"json"===n&&i.a.createElement($n.a,{data:e.explain,isExpanded:function(){return!0},className:Um("inspector"),searchOptions:{debounceTime:300}}),"ast"===n&&(e.loadingAst?i.a.createElement("div",{className:Um("loader")},i.a.createElement(Ql,{size:"m"})):i.a.createElement("div",{className:Um("ast")},i.a.createElement(om.a,{language:zm,value:e.ast,options:Vm,wrappingIndent:"indent"}))),i.a.createElement("div",{id:"gmRoot",className:Um("explain-canvas-container",{hidden:n!==Wm})}))}n(924);var Ym=new Pe,Xm=[{value:m,title:"Run Script"},{value:G,title:"Run"},{value:y,title:"Run Scan"}],Km={displayIndices:!1,syncHeadOnResize:!0,stickyHead:as.MOVING,sortable:!1},Zm={automaticLayout:!0,selectOnLineNumbers:!0,minimap:{enabled:!1}},Qm="navigation",$m="execute",Jm="explain",ev={success:"rgba(59,201,53,0.75)",error:"#bf3230",warning:"#cc6810",mute:"rgba(255,255,255,0.15)",stroke:"rgba(255,255,255,0.17)",fill:"#313037",nodeFill:"#3b3a41",nodeShadow:"rgba(0,0,0,0.2)",titleColor:"rgba(255,255,255,0.7)",textColor:"rgba(255,255,255,0.55)",buttonBorderColor:"rgba(255,255,255,0.07)"},tv=ie()("query-editor"),nv=(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={resultType:$m,runAction:Xm[0].value},e.editorRef=null,e.editorDidMount=function(t,n){(e.editorRef=t).focus(),t.addAction({id:"run",label:"Run",keybindings:[n.KeyMod.CtrlCmd|n.KeyCode.Enter],precondition:null,keybindingContext:null,contextMenuGroupId:Qm,contextMenuOrder:1,run:function(){e.handleSendClick()}}),t.addAction({id:"previous-query",label:"Previous query",keybindings:[n.KeyMod.CtrlCmd|n.KeyCode.UpArrow],contextMenuGroupId:Qm,contextMenuOrder:2,run:function(){e.handlePreviousHistoryClick()}}),t.addAction({id:"next-query",label:"Next query",keybindings:[n.KeyMod.CtrlCmd|n.KeyCode.DownArrow],contextMenuGroupId:Qm,contextMenuOrder:3,run:function(){e.handleNextHistoryClick()}}),t.addAction({id:"explain",label:"Explain",keybindings:[n.KeyMod.CtrlCmd|n.KeyCode.KEY_E],precondition:null,keybindingContext:null,contextMenuGroupId:Qm,contextMenuOrder:4,run:function(){e.handleGetExplainQueryClick()}})},e.onChange=function(t){e.props.changeUserInput({input:t})},e.handleSendClick=function(){var t=(a=e.props).path,n=(o=a.executeQuery).input,r=o.history,i=o.runAction,o=a.sendQuery,a=a.saveQueryToHistory;e.setState({resultType:$m}),o({query:n,database:t,action:i}),n!==r.queries[r.currentIndex]&&a(n)},e.handleCancelClick=function(){e.props.cancelQuery()},e.handleGetExplainQueryClick=function(){var t=e.props,n=t.path,r=t.executeQuery.input,i=t.getExplainQuery;e.setState({resultType:Jm},(function(){i({query:r,database:n})}))},e.handleAstQuery=function(){var t=e.props,n=t.path,r=t.executeQuery.input;(0,t.getExplainQueryAst)({query:r,database:n})},e.renderExecuteQuery=function(){var t,n=(o=(t=e.props).executeQuery).data,r=o.error,o=o.stats,a=t.showTooltip;return(t=e.getExecuteResult()).length||r?(r=[],n&&0<n.length&&(r=Object.keys(n[0]).map((function(e){return{name:e,render:function(e){var t=e.value;return i.a.createElement("span",{className:tv("cell"),onClick:function(e){return a(e.target,t,"cell")}},t)}}}))),n=tt(n),t=r.length?i.a.createElement(as,{columns:r,data:n,settings:Km,theme:"common"}):i.a.createElement("div",null,t),i.a.createElement(Hm,{result:t,stats:o})):null},e.renderExplainQuery=function(){var t=(a=e.props.explainQuery).data,n=a.dataAst,r=a.error,o=a.loading,a=a.loadingAst;return r?r.data||r:t||o?t?t.nodes.length?i.a.createElement(qm,{explain:t,astQuery:e.handleAstQuery,ast:null==n?void 0:n.ast,loadingAst:a}):"There is no explanation for the request":null:"Explain of query is empty"},e.renderResult=function(){var t;switch(e.state.resultType){case $m:t=e.renderExecuteQuery();break;case Jm:t=e.renderExplainQuery();break;default:t=null}return t},e.handlePreviousHistoryClick=function(){var t=(i=e.props).changeUserInput,n=i.executeQuery.history,r=i.goToPreviousQuery,i=n.queries;n=n.currentIndex;e.previousButtonIsDisabled()||(r(),t({input:i[n-1]}))},e.handleNextHistoryClick=function(){var t=(i=e.props).changeUserInput,n=i.executeQuery.history,r=i.goToNextQuery,i=n.queries;n=n.currentIndex;e.nextButtonIsDisabled()||(r(),t({input:i[n+1]}))},e.previousButtonIsDisabled=function(){return e.props.executeQuery.history.currentIndex<=0},e.nextButtonIsDisabled=function(){var t=(n=e.props.executeQuery.history).queries,n=n.currentIndex;return t.length-1===n},e.renderHistoryNavigation=function(){return i.a.createElement("div",{className:tv("history-controls")},i.a.createElement("span",{className:tv("history-label")},"History:"),i.a.createElement(um,{previous:{handler:e.handlePreviousHistoryClick,hotkeyHandler:e.handlePreviousHistoryClick,hotkeyScope:"all",hotkey:"ctrl+up, command+up",tooltip:"Previous query [ctrl+↑]",disabled:e.previousButtonIsDisabled()},next:{handler:e.handleNextHistoryClick,hotkeyHandler:e.handleNextHistoryClick,hotkeyScope:"all",hotkey:"ctrl+down, command+down",tooltip:"Next query [ctrl+↓]",disabled:e.nextButtonIsDisabled()}}))},e.getExecuteResult=function(){var t=void 0===(r=(i=e.props.executeQuery).data)?[]:r,n=i.error,r=i.loading,i=i.history.queries;return n?n.data||n:0<t.length?t:!r&&i.length?"The request was successful":""},e.getPreparedResult=function(){var t=e.props.executeQuery.data;return null!=t&&t.length?[Object.keys(t[0])].concat(t).map((function(e){var t,n=[];for(t in e)"object"===se()(e[t])||Array.isArray(e[t])?n.push(JSON.stringify(e[t])):n.push(e[t]);return n.join("\t")})).join("\n"):""},e.renderClipboardButton=function(){var t=e.getPreparedResult(),n=e.state.resultType,r=!t.length||n!==$m;return i.a.createElement(Vl,{text:t,timeout:1e3},(function(e){return"success"===e&&Ym.createToast({name:"Copied",title:"Results were copied to clipboard successfully",type:e}),i.a.createElement(ge,{onClick:function(){},disabled:r},"Copy results")}))},e.onChangeWindow=w.a.throttle((function(){e.updateEditor()}),100),e.storageEventHandler=function(t){t.key===M&&e.props.setSettingValue(M,t.newValue)},e.updateEditor=function(){e.editorRef&&e.editorRef.layout()},e.onChangeSplit=function(t){e.setDefaultSizeResultPane(t),e.updateEditor()},e.setDefaultSizeResultPane=function(e){localStorage.setItem(z,e)},e.getDefaultSizeResultPane=function(){var e=parseInt(localStorage.getItem(z),10)||250;return"".concat(e,"px")},e.onSaveQueryHandler=function(t){var n=(o=e.props).executeQuery.input,r=void 0===(i=o.savedQueries)?[]:i,i=o.setSettingValue,o=r.findIndex((function(e){return e.name.toLowerCase()===t.toLowerCase()}));r=J()(r),n={name:t,body:n};-1!==o?r[o]=n:r.push(n),i(M,JSON.stringify(r)),Ro||localStorage.setItem(M,JSON.stringify(r))},e.onDeleteQueryHandler=function(t){var n=void 0===(n=(r=e.props).savedQueries)?[]:n,r=r.setSettingValue;n=n.filter((function(e){return e.name.toLowerCase()!==t.toLowerCase()}));r(M,JSON.stringify(n)),Ro||localStorage.setItem(M,JSON.stringify(n))},e}return q()(n,[{key:"componentDidMount",value:function(){this.updateEditor(),window.addEventListener("resize",this.onChangeWindow),window.addEventListener("storage",this.storageEventHandler)}},{key:"checkIfHasUnsavedInput",value:function(e){e.preventDefault(),e.returnValue=""}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onChangeWindow),window.removeEventListener("storage",this.storageEventHandler),window.onbeforeunload=void 0}},{key:"componentDidUpdate",value:function(e){var t,n=(o=this.props).explainQuery.data,r=(i=o.executeQuery).input,i=i.history,o=o.theme;r=!!r&&r!==i.queries[(null===(t=i.queries)||void 0===t?void 0:t.length)-1];window.onbeforeunload=r?this.checkIfHasUnsavedInput:void 0,n&&this.state.resultType===Jm&&(i=e.explainQuery.data,t=e.theme,r=n.links,e=n.nodes,n=n.tables,w.a.isEqual(r,(i=void 0===i?{}:i).links)&&w.a.isEqual(e,i.nodes)&&w.a.isEqual(o,t)||!e.length||!r.length||(t=document.getElementById("gmRoot"),this.gm&&(t.innerHTML=""),t.style.height=Math.max(100*n.length,200)+"px",this.gm=function(e,t,n){var r,i,o=2<arguments.length&&void 0!==n?n:im;return n=o.colors||{},n=Object.assign(Object.assign({},o),{colors:Object.assign(Object.assign(Object.assign({},xp),(r={success:"--yc-color-text-positive",error:"--yc-color-scarlet",warning:"--yc-color-amber",mute:"--yc-color-decoration",stroke:"--yc-color-text-hint",fill:"--yc-color-base-area",nodeFill:"--yc-color-float-area",nodeShadow:"--yc-color-card-shadow",titleColor:"--yc-color-text-primary",textColor:"--yc-color-text-complementary",buttonBorderColor:"--yc-color-divider",groupBorderColor:"--yc-color-celestial-thunder",groupFill:"--yc-color-celestial",titleHoverColor:"--yc-color-link-hover"},i=getComputedStyle(document.body),Object.keys(r).reduce((function(e,t){var n=i.getPropertyValue(r[t]).replace(/ /g,"");return n&&(e[t]=n),e}),{}))),n)}),n=new rm(e,n,t),t=new $p(t),n.render(t),{updateGraph:n.updateGraph.bind(n)}}("gmRoot",{links:r,nodes:e},{renderNodeTitle:Je,textOverflow:mp.Normal,colors:"dark"===o?ev:{}})))}},{key:"render",value:function(){var e=this,t=(d=this.props).executeQuery,n=d.explainQuery,r=d.theme,o=d.savedQueries,a=d.changeUserInput,s=t.runAction,l=!t.input||t.loading,c=w.a.find(Xm,{value:s}).title,u=t.loading||n.loading,h=this.renderResult(),d=Boolean(h)||u;u=this.getDefaultSizeResultPane();return i.a.createElement("div",{className:tv()},i.a.createElement(cp,{split:"horizontal",primary:"second",minSize:100,maxSize:-57,defaultSize:u,hidePane:!d,pane1Style:{minHeight:"50px"},onChange:this.onChangeSplit},i.a.createElement("div",{className:tv("pane-wrapper")},i.a.createElement("div",{className:tv("monaco-wrapper")},i.a.createElement("div",{className:tv("monaco")},i.a.createElement(om.a,{language:"sql",value:t.input,options:Zm,onChange:this.onChange,editorDidMount:this.editorDidMount,theme:"vs-".concat(r)}))),i.a.createElement("div",{className:tv("controls")},i.a.createElement("div",{className:tv("control-run")},i.a.createElement(ge,{onClick:this.handleSendClick,view:"action",pin:"round-brick",disabled:l,loading:t.loading},c),i.a.createElement(cu,{items:Xm,value:s,disabled:l,showSearch:!1,renderSwitcher:function(){return i.a.createElement("div",{className:tv("run-switcher")},i.a.createElement(ge,{view:"action",pin:"brick-round",disabled:l,loading:t.loading},i.a.createElement(Ch,{name:"chevron-down",width:16,height:16})))},onUpdate:function(t){e.props.selectRunAction(t)}})),i.a.createElement(ge,{onClick:this.handleGetExplainQueryClick,disabled:!t.input,loading:n.loading},"Explain"),this.renderHistoryNavigation(),this.renderClipboardButton(),i.a.createElement(Lm,{savedQueries:o,onSaveQuery:this.onSaveQueryHandler,saveButtonDisabled:l,changeUserInput:a,onDeleteQuery:this.onDeleteQueryHandler}))),d&&i.a.createElement("div",{className:tv("pane-wrapper")},h)))}}]),n}(i.a.Component),m={sendQuery:function(e){var t=e.query,n=e.database;e=e.action;return Ue({request:Pt.sendQuery(t,n,e,"profile"),actions:qr,dataHandler:function(e){var t=null!==(t=e.result)&&void 0!==t?t:e;if(t&&"string"==typeof t)throw"Unexpected token in JSON.";return e}})},changeUserInput:Gr,saveQueryToHistory:function(e){return{type:Xr,data:e}},goToPreviousQuery:function(){return{type:Kr}},goToNextQuery:function(){return{type:Zr}},showTooltip:ur,getExplainQuery:function(e){var t=e.query;e=e.database;return Ue({request:Pt.getExplainQuery(t,e),actions:ti,dataHandler:function(e){var t=[],n=[],r=e.tables;if("0.1"!==e.meta.version)throw"The explanation format of the query is not supported";return w.a.forEach(r,(function(e){n.push({name:e.name});var r={},i=void 0===(o=e.reads)?[]:o,o=void 0===(o=e.writes)?[]:o,a=null;w.a.forEach([].concat(J()(i),J()(o)),(function(i){r[i.type]?r[i.type]=r[i.type]+1:r[i.type]=1;var o=et(e.name,i.type,r[i.type]),s=e.name;a&&(s=i.type===a.type?et(e.name,a.type,r[a.type]-1):et(e.name,a.type,r[a.type])),t.push({from:s,to:o}),n.push({name:o,meta:function(e){switch(e.type){case"MultiLookup":case"Lookup":return ot([["lookup by",e.lookup_by],["columns",e.columns]]);case"FullScan":case"Scan":return ot([["scan by",e.scan_by],["limit",e.limit],["columns",e.columns]]);case"Upsert":case"MultiUpsert":return ot([["key",e.key],["columns",e.columns]]);case"Erase":case"MultiErase":return ot([["key",e.key],["columns",e.columns]]);default:return""}}(i)}),a=i}))})),{links:t,nodes:n,tables:r}}})},getExplainQueryAst:function(e){var t=e.query;e=e.database;return Ue({request:Pt.getExplainQueryAst(t,e),actions:ni})},setSettingValue:Bt,selectRunAction:function(e){return{type:Qr,data:e}}},Object(l.b)((function(e){return{executeQuery:e.executeQuery,explainQuery:e.explainQuery,theme:Ht(e,L),savedQueries:It(Ht(e,M))}}),m)(Z));function rv(e){return 1===(e=e.toString(16)).length?"0".concat(e):e}function iv(e,t,n){if(1===e)return[t];if(2===e)return[t,n];for(var r=(t.r-n.r)/(e-1),i=(t.g-n.g)/(e-1),o=(t.b-n.b)/(e-1),a=[],s=0;s<e;s++)a.push({r:Math.round(t.r-r*s),g:Math.round(t.g-i*s),b:Math.round(t.b-o*s)});return a.map((function(e){return mv(e)}))}function ov(e){var t=(n=Math.floor(e/2))+1,n=iv(e%2==0?n:n+1,fv,dv);t=iv(t,dv,hv);return[].concat(J()(n),J()(t.slice(1)))}function av(e,t){var n=new Set,r=pv[e]||{};return t.forEach((function(t){n.add(Number(t.metrics[e]))})),Number.isInteger(r.min)&&n.add(r.min),Number.isInteger(r.max)&&n.add(r.max),{min:(r=Array.from(n.values()).sort((function(e,t){return e-t})))[0],max:r[r.length-1]}}function sv(e){var t=Object(r.useState)(gv),n=(t=ae()(t,2))[0],o=t[1],a=e.tablets,s=Object(r.useRef)(null),l=Object(r.useRef)(null);function c(){for(var e=s.current,t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}function u(){for(var e=s.current,t=0;e;)t+=e.offsetLeft,e=e.offsetParent;return t}function h(e,t){var r=n.columnsCount;e=Math.floor(e/12);return r*Math.floor(t/12)+e}Object(r.useEffect)((function(){var e,t=s.current,r=t.getContext("2d");r.clearRect(0,0,t.offsetWidth,t.offsetHeight),a.map((e=r,function(t,r){var i=r%(o=n.columnsCount)*12,o=12*Math.floor(r/o);e.fillStyle=t.color||"gray",e.fillRect(i,o,10,10)}))})),Object(r.useLayoutEffect)((function(){var e,t,n=l.current;n&&(e=n.offsetWidth-15,t=Math.floor(e/12),n=Math.ceil(a.length/t),o({width:e,height:12*n,columnsCount:t,rowsCount:n}))}),[]);var d=w.a.throttle((function(t,n){var r=new CustomEvent("scroll");window.dispatchEvent(r);var i=e.parentRef.current;r=h(r=t-u()+i.scrollLeft,i=n-c()+i.scrollTop);(i=a[r])?(r={name:i.currentMetric,value:i.formattedValue},e.showTooltip(void 0,i,"tablet",r,{left:t-20,top:n-20})):e.hideTooltip()}),20);return i.a.createElement("div",{ref:l,className:vv("canvas-container"),onMouseLeave:function(){setTimeout((function(){e.hideTooltip()}),40)}},i.a.createElement("canvas",{ref:s,width:n.width,height:n.height,onClick:function(t){var n=e.parentRef.current,r=h(r=t.clientX-u()+n.scrollLeft,n=t.clientY-c()+n.scrollTop);(n=a[r])&&window.open((n=(r=n).TabletId,r=window.location.hostname,n=va(Oa,{id:n}),n=[r,Ao,n].map((function(e){return e.startsWith("/")?e.slice(1):e})).filter(Boolean).join("/"),"".concat("https://").concat(n)),"_blank")},onMouseMove:function(e){return d(e.clientX,e.clientY)}}))}n(925);var lv={displayIndices:!1,syncHeadOnResize:!0,stickyHead:as.MOVING},cv=ie()("kv-preview"),uv=(G=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).autofetcher=void 0,e.sendQueryForPreview=function(){var t,n=(t=e.props).sendQuery,r=t.database,i=t.table;(t=t.type)!==ag&&t!==sg||n({query:"--!syntax_v1\nselect * from `".concat(i,"` limit 32"),database:r,action:"execute-scan",path:i})},e.renderTable=function(){var t=(r=e.props).data,n=r.showTooltip,r=[];return t&&0<t.length&&(r=Object.keys(t[0]).map((function(e){return{name:e,render:function(e){var t=e.value;return i.a.createElement("span",{className:cv("cell"),onClick:function(e){return n(e.target,t,"cell")}},t)}}}))),t=tt(t),i.a.createElement(as,{columns:r,data:t,settings:lv})},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this;this.sendQueryForPreview(),this.autofetcher=new uf,this.props.autorefresh&&(this.autofetcher.start(),this.autofetcher.fetch((function(){return e.sendQueryForPreview()})))}},{key:"componentDidUpdate",value:function(e){var t=this,n=(o=this.props).table,r=o.hideTooltip,i=o.autorefresh,o=o.setQueryOptions;e.table!==n&&(this.sendQueryForPreview(),r(),o({wasLoaded:!1,data:void 0})),i&&!e.autorefresh&&(this.sendQueryForPreview(),this.autofetcher.start(),this.autofetcher.fetch((function(){return t.sendQueryForPreview()}))),!i&&e.autorefresh&&this.autofetcher.stop()}},{key:"componentWillUnmount",value:function(){this.autofetcher.stop()}},{key:"render",value:function(){var e=(o=this.props).error,t=o.loading,n=void 0===(r=o.data)?[]:r,r=o.type,o=o.wasLoaded;return r!==ag&&r!==sg?i.a.createElement("div",{className:cv("message-container")},"Not available"):t&&!o?i.a.createElement("div",{className:cv("loader-container")},i.a.createElement(Ql,{size:"m"})):e?i.a.createElement("div",{className:cv("message-container")},e.data||e):t||0!==n.length?i.a.createElement("div",{className:cv()},i.a.createElement("div",{className:cv("result")},this.renderTable())):i.a.createElement("div",{className:cv("message-container")},"Table is empty")}}]),n}(i.a.Component),y={sendQuery:function(e){var t=e.query,n=e.database;e=e.action;return Ue({request:Pt.sendQuery(t,n,e),actions:Wi,dataHandler:function(e){if(!Array.isArray(e))try{return JSON.parse(e)}catch(e){return[]}return e}})},showTooltip:ur,hideTooltip:cr,setQueryOptions:function(e){return{type:Gi,data:e}}},Object(l.b)((function(e){var t=(i=e.preview).data,n=i.loading,r=i.error,i=i.wasLoaded;return{data:void 0===t?[]:t,loading:n,error:r,autorefresh:e.schema.autorefresh,wasLoaded:i}}),y)(G)),hv={r:255,g:4,b:0},dv={r:255,g:219,b:77},fv={r:59,g:201,b:53},pv={CPU:{min:0,max:1e6},Network:{min:0,max:1e9},Storage:{min:0,max:2e9},DataSize:{min:0,max:2e9},RowCount:{min:0},IndexSize:{min:0}},mv=function(e){var t=e.r,n=e.g;e=e.b;return"#".concat(rv(t)).concat(rv(n)).concat(rv(e))},vv=ie()("heatmap"),gv={width:0,height:0};function yv(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function bv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yv(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cv(e){var t=Object(r.useRef)(),n=void 0===(o=e.data)?{}:o,o=e.maxCount,a=n.count,s=n.leftBound,l=n.rightBound;n=n.color,o=a/o*100;return i.a.createElement("div",{ref:t,className:Ev("item"),style:{backgroundColor:n,height:"".concat(o,"%")},onMouseEnter:function(){var n=t.current;e.showTooltip(n,{count:a,leftBound:s,rightBound:l},"histogram")},onMouseLeave:e.hideTooltip})}function wv(e){var t=e.tablets,n=e.currentMetric,r=(a=av(n,t)).min,o=a.max,a=ov(50),s=(o-r)/50,l=a.map((function(e,t){return{color:e,count:0,leftBound:Ze(r+t*s),rightBound:Ze(r+(t+1)*s)}})),c=0;return t.forEach((function(e){var t=n&&Number(e.metrics[n]);e=Math.floor(t/s),t=(null===(t=l[e])||void 0===t?void 0:t.count)+1;c<t&&(c=t),l[e]=bv(bv({},l[e]),{},{count:t})})),i.a.createElement("div",{className:Ev()},i.a.createElement("div",{className:Ev("chart")},Boolean(o)&&l.map((function(t,n){return i.a.createElement(Cv,{key:n,data:t,maxCount:c,showTooltip:e.showTooltip,hideTooltip:e.hideTooltip})})),i.a.createElement("div",{className:Ev("x-min")},Ze(r)),i.a.createElement("div",{className:Ev("x-max")},Ze(o)),i.a.createElement("div",{className:Ev("y-min")},"0"),i.a.createElement("div",{className:Ev("y-max")},Ze(c))))}n(926);var Ev=ie()("histogram");function Sv(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ov(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sv(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xv(){return i.a.createElement("div",{className:_v("loader")},i.a.createElement(Ql,{size:"m"}))}n(927);var _v=ie()("heatmap"),kv=ov(500),Tv=(m=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).autofetcher=void 0,e.itemsContainer=i.a.createRef(),e.setInitialMetric=function(){var t=e.props,n=t.metrics;!t.currentMetric&&n&&n.length&&e.props.setHeatmapOptions({currentMetric:n[0].value})},e.getTablets=function(){var t=e.props.path;e.props.getTabletsInfo({path:t})},e._onMetricChange=function(t){e.props.setHeatmapOptions({currentMetric:t})},e._onCheckboxChange=function(){e.props.setHeatmapOptions({sort:!e.props.sort})},e._onHeatmapChange=function(){e.props.setHeatmapOptions({heatmap:!e.props.heatmap})},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this;this.getTablets(),this.autofetcher=new uf,this.setInitialMetric(),this.props.autorefresh&&(this.autofetcher.start(),this.autofetcher.fetch((function(){return e.getTablets()})))}},{key:"componentDidUpdate",value:function(e){var t=this,n=(r=this.props).path,r=r.autorefresh;n&&e.path!==n&&(this.props.setHeatmapOptions({wasLoaded:!1}),this.getTablets()),r&&!e.autorefresh&&(this.getTablets(),this.autofetcher.start(),this.autofetcher.fetch((function(){return t.getTablets()}))),!r&&e.autorefresh&&this.autofetcher.stop(),this.setInitialMetric()}},{key:"componentWillUnmount",value:function(){this.autofetcher.stop()}},{key:"renderHistogram",value:function(){var e=(t=this.props).tablets,t=t.currentMetric;return i.a.createElement(wv,{tablets:e,currentMetric:t,showTooltip:this.props.showTooltip,hideTooltip:this.props.hideTooltip})}},{key:"renderHeatmapCanvas",value:function(){var e,t=(e=this.props).tablets,n=e.currentMetric,r=e.sort,o=(e=av(n,t)).min,a=e.max;t=t.map((function(e){var t,r,i=n&&Number(e.metrics[n]),s=(t=i,s=o,0===(r=a)?0:Math.round((t-s)/(r-s)*499));s=kv[s];return Ov(Ov({},e),{},{color:s,value:i,formattedValue:Ze(i),currentMetric:n})})),t=r?t.sort((function(e,t){return t.value-e.value})):t;return i.a.createElement("div",{ref:this.itemsContainer,className:_v("items")},i.a.createElement(sv,{tablets:t,parentRef:this.itemsContainer,showTooltip:this.props.showTooltip,hideTooltip:this.props.hideTooltip,currentMetric:n}))}},{key:"renderContent",value:function(){var e=(a=this.props).tablets,t=a.metrics,n=a.currentMetric,r=a.heatmap,o=a.sort,a=(s=av(n,e)).min,s=s.max;return i.a.createElement("div",{className:_v()},i.a.createElement("div",{className:_v("filters")},i.a.createElement("div",{className:_v("heatmap-select-container")},i.a.createElement(cu,{className:_v("heatmap-select"),value:n,items:t,onUpdate:this._onMetricChange})),i.a.createElement("div",{className:_v("sort-checkbox")},i.a.createElement(Ef,{onUpdate:this._onCheckboxChange,checked:o},"Sort")),i.a.createElement("div",{className:_v("histogram-checkbox")},i.a.createElement(Ef,{onUpdate:this._onHeatmapChange,checked:r},"Heatmap")),i.a.createElement("div",{className:_v("limits")},i.a.createElement("div",{className:_v("limits-block")},i.a.createElement("div",{className:_v("limits-title")},"min:"),i.a.createElement("div",{className:_v("limits-value")},Number.isInteger(a)?Ze(a):"—")),i.a.createElement("div",{className:_v("limits-block")},i.a.createElement("div",{className:_v("limits-title")},"max:"),i.a.createElement("div",{className:_v("limits-value")},Number.isInteger(s)?Ze(s):"—")),i.a.createElement("div",{className:_v("limits-block")},i.a.createElement("div",{className:_v("limits-title")},"count:"),i.a.createElement("div",{className:_v("limits-value")},Ze(e.length))))),r?this.renderHeatmapCanvas():this.renderHistogram())}},{key:"render",value:function(){var e=(t=this.props).loading,t=t.wasLoaded;return e&&!t?i.a.createElement(xv,null):this.renderContent()}}]),n}(i.a.Component),Z={getTabletsInfo:function(e){var t=e.nodes;e=e.path;return Ue({request:Promise.all([Pt.getTabletsInfo({nodes:t,path:e}),Pt.getHeatmapData({path:e})]),actions:Yt,dataHandler:function(e){var t,n=(t=ae()(e,2))[0],r=(e=void 0===(r=t[1])?{}:r,void 0===(t=(void 0===n?[]:n).TabletStateInfo)?[]:t),i=new Map,o=(n=void 0===(e=(t=void 0===(n=e.PathDescription)?{}:n).TablePartitions)?[]:e,void 0===(e=t.TablePartitionStats)?[]:e),a=void 0===(t=t.TablePartitionMetrics)?[]:t;return r.forEach((function(e){i.set(e.TabletId,e)})),n.forEach((function(e,t){t=Object.assign({},o[t],a[t]),i.set(e.DatashardId,qt(qt({},i.get(e.DatashardId)),{},{metrics:t}))})),{data:n=Array.from(i.values()),metrics:n[0]&&Object.keys(n[0].metrics).map((function(e){return{key:e,value:e,title:e}}))}}})},hideTooltip:cr,showTooltip:ur,setHeatmapOptions:function(e){return{type:Xt,data:e}}},Object(l.b)((function(e){var t=e.heatmap,n=t.loading,r=t.data;return{tablets:void 0===r?[]:r,loading:n,metrics:t.metrics,sort:t.sort,heatmap:t.heatmap,currentMetric:t.currentMetric,wasLoaded:t.wasLoaded,autorefresh:e.schema.autorefresh}}),Z)(m));n(928),n(929);var Nv=ie()("kv-describe"),Pv=new Map,Iv=(y=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).renderDescribeJson=function(){var t=e.props.data;return i.a.createElement($n.a,{data:t,className:Nv("tree"),onClick:function(e){var t=e.path;e=!Pv.get(t);Pv.set(t,e)},searchOptions:{debounceTime:300},isExpanded:function(e){return Pv.get(e)||!1}})},e}return q()(n,[{key:"render",value:function(){var e=(r=this.props).error,t=r.loading,n=r.data,r=r.wasLoaded;return t&&!r?i.a.createElement("div",{className:Nv("loader-container")},i.a.createElement(Ql,{size:"m"})):e?i.a.createElement("div",{className:Nv("message-container")},e.data||e):t||n?i.a.createElement("div",{className:Nv()},i.a.createElement("div",{className:Nv("result")},this.renderDescribeJson())):i.a.createElement("div",{className:Nv("message-container")},"Empty")}}]),n}(i.a.Component),Object(l.b)((function(e){var t=e.describe,n=t.loading;e=t.error;return{data:t.currentDescribe,loading:n,error:e,wasLoaded:t.wasLoaded}}))(y));n(930);var Rv=ie()("kv-acl"),jv={displayIndices:!1,syncHeadOnResize:!0,stickyHead:as.MOVING},Dv=[{name:"AccessType",header:"Access Type",sortable:!1,width:140},{name:"AccessRights",header:"Access Rights",render:function(e){return e=e.value,w.a.map(e,(function(e,t){return i.a.createElement("div",{key:t},e)}))},width:140,sortable:!1},{name:"Subject",sortable:!1,render:function(e){return e=e.value,Av.prepareLogin(e)},width:140},{name:"InheritanceType",header:"Inheritance Type",render:function(e){return e=e.value,w.a.map(e,(function(e,t){return i.a.createElement("div",{key:t},e)}))},width:140,sortable:!1}],Av=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).renderTable=function(){var t=e.props.acl;return t?i.a.createElement(as,{columns:Dv,data:t,settings:jv}):null},e.renderOwner=function(){var t=e.props.owner;return t?i.a.createElement("div",{className:Rv("owner-container")},i.a.createElement("span",{className:Rv("owner-label")},"Owner: "),n.prepareLogin(t)):null},e.renderResult=function(){return i.a.createElement(i.a.Fragment,null,e.renderOwner(),e.renderTable())},e}return q()(n,[{key:"render",value:function(){var e=(o=this.props).error,t=o.loading,n=o.acl,r=o.owner,o=o.wasLoaded;return t&&!o?i.a.createElement("div",{className:Rv("loader-container")},i.a.createElement(Ql,{size:"m"})):!e||e.isCancelled?t||n||r?i.a.createElement("div",{className:Rv()},i.a.createElement("div",{className:Rv("result")},this.renderResult())):i.a.createElement("div",{className:Rv("message-container")},"Empty"):(e=(e.data||e).slice(0,100),i.a.createElement("div",{className:Rv("message-container")},e))}}]),n}(i.a.Component);Av.prepareLogin=function(e){if(e&&e.endsWith("@staff")&&!e.startsWith("svc_")){var t=e.split("@")[0];return i.a.createElement(Hl,{key:t,login:t,className:Rv("text")},t)}return e};var Lv=Object(l.b)((function(e){var t=e.schemaAcl,n=t.loading;e=t.error;return{acl:t.acl,owner:t.owner,loading:n,error:e,wasLoaded:t.wasLoaded}}))(Av);n(931);var Mv=ie()("kv-top-queries"),Fv={displayIndices:!1,syncHeadOnResize:!0,stickyHead:as.MOVING,highlightRows:!0},Bv=[{name:"CPUTimeUs",width:140,sortAccessor:function(e){return Number(e.CPUTimeUs)}},{name:"QueryText",width:500,sortable:!1,render:function(e){return e=e.value,i.a.createElement(Rm,{value:e,maxQueryHeight:10})}}],Hv=(G=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).autofetcher=void 0,e.onRowClick=function(t){var n=t.QueryText,r=(t=(r=e.props).changeUserInput,r.changeSchemaTab);t({input:n}),r("Query")},e.renderTable=function(){var t=e.props.data;return t?i.a.createElement(as,{columns:Bv,data:t,settings:Fv,onRowClick:e.onRowClick}):null},e.renderResult=function(){return i.a.createElement("div",{className:Mv("table-wrapper")},i.a.createElement("div",{className:Mv("table-content")},e.renderTable()))},e}return q()(n,[{key:"componentDidMount",value:function(){this.autofetcher=new uf,this.getTopQueries()}},{key:"componentDidUpdate",value:function(e){var t=this,n=(i=this.props).autorefresh,r=i.path,i=i.setQueryOptions;n&&!e.autorefresh&&(this.getTopQueries(),this.autofetcher.start(),this.autofetcher.fetch((function(){return t.getTopQueries()}))),!n&&e.autorefresh&&this.autofetcher.stop(),r!==e.path&&i({wasLoaded:!1,data:void 0})}},{key:"componentWillUnmount",value:function(){this.autofetcher.stop()}},{key:"getTopQueries",value:function(){var e=this.props.path,t="\n--!syntax_v1\n$last = (\n    SELECT\n        MAX(IntervalEnd)\n    FROM `".concat(t=e,"/.sys/top_queries_by_cpu_time_one_hour`\n);\nSELECT\n    CPUTime as CPUTimeUs,\n    QueryText\nFROM `").concat(t,"/.sys/top_queries_by_cpu_time_one_hour`\nWHERE IntervalEnd IN $last\n");this.props.sendQuery({query:t,database:e,action:"execute-scan"})}},{key:"render",value:function(){var e,t=(a=this.props).error,n=a.loading,r=a.data,o=a.wasLoaded,a=a.type;return n&&!o?i.a.createElement("div",{className:Mv("loader-container")},i.a.createElement(Ql,{size:"m"})):(a===lg||a===sg?e="No data":t&&!t.isCancelled?e=(t.data||t).slice(0,300):n||r||(e="No data"),e?i.a.createElement("div",{className:Mv("message-container")},e):i.a.createElement("div",{className:Mv()},i.a.createElement("div",{className:Mv("result")},this.renderResult())))}}]),n}(i.a.Component),Z={sendQuery:function(e){var t=e.query,n=e.database;e=e.action;return Ue({request:Pt.sendQuery(t,n,e),actions:lo,dataHandler:function(e){if(e&&"string"==typeof e)throw"Unexpected token in JSON.";return e}})},changeUserInput:Gr,setQueryOptions:function(e){return{type:co,data:e}}},Object(l.b)((function(e){var t=e.executeTopQueries;return{loading:t.loading,data:t.data,error:t.error,wasLoaded:t.wasLoaded,autorefresh:e.schema.autorefresh}}),Z)(G)),zv=(n(932),ie()("top-shards")),Uv=ie()("yc-link"),Vv={displayIndices:!1,syncHeadOnResize:!0,stickyHead:as.MOVING},Wv=new uf,Gv=(m={sendShardQuery:function(e){var t=e.database;e=e.path;return Ue({request:Pt.sendQuery("SELECT Path, TabletId, CPUCores FROM `.sys/partition_stats` WHERE Path='".concat(e=void 0===e?"":e,"' OR Path LIKE '").concat(e,"/%' ORDER BY CPUCores DESC LIMIT 20"),t,"execute-scan"),actions:yo,dataHandler:function(e){if(e&&"string"==typeof e)throw"Unexpected token in JSON.";return e}})},setCurrentSchemaPath:Or,getSchema:Sr,setShardQueryOptions:function(e){return{type:bo,data:e}}},Object(l.b)((function(e){var t=(i=e.shardsWorkload).loading,n=i.data,r=i.error,i=i.wasLoaded;return{loading:t,data:n,error:r,currentSchemaPath:e.schema.currentSchema.Path,autorefresh:e.schema.autorefresh,wasLoaded:i}}),m)((function(e){var t=e.sendShardQuery,n=e.currentSchemaPath,o=e.path,a=e.loading,s=e.data,l=e.error,c=e.setCurrentSchemaPath,u=e.getSchema,h=e.autorefresh,d=e.wasLoaded,f=e.setShardQueryOptions,p=e.type;return Object(r.useEffect)((function(){return h?(Wv.start(),Wv.fetch((function(){return t({database:o,path:n})}))):Wv.stop(),function(){Wv.stop()}}),[h]),Object(r.useEffect)((function(){t({database:o,path:n}),f({wasLoaded:!1,data:void 0})}),[n]),e=Object(r.useMemo)((function(){return[{name:"Path",render:function(e){var t;e=e.value;return i.a.createElement("span",{onClick:(t=e,function(){c(t),u({path:t}),Mo.go(0)}),className:Uv({view:"normal"})},e)}},{name:"CPUCores",render:function(e){return e=e.value,"".concat((100*e).toFixed(2),"%")},align:as.RIGHT},{name:"TabletId",render:function(e){return e=e.value,i.a.createElement(Ph,{to:va(Oa,{id:e})},e)}}]}),[]),i.a.createElement("div",{className:zv()},a&&!d?i.a.createElement("div",{className:zv("loader")},i.a.createElement(Ql,{size:"l"})):p===lg||p===sg?i.a.createElement("div",{className:zv("no-data")},"No data"):l?l.data:s&&0<s.length?i.a.createElement("div",{className:zv("table")},i.a.createElement(as,{columns:e,data:s,settings:Vv,className:zv("table"),theme:"internal"})):s)}))),qv=(y=n(33),n.n(y));n(933);var Yv=ie()("schema"),Xv=(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).emptySchema=i.a.createRef(),e.removeArrow=function(){var t,n,r=null===(t=a.a.findDOMNode(qv()(e)))||void 0===t||null===(n=t.parentNode)||void 0===n||null===(r=n.parentNode)||void 0===r?void 0:r.querySelector(".tree-view_arrow");return r&&r.setAttribute("style","visibility: hidden"),""},e.renderContent=function(){var t=e.props,n=t.schema,r=t.path;return n&&"StatusSuccess"===n.Status?i.a.createElement("div",{className:Yv()},n&&n.PathDescription&&n.PathDescription.Children?n.PathDescription.Children.map((function(e,t){return i.a.createElement(Qv,{key:t,fullPath:r,data:e})})):i.a.createElement("div",{ref:e.emptySchema},e.showEmptyNode())):e.renderLoader()},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.path;(0,e.getSchema)({path:t})}},{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}},{key:"showEmptyNode",value:function(){var e=this.props,t=e.tenantPath;return e.schema.Path===t?"no data":String(this.removeArrow())}},{key:"render",value:function(){var e=(r=this.props).loading,t=r.wasLoaded,n=r.error,r=r.currentSchema;return e&&!t?this.renderLoader():n&&!n.isCancelled||r&&"StatusAccessDenied"===r.Status?i.a.createElement("div",null,(null==n?void 0:n.statusText)||"Access denied"):this.renderContent()}}]),n}(i.a.Component),G={getSchema:Sr},Object(l.b)((function(e,t){var n=(a=e.schema).data,r=a.loading,i=a.wasLoaded,o=a.error,a=a.currentSchema;e=e.tenant.tenant.Name,t=t.path;return{tenantPath:e,schema:(void 0===n?{}:n)["".concat(t)],loading:r,wasLoaded:i,error:o,currentSchema:a}}),G)(Z));n(934);var Kv=ie()("schema-node"),Zv=["EPathTypeDir","EPathTypeSubDomain","EPathTypeExtSubDomain","EPathTypeOlapStore"],Qv=(m=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={collapsed:!0},e.schemaNodeRef=i.a.createRef(),e.getSchemaPath=function(){var t=e.props,n=t.data,r=t.fullPath;return t.isRoot?r:"".concat(r,"/").concat(n.Name)},e.invertCollapsed=function(){e.setState({collapsed:!e.state.collapsed})},e.setIcon=function(t){var n=e.state.collapsed;return-1!==Zv.indexOf(t.PathType)?n?i.a.createElement(Ch,{name:"folder",viewBox:"0 0 13 10",width:14,height:14}):i.a.createElement(Ch,{name:"openFolder",viewBox:"0 0 13 10",width:14,height:14}):"EPathTypeTable"===t.PathType||"EPathTypeOlapTable"===t.PathType?i.a.createElement(Ch,{name:"table",viewBox:"0 0 13 10",width:14,height:14}):void 0},e.addActiveClass=function(){var t="schema-node_active",n=document.querySelector(".".concat(t));n&&n.classList.remove(t),(n=a.a.findDOMNode(qv()(e)))&&n.classList.add(t)},e.handleClick=function(t){var n=(o=e.props).getSchema,r=o.getDescribe,i=o.getSchemaAcl,o=o.setCurrentSchemaPath;t.stopPropagation(),e.addActiveClass(),o(t=e.getSchemaPath()),n({path:t}),r({path:t}),i({path:t})},e}return q()(n,[{key:"componentDidMount",value:function(){var e,t=(e=this.props).currentSchemaPath,n=e.isRoot;(e=this.getSchemaPath())===t&&this.addActiveClass(),(t&&t.startsWith(e)&&t!==e||n)&&this.setState({collapsed:!1})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.fullPath,r=e.isRoot,o=void 0!==r&&r,a=this.state.collapsed;return t?(e="EPathTypeTable"!==t.PathType,r=i.a.createElement("div",{className:Kv("label")},this.setIcon(t),i.a.createElement("div",{className:Kv("name")},t.Name)),i.a.createElement("div",{onClick:this.handleClick,ref:this.schemaNodeRef},i.a.createElement(Cf,{nodeLabel:r,collapsed:a,onClick:this.invertCollapsed,hasArrow:e},i.a.createElement(Xv,{path:o?n:"".concat(n,"/").concat(t.Name)})))):null}}]),n}(i.a.Component),y={getSchema:Sr,getDescribe:to,getSchemaAcl:oo,setCurrentSchemaPath:Or},Object(l.b)((function(e){return{currentSchemaPath:e.schema.currentSchemaPath}}),y)(m)),$v=(n(935),ie()("hot-keys")),Jv={displayIndices:!1,syncHeadOnResize:!0,stickyHead:as.MOVING,stickyTop:0},eg={accessSample:"accessSample",keyValues:"keyValues"},tg=new uf,ng=(G={getHotKeys:function(e,t){return Ue({request:Pt.getHotKeys(e,t),actions:So})},setHotKeysOptions:function(e){return{type:Oo,data:e}}},Object(l.b)((function(e){var t,n=(t=e.hotKeys).loading,r=t.data,i=t.error,o=t.wasLoaded;return{loading:n,data:r,error:i,currentSchemaPath:(t=void 0===(t=e.schema.currentSchema)?{}:t).Path,autorefresh:e.schema.autorefresh,wasLoaded:o,currentSchema:t}}),G)((function(e){var t=e.getHotKeys,n=e.currentSchemaPath,o=e.loading,a=e.wasLoaded,s=e.error,l=e.data,c=e.autorefresh,u=e.setHotKeysOptions,h=e.currentSchema;return Object(r.useEffect)((function(){return t(n),c?(tg.start(),tg.fetch((function(){return t(n)}))):tg.stop(),function(){tg.stop()}}),[c]),Object(r.useEffect)((function(){t(n),u({wasLoaded:!1,data:void 0})}),[n]),e=Object(r.useMemo)((function(){var e,t=null==h||null===(e=h.PathDescription)||void 0===e||null===(t=e.Table)||void 0===t?void 0:t.KeyColumnNames;return[{name:eg.accessSample,header:"Samples",sortable:!1,align:as.RIGHT}].concat(J()(null==t?void 0:t.map((function(e,t){return{name:e,header:i.a.createElement("div",{className:$v("primary-key-column")},i.a.createElement(Ch,{name:"key",viewBox:"0 0 12 7",width:12,height:7}),e),render:function(e){return e.row[eg.keyValues][t]},align:as.RIGHT,sortable:!1}}))))}),[h]),o||void 0!==l?i.a.createElement("div",{className:$v()},o&&!a?i.a.createElement("div",{className:$v("loader")},i.a.createElement(Ql,{size:"l"})):s?s.data:null!==l?i.a.createElement("div",{className:$v("table-content")},i.a.createElement(as,{columns:e,data:l,settings:Jv,theme:"internal",initialSortOrder:{columnId:eg.accessSample,order:as.DESCENDING}})):i.a.createElement("div",{className:$v("stub")},"No information about hot keys")):i.a.createElement("div",{className:$v("stub")},"Cluster version does not support hot keys viewing")})));function rg(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ig(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rg(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(936);var og=ie()("schema-main"),ag="Table",sg="OlapTable",lg="OlapStore",cg=(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).autofetcher=void 0,e.state={entityType:""},e.fetchData=function(){var t=(a=e.props).getSchema,n=a.getDescribe,r=a.getSchemaAcl,i=a.schemaPath,o=a.tenantName,a=a.getOlapStats;e.getEntityType()===sg&&a({path:i}),t({path:o}),t({path:i}),n({path:i}),r({path:i})},e.changeSchemaTab=function(t){var n=(i=e.props).tenantName,r=i.tenantActiveTab,i=i.queryParams;t=va(ya,{page:r},ig(ig({},i),{},{name:n,schemaTab:t})),Mo.push(t)},e.getEntityType=function(){var t,n=e.props.currentItem,r=null==n||null===(t=n.PathDescription)||void 0===t||null===(r=t.Self)||void 0===r?void 0:r.PathType;return r&&r.replace("EPathType","")},e.setAutorefresh=function(){var t=(r=e.props).autorefresh,n=r.enableAutorefresh,r=r.disableAutorefresh;(t?r:n)()},e.renderInfo=function(){var t,n,r=(s=(n=e.props).currentItem).Path,o=s.Status,a=s.Reason,s=n.autorefresh;return!(n=e.getEntityType())&&o&&a&&(t="".concat(o,": ").concat(a)),i.a.createElement("div",{className:og("info-wrapper")},i.a.createElement("div",{className:og("info")},n?i.a.createElement("div",{className:og("entity-type")},n):i.a.createElement("div",{className:og("entity-type",{error:!0})},i.a.createElement(jl,{content:t,offset:{left:0}})),i.a.createElement("div",null,r),i.a.createElement("span",{className:og("clipboard-button")},i.a.createElement(Kl,{text:r,size:16}))),i.a.createElement(Mh,{onUpdate:e.setAutorefresh,checked:s,content:"Autorefresh"}))},e.onChange=function(t){e.setDefaultSizePane(t)},e.setDefaultSizePane=function(e){localStorage.setItem(U,e)},e.getDefaultSizePane=function(){var e=localStorage.getItem(U)||250;return"".concat(e,"px")},e.renderHost=function(t,n){var r=(a=e.props).tenantActiveTab,o=a.tenant,a=a.activeTab;o=o.Name,t=t.backend,a=va(ya,{page:r},{name:o,schemaTab:a,backend:Ro?xt(t):void 0}),a=Ro?a:"http://".concat(t,"/monitoring").concat(a);return i.a.createElement("li",{className:og("host-link")},i.a.createElement(we,{key:n,href:a,target:"_self"},t))},e}return q()(n,[{key:"componentDidMount",value:function(){this.autofetcher=new uf,this.autofetcher.active=!1,this.fetchData(),this.setState({entityType:this.getEntityType()})}},{key:"componentDidUpdate",value:function(e){var t,n=this,r=(t=this.props).autorefresh,i=t.schemaPath,o=t.disableAutorefresh,a=t.activeTab,s=t.getOlapStats,l=t.schemaPath;switch((t=this.getEntityType())!==this.state.entityType&&(this.setState({entityType:t}),t===sg&&s({path:l})),i!==e.schemaPath&&(this.fetchData(),r&&(o(),this.autofetcher.stop())),a){case yp:case bp:case"ACL":!this.autofetcher.active&&r&&(this.fetchData(),this.autofetcher.start(),this.autofetcher.fetch((function(){return n.fetchData()})));break;default:this.autofetcher.active&&this.autofetcher.stop()}!r&&e.autorefresh&&this.autofetcher.stop()}},{key:"componentWillUnmount",value:function(){this.autofetcher.stop()}},{key:"renderSchemaTab",value:function(){var e,t,n=this.props,r=n.currentItem,o=n.tenantName,a=n.activeTab,s=n.tenant,l=n.theme,c=n.olapStats,u=this.getEntityType(),h=(null==r||null===(e=r.PathDescription)||void 0===e?void 0:e.Table)||(null==r||null===(t=r.PathDescription)||void 0===t?void 0:t.OlapTableDescription);if("StatusSuccess"!==r.Status)return i.a.createElement("div",null,"no data");switch(a){case"Query":return i.a.createElement(nv,{path:o,theme:l});case"Tablets":return i.a.createElement(Cd,{tenant:s,currentSchemaItem:r,path:r.Path});case yp:return i.a.createElement(gp,{tableSchema:h,currentItem:r,type:u,olapStats:c});case"Graph":return i.a.createElement(Tv,{tenant:s,currentSchemaItem:r,path:r.Path});case"Preview":var d,f=null==r||null===(d=r.PathDescription)||void 0===d||null===(f=d.TableStats)||void 0===f?void 0:f.PartCount;return i.a.createElement(uv,{database:o,table:r.Path,type:u,partCount:f});case bp:return i.a.createElement(Iv,null);case"ACL":return i.a.createElement(Lv,null);case Cp:return i.a.createElement(Hv,{path:o,changeSchemaTab:this.changeSchemaTab,type:u});case wp:return i.a.createElement(Gv,{path:o,type:u});case"Hot keys":return u===ag?i.a.createElement(ng,{path:o}):this.changeSchemaTab(yp);default:return!1}}},{key:"renderContent",value:function(){var e=this,t=(o=this.props).tenantName,n=void 0===(r=o.tenantData)?null:r,r=o.activeTab,o=this.getEntityType()===ag?[].concat(J()(Ep),J()(Sp)):Ep;return i.a.createElement("div",{className:og()},i.a.createElement(cp,{split:"vertical",defaultSize:this.getDefaultSizePane(),maxSize:500,minSize:250,onChange:this.onChange},i.a.createElement("div",{className:og("tree")},i.a.createElement(Qv,{fullPath:t,data:n,isRoot:!0})),i.a.createElement("div",{className:og("content")},this.renderInfo(),i.a.createElement("div",{className:og("tabs")},i.a.createElement(ud,{items:o,activeTab:r,wrapTo:function(t,n){var r=t.id;return i.a.createElement("span",{onClick:function(){return e.changeSchemaTab(r)},key:r,className:og("tab")},n)},allowNotSelected:!0})),i.a.createElement("div",{className:og("tab-content")},this.renderSchemaTab()))))}},{key:"renderHosts",value:function(){var e=this.props.tenantNodes;return i.a.createElement("div",{className:og("hosts")},i.a.createElement("div",{className:og("hosts-message")},"Select endpoint to browse schema"),i.a.createElement("ul",{className:og("hosts-list")},e.map(this.renderHost)))}},{key:"render",value:function(){var e=void 0===(e=(t=this.props).tenantNodes)?[]:e,t=t.host;t=e.map((function(e){return e.id})).includes(t.NodeId);return Ro&&!t&&e.length?this.renderHosts():this.renderContent()}}]),n}(i.a.Component),y={getDescribe:to,getSchemaAcl:oo,getSchema:Sr,enableAutorefresh:function(){return{type:Cr}},disableAutorefresh:function(){return{type:wr}},getOlapStats:function(e){return e=void 0===(e=e.path)?"":e,Ue({request:Pt.sendQuery("SELECT * FROM `".concat(e,"/.sys/primary_index_stats`"),e,"execute-scan"),actions:To,dataHandler:function(e){if(e&&"string"==typeof e)throw"Unexpected token in JSON.";return e}})}},Object(l.b)((function(e,t){var n=(s=e.schema).currentSchema,r=s.currentSchemaPath,i=s.data,o=s.autorefresh,a=e.olapStats.data,s=(l=e.tenant).tenant,l=l.tenantNodes;e=e.host.data;return{currentItem:void 0===n?{}:n,tenant:void 0===s?{}:s,tenantNodes:l,tenantData:w.a.get(i[t.tenantName],"PathDescription.Self"),host:e,schemaPath:r||t.tenantName,autorefresh:o,olapStats:a}}),y)(Z));n(937);var ug=ie()("node-network");(m=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).node=i.a.createRef(),e._onNodeHover=function(){var t=(o=e.props).onMouseEnter,n=o.nodeId,r=o.connected,i=o.capacity,o=o.rack;t(e.node.current,{nodeId:n,connected:r,capacity:i,rack:o},"node")},e._onNodeLeave=function(){e.props.onMouseLeave()},e}return q()(n,[{key:"render",value:function(){var e=this.props,t=e.nodeId,n=e.connected,r=e.capacity,o=e.status,a=e.onClick,s=e.showID,l=e.isBlurred;return i.a.createElement("div",{ref:this.node,className:ug((e={},p()(e,(null==o?void 0:o.toLowerCase())||function(e,t){return 100===(t=Math.floor(e/t*100))?"green":70<=t?"yellow":1<=t?"red":"gray"}(n,r),!0),p()(e,"id",s),p()(e,"blur",l),e)),onMouseEnter:this._onNodeHover,onMouseLeave:this._onNodeLeave,onClick:function(){return a(t)}},s&&t)}}]),n}(i.a.Component)).defaultProps={onMouseEnter:function(){},onMouseLeave:function(){},onClick:function(){}};var hg=m;n(938);var dg=ie()("network");(G=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={howNodeSeeOtherNodesSortType:"",howOthersSeeNodeSortType:"",howNodeSeeOtherSearch:"",howOtherSeeNodeSearch:"",hoveredNode:void 0,clickedNode:void 0,highlightedNodes:[],showId:!1,showRacks:!1},e.onChange=function(t,n){e.setState(p()({},t,n))},e.handleSortChange=function(t){e.setState({sort:t})},e.handleNodeClickWrap=function(t){return function(){var n=e.state.clickedNode,r=t.NodeId;n&&r===n.nodeId?e.setState({clickedNode:void 0}):e.setState({clickedNode:t,rightNodes:e.groupNodesByField(t.Peers,"NodeType")})}},e.groupNodesByField=function(e,t){return w.a.reduce(e,(function(e,n){return e[n[t]]?e[n[t]].push(n):e[n[t]]=[n],e}),{})},e.getConnectedNodesCount=function(e){return null==e?void 0:e.reduce((function(e,t){return t.Connected?e+1:e}),0)},e.renderNodes=function(t,n){var r=(h=e.state).showId,o=h.showRacks,a=h.clickedNode,s=0,l=(h=e.props).showTooltip,c=h.hideTooltip,u=h.filter,h=Object.keys(t).map((function(h,d){var f=e.groupNodesByField(t[h],"Rack");return i.a.createElement("div",{key:d,className:dg("nodes-container",{right:n})},i.a.createElement("div",{className:dg("nodes-title")},h," nodes"),i.a.createElement("div",{className:dg("nodes")},o?Object.keys(f).map((function(t,o){return i.a.createElement("div",{key:o,className:dg("rack-column")},i.a.createElement("div",{className:dg("rack-index")},"undefined"===t?"?":t),f[t].map((function(t,o){var h,d;if(n||(h=Object.keys(null==t?void 0:t.Peers).length,d=e.getConnectedNodesCount(null==t?void 0:t.Peers)),u===A&&h!==d||u===D||n)return s++,i.a.createElement(hg,{key:o,nodeId:t.NodeId,showID:r,rack:t.Rack,status:t.ConnectStatus,capacity:h,connected:d,onMouseEnter:l,onMouseLeave:c,onClick:!n&&e.handleNodeClickWrap(t),isBlurred:!n&&a&&a.NodeId!==t.NodeId})})))})):t[h].map((function(t,o){var h,d;if(n||(h=null==t||null===(d=t.Peers)||void 0===d?void 0:d.length,d=e.getConnectedNodesCount(null==t?void 0:t.Peers)),u===A&&h!==d||u===D||n)return s++,i.a.createElement(hg,{key:o,nodeId:t.NodeId,showID:r,rack:t.Rack,status:t.ConnectStatus,capacity:(null==t?void 0:t.Peers)&&(null==t?void 0:t.Peers.length),connected:(null==t?void 0:t.Peers)&&e.getConnectedNodesCount(null==t?void 0:t.Peers),onMouseEnter:l,onMouseLeave:c,onClick:!n&&e.handleNodeClickWrap(t),isBlurred:!n&&a&&a.NodeId!==t.NodeId})}))))}));return u===A&&0===s?i.a.createElement("div",{className:"no-problem"}):h},e.renderContent=function(){var t=(l=e.props).netWorkInfo,n=l.filter,r=l.changeFilter,o=(c=e.state).showId,a=c.showRacks,s=c.rightNodes,l=e.state.clickedNode,c=t.Tenants&&t.Tenants[0].Nodes;t=e.groupNodesByField(c,"NodeType");return null!=c&&c.length?i.a.createElement("div",{className:dg()},i.a.createElement("div",{className:dg("inner")},i.a.createElement("div",{className:dg("nodes-row")},i.a.createElement("div",{className:dg("left")},i.a.createElement("div",{className:dg("controls-wrapper")},i.a.createElement("div",{className:dg("controls")},i.a.createElement(Zh,{value:n,onChange:r,className:dg("problem-filter")}),i.a.createElement("div",{className:dg("checkbox-wrapper")},i.a.createElement(Ef,{onUpdate:function(){return e.onChange("showId",!o)},checked:o},"ID")),i.a.createElement("div",{className:dg("checkbox-wrapper")},i.a.createElement(Ef,{onUpdate:function(){return e.onChange("showRacks",!a)},checked:a},"Racks")))),e.renderNodes(t)),i.a.createElement("div",{className:dg("right")},l?i.a.createElement("div",null,i.a.createElement("div",{className:dg("label")},"Connectivity of node"," ",i.a.createElement(Da,{className:dg("link"),to:va(ba,{id:l.NodeId,activeTab:"storage"})},l.NodeId)," ","to other nodes"),i.a.createElement("div",{className:dg("nodes-row")},e.renderNodes(s,!0))):i.a.createElement("div",{className:dg("placeholder")},i.a.createElement("div",{className:dg("placeholder-img")},i.a.createElement(Ch,{name:"network-placeholder",viewBox:"0 0 221 204",width:221,height:204})),i.a.createElement("div",{className:dg("placeholder-text")},"Select node to see its connectivity to other nodes")))))):i.a.createElement("div",{className:"error"},"no nodes data")},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this.props.path;this.props.getNetworkInfo(e)}},{key:"render",value:function(){var e=(r=this.props).loading,t=r.wasLoaded,r=r.error;return e&&!t?n.renderLoader():r?i.a.createElement("div",null,r.statusText):this.renderContent()}}],[{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}}]),n}(i.a.Component)).defaultProps={};y={getNetworkInfo:function(e){return Ue({request:Pt.getNetwork(e),actions:Ir})},hideTooltip:cr,showTooltip:ur,changeFilter:zt};var fg=Object(l.b)((function(e){var t=e.network,n=t.wasLoaded,r=t.loading;return{netWorkInfo:t.data,wasLoaded:n,loading:r,filter:e.settings.problemFilter}}),y)(G),pg=(n(939),ie()("empty-state"));function mg(e){var t=e.image,n=e.title,r=e.description,o=e.actions;e=e.size;return i.a.createElement("div",{className:pg({size:e})},i.a.createElement("div",{className:pg("wrapper",{size:e})},i.a.createElement("div",{className:pg("image")},t),i.a.createElement("div",{className:pg("title",{size:e})},n),i.a.createElement("div",{className:pg("description")},r),i.a.createElement("div",{className:pg("actions")},o)))}mg.defaultProps={size:"m"};Z=n(541);var vg=n.n(Z),gg=(m=n(542),n.n(m)),yg=(n(945),["id","status","message","type","level","consequences","reasonsItems"]);function bg(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Cg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bg(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wg(e){var t=e.data,n=e.treeLevel,o=e.active,a=e.setInfoForActive,s=e.onClick,l=t.id,c=t.status,u=t.message,h=(e=t.type,t.level,t.consequences,t.reasonsItems,v()(t,yg));return Object(r.useEffect)((function(){o&&a(h)}),[o,a]),i.a.createElement("div",{className:Eg({active:o}),onClick:s},i.a.createElement("div",{className:Eg("field",{status:!0})},i.a.createElement(Eh,{status:c,name:l})),i.a.createElement("div",{className:Eg("field",{message:!0}),style:{marginLeft:25*-n+"px"}},u),i.a.createElement("div",{className:Eg("field",{type:!0})},e))}var Eg=ie()("issue"),Sg=ie()("issue-viewer");function Og(e){var t=e.issue;e=e.data;return w.a.filter(e,(function(e){return t.reason&&-1!==t.reason.indexOf(e.id)}))}var xg={RED:0,ORANGE:1,YELLOW:2,BLUE:3,GREEN:4};function _g(e){var t=e.issues,n=(e=Object(r.useState)([]),(e=ae()(e,2))[0]),o=e[1],a=(e=Object(r.useState)({}),(e=ae()(e,2))[0]),s=e[1],l=(e=Object(r.useState)(),(e=ae()(e,2))[0]),c=e[1],u=(e=Object(r.useState)(),(e=ae()(e,2))[0]),h=e[1];Object(r.useEffect)((function(){var e;!l&&n.length&&(e=n[0].id,c(e))}),[n]),Object(r.useEffect)((function(){var e=function e(t){var n=t.data;return!(t=t.roots)&&n&&(t=ui()([hi()((function(e){return!w.a.find(n,(function(t){return t.reason&&-1!==t.reason.indexOf(e.id)}))})),gg()((function(e){return e.id})),vg()((function(e){return e=e.status,xg[e]}))])(n)),w.a.map(t,(function(t){var r=e({roots:Og({issue:t,data:n}),data:n});return Cg(Cg({},t),{},{reasonsItems:r})}))}({data:t});o(e)}),[t]);var d=Object(r.useCallback)((function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return w.a.map(e,(function(e){var r=e.id,o=l===e.id,u=e[t].length;return i.a.createElement(Cf,{key:r,nodeLabel:i.a.createElement(wg,{data:e,treeLevel:n,active:o,setInfoForActive:h,onClick:function(){return c(r)}}),className:Eg("wpapper",{active:o}),collapsed:void 0===a[r]||a[r],hasArrow:u,onClick:function(){var e=void 0!==a[r]&&!a[r];e=Cg(Cg({},a),{},p()({},r,e));s(e)}},d(e[t],t,n+1))}))}),[n,a,l]);e=Object(r.useCallback)((function(){return u?i.a.createElement("div",{className:Sg("info-panel")},i.a.createElement("h3",null,"Additional info for ",l),i.a.createElement($n.a,{data:u,search:!1,isExpanded:function(){return!0},className:Sg("inspector")})):null}),[n,u,l]);return i.a.createElement("div",{className:Sg()},i.a.createElement("div",{className:Sg("tree")},d(n,"reasonsItems")),e())}n(946);var kg=ie()("healthcheck");y=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).fetchHealthcheck=function(){var t=e.props.tenant;e.props.getHealthcheckInfo(t)},e.renderOverviewStatus=function(){var t=e.props.data.self_check_result,n=t.toLowerCase();return i.a.createElement("div",{className:kg("self-check-status")},i.a.createElement("h3",{className:kg("self-check-status-label")},"Self check status"),i.a.createElement("div",{className:kg("self-check-status-indicator",p()({},n,!0))}),t,i.a.createElement("div",{className:kg("self-check-update")},i.a.createElement(ge,{size:"s",onClick:e.fetchHealthcheck},"Update")))},e}return q()(n,[{key:"componentDidMount",value:function(){this.fetchHealthcheck()}},{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}},{key:"renderHealthcheckIssues",value:function(){var e=(n=this.props).data,t=n.showTooltip,n=n.hideTooltip;return(e=e.issue_log)?i.a.createElement("div",{className:kg("issues")},i.a.createElement("h3",null,"Issues"),i.a.createElement(_g,{issues:e,showTooltip:t,hideTooltip:n})):null}},{key:"render",value:function(){var e=(n=this.props).loading,t=n.error,n=n.data;return e?this.renderLoader():t?i.a.createElement("div",null,t.statusText):n&&n.self_check_result?i.a.createElement("div",{className:kg()},this.renderOverviewStatus(),this.renderHealthcheckIssues()):i.a.createElement("div",{className:"error"},"no healthcheck data")}}]),n}(i.a.Component);function Tg(){return i.a.createElement("svg",{width:"240",height:"240",viewBox:"0 0 240 240",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M8.09538 76.0473H58.6587C61.5462 76.0473 64.2412 77.6463 65.7171 80.2046L102.228 145.123C105.436 150.815 113.521 150.624 116.473 144.803L177.495 25.1359C178.907 22.3856 181.666 20.6588 184.682 20.6588H231.909C238.005 20.6588 241.919 27.3105 239.031 32.811L139.188 224.049C128.215 244.515 99.7896 245.475 87.4696 225.839L1.29371 88.7751C-2.17129 83.2747 1.74288 76.0473 8.09538 76.0473Z",fill:"currentColor"}),i.a.createElement("path",{d:"M38.51 148.083C39.6146 148.083 40.51 147.187 40.51 146.083C40.51 144.978 39.6146 144.083 38.51 144.083V148.083ZM25.5483 144.083C24.4438 144.083 23.5483 144.978 23.5483 146.083C23.5483 147.187 24.4438 148.083 25.5483 148.083V144.083ZM33.5708 152.649C34.1243 153.605 35.3479 153.931 36.3038 153.378C37.2597 152.824 37.5859 151.601 37.0324 150.645L33.5708 152.649ZM30.5516 139.452C29.9981 138.496 28.7745 138.17 27.8186 138.723C26.8627 139.277 26.5365 140.5 27.09 141.456L30.5516 139.452ZM27.09 150.645C26.5365 151.601 26.8627 152.824 27.8186 153.378C28.7745 153.931 29.9981 153.605 30.5516 152.649L27.09 150.645ZM37.0324 141.456C37.5859 140.5 37.2597 139.277 36.3038 138.723C35.3479 138.17 34.1243 138.496 33.5708 139.452L37.0324 141.456ZM59.2359 148.083C60.3405 148.083 61.2359 147.187 61.2359 146.083C61.2359 144.978 60.3405 144.083 59.2359 144.083V148.083ZM46.3384 144.083C45.2338 144.083 44.3384 144.978 44.3384 146.083C44.3384 147.187 45.2338 148.083 46.3384 148.083V144.083ZM54.2964 152.649C54.8499 153.605 56.0735 153.931 57.0294 153.378C57.9853 152.824 58.3115 151.601 57.758 150.645L54.2964 152.649ZM51.2772 139.452C50.7237 138.496 49.5001 138.17 48.5442 138.723C47.5883 139.277 47.2621 140.5 47.8156 141.456L51.2772 139.452ZM47.8156 150.645C47.2621 151.601 47.5883 152.824 48.5442 153.378C49.5001 153.931 50.7237 153.605 51.2772 152.649L47.8156 150.645ZM57.758 141.456C58.3115 140.5 57.9853 139.277 57.0294 138.723C56.0735 138.17 54.8499 138.496 54.2964 139.452L57.758 141.456ZM124.878 158.729H26.0616V162.729H124.878V158.729ZM26.0616 158.729C21.3209 158.729 17.4741 154.886 17.4741 150.176H13.4741C13.4741 157.107 19.124 162.729 26.0616 162.729V158.729ZM17.4741 150.176V141.925H13.4741V150.176H17.4741ZM17.4741 141.925C17.4741 137.216 21.3209 133.372 26.0616 133.372V129.372C19.124 129.372 13.4741 134.994 13.4741 141.925H17.4741ZM26.0616 133.372H124.878V129.372H26.0616V133.372ZM124.878 133.372C129.619 133.372 133.466 137.216 133.466 141.925H137.466C137.466 134.994 131.816 129.372 124.878 129.372V133.372ZM133.466 141.925V150.176H137.466V141.925H133.466ZM133.466 150.176C133.466 154.886 129.619 158.729 124.878 158.729V162.729C131.816 162.729 137.466 157.107 137.466 150.176H133.466ZM38.51 144.083H25.5483V148.083H38.51V144.083ZM25.5483 148.083H38.51V144.083H25.5483V148.083ZM37.0324 150.645L30.5516 139.452L27.09 141.456L33.5708 152.649L37.0324 150.645ZM27.09 141.456L33.5708 152.649L37.0324 150.645L30.5516 139.452L27.09 141.456ZM30.5516 152.649L37.0324 141.456L33.5708 139.452L27.09 150.645L30.5516 152.649ZM33.5708 139.452L27.09 150.645L30.5516 152.649L37.0324 141.456L33.5708 139.452ZM59.2359 144.083H46.3384V148.083H59.2359V144.083ZM46.3384 148.083H59.2359V144.083H46.3384V148.083ZM57.758 150.645L51.2772 139.452L47.8156 141.456L54.2964 152.649L57.758 150.645ZM47.8156 141.456L54.2964 152.649L57.758 150.645L51.2772 139.452L47.8156 141.456ZM51.2772 152.649L57.758 141.456L54.2964 139.452L47.8156 150.645L51.2772 152.649ZM54.2964 139.452L47.8156 150.645L51.2772 152.649L57.758 141.456L54.2964 139.452Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M80.0266 148.083C81.1312 148.083 82.0266 147.187 82.0266 146.083C82.0266 144.978 81.1312 144.083 80.0266 144.083V148.083ZM67.0649 144.083C65.9604 144.083 65.0649 144.978 65.0649 146.083C65.0649 147.187 65.9604 148.083 67.0649 148.083V144.083ZM75.0233 152.649C75.5768 153.605 76.8004 153.931 77.7563 153.378C78.7122 152.824 79.0384 151.601 78.4849 150.645L75.0233 152.649ZM72.0041 139.452C71.4506 138.496 70.227 138.17 69.2711 138.723C68.3152 139.277 67.989 140.5 68.5425 141.456L72.0041 139.452ZM68.5425 150.645C67.989 151.601 68.3152 152.824 69.2711 153.378C70.227 153.931 71.4506 153.605 72.0041 152.649L68.5425 150.645ZM78.4849 141.456C79.0384 140.5 78.7122 139.277 77.7563 138.723C76.8004 138.17 75.5768 138.496 75.0233 139.452L78.4849 141.456ZM80.0266 144.083H67.0649V148.083H80.0266V144.083ZM78.4849 150.645L72.0041 139.452L68.5425 141.456L75.0233 152.649L78.4849 150.645ZM72.0041 152.649L78.4849 141.456L75.0233 139.452L68.5425 150.645L72.0041 152.649Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M100.752 148.083C101.857 148.083 102.752 147.187 102.752 146.083C102.752 144.978 101.857 144.083 100.752 144.083V148.083ZM87.7905 144.083C86.686 144.083 85.7905 144.978 85.7905 146.083C85.7905 147.187 86.686 148.083 87.7905 148.083V144.083ZM95.8127 152.649C96.3662 153.605 97.5898 153.931 98.5457 153.378C99.5016 152.824 99.8278 151.601 99.2743 150.645L95.8127 152.649ZM92.7935 139.452C92.24 138.496 91.0164 138.17 90.0605 138.723C89.1046 139.277 88.7784 140.5 89.3319 141.456L92.7935 139.452ZM89.3319 150.645C88.7784 151.601 89.1046 152.824 90.0605 153.378C91.0164 153.931 92.24 153.605 92.7935 152.649L89.3319 150.645ZM99.2743 141.456C99.8278 140.5 99.5016 139.277 98.5457 138.723C97.5898 138.17 96.3662 138.496 95.8127 139.452L99.2743 141.456ZM100.752 144.083H87.7905V148.083H100.752V144.083ZM99.2743 150.645L92.7935 139.452L89.3319 141.456L95.8127 152.649L99.2743 150.645ZM92.7935 152.649L99.2743 141.456L95.8127 139.452L89.3319 150.645L92.7935 152.649Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M122.376 148.083C123.481 148.083 124.376 147.187 124.376 146.083C124.376 144.978 123.481 144.083 122.376 144.083V148.083ZM109.415 144.083C108.31 144.083 107.415 144.978 107.415 146.083C107.415 147.187 108.31 148.083 109.415 148.083V144.083ZM117.373 152.649C117.926 153.605 119.15 153.931 120.106 153.378C121.062 152.824 121.388 151.601 120.835 150.645L117.373 152.649ZM114.354 139.452C113.8 138.496 112.577 138.17 111.621 138.723C110.665 139.277 110.339 140.5 110.892 141.456L114.354 139.452ZM110.892 150.645C110.339 151.601 110.665 152.824 111.621 153.378C112.577 153.931 113.8 153.605 114.354 152.649L110.892 150.645ZM120.835 141.456C121.388 140.5 121.062 139.277 120.106 138.723C119.15 138.17 117.926 138.496 117.373 139.452L120.835 141.456ZM122.376 144.083H109.415V148.083H122.376V144.083ZM120.835 150.645L114.354 139.452L110.892 141.456L117.373 152.649L120.835 150.645ZM114.354 152.649L120.835 141.456L117.373 139.452L110.892 150.645L114.354 152.649Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M85.6732 44.3876H126.291C131.36 44.3876 135.467 48.481 135.467 53.5338V112.632C135.467 117.685 131.36 121.778 126.291 121.778H24.5865C19.5173 121.778 15.4106 117.685 15.4106 112.632V53.5338C15.4106 48.481 19.5173 44.3876 24.5865 44.3876H65.1398",stroke:"#2EE5C0",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M85.6729 52.9581H65.2037V34.2181C65.2037 28.5897 69.7596 23.9846 75.4704 23.9846C81.1171 23.9846 85.7371 28.5257 85.7371 34.2181V52.9581H85.6729Z",stroke:"#2EE5C0",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M75.471 38.0556C77.6682 38.0556 79.4493 36.2802 79.4493 34.0902C79.4493 31.9001 77.6682 30.1247 75.471 30.1247C73.2738 30.1247 71.4927 31.9001 71.4927 34.0902C71.4927 36.2802 73.2738 38.0556 75.471 38.0556Z",stroke:"#2EE5C0",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M51.2157 109.114C64.576 109.114 75.4066 98.3185 75.4066 85.0015C75.4066 71.6845 64.576 60.889 51.2157 60.889C37.8555 60.889 27.0249 71.6845 27.0249 85.0015C27.0249 98.3185 37.8555 109.114 51.2157 109.114Z",stroke:"#2EE5C0",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M51.2158 89.6066C56.1063 89.6066 60.0708 85.6549 60.0708 80.7802C60.0708 75.9056 56.1063 71.9539 51.2158 71.9539C46.3254 71.9539 42.3608 75.9056 42.3608 80.7802C42.3608 85.6549 46.3254 89.6066 51.2158 89.6066Z",stroke:"#2EE5C0",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"M67.578 102.782L68.9221 104.263C69.6769 103.578 69.7958 102.435 69.1981 101.61L67.578 102.782ZM34.853 102.782L33.2329 101.61C32.6352 102.435 32.7541 103.578 33.509 104.263L34.853 102.782ZM85.6733 71.1053C84.5688 71.1053 83.6733 72.0007 83.6733 73.1053C83.6733 74.2099 84.5688 75.1053 85.6733 75.1053V71.1053ZM120.773 75.1053C121.877 75.1053 122.773 74.2099 122.773 73.1053C122.773 72.0007 121.877 71.1053 120.773 71.1053V75.1053ZM85.6733 81.8505C84.5688 81.8505 83.6733 82.7459 83.6733 83.8505C83.6733 84.955 84.5688 85.8505 85.6733 85.8505V81.8505ZM120.773 85.8505C121.877 85.8505 122.773 84.955 122.773 83.8505C122.773 82.7459 121.877 81.8505 120.773 81.8505V85.8505ZM85.6733 92.5955C84.5688 92.5955 83.6733 93.4909 83.6733 94.5955C83.6733 95.7001 84.5688 96.5955 85.6733 96.5955V92.5955ZM120.773 96.5955C121.877 96.5955 122.773 95.7001 122.773 94.5955C122.773 93.4909 121.877 92.5955 120.773 92.5955V96.5955ZM51.2155 111.114C58.0246 111.114 64.273 108.482 68.9221 104.263L66.234 101.301C62.2848 104.885 56.9831 107.114 51.2155 107.114V111.114ZM69.1981 101.61C65.1754 96.0522 58.6128 92.4676 51.2155 92.4676V96.4676C57.2932 96.4676 62.6657 99.4068 65.9579 103.955L69.1981 101.61ZM51.2155 92.4676C43.8182 92.4676 37.2557 96.0522 33.2329 101.61L36.4731 103.955C39.7654 99.4068 45.1378 96.4676 51.2155 96.4676V92.4676ZM33.509 104.263C38.1581 108.482 44.4065 111.114 51.2155 111.114V107.114C45.4479 107.114 40.1463 104.885 36.1971 101.301L33.509 104.263ZM85.6733 75.1053H120.773V71.1053H85.6733V75.1053ZM120.773 71.1053H85.6733V75.1053H120.773V71.1053ZM85.6733 85.8505H120.773V81.8505H85.6733V85.8505ZM120.773 81.8505H85.6733V85.8505H120.773V81.8505ZM85.6733 96.5955H120.773V92.5955H85.6733V96.5955ZM120.773 92.5955H85.6733V96.5955H120.773V92.5955Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M204.905 160.729C204.905 159.625 204.01 158.729 202.905 158.729C201.801 158.729 200.905 159.625 200.905 160.729H204.905ZM200.905 164.759C200.905 165.863 201.801 166.759 202.905 166.759C204.01 166.759 204.905 165.863 204.905 164.759H200.905ZM204.905 173.137C204.905 172.033 204.01 171.137 202.905 171.137C201.801 171.137 200.905 172.033 200.905 173.137H204.905ZM200.905 177.487C200.905 178.591 201.801 179.487 202.905 179.487C204.01 179.487 204.905 178.591 204.905 177.487H200.905ZM211.247 171.108C212.352 171.108 213.247 170.212 213.247 169.108C213.247 168.003 212.352 167.108 211.247 167.108V171.108ZM207.269 167.108C206.164 167.108 205.269 168.003 205.269 169.108C205.269 170.212 206.164 171.108 207.269 171.108V167.108ZM198.542 171.108C199.647 171.108 200.542 170.212 200.542 169.108C200.542 168.003 199.647 167.108 198.542 167.108V171.108ZM194.5 167.108C193.395 167.108 192.5 168.003 192.5 169.108C192.5 170.212 193.395 171.108 194.5 171.108V167.108ZM200.905 160.729V164.759H204.905V160.729H200.905ZM200.905 173.137V177.487H204.905V173.137H200.905ZM211.247 167.108H207.269V171.108H211.247V167.108ZM198.542 167.108H194.5V171.108H198.542V167.108Z",fill:"#2EE5C0"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M138.482 49.5682L185.965 76.8787C191.547 80.0767 193.472 87.1761 190.2 92.101L163.699 137.832C160.427 143.972 153.368 145.891 147.786 142.693L142.011 139.367L138.931 144.611C138.546 145.187 137.84 145.379 137.327 145.059L133.99 143.14L129.242 151.327C129.049 151.711 128.664 151.967 128.279 152.095L116.922 155.484C116.087 155.74 115.574 156.7 115.767 157.531L118.269 167.509C118.462 168.34 117.948 169.236 117.114 169.491L107.04 172.561C106.206 172.881 105.692 173.777 105.885 174.608L108.452 184.522C108.708 185.353 108.131 186.249 107.297 186.505L97.1582 189.639C96.3241 189.958 95.8107 190.854 96.0032 191.685L98.6982 201.983C98.9549 202.814 98.3774 203.71 97.5432 203.965C97.5432 203.965 90.2924 206.204 84.6457 208.059C78.999 209.914 76.1757 207.099 75.149 203.773C74.1224 200.384 71.2349 189.702 71.2349 189.702C71.1707 189.319 71.2349 188.871 71.4274 188.487L106.783 127.47L103.254 125.424C102.677 125.104 102.484 124.336 102.805 123.761L105.885 118.516L100.367 115.382C94.8482 112.12 92.9232 105.085 96.1316 99.5202L122.568 53.7895C125.841 48.289 132.899 46.3703 138.482 49.5682ZM144 76.2392C141.433 80.6523 142.973 86.2807 147.401 88.8391C151.828 91.3975 157.475 89.8624 160.042 85.4493C162.608 81.0361 161.068 75.4077 156.641 72.8493C152.213 70.291 146.567 71.826 144 76.2392Z",fill:"#00236B"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M129.755 57.3713L182.115 61.5286C187.954 61.8484 192.702 67.0291 192.638 73.2331V121.522C192.638 127.598 187.89 132.459 181.986 132.459H175.762V138.279C175.762 138.919 175.313 139.431 174.736 139.431H171.142V149.216C171.142 149.664 170.95 150.048 170.693 150.368L163.057 158.746C162.48 159.386 162.48 160.345 163.057 160.985L169.795 168.02C170.372 168.596 170.372 169.619 169.795 170.259L163.057 177.87C162.48 178.51 162.48 179.533 163.057 180.109L169.795 186.952C170.372 187.528 170.372 188.551 169.795 189.191L163.057 196.994C162.48 197.633 162.48 198.657 163.057 199.232L170.116 206.268C170.693 206.844 170.693 207.867 170.116 208.507C170.116 208.507 165.303 214.199 161.517 218.612C157.731 223.025 154.074 222.322 151.636 220.083C149.197 217.845 141.561 210.553 141.561 210.553C141.305 210.233 141.112 209.85 141.112 209.402V140.006H137.134C136.492 140.006 135.979 139.431 135.979 138.791V132.779H129.755C123.338 132.779 118.141 127.534 118.141 121.138V68.3083C118.141 61.9124 123.402 56.9875 129.755 57.3713ZM147.465 78.2858C147.465 83.2746 151.507 87.432 156.384 87.6238C161.261 87.8157 165.175 83.9142 165.175 78.9894C165.175 74.0645 161.261 69.9072 156.384 69.6514C151.443 69.4595 147.465 73.297 147.465 78.2858Z",fill:"#007CE9"}),i.a.createElement("path",{d:"M149.839 0C126.995 0 108.451 18.4842 108.451 41.2536C108.451 50.5276 111.467 59.354 117.114 66.5174L119.873 61.8484C115.702 55.8362 113.456 48.7368 113.456 41.2536C113.456 21.2344 129.755 4.98881 149.839 4.98881C169.923 4.98881 186.221 21.2344 186.221 41.2536C186.221 61.2728 169.859 77.4544 149.839 77.4544C149.069 77.4544 148.17 77.3904 147.529 77.3904C147.465 77.9661 147.336 78.6696 147.465 80.0767C147.593 81.3559 148.042 82.3792 148.042 82.3792C148.94 82.4432 148.876 82.4432 149.775 82.4432C172.618 82.4432 191.162 63.959 191.162 41.1896C191.162 18.4202 172.618 0 149.839 0Z",fill:"#00236B"}),i.a.createElement("path",{opacity:"0.2",d:"M161.581 218.548C165.367 214.135 170.18 208.443 170.18 208.443C170.757 207.803 170.757 206.78 170.18 206.204L163.121 199.168C162.544 198.593 162.544 197.569 163.121 196.93L169.859 189.127C170.436 188.487 170.436 187.464 169.859 186.888L163.121 180.045C162.544 179.469 162.544 178.446 163.121 177.806L169.859 170.195C170.436 169.555 170.436 168.532 169.859 167.956L163.121 160.921C162.544 160.281 162.544 159.322 163.121 158.682L170.757 150.304C171.014 149.984 171.206 149.6 171.206 149.152V141.413C171.206 140.262 170.308 139.367 169.153 139.367L162.48 140.006C159.079 140.006 156.384 142.757 156.384 146.082V218.74C156.384 220.403 158.309 221.426 159.656 220.403C160.298 219.955 160.94 219.316 161.581 218.548Z",fill:"#00236B"}))}G={getHealthcheckInfo:function(e){return Ue({request:Pt.getHealthcheckInfo(e),actions:po})}};var Ng=Object(l.b)((function(e){return{data:(e=e.healthcheckInfo).data,loading:e.loading,wasLoaded:e.wasLoaded,error:e.error}}),G)(y);function Pg(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ig(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pg(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(947);var Rg=ie()("tenant-page"),jg=(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"componentDidMount",value:function(){var e=this.props.tenantName;e&&this.props.getTenantInfo({path:e})}},{key:"renderLoader",value:function(){return i.a.createElement("div",{className:Rg("loader")},i.a.createElement(Ql,{size:"l"}))}},{key:"renderTabs",value:function(){var e=(n=this.props).activeTab,t=n.tenantName,n=Jh.map((function(e){return Ig(Ig({},e),{},{path:va(ya,{page:e.id},{name:t}),title:i.a.createElement("div",{className:Rg("tab-label")},e.icon,e.name)})}));return i.a.createElement("div",{className:Rg("tabs")},i.a.createElement(ud,{items:n,activeTab:e,wrapTo:function(e,t){var n=e.path;e=e.id;return i.a.createElement(Da,{to:n,key:e,className:Rg("tab")},t)},allowNotSelected:!0}))}},{key:"renderTabContent",value:function(){var e=this.props,t=e.activeTab,n=e.tenantName,r=e.schemaTab,o=e.queryParams;switch(t){case $h:return i.a.createElement(Ng,{tenant:n,hideTooltip:this.props.hideTooltip,showTooltip:this.props.showTooltip});case"storage":return i.a.createElement("div",{className:Rg("storage")},i.a.createElement(Yd,{tenant:n}));case"compute":return i.a.createElement(Zf,null);case"schema":return i.a.createElement(cg,{activeTab:r,tenantName:n,tenantActiveTab:t,queryParams:o});case"network":return i.a.createElement(fg,{path:n});default:return!1}}},{key:"render",value:function(){var e=(r=this.props).tenant,t=r.loading,n=r.status,r=e.SystemTablets;return 403===n?i.a.createElement(mg,{title:"403 Access denied",image:i.a.createElement(Tg,null)}):t?this.renderLoader():i.a.createElement("div",{className:Rg()},i.a.createElement("div",{className:Rg("info")},i.a.createElement(Wf,{systemTablets:r,tenant:e,hideTooltip:this.props.hideTooltip,showTooltip:this.props.showTooltip,solomon:this.props.solomon}),this.renderTabs()),i.a.createElement("div",{className:Rg("content")},this.renderTabContent()))}}]),n}(i.a.Component),m={getTenantInfo:function(e){return e=e.path,Ue({request:Promise.all([Pt.getTenantInfo({path:e}),Pt.getNodes(e)]),actions:_n,dataHandler:function(e){e=(n=ae()(e,2))[0];var t,n=n[1];return{tenant:e.TenantInfo[0],tenantNodes:w.a.map(null==n||null===(t=n.Tenants[0])||void 0===t?void 0:t.Nodes,(function(e){if(e.Host&&e.Endpoints){var t=null===(t=w.a.find(e.Endpoints,{Name:"http-mon"}))||void 0===t?void 0:t.Address;return{id:e.NodeId,backend:"".concat(e.Host).concat(t||"")}}})).filter(Boolean)}}})},clearTenant:function(){return{type:"CLEAR_TENANT"}},hideTooltip:cr,showTooltip:ur},Object(l.b)((function(e,t){var n,r=b.a.parse(t.location.search,{ignoreQueryPrefix:!0}),i=r.name,o=r.schemaTab,a=(c=e.tenant).tenant,s=c.systemTablets,l=c.loading,c=(c=void 0===(c=c.data)?{}:c).status;return{activeTab:t.match.params.page,tenant:void 0===a?{}:a,systemTablets:void 0===s?[]:s,tenantName:i,loading:l,schemaTab:void 0===o?yp:o,currentBackendId:e.host.data.NodeId,status:c,queryParams:r,solomon:null===(e=e.cluster)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.solomon}}),m)(Z));n(948);var Dg=ie()("pdisk");(G=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).renderContent=function(){var t=(h=e.props.pdisk).TotalSize,n=h.AvailableSize,r=h.ChangeTime,o=h.Device,a=h.Guid,s=h.NodeId,l=h.PDiskId,c=h.Path,u=h.Realtime,h=h.State;s=[{label:"Device",value:i.a.createElement(Eh,{status:o})},{label:"Realtime",value:i.a.createElement(Eh,{status:u})},{label:"State",value:h},{label:"Size",value:i.a.createElement(mh,{value:t-n||0,capacity:t||0,formatValues:Xe,colorizeProgress:!0,className:Dg("size")})},{label:"ChangeTime",value:$e(r)},{label:"Path",value:c},{label:"Guid",value:a},{label:"NodeId",value:i.a.createElement(Da,{className:Dg("link"),to:va(ba,{id:s,activeTab:"storage"})},s)}];return i.a.createElement("div",{className:Dg()},i.a.createElement("div",{className:Dg("row")},i.a.createElement("span",{className:Dg("title")},"PDisk "),i.a.createElement(Eh,{status:o,name:l})),i.a.createElement("div",{className:Dg("column")},i.a.createElement(xh,{className:Dg("section"),info:s})))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this,t=b.a.parse(this.props.location.search,{ignoreQueryPrefix:!0}).node_id;this.props.getPdiskInfo(t),this.reloadDescriptor=setInterval((function(){return e.props.getPdiskInfo(t)}),1e4)}},{key:"componentWillUnmount",value:function(){this.props.clearStore(),clearInterval(this.reloadDescriptor)}},{key:"render",value:function(){var e=(r=this.props).loading,t=r.wasLoaded,r=r.error;return e&&!t?n.renderLoader():r?i.a.createElement("div",null,r.statusText):this.renderContent()}}],[{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}}]),n}(i.a.Component)).defaultProps={className:""};y={getPdiskInfo:Dn,clearStore:jn};var Ag=Object(l.b)((function(e,t){var n,r=(o=e.pdisk).data,i=o.wasLoaded,o=(e=o.loading,o.error),a=t.match.params.id;return{pdisk:n=r?r.PDiskStateInfo.filter((function(e){return e.PDiskId===Number(a)}))[0]:n,wasLoaded:i,loading:e,error:o}}),y)(G),Lg=n(543);n(950);var Mg,Fg=oe("breadcrumbs");(m=Mg=Mg||{})[m.One=1]="One",m[m.Two=2]="Two";var Bg=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(e){var i;return W()(this,n),(i=t.call(this,e)).handleResize=function(){var e=n.prepareInitialState(i.props);i.setState(e,i.recalculate)},i.handleResize=cc()(i.handleResize,200),i.resizeObserver=new Lg.a(i.handleResize),i.container=r.createRef(),i.state=n.prepareInitialState(e),i}return q()(n,[{key:"componentDidMount",value:function(){this.recalculate(),this.resizeObserver.observe(this.container.current)}},{key:"componentDidUpdate",value:function(e){e.items!==this.state.allItems&&this.recalculate()}},{key:"componentWillUnmount",value:function(){this.resizeObserver.disconnect()}},{key:"render",value:function(){var e=this.props.className,t=this.state.calculated,n=this.renderRootItem();return r.createElement("div",{className:Fg({calculated:t?"yes":"no"},e)},r.createElement("div",{className:Fg("inner"),ref:this.container},n,this.renderMoreButton(),this.renderVisibleItems()))}},{key:"renderItem",value:function(e,t,n){var i=this.props.renderItemContent;return n?r.createElement(we,{key:e.text,view:"secondary",href:e.href,title:e.text,onClick:e.action,className:Fg("item",{"prev-current":!0})},i?i(e,t,n):e.text):t?r.createElement("div",{title:e.text,className:Fg("item",{current:!0})},i?i(e,t,n):e.text):r.createElement(we,{key:e.text,view:"secondary",href:e.href,title:e.text,onClick:e.action,className:Fg("item")},i?i(e,t,n):e.text)}},{key:"renderItemDivider",value:function(){var e;return(e=this.props.renderItemDivider)?r.createElement("div",{className:Fg("divider")},e()):r.createElement("span",{className:Fg("divider")},"/")}},{key:"renderRootItem",value:function(){var e=this.props.renderRootContent,t=(n=this.state).rootItem,n=0===n.visibleItems.length;return t?e?n?r.createElement("div",{title:t.text,className:Fg("item",{current:!0})},e(t,n)):r.createElement(we,{key:t.text,view:"secondary",href:t.href,title:t.text,onClick:t.action,className:Fg("item")},e(t,n)):this.renderItem(t,n,!1):null}},{key:"renderVisibleItems",value:function(){var e=this;return this.state.visibleItems.map((function(t,n,i){var o=n===i.length-1;i=n===i.length-2;return r.createElement(r.Fragment,{key:n},e.renderItemDivider(),e.renderItem(t,o,i))}))}},{key:"renderMoreButton",value:function(){var e,t=(e=this.props).popupStyle,n=e.popupPlacement;return 0<(e=this.state.hiddenItems).length?r.createElement(r.Fragment,null,this.renderItemDivider(),r.createElement(Pm,{items:e,popupClassName:Fg("popup",{staircase:"staircase"===t}),popupPlacement:n,switcher:r.createElement(ge,{key:"more",view:"clear",size:"s",title:"Show more",className:Fg("more-button")},r.createElement("span",null,"..."))})):null}},{key:"recalculate",value:function(){var e=(r=this.props).items,t=r.lastDisplayedItemsCount,n=r.firstDisplayedItemsCount;if(this.container.current){for(var r=Array.from(this.container.current.querySelectorAll(".".concat(Fg("divider")))),i=Array.from(this.container.current.querySelectorAll(".".concat(Fg("item")))),o=this.container.current.offsetWidth,a=i.map((function(e){return e.scrollWidth})),s=r.map((function(e){return e.offsetWidth})),l=a.reduce((function(e,n,r,i){var o=i.length-1===r;r=t===Mg.Two&&i.length-2===r;return o||r?e+Math.min(n,200):e+n}),0)+s.reduce((function(e,t){return e+t}),0),c=1;o<l&&c<i.length-t;)1===c&&(l+=34+s[c]),l-=a[c]+s[c],c++;this.setState({calculated:!0,visibleItems:e.slice(c-(1-n)),hiddenItems:e.slice(n,c-(1-n))})}}}],[{key:"prepareInitialState",value:function(e){var t=e.firstDisplayedItemsCount;return{calculated:!1,rootItem:t?e.items[0]:void 0,visibleItems:e.items.slice(t),hiddenItems:[],allItems:e.items}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.allItems!==e.items?n.prepareInitialState(e):null}}]),n}(r.Component);Bg.defaultProps={popupPlacement:["bottom","top"]},n(949);var Hg=ie()("kv-breadcrumbs");(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=this.props.items;return i.a.createElement(Bg,{items:e,firstDisplayedItemsCount:1,className:Hg()})}}]),n}(i.a.Component)).defaultProps={items:[]};var zg=Z;n(951);var Ug=ie()("full-group-viewer"),Vg={displayIndices:!1,stickyHead:as.FIXED,syncHeadOnResize:!0,dynamicRender:!0};(y=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).renderContent=function(){var t=(r=e.props.group).VDisks,n=[{name:"VDiskId",header:"VDisk",render:function(e){var t=e.value;e=e.row;return i.a.createElement(Eh,{status:e.Overall,name:rt(t),path:va(Ea,null,{vdiskId:rt(t)})})}},{name:"pdisk",header:"PDisk",render:function(e){return(e=e.row).PDisk?i.a.createElement(Eh,{path:va(Ca,{id:e.PDisk.PDiskId},{node_id:e.PDisk.NodeId}),status:e.PDisk.Overall,name:"".concat(e.NodeId,"-").concat(e.PDisk.PDiskId)}):i.a.createElement("div",{className:"error"},"—")}},{name:"space",header:"Space",width:"150px",render:function(e){return(e=e.row).PDisk?i.a.createElement(mh,{capacity:e.PDisk.TotalSize,value:e.PDisk.TotalSize-e.PDisk.AvailableSize,formatValues:Xe}):i.a.createElement("div",{className:"error"},"—")}},{name:"category",header:"Category",render:function(e){return(e=e.row).PDisk?R[e.PDisk.Category]:i.a.createElement("div",{className:"error"},"—")},align:as.RIGHT},{name:"path",header:"Path",render:function(e){return(e=e.row).PDisk?e.PDisk.Path:i.a.createElement("div",{className:"error"},"—")}},{name:"guid",header:"Guid",render:function(e){return(e=e.row).PDisk?e.PDisk.Guid:i.a.createElement("div",{className:"error"},"—")},align:as.RIGHT}],r=[{label:"Generation",value:r.GroupGeneration},{label:"Latency",value:i.a.createElement(Eh,{status:r.Latency})},{label:"Erasure",value:r.ErasureSpecies}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(zg,{items:[{text:"Database"},{text:"Storage Pool"},{text:"BS Group"}]}),i.a.createElement(xh,{className:Ug("section"),info:r,title:"Info"}),i.a.createElement(as,{cls:Ug("disks"),columns:n,data:t,settings:Vg}))},e}return q()(n,[{key:"render",value:function(){var e=(t=this.props).className,t=t.group;return i.a.createElement("div",{className:"".concat(Ug()," ").concat(e)},t?this.renderContent():i.a.createElement("div",{className:"error"},"no group data"))}}]),n}(i.a.Component)).defaultProps={className:""};var Wg=y;n(952);var Gg=ie()("group");(G=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).renderContent=function(){var t=(n=e.props).className,n=n.group;return i.a.createElement("div",{className:"".concat(Gg()," ").concat(t)},i.a.createElement(Wg,{group:n}))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.props.getGroupInfo(t),this.reloadDescriptor=setInterval((function(){return e.props.getGroupInfo(t)}),1e4)}},{key:"componentWillUnmount",value:function(){this.props.clearStore(),clearInterval(this.reloadDescriptor)}},{key:"render",value:function(){var e=(o=this.props).loading,t=o.wasLoaded,r=o.error,o=o.group;return e&&!t?n.renderLoader():r?i.a.createElement("div",null,r.statusText):o?this.renderContent():i.a.createElement("div",{className:"error"},"no data")}}],[{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}}]),n}(i.a.Component)).defaultProps={className:""};m={getGroupInfo:function(e){return Ue({request:Pt.getGroupInfo(e),actions:Xn})},clearStore:function(){return{type:"CLEAR_STORE"}}};var qg=Object(l.b)((function(e){var t,n=(i=e.group).data,r=i.wasLoaded,i=(e=i.loading,i.error);return{group:t=n?n.StoragePools[0].Groups[0]:t,wasLoaded:r,loading:e,error:i}}),m)(G);n(953);var Yg=ie()("vdisk-pdisk-node");function Xg(e){return null!=e}function Kg(e){var t=e.AllocatedSize,n=e.DiskSpace,r=e.FrontQueues,o=e.Guid,a=e.Replicated,s=e.VDiskState,l=e.VDiskId,c=e.VDiskSlotId,u=e.Kind,h=e.SatisfactionRank,d=e.AvailableSize,f=e.HasUnreadableBlobs,p=e.IncarnationGuid,m=e.InstanceGuid,v=e.StoragePoolName,g=e.ReadThroughput,y=e.WriteThroughput;e=[];return Xg(c)&&e.push({label:"VDisk Slot Id",value:c}),Xg(o)&&e.push({label:"GUID",value:o}),Xg(u)&&e.push({label:"Kind",value:u}),Xg(s)&&e.push({label:"VDisk State",value:s}),Xg(n)&&e.push({label:"Disk Space",value:i.a.createElement(Eh,{status:n})}),Xg(null==h?void 0:h.FreshRank.Flag)&&e.push({label:"Fresh Rank Satisfaction",value:i.a.createElement(Eh,{status:h.FreshRank.Flag})}),Xg(null==h?void 0:h.LevelRank.Flag)&&e.push({label:"Level Rank Satisfaction",value:i.a.createElement(Eh,{status:h.LevelRank.Flag})}),e.push({label:"Replicated",value:a?"✓":"☓"}),e.push({label:"Allocated Size",value:At(t)}),e.push({label:"Available Size",value:At(d)}),0<=Number(t)&&0<=Number(d)&&e.push({label:"Size",value:i.a.createElement(mh,{value:t,capacity:Number(t)+Number(d),formatValues:it,colorizeProgress:!0,className:Yg("size")})}),e.push({label:"Has Unreadable Blobs",value:f?"Yes":"No"}),Xg(p)&&e.push({label:"Incarnation GUID",value:p}),Xg(m)&&e.push({label:"Instance GUID",value:m}),Xg(r)&&e.push({label:"Front Queues",value:i.a.createElement(Eh,{status:r})}),Xg(v)&&e.push({label:"Storage Pool Name",value:v}),e.push({label:"Read Throughput",value:Dt(g)}),e.push({label:"Write Throughput",value:Dt(y)}),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Yg("row")},i.a.createElement("span",{className:Yg("title")},"VDisk "),i.a.createElement(Eh,{status:"OK"===s?"green":"red",name:rt(l)})),i.a.createElement("div",{className:Yg("column")},i.a.createElement(xh,{className:Yg("section"),info:e})))}(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).renderLoader=function(){return i.a.createElement("div",{className:Yg("loader")},i.a.createElement(Ql,{size:"l"}))},e.renderVdisks=function(){return w.a.map(e.props.vdisks,(function(e){return w.a.isEmpty(e)?i.a.createElement("div",null,"No information about VDisk"):i.a.createElement(Kg,e)}))},e.renderPDisk=function(){if(w.a.isEmpty(e.props.pdisk))return i.a.createElement("div",null,"No information about PDisk");var t=(f=e.props.pdisk).TotalSize,n=f.AvailableSize,r=f.Device,o=f.Guid,a=f.NodeId,s=f.PDiskId,l=f.Path,c=f.Realtime,u=f.State,h=f.Category,d=f.SerialNumber,f=[{label:"PDisk Id",value:i.a.createElement(Da,{className:Yg("link"),to:va(Ca,{id:s},{node_id:a})},s)}];return Xg(l)&&f.push({label:"Path",value:l}),Xg(o)&&f.push({label:"GUID",value:o}),Xg(h)&&f.push({label:"Category",value:h}),f.push({label:"Allocated Size",value:At(t-n)}),f.push({label:"Available Size",value:At(n)}),0<=Number(t)&&0<=Number(n)&&f.push({label:"Size",value:i.a.createElement(mh,{value:t-n,capacity:t,formatValues:it,colorizeProgress:!0,className:Yg("size")})}),Xg(u)&&f.push({label:"State",value:u}),Xg(r)&&f.push({label:"Device",value:i.a.createElement(Eh,{status:r})}),Xg(c)&&f.push({label:"Realtime",value:i.a.createElement(Eh,{status:c})}),Xg(d)&&f.push({label:"SerialNumber",value:d}),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Yg("row")},i.a.createElement("span",{className:Yg("title")},"PDisk "),i.a.createElement(Eh,{status:r,name:"".concat(a,"-").concat(s)})),i.a.createElement("div",{className:Yg("column")},i.a.createElement(xh,{className:Yg("section"),info:f})))},e.renderNode=function(){if(w.a.isEmpty(e.props.node))return i.a.createElement("div",null,"No information about Node");var t=(m=e.props.node).NodeId,n=m.SystemState,r=m.StartTime,o=m.Host,a=m.DataCenterDescription,s=m.DataCenter,l=m.Rack,c=m.Version,u=m.LoadAverage,h=m.NumberOfCpus,d=m.MemoryUsed,f=m.MemoryLimit,p=m.PoolStats,m=[{label:"Node Id",value:i.a.createElement(Da,{className:Yg("link"),to:va(ba,{id:t,activeTab:"storage"})},t)}];return Xg(o)&&m.push({label:"Host",value:o}),Xg(p)&&m.push({label:"Pool stats",value:i.a.createElement(zh,{onMouseEnter:e.props.showTooltip,onMouseLeave:e.props.hideTooltip,pools:p})}),!w.a.isEmpty(u)&&Xg(h)&&(m.push({label:"Load Average",value:i.a.createElement(mh,{value:100*u[0]/h<100?100*u[0]/h:100,capacity:100,percents:!0,colorizeProgress:!0,className:Yg("size")})}),m.push({label:"Load Average",value:"".concat(u[0]," / ").concat(h," Cpus")})),Xg(r)&&m.push({label:"Uptime",value:$e(r)}),Xg(n)&&m.push({label:"System State",value:i.a.createElement(Eh,{status:n})}),Xg(s)&&m.push({label:"DataCenter",value:s.toUpperCase()}),Xg(a)&&m.push({label:"DataCenter Description",value:a}),Xg(l)&&m.push({label:"Rack",value:l}),Xg(c)&&m.push({label:"Version",value:c}),Xg(d)&&m.push({label:"Memory used",value:At(d)}),Xg(f)&&m.push({label:"Memory limit",value:At(f)}),Xg(f)&&Xg(d)&&m.push({label:"Memory used",value:i.a.createElement(mh,{value:d||0,capacity:f||0,formatValues:it,colorizeProgress:!0,className:Yg("size")})}),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Yg("row")},i.a.createElement("span",{className:Yg("title")},"Node "),i.a.createElement(Eh,{status:n,name:"".concat(t,"-").concat(o)})),i.a.createElement("div",{className:Yg("column")},i.a.createElement(xh,{className:Yg("section"),info:m})))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(this.props.location.search),n=t.get("nodeId"),r=t.get("pdiskId"),i=t.get("vdiskId");this.props.getVdiskInfo({vdiskId:i,pdiskId:r,nodeId:n}),this.vDiskAutofetcher=new uf,this.vDiskAutofetcher.fetch((function(){return e.props.getVdiskInfo({vdiskId:i,pdiskId:r,nodeId:n})})),n&&r&&(this.props.getPdiskInfo(n,r),this.pDiskAutofetcher=new uf,this.pDiskAutofetcher.fetch((function(){return e.props.getPdiskInfo(n,r)}))),n&&(this.props.getNodeInfo(n),this.nodeAutofetcher=new uf,this.nodeAutofetcher.fetch((function(){return e.props.getNodeInfo(n)})))}},{key:"componentWillUnmount",value:function(){this.props.clearStoreVDisk(),this.props.clearStorePDisk(),this.vDiskAutofetcher.stop(),this.pDiskAutofetcher.stop(),this.nodeAutofetcher.stop()}},{key:"render",value:function(){var e=(c=this.props).loadingVDisk,t=c.wasLoadedVDisk,n=c.errorVDisk,r=c.loadingPDisk,o=c.wasLoadedPDisk,a=c.errorPDisk,s=c.loadingNode,l=c.wasLoadedNode,c=c.errorNode;return i.a.createElement("div",{className:Yg()},i.a.createElement("div",null,e&&!t&&this.renderLoader()||n&&n.statusText||this.renderVdisks()),i.a.createElement("div",null,r&&!o&&this.renderLoader()||a&&a.statusText||this.renderPDisk()),i.a.createElement("div",null,s&&!l&&this.renderLoader()||c&&c.statusText||this.renderNode()))}}]),n}(i.a.Component)).defaultProps={className:""};y={getVdiskInfo:function(e){var t=e.vdiskId,n=e.pdiskId;e=e.nodeId;return Ue({request:Pt.getVdiskInfo({vdiskId:t,pdiskId:n,nodeId:e}),actions:Bn})},getPdiskInfo:Dn,getNodeInfo:Nn,clearStoreVDisk:function(){return{type:"CLEAR_STORE"}},clearStorePDisk:jn,hideTooltip:cr,showTooltip:ur};var Zg=Object(l.b)((function(e){var t=(h=e.vdisk).data,n=h.wasLoaded,r=h.loading,i=h.error,o=(d=e.pdisk).data,a=d.wasLoaded,s=d.loading,l=d.error,c=(f=e.node).data,u=f.wasLoaded,h=f.loading,d=f.error,f=(e={},{});return o&&o.PDiskStateInfo&&(e=o.PDiskStateInfo[0]),c&&c.SystemStateInfo&&(f=c.SystemStateInfo[0]),{vdisks:null==t?void 0:t.VDiskStateInfo,wasLoadedVDisk:n,loadingVDisk:r,errorVDisk:i,pdisk:e,wasLoadedPDisk:a,loadingPDisk:s,errorPDisk:l,node:f,wasLoadedNode:u,loadingNode:h,errorNode:d}}),y)(Z);n(954);var Qg=ie()("group-viewer");(m=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=(u=this.props).group,t=u.className,n=void 0===(h=e.GroupID)?"no id":h,r=void 0===(d=e.Overall)?"gray":d,o=e.VDisks,a=e.ErasureSpecies,s=void 0===(f=e.Latency)?"gray":f,l=e.AcquiredIOPS,c=e.AcquiredSize,u=e.AcquiredThroughput,h=e.MaximumIOPS,d=e.MaximumSize,f=e.MaximumThroughput;return e&&Object.keys(e).length?i.a.createElement("div",{className:"".concat(Qg()," ").concat(t)},i.a.createElement("div",{className:Qg("group")},i.a.createElement(Eh,{name:n,status:r,path:va(wa,{id:n}),className:Qg("name")})),i.a.createElement("div",{className:Qg("latency")},i.a.createElement(Eh,{name:"Latency",status:s})),i.a.createElement("div",{className:Qg("label")},o&&o.length||0," Vdisks"),i.a.createElement("div",{className:Qg("label")},a||"no ErasureSpecies info"),i.a.createElement("div",{className:Qg("vdisks")},null==o?void 0:o.map((function(e){return i.a.createElement("div",{key:e.Guid,className:Qg("disk-overall")},i.a.createElement(Eh,{status:e.Overall}))}))),i.a.createElement("div",{className:Qg("progress")},i.a.createElement(mh,{value:c,capacity:d,colorizeProgress:!0,formatValues:Xe})),i.a.createElement("div",{className:Qg("progress")},i.a.createElement(mh,{value:l,capacity:h,colorizeProgress:!0,formatValues:Ye})),i.a.createElement("div",{className:Qg("progress")},i.a.createElement(mh,{value:u,capacity:f,colorizeProgress:!0,formatValues:Ke}))):i.a.createElement("div",{className:Qg()},"No data")}}]),n}(i.a.Component)).defaultProps={className:""};var $g=m;n(955);var Jg=ie()("pdisk-viewer");(G=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=(t=this.props).disk,t=t.className;return e?i.a.createElement("div",{className:"".concat(Jg()," ").concat(t)},e&&i.a.createElement("div",{className:Jg("item")},i.a.createElement(Eh,{status:e.Realtime,path:va(Ca,{id:e.PDiskId},{node_id:e.NodeId}),label:"PDiskID",name:e.PDiskId})),e&&i.a.createElement("div",{className:Jg("item")},i.a.createElement(Eh,{status:"green",label:"NodeID",path:va(ba,{id:e.NodeId,activeTab:"storage"}),name:e.NodeId})),e&&i.a.createElement(mh,{value:e.TotalSize-e.AvailableSize||0,capacity:e.TotalSize||0,formatValues:Xe,colorizeProgress:!0,className:Jg("size")}),i.a.createElement("div",{className:Jg("item")},e&&i.a.createElement("div",{className:Jg("label")},e.Path||"no path"))):i.a.createElement("div",{className:"error"},"no PDisk data")}}]),n}(i.a.Component)).defaultProps={className:""};var ey=G;n(956);var ty=ie()("group-tree-viewer"),ny=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"render",value:function(){var e=(r=this.props).group,t=r.collapsed,n=r.onClick,r=i.a.createElement("div",null,i.a.createElement($g,{key:e.GroupID,group:e}));return e&&Object.keys(e).length?i.a.createElement("div",{className:ty()},i.a.createElement(Cf,{key:e.GroupID,nodeLabel:r,collapsed:t,onClick:n},null===(e=e.VDisks)||void 0===e?void 0:e.map((function(e,t){return i.a.createElement("div",{key:t,className:ty("row")},i.a.createElement(Eh,{className:ty("disk"),status:e.Overall,name:rt(e.VDiskId),label:"VDiskID",path:va(Ea,null,{vdiskId:rt(e.VDiskId)})}),i.a.createElement(ey,{className:ty("disk"),disk:e.PDisk,key:e.Guid,backend:Do}))})))):i.a.createElement("div",{className:ty()},"No data")}}]),n}(i.a.Component);ny.ITEM_HEIGHT_COLLAPSED=38,ny.GROUP_ITEM_HEIGHT=34,ny.makeGetHeight=function(e,t){return function(n){var r=null==(o=e[n].VDisks)?void 0:o.length,i=ny.ITEM_HEIGHT_COLLAPSED,o=ny.GROUP_ITEM_HEIGHT;return t.has(n)?i+r*o:i}};var ry=ra(ny);n(957);var iy=ie()("pool");(y=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={extendedGroups:new Set},e.makeHandleGroupClick=function(t){return function(){var n=e.state.extendedGroups;(n=new Set(J()(n))).has(t)?n.delete(t):n.add(t),e.setState({extendedGroups:n})}},e.makeRenderGroups=function(t){return function(n,r){var o=t[n],a=e.state.extendedGroups;return i.a.createElement(ry,{key:r,group:o,collapsed:!a.has(n),onClick:e.makeHandleGroupClick(n)})}},e.renderContent=function(){var t=e.props,r=t.pool,o=t.filter,a=t.changeFilter,s=e.state.extendedGroups;if(r&&r.StoragePools)return t=r.StoragePools[0],r=n.filterGroups(t.Groups,o),i.a.createElement("div",{className:iy()},i.a.createElement(zg,{items:[{text:"Database"},{text:"Storage Pool"}]}),i.a.createElement("div",{className:iy("row")},i.a.createElement("span",{className:iy("title")},"Pool "),i.a.createElement(Eh,{status:t.Overall,name:t.Name})),i.a.createElement("div",{className:iy("controls")},i.a.createElement("div",{className:iy("title",{groups:!0})},"Groups"),i.a.createElement(Zh,{value:o,onChange:a})),0===r.length?i.a.createElement("div",{className:"no-problem"}):i.a.createElement(La.a,{itemRenderer:e.makeRenderGroups(r),length:r.length,itemSizeGetter:ry.makeGetHeight(r,s),type:"variable"}))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.poolName;this.props.getPoolInfo(decodeURIComponent(t)),this.reloadDescriptor=setInterval((function(){return e.props.getPoolInfo(decodeURIComponent(t))}),1e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.reloadDescriptor)}},{key:"render",value:function(){var e=(r=this.props).loading,t=r.wasLoaded,r=r.error;return e&&!t?n.renderLoader():r?i.a.createElement("div",null,r.statusText):this.renderContent()}}],[{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}},{key:"filterGroups",value:function(e,t){return w.a.filter(e,(function(e){return t===D||e.Overall&&"Green"!==e.Overall}))}}]),n}(i.a.Component)).defaultProps={pool:{}};Z={getPoolInfo:function(e){return Ue({request:Pt.getPoolInfo(e),actions:Dr})},changeFilter:zt};var oy=Object(l.b)((function(e){var t=e.pool;return{pool:t.data,wasLoaded:t.wasLoaded,loading:t.loading,error:t.error,filter:e.settings.problemFilter}}),Z)(y),ay=(m=n(544),n.n(m)),sy=/^\.\/(light|dark)\/(.+)\.(.+)$/;function ly(e){var t={};return e&&e.keys().forEach((function(n){var r=function(e){return(e=e.match(sy))?{theme:(e=ae()(e,4))[1],name:e[2],ext:e[3]}:null}(n);r&&(n=e(n),t[r.theme]=t[r.theme]||{},t[r.theme][r.name]=n.default||n)})),t}G=n(545);var cy=n.n(G);function uy(e){var t=e.src,n=v()(e,["src"]),r=i.a.useState("string"==typeof t?t:void 0),o=(r=(e=ae()(r,2))[0],e[1]);return i.a.useEffect((function(){"function"==typeof t?t().then((function(e){return e=e.default,o(e)})).catch((function(e){console.error(e),o("")})):o(t)}),[t]),cy()(r)?null:i.a.createElement("img",Object.assign({src:r},n))}var hy={light:{403:function(){return n.e(9).then(n.bind(null,1178))},404:function(){return n.e(10).then(n.bind(null,1179))},500:function(){return n.e(11).then(n.bind(null,1180))},support:function(){return n.e(12).then(n.bind(null,1181))}},dark:{403:function(){return n.e(5).then(n.bind(null,1182))},404:function(){return n.e(6).then(n.bind(null,1183))},500:function(){return n.e(7).then(n.bind(null,1184))},support:function(){return n.e(8).then(n.bind(null,1185))}}},dy=ie()("yc-illustration"),fy=function(e){e=(0<arguments.length&&void 0!==e?e:[]).map((function(e){return"function"==typeof(t=e)&&"function"==typeof t.keys&&"function"==typeof t.resolve?ly(e):e;var t}));var t=ay.a.apply(void 0,[{},hy].concat(J()(e)));return function(e){var n=e.name,r=e.className,o=v()(e,["name","className"]);e=i.a.useContext(ca).themeValue,e=t[e]&&t[e][n];return i.a.createElement(uy,Object.assign({alt:n,src:e,className:dy(null,r)},o))}}(),py=(n(958),ie()("km-critical-dialog"));function my(e){var t=e.visible,n=e.onClose,o=e.onConfirm,a=e.text,s=Object(r.useState)(!1),l=(s=(e=ae()(s,2))[0],e[1]);return i.a.createElement(wm,{open:t,hasCloseButton:!1,className:py(),size:"s",onClose:n},i.a.createElement("form",{onSubmit:function(e){return e.preventDefault(),l(!0),o().then((function(){l(!1),n()}))}},i.a.createElement(wm.Body,{className:py("body")},i.a.createElement("span",{className:py("warning-icon")},i.a.createElement(Ch,{name:"dialog-warning",width:"24",height:"22",viewBox:"0 0 24 22"})),a),i.a.createElement(wm.Footer,{progress:s,preset:"default",textButtonApply:"Confirm",textButtonCancel:"Cancel",propsButtonApply:{type:"submit"},onClickButtonCancel:n,onClickButtonApply:function(){}})))}n(959);var vy=ie()("tablet-page"),gy={displayIndices:!1},yy=[{name:"generation",header:"Generation",align:as.RIGHT},{name:"nodeId",header:"Node ID",align:as.RIGHT,sortable:!1},{name:"changeTime",header:"Change time",align:as.RIGHT,sortable:!1,render:function(e){return $e(e=e.value)}},{name:"state",header:"State",sortable:!1},{name:"slave_id",header:"Slave ID",sortable:!1,render:function(e){return(e=e.row).master?"master":e.slaveId}}],by=(Z=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={typeVisibleDialog:null,dialogVisible:!1,isFirstFetchData:!0,tenantPath:"-",disableTabletActions:!1},e.makeShowDialog=function(t){return function(){return e.setState({dialogVisible:!0,typeVisibleDialog:t})}},e.showKillDialog=e.makeShowDialog("kill"),e.showStopDialog=e.makeShowDialog("stop"),e.showResumeDialog=e.makeShowDialog("resume"),e.hideDialog=function(){return e.setState({dialogVisible:!1,typeVisibleDialog:null})},e.fetchTabletInfo=function(){var t=e.props,n=t.version,r=t.id,i=e.state.isFirstFetchData;n&&e.isValidVersion()&&(e.props.getTablet(r).then((function(t){t=t.tablet,i&&t.TenantId&&e.props.getTabletDescribe(t.TenantId),e.setState({isFirstFetchData:!1})})),e.fetcher&&(clearInterval(e.fetcher),e.fetcher=null),e.fetcher=setInterval((function(){e.props.getTablet(r).then((function(){e.setState({disableTabletActions:!1})}))}),1e4))},e.isValidVersion=function(){var t=e.props.version;return!/\d+.stable-19-6$/.exec(t)&&!/\d+.stable-29/.exec(t)},e.renderExternalLinks=function(e,t){return i.a.createElement("li",{key:t,className:vy("link",{external:!0})},i.a.createElement(we,{href:"".concat(Do).concat(e.path),target:"_blank"},e.name))},e._onKillClick=function(){var t=e.props.tablet.TabletId;return e.setState({disableTabletActions:!0}),Pt.killTablet(t)},e._onStopClick=function(){var t=(n=e.props.tablet).TabletId,n=n.HiveId;return e.setState({disableTabletActions:!0}),Pt.stopTablet(t,n)},e._onResumeClick=function(){var t=(n=e.props.tablet).TabletId,n=n.HiveId;return e.setState({disableTabletActions:!0}),Pt.resumeTablet(t,n)},e.renderDialog=function(){var t=(n=e.state).dialogVisible,n=n.typeVisibleDialog;if(!t)return null;switch(n){case"kill":return i.a.createElement(my,{visible:t,text:"The tablet will be killed. Do you want to proceed?",onClose:e.hideDialog,onConfirm:e._onKillClick});case"stop":return i.a.createElement(my,{visible:t,text:"The tablet will be stopped. Do you want to proceed?",onClose:e.hideDialog,onConfirm:e._onStopClick});case"resume":return i.a.createElement(my,{visible:t,text:"The tablet will be resumed. Do you want to proceed?",onClose:e.hideDialog,onConfirm:e._onResumeClick});default:return null}},e.hasUptime=function(){return"Active"===e.props.tablet.State},e.hasHiveId=function(){var t=e.props.tablet.HiveId;return t&&"0"!==t},e.getSchemeShard=function(){var t=e.props.tablet;return w.a.get(t,"TenantId.SchemeShard")},e.isDisabledResume=function(){var t=e.props.tablet;return!!e.state.disableTabletActions||"Stopped"!==t.State&&"Dead"!==t.State},e.isDisabledKill=function(){return e.state.disableTabletActions},e.isDisabledStop=function(){var t=e.props.tablet;return!!e.state.disableTabletActions||"Stopped"===t.State||"Deleted"===t.State},e.renderTablet=function(){var t=(o=e.props).tablet,n=o.tenantPath,r=t.TabletId,o=e.getSchemeShard();o=[{label:"Database",value:n},e.hasHiveId()?{label:"HiveId",value:i.a.createElement(we,{href:va(Oa,{id:t.HiveId}),target:"_blank"},t.HiveId)}:null,o?{label:"SchemeShard",value:i.a.createElement(we,{href:va(Oa,{id:o}),target:"_blank"},o)}:null,{label:"Type",value:t.Type},{label:"State",value:t.State},e.hasUptime()?{label:"Uptime",value:$e(t.ChangeTime)}:null,{label:"Generation",value:t.Generation},{label:"Node",value:i.a.createElement(Da,{className:vy("link"),to:va(ba,{id:String(t.NodeId),activeTab:"storage"})},t.NodeId)}].filter(Boolean);return t.SlaveId&&o.push({label:"Slave",value:t.SlaveId}),r=[{name:"App",path:"/tablets/app?TabletID=".concat(r)},{name:"Counters",path:"/tablets/counters?TabletID=".concat(r)},{name:"Executor",path:"/tablets/executorInternals?TabletID=".concat(r)},{name:"Connect to slave",path:"/tablets?SlaveID=".concat(r)},{name:"State storage",path:"/tablets?SsId=".concat(r)}],i.a.createElement("div",{className:vy()},i.a.createElement("div",{className:vy("pane-wrapper")},i.a.createElement("div",{className:vy("left-pane")},i.a.createElement("ul",{className:vy("links")},r.map(e.renderExternalLinks)),i.a.createElement("div",{className:vy("row",{header:!0})},i.a.createElement("span",{className:vy("title")},"Tablet"),i.a.createElement(Eh,{status:t.Overall,name:t.TabletId}),i.a.createElement("a",{rel:"noopener noreferrer",className:vy("link",{external:!0}),href:"".concat(Do,"/tablets?TabletID=").concat(t.TabletId),target:"_blank"},i.a.createElement(Ch,{name:"external"})),t.Master&&i.a.createElement(Oh,{text:"Master",type:"blue"})),i.a.createElement(xh,{info:o}),i.a.createElement("div",{className:vy("controls")},i.a.createElement(ge,{onClick:e.showKillDialog,view:"action",disabled:e.isDisabledKill(),className:vy("control")},"Kill"),e.hasHiveId()?i.a.createElement(i.a.Fragment,null,i.a.createElement(ge,{onClick:e.showStopDialog,view:"action",disabled:e.isDisabledStop(),className:vy("control")},"Stop"),i.a.createElement(ge,{onClick:e.showResumeDialog,view:"action",disabled:e.isDisabledResume(),className:vy("control")},"Resume")):null)),i.a.createElement("div",{className:vy("rigth-pane")},i.a.createElement(as,{data:e.props.history,columns:yy,settings:gy,initialSortOrder:{columnId:"generation",order:as.DESCENDING}}))),e.renderDialog())},e.renderContent=function(){var t=e.props.tablet;return t&&Object.keys(t).length?e.renderTablet():e.renderPlaceholder()},e}return q()(n,[{key:"componentDidMount",value:function(){this.fetchTabletInfo()}},{key:"componentDidUpdate",value:function(e){this.props.version&&!e.version&&this.fetchTabletInfo()}},{key:"componentWillUnmount",value:function(){this.fetcher&&clearInterval(this.fetcher)}},{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}},{key:"renderPlaceholder",value:function(){return i.a.createElement("div",{className:vy("placeholder")},i.a.createElement(mg,{title:"The tablet was not found",image:i.a.createElement(fy,{name:"404",width:"250"})}))}},{key:"render",value:function(){var e=(r=this.props).loading,t=r.tabletId,n=r.id,r=this.state.isFirstFetchData;return this.isValidVersion()?e&&n!==t&&r?this.renderLoader():this.renderContent():null}}]),n}(i.a.Component),y={getTablet:function(e){return Ue({request:Promise.all([Pt.getTablet({id:e}),Pt.getTabletHistory({id:e})]),actions:zr,dataHandler:function(e){e=(n=ae()(e,2))[0];var t=n[1],n=Object.keys(t).reduce((function(e,n){var r,i,o,a,s=null===(o=t[n])||void 0===o?void 0:o.TabletStateInfo;return s&&s.length&&(r=(a=w.a.find(s,{Master:!0})||s[0]).ChangeTime,i=a.Generation,o=a.State,s=a.Master,a=a.SlaveId,e.push({nodeId:n,generation:i,changeTime:r,state:o,master:s,slaveId:a})),e}),[]);e=void 0===(e=e.TabletStateInfo)?[]:e;return{tablet:void 0===(e=ae()(e,1)[0])?{}:e,history:n}}})},getTabletDescribe:function(e){return Ue({request:Pt.getTabletDescribe(e),actions:Ur,dataHandler:function(t){var n=e.SchemeShard,r=e.PathId;return{tenantPath:t.Path||"".concat(n,":").concat(r)}}})}},Object(l.b)((function(e,t){var n=(a=e.tablet).data,r=a.loading,i=a.id,o=a.history,a=a.tenantPath;return{tablet:void 0===n?{}:n,loading:r,id:t.match.params.id,tabletId:i,history:void 0===o?[]:o,version:e.host.data.Version,tenantPath:a}}),y)(Z));n(965);var Cy=ie()("tablets-filters"),wy=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={nodeFilter:[],tenantPath:""},e.reloadDescriptor=-1,e.makeRequest=function(){var t=(n=e.state).nodeFilter,n=n.tenantPath;e.props.getTabletsInfo({nodes:t,path:[n]})},e.getTablets=function(){var t=e.props.timeoutForRequest;clearInterval(e.reloadDescriptor),e.reloadDescriptor=setTimeout((function(){e.makeRequest(),e.reloadDescriptor=-1}),t)},e.handleNodeFilterChange=function(t,n){n.isOutsideClick||e.setState({nodeFilter:t},(function(){e.props.clearWasLoadingFlag(),e.makeRequest()}))},e.handleStateFilterChange=function(t){(0,e.props.setStateFilter)(t)},e.handleTypeFilterChange=function(t){(0,e.props.setTypeFilter)(t)},e.renderTablet=function(t,n){var r=(s=e.props).filteredTablets,o=s.hideTooltip,a=s.showTooltip,s=s.size;return i.a.createElement(Rh,{onMouseLeave:o,onMouseEnter:a,tablet:r[t],key:n,size:s,className:Cy("tablet")})},e.renderOverall=function(t){var n=e.props,r=n.hideTooltip,o=n.showTooltip,a=t.length,s=t.reduce((function(e,t){return e[t=t.Overall.toLowerCase()]?e[t]++:e[t]=1,e}),{}),l=[];return Object.keys(s).forEach((function(e){var n=s[e]/a*100,r=s[e];s[e]=n,l.push({color:e,percents:n,value:r,total:t.length})})),Object.keys(s).forEach((function(e){var t,n;s[e]<3&&(n=(t=s)[e],Object.keys(t).some((function(e){return 10<t[e]&&(t[e]-=3-n,!0)})),s[e]=3)})),(n=Object.keys(s).map((function(e){return{color:"var(--color-status-".concat(e,"-solid-70)"),colorKey:e,value:s[e]}}))).sort((function(e,t){return j[t.colorKey]-j[e.colorKey]})),i.a.createElement("div",{className:Cy("row",{overall:!0})},i.a.createElement("span",{className:Cy("label",{overall:!0})},"Overall"),i.a.createElement("div",{onMouseLeave:r,onMouseEnter:function(e){return o(e.target,l,"tabletsOverall")}},i.a.createElement(Fl,{value:100,stack:n})))},e.renderContent=function(){var t=(c=e.state).nodeFilter,n=c.tenantPath,r=(u=e.props).tablets,o=u.filteredTablets,a=u.nodes,s=u.stateFilter,l=u.typeFilter,c=u.error,u=T.map((function(e){return{value:e,title:e}}));r=Array.from(yd()(Set,[w.a.map(r,(function(e){return e.Type}))])).map((function(e){return{value:e,title:e}})),a=w.a.map(a,(function(e){return{title:e.Id,value:e.Id,meta:e.Host}}));return i.a.createElement("div",{className:Cy()},i.a.createElement("div",{className:Cy("tenant")},i.a.createElement("span",{className:Cy("label")},"Database: ")," ",n),i.a.createElement(Ey,{nodesForSelect:a,nodeFilter:t,onChangeNodes:e.handleNodeFilterChange,states:u,stateFilter:s,onChangeStates:e.handleStateFilterChange,types:r,typeFilter:l,onChangeTypes:e.handleTypeFilterChange}),c&&i.a.createElement("div",{className:"error"},c),0<o.length?i.a.createElement("div",{className:Cy("items")},i.a.createElement(La.a,{itemRenderer:e.renderTablet,length:o.length,type:"uniform"})):!c&&i.a.createElement("div",{className:Cy("empty-message")},"no tablets"))},e}return q()(n,[{key:"componentDidMount",value:function(){var e=this,t=(a=this.props).setStateFilter,r=a.setTypeFilter,i=(s=b.a.parse(this.props.location.search,{ignoreQueryPrefix:!0})).nodeIds,o=s.type,a=s.path,s=s.state;i=n.parseNodes(i);t(n.getStateFiltersFromColor(s)),r([o]),this.setState({nodeFilter:i,tenantPath:a},(function(){e.makeRequest()}))}},{key:"componentDidUpdate",value:function(e){var t,n=(t=this.props).loading;!(t=t.error)&&e.path&&this.props.path&&e.path!==this.props.path&&(this.props.clearWasLoadingFlag(),this.getTablets()),t||n||-1!==this.reloadDescriptor||this.getTablets()}},{key:"componentWillUnmount",value:function(){clearInterval(this.reloadDescriptor)}},{key:"render",value:function(){var e=(r=this.props).loading,t=r.wasLoaded,r=r.error;return e&&!t?n.renderLoader():r&&"object"===se()(r)?i.a.createElement("div",null,r.statusText):this.renderContent()}}],[{key:"renderLoader",value:function(){return i.a.createElement("div",{className:"loader"},i.a.createElement(Ql,{size:"l"}))}}]),n}(i.a.Component);wy.parseNodes=function(e){if(Array.isArray(e))return e.map(Number).filter(Number.isInteger)},wy.getStateFiltersFromColor=function(e){return k[e]||[e]},wy.CONTROL_WIDTH=220,wy.POPUP_WIDTH=300;var Ey=i.a.memo((function(e){var t=e.nodesForSelect,n=e.nodeFilter,r=e.onChangeNodes,o=e.states,a=e.stateFilter,s=e.onChangeStates,l=e.types,c=e.typeFilter;e=e.onChangeTypes;return i.a.createElement("div",{className:Cy("filters")},i.a.createElement("div",{className:Cy("filter-wrapper")},i.a.createElement(cu,{type:cu.MULTIPLE,label:"Node ID",showApply:!0,showItemMeta:!0,controlWidth:wy.CONTROL_WIDTH,popupWidth:wy.POPUP_WIDTH,placeholder:"All",items:t,value:n,onUpdate:r})),i.a.createElement("div",{className:Cy("filter-wrapper")},i.a.createElement(cu,{type:"multiple",label:cu.MULTIPLE,showApply:!0,controlWidth:wy.CONTROL_WIDTH,placeholder:"All",items:o,value:a,onUpdate:s})),i.a.createElement("div",{className:Cy("filter-wrapper")},i.a.createElement(cu,{type:cu.MULTIPLE,label:"Types",showApply:!0,controlWidth:wy.CONTROL_WIDTH,placeholder:"All",items:l,value:c,onUpdate:e})))}),(function(e,t){return w.a.isEqual(e.nodeFilter,t.nodeFilter)&&w.a.isEqual(e.stateFilter,t.stateFilter)&&w.a.isEqual(e.typeFilter,t.typeFilter)})),Sy=(m={getTabletsInfo:function(e){return Ue({request:Promise.all([Pt.getTabletsInfo(e),Pt.getNodesList()]),actions:ai})},hideTooltip:cr,showTooltip:ur,clearWasLoadingFlag:function(){return{type:"CLEAR_WAS_LOADING_TABLETS"}},setStateFilter:function(e){return{type:"SET_STATE_FILTER",data:e}},setTypeFilter:function(e){return{type:"SET_TYPE_FILTER",data:e}}},Object(l.b)((function(e){var t=(s=e.tabletsFilters).nodes,n=s.wasLoaded,r=s.loading,i=s.timeoutForRequest,o=s.stateFilter,a=s.typeFilter,s=s.error;return{tablets:li(e),filteredTablets:ci(e),nodes:t,timeoutForRequest:i,wasLoaded:n,loading:r,stateFilter:o,typeFilter:a,error:s}}),m)(wy)),Oy={top:0,right:0,bottom:0,left:0};n(966);var xy=Object(l.b)((function(e){var t=e.tooltip;return{toolTipVisible:t.toolTipVisible,currentHoveredRef:t.currentHoveredRef,data:t.data,template:t.template,additionalData:e=t.additionalData,positions:t.positions,popupClassName:(e||{}).popupClassName}}),{hideTooltip:cr})((function(e){var t=function(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.rect,r=t.contextElement,o=i.a.useRef(Oy),a=i.a.useRef({contextElement:r,getBoundingClientRect:function(){var e,t=(e=o.current).top,n=e.right,r=e.bottom;return{top:t,right:n,bottom:r,left:e=e.left,width:n-e,height:r-t}}});return a.current.contextElement=r,n?(e=n.top,r=void 0===(t=n.left)?0:t,t=n.right,n=n.bottom,o.current={top:e=void 0===e?0:e,right:void 0===t?r:t,bottom:void 0===n?e:n,left:r}):o.current=Oy,a}({rect:{top:null===(d=e.positions)||void 0===d?void 0:d.top,left:null===(f=e.positions)||void 0===f?void 0:f.left}});Object(r.useEffect)((function(){return window.addEventListener("scroll",s,!0),function(){window.removeEventListener("scroll",s)}}),[]);var n,o,a,s=function(){var t=e.hideTooltip;e.toolTipVisible&&setTimeout((function(){return t()}),500)},l=e.className,c=e.toolTipVisible,u=e.currentHoveredRef,h=e.data,d=e.additionalData,f=e.positions;return i.a.createElement("div",{className:"redux-tooltip ".concat(void 0===l?"":l)},f?(n=h,o=d,a=e.template,l=e.popupClassName,f=e.hideTooltip,i.a.createElement(i.a.Fragment,null,i.a.createElement(kl,{open:c,placement:["top","bottom","left","right"],className:l,anchorRef:t,onOutsideClick:f},n&&a(n,o)))):(a=h,n=d,o=e.template,h=e.popupClassName,d=e.hideTooltip,i.a.createElement(kl,{open:c,anchorRef:{current:u},hasArrow:!0,placement:["top","bottom","left","right"],className:h,onOutsideClick:d},a&&o(a,n))))}));n(967);var _y=ie()("host"),ky=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).renderStatus=function(){var t=e.props.host;return i.a.createElement("div",{className:_y("status")},i.a.createElement(Eh,{size:"m",status:t.SystemState,name:"Internal viewer"}))},e}return q()(n,[{key:"render",value:function(){var e=(o=this.props).host,t=o.backend,n=$e(e.StartTime),r=t+"/internal",o=e.Host;t=e.Endpoints;return o&&t&&!Ro&&!jo&&(t=null===(t=w.a.find(t,{Name:"http-mon"}))||void 0===t?void 0:t.Address,r="http://".concat(o).concat(t,"/internal")),i.a.createElement("div",{className:_y()},i.a.createElement("div",{className:_y("common")},r?i.a.createElement(we,{href:r},this.renderStatus()):this.renderStatus(),i.a.createElement(Oh,{text:e.DataCenter})),i.a.createElement("div",{className:_y("info")},i.a.createElement("div",{className:_y("info-item")},i.a.createElement("div",{className:_y("label")},"Uptime"),i.a.createElement("div",{className:_y("value")},n)),i.a.createElement("div",{className:_y("info-item")},i.a.createElement("div",{className:_y("label")},"Version"),i.a.createElement("div",{className:_y("value")},e.Version))))}}]),n}(i.a.Component);function Ty(e){return e=e.name,i.a.createElement("div",{className:Py("cluster-info")},i.a.createElement("div",{className:Py("cluster-info-title")},"cluster"),i.a.createElement("div",{className:Py("cluster-info-name")},e))}function Ny(){return i.a.createElement("svg",{width:"0",height:"0"},i.a.createElement("defs",null,i.a.createElement("path",{id:"icon.healthcheck",fill:"currentColor",d:"M464 96H384V48C384 21.5 362.5 0 336 0h-160C149.5 0 128 21.5 128 48V96H48C21.5 96 0 117.5 0 144v288C0 458.5 21.5 480 48 480h416c26.5 0 48-21.5 48-48v-288C512 117.5 490.5 96 464 96zM176 48h160V96h-160V48zM368 314c0 8.836-7.164 16-16 16h-54V384c0 8.836-7.164 16-15.1 16h-52c-8.835 0-16-7.164-16-16v-53.1H160c-8.836 0-16-7.164-16-16v-52c0-8.838 7.164-16 16-16h53.1V192c0-8.838 7.165-16 16-16h52c8.836 0 15.1 7.162 15.1 16v54H352c8.836 0 16 7.162 16 16V314z"}),i.a.createElement("path",{id:"icon.network",fill:"currentColor",d:"M624 280c8.875 0 16-7.125 16-16v-16c0-8.875-7.125-16-16-16h-280V192H416c17.62 0 32-14.38 32-32V32c0-17.62-14.38-32-32-32H224C206.4 0 192 14.38 192 32v128c0 17.62 14.38 32 32 32h72v40H16C7.125 232 0 239.1 0 248v16c0 8.875 7.125 16 16 16h88V320H32c-17.62 0-32 14.38-32 32v128c0 17.62 14.38 32 32 32h192c17.62 0 32-14.38 32-32v-128c0-17.62-14.38-32-32-32H152V280h336V320H416c-17.62 0-32 14.38-32 32v128c0 17.62 14.38 32 32 32h192c17.62 0 32-14.38 32-32v-128c0-17.62-14.38-32-32-32h-72V280H624zM192 384v64H64v-64H192zM256 128V64h128v64H256zM576 384v64h-128v-64H576z"}),i.a.createElement("path",{id:"icon.compute",fill:"currentColor",d:"M336 0h-288C22.38 0 0 22.38 0 48v416C0 489.6 22.38 512 48 512h288c25.62 0 48-22.38 48-48v-416C384 22.38 361.6 0 336 0zM64 208C64 199.2 71.2 192 80 192h32C120.8 192 128 199.2 128 208v32C128 248.8 120.8 256 112 256h-32C71.2 256 64 248.8 64 240V208zM64 304C64 295.2 71.2 288 80 288h32C120.8 288 128 295.2 128 304v32C128 344.8 120.8 352 112 352h-32C71.2 352 64 344.8 64 336V304zM224 432c0 8.801-7.199 16-16 16h-128C71.2 448 64 440.8 64 432v-32C64 391.2 71.2 384 80 384h128c8.801 0 16 7.199 16 16V432zM224 336c0 8.801-7.199 16-16 16h-32C167.2 352 160 344.8 160 336v-32C160 295.2 167.2 288 176 288h32C216.8 288 224 295.2 224 304V336zM224 240C224 248.8 216.8 256 208 256h-32C167.2 256 160 248.8 160 240v-32C160 199.2 167.2 192 176 192h32C216.8 192 224 199.2 224 208V240zM320 432c0 8.801-7.199 16-16 16h-32c-8.799 0-16-7.199-16-16v-32c0-8.801 7.201-16 16-16h32c8.801 0 16 7.199 16 16V432zM320 336c0 8.801-7.199 16-16 16h-32c-8.799 0-16-7.199-16-16v-32C256 295.2 263.2 288 272 288h32C312.8 288 320 295.2 320 304V336zM320 240C320 248.8 312.8 256 304 256h-32C263.2 256 256 248.8 256 240v-32C256 199.2 263.2 192 272 192h32C312.8 192 320 199.2 320 208V240zM320 144C320 152.8 312.8 160 304 160h-224C71.2 160 64 152.8 64 144v-64C64 71.2 71.2 64 80 64h224C312.8 64 320 71.2 320 80V144z"}),i.a.createElement("path",{id:"icon.storage",fill:"currentColor",d:"M448 73.12v45.75C448 159.1 347.6 192 224 192S0 159.1 0 118.9V73.12C0 32.88 100.4 0 224 0S448 32.88 448 73.12zM448 176v102.9C448 319.1 347.6 352 224 352S0 319.1 0 278.9V176c48.12 33.12 136.2 48.62 224 48.62S399.9 209.1 448 176zM448 336v102.9C448 479.1 347.6 512 224 512s-224-32.88-224-73.13V336c48.12 33.13 136.2 48.63 224 48.63S399.9 369.1 448 336z"}),i.a.createElement("path",{id:"icon.schema",fill:"currentColor",d:"M0 80C0 53.49 21.49 32 48 32H144C170.5 32 192 53.49 192 80V96H384V80C384 53.49 405.5 32 432 32H528C554.5 32 576 53.49 576 80V176C576 202.5 554.5 224 528 224H432C405.5 224 384 202.5 384 176V160H192V176C192 177.7 191.9 179.4 191.7 180.1L272 288H368C394.5 288 416 309.5 416 336V432C416 458.5 394.5 480 368 480H272C245.5 480 224 458.5 224 432V336C224 334.3 224.1 332.6 224.3 331L144 224H48C21.49 224 0 202.5 0 176V80z"}),i.a.createElement("path",{id:"icon.key",d:"M8 7H11V5H12V2H6.66C6.085 0.79 4.86 0 3.5 0C1.57 0 0 1.57 0 3.5C0 5.43 1.57 7 3.5 7C4.86 7 6.09 6.21 6.66 5H8V7ZM10 6H9V4H5.97L5.855 4.335C5.5 5.33 4.555 6 3.5 6C2.11929 6 1 4.88071 1 3.5C1 2.11929 2.11929 1 3.5 1C4.555 1 5.5 1.67 5.855 2.665L5.97 3H11V4H10V6ZM3.5 5C2.67157 5 2 4.32843 2 3.5C2 2.67157 2.67157 2 3.5 2C4.32843 2 5 2.67157 5 3.5C5 4.32843 4.32843 5 3.5 5ZM3 3.5C3 3.22386 3.22386 3 3.5 3C3.77614 3 4 3.22386 4 3.5C4 3.77614 3.77614 4 3.5 4C3.22386 4 3 3.77614 3 3.5Z"}),i.a.createElement("path",{id:"icon.new",d:"M6,2A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6M6,4H13V9H18V20H6V4Z"}),i.a.createElement("path",{id:"icon.folder",fill:"#6b8399",d:"M5.25 0H1.5C.806 0 .25.556.25 1.25v7.5C.25 9.44.81 10 1.5 10h10c.69 0 1.25-.56 1.25-1.25V2.5a1.25 1.25 0 0 0-1.25-1.25h-5z"}),i.a.createElement("path",{id:"icon.openFolder",fill:"#6b8399",d:"M10.625 10H1.25A1.25 1.25 0 0 1 0 8.75v-7.5C0 .556.556 0 1.25 0H5l1.25 1.25h4.375c.69 0 1.25.56 1.25 1.25H1.25v6.25l1.337-5h10.67L11.83 9.063a1.251 1.251 0 0 1-1.206.937z"}),i.a.createElement("path",{id:"icon.table",fill:"#6b8399",d:"M10 6.25v2.5H6.25v-2.5zm-8.75 0H5v2.5H1.25zm5-3.75H10V5H6.25zm-5 0H5V5H1.25zm0-2.5C.56 0 0 .56 0 1.25v7.5C0 9.44.56 10 1.25 10H10c.69 0 1.25-.56 1.25-1.25v-7.5C11.25.56 10.69 0 10 0z"}),i.a.createElement("path",{id:"icon.arrow-right",d:"M.786.194C.829.151.872.13.958.13c.064 0 .128.021.193.064l4.49 4.512c.043.043.086.108.086.172 0 .086-.043.129-.086.172l-4.49 4.512a.347.347 0 0 1-.194.064c-.085 0-.128-.021-.171-.064l-.43-.43C.29 9.089.27 9.046.27 8.96c0-.064.021-.129.086-.193l3.889-3.889L.355.99C.292.946.27.882.27.796.27.732.291.667.356.624z"}),i.a.createElement("path",{id:"icon.external",d:"M14.9316 4.66212L11.2754 1.00587C10.5137 0.244148 9.21875 0.777351 9.21875 1.86915V3.31642C8.12695 3.3672 7.06055 3.46876 6.14648 3.77345C5.25781 4.05274 4.54688 4.45899 4.03906 5.01759C3.42969 5.70313 3.125 6.54103 3.125 7.53126C3.125 9.10548 3.96289 10.4004 5.25781 11.2129C6.22266 11.8223 7.44141 10.9082 7.06055 9.79103C6.67969 8.59767 6.62891 8.01368 9.21875 7.81056V9.15626C9.21875 10.248 10.5137 10.7812 11.2754 10.0195L14.9316 6.36329C15.4141 5.90626 15.4141 5.11915 14.9316 4.66212ZM10.4375 9.15626V6.54103C7.16211 6.59181 4.90234 7.12501 5.91797 10.1719C5.15625 9.71485 4.34375 8.87696 4.34375 7.53126C4.34375 4.76368 7.61914 4.50978 10.4375 4.50978V1.84376L14.0938 5.50001L10.4375 9.15626ZM11.0469 11.3145C10.9199 11.3398 10.8438 11.4668 10.8438 11.6191V12.2539C10.8438 12.3555 10.7676 12.4062 10.6914 12.4062H2.05859C1.95703 12.4062 1.90625 12.3555 1.90625 12.2539V3.6211C1.90625 3.54493 1.95703 3.46876 2.05859 3.46876H4.24219C4.26758 3.46876 4.34375 3.46876 4.39453 3.44337C4.69922 3.26563 5.00391 3.0879 5.35938 2.96095C5.48633 2.91017 5.5625 2.8086 5.5625 2.68165V2.5547C5.5625 2.40235 5.41016 2.25001 5.25781 2.25001H1.90625C1.2207 2.25001 0.6875 2.8086 0.6875 3.46876V12.4062C0.6875 13.0918 1.2207 13.625 1.90625 13.625H10.8438C11.5039 13.625 12.0625 13.0918 12.0625 12.4062V11.3398C12.0625 11.1113 11.7832 10.959 11.5801 11.0859C11.4531 11.1621 11.1992 11.2637 11.0469 11.3145Z"}),i.a.createElement("g",{id:"icon.network-placeholder"},i.a.createElement("path",{d:"M68.4597 2.52853V27.7564C68.4597 28.9827 69.3356 30.0339 70.562 30.2675C87.2054 33.2458 99.7025 48.0788 99.0601 65.715C98.4177 83.7599 83.7015 98.4177 65.715 99.1185C48.0788 99.7609 33.3042 87.2638 30.2675 70.6788C30.0339 69.4524 28.9827 68.5765 27.7564 68.5765H2.52853C1.01019 68.5765 -0.157769 69.8612 0.0174243 71.3212C3.4629 104.024 31.2603 129.427 64.9558 129.135C100.111 128.843 128.785 100.111 129.077 64.9558C129.369 31.2603 103.907 3.4629 71.2044 0.0174243C69.7444 -0.157769 68.4597 1.01019 68.4597 2.52853Z",fill:"#EBF2FA"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.7358 18.3543L40.5472 36.1657C41.4231 37.0416 42.8247 37.1584 43.8758 36.3993C48.0221 33.3042 52.9275 31.2019 58.2417 30.2091C59.4681 29.9755 60.344 28.9827 60.344 27.698V2.52853C60.344 1.01019 59.0593 -0.157769 57.5409 0.0174243C44.4598 1.41897 32.4883 6.67478 22.911 14.6753C21.7431 15.6096 21.6847 17.3032 22.7358 18.3543ZM13.3334 24.4868C6.09205 33.8304 1.30343 45.1596 0.0186744 57.54C-0.156519 58.9999 1.06984 60.2846 2.52978 60.2846H27.6992C28.9256 60.2846 29.9768 59.4087 30.2103 58.1823C31.0279 53.5105 32.8382 49.1307 35.3494 45.3348C35.9917 44.342 35.8749 42.9989 35.0574 42.1229L17.1292 24.3116C16.0781 23.202 14.2677 23.3188 13.3334 24.4868ZM80.6078 131.879H113.603C115.471 131.879 116.99 133.397 117.048 135.324V200.555C117.048 202.482 115.471 204 113.603 204H80.6078C78.6807 204 77.1624 202.423 77.1624 200.555V135.324C77.1624 133.397 78.7391 131.879 80.6078 131.879ZM158.452 158.976H125.574C123.647 158.976 122.071 160.553 122.071 162.48V200.439C122.071 202.366 123.647 203.943 125.574 203.943H158.452C160.379 203.943 161.956 202.366 161.956 200.439V162.48C161.956 160.553 160.379 158.976 158.452 158.976ZM170.657 177.256H203.243C205.229 177.256 206.864 178.891 206.864 180.876V200.264C206.864 202.25 205.229 203.885 203.243 203.885H170.657C168.672 203.885 167.037 202.25 167.037 200.264V180.876C167.037 178.891 168.672 177.256 170.657 177.256Z",fill:"#EBF2FA"}),i.a.createElement("path",{d:"M134.275 171.532H21.2749C15.4351 171.532 10.6465 166.743 10.6465 160.903V87.6726C10.6465 81.8328 15.4351 77.0442 21.2749 77.0442H134.216C140.056 77.0442 144.845 81.8328 144.845 87.6726V160.903C144.903 166.802 140.114 171.532 134.275 171.532V171.532Z",fillRule:"evenodd",clipRule:"evenodd",stroke:"#2EE5C0",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"M21.6246 90.7687C23.3017 90.7687 24.6613 89.4091 24.6613 87.732C24.6613 86.0549 23.3017 84.6953 21.6246 84.6953C19.9475 84.6953 18.5879 86.0549 18.5879 87.732C18.5879 89.4091 19.9475 90.7687 21.6246 90.7687Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M31.4937 90.7687C33.1708 90.7687 34.5304 89.4091 34.5304 87.732C34.5304 86.0549 33.1708 84.6953 31.4937 84.6953C29.8166 84.6953 28.457 86.0549 28.457 87.732C28.457 89.4091 29.8166 90.7687 31.4937 90.7687Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M41.3629 90.7687C43.04 90.7687 44.3995 89.4091 44.3995 87.732C44.3995 86.0549 43.04 84.6953 41.3629 84.6953C39.6857 84.6953 38.3262 86.0549 38.3262 87.732C38.3262 89.4091 39.6857 90.7687 41.3629 90.7687Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M10.8223 98.592H144.495",stroke:"#2EE5C0",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"M184.555 149.164L57.89 156.172C53.6269 156.406 50.123 153.135 50.123 148.872V51.1145C50.123 46.8514 53.6269 43.5812 57.89 43.8148L184.555 50.8225C187.825 50.9977 190.453 54.1512 190.453 57.8302V142.157C190.453 145.836 187.825 148.989 184.555 149.164Z",fill:"#027BF3"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M65.1304 54.1512C65.1304 56.1368 63.5537 57.6551 61.5681 57.5383C59.5826 57.4799 58.0059 55.7864 58.0059 53.8009C58.0059 51.8153 59.641 50.297 61.5681 50.4138C63.4953 50.4722 65.1304 52.1657 65.1304 54.1512ZM76.6357 54.6174C76.6357 56.5445 75.059 58.0629 73.1319 58.0045C71.2047 57.9461 69.628 56.2525 69.628 54.3254C69.628 52.3983 71.2047 50.8799 73.1319 50.9383C75.059 51.0551 76.6357 52.6903 76.6357 54.6174ZM84.461 58.4718C86.3298 58.5886 87.8481 57.0702 87.8481 55.1431C87.8481 53.216 86.3298 51.5808 84.461 51.5224C82.5339 51.4056 81.0156 52.924 81.0156 54.8511C81.0156 56.7782 82.5923 58.4134 84.461 58.4718Z",fill:"white"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M75.467 142.974V85.2772C71.496 84.7516 66.8826 84.8684 61.5684 85.9779V143.617L75.467 142.974ZM88.84 90.6509V142.45L77.7444 142.917V85.6871C82.0658 86.6214 85.6865 88.4318 88.84 90.6509ZM102.271 104.55C102.213 104.491 102.169 104.433 102.125 104.374C102.082 104.316 102.038 104.258 101.979 104.199C101.559 103.689 101.138 103.173 100.714 102.653L100.714 102.653C97.8391 99.1308 94.8401 95.4564 91.1759 92.4028V142.333L102.271 141.866V104.55ZM115.703 110.272C111.79 110.214 107.994 109.571 104.607 106.827V141.749L115.703 141.281V110.272ZM129.134 109.863C126.37 109.69 123.605 109.869 120.888 110.044L120.888 110.044L120.888 110.044C119.931 110.106 118.981 110.167 118.039 110.213V141.164L129.134 140.697V109.863ZM153.136 139.704L144.902 140.054V117.863C153.078 127.148 153.136 139.704 153.136 139.704ZM140.113 113.6C140.989 114.184 141.807 114.826 142.566 115.527V140.171L131.47 140.638V110.155C134.39 110.622 137.252 111.615 140.113 113.6Z",fill:"#00236B"}),i.a.createElement("path",{d:"M55.7449 76.4361C55.0549 77.2986 55.1947 78.5572 56.0573 79.2472C56.9198 79.9372 58.1784 79.7974 58.8684 78.9349L55.7449 76.4361ZM61.5113 72.4297L63.0863 71.1971C62.7095 70.7157 62.1333 70.433 61.522 70.4297C60.9107 70.4264 60.3314 70.7029 59.9495 71.1803L61.5113 72.4297ZM64.1409 79.0349C64.8217 79.9048 66.0787 80.0581 66.9485 79.3773C67.8184 78.6965 67.9717 77.4395 67.2909 76.5697L64.1409 79.0349ZM172.081 132.537C171.218 131.847 169.96 131.987 169.27 132.849C168.58 133.712 168.719 134.97 169.582 135.66L172.081 132.537ZM176.087 138.303L177.301 139.893C177.79 139.52 178.08 138.942 178.087 138.326C178.094 137.711 177.817 137.126 177.337 136.742L176.087 138.303ZM169.443 140.86C168.565 141.53 168.396 142.785 169.067 143.663C169.737 144.541 170.992 144.71 171.87 144.039L169.443 140.86ZM58.8684 78.9349L63.073 73.6791L59.9495 71.1803L55.7449 76.4361L58.8684 78.9349ZM59.9363 73.6623L64.1409 79.0349L67.2909 76.5697L63.0863 71.1971L59.9363 73.6623ZM169.582 135.66L174.838 139.865L177.337 136.742L172.081 132.537L169.582 135.66ZM174.874 136.714L169.443 140.86L171.87 144.039L177.301 139.893L174.874 136.714Z",fill:"white"}),i.a.createElement("path",{d:"M147.137 69.1464C146.033 69.1053 145.105 69.9668 145.064 71.0706C145.023 72.1744 145.884 73.1025 146.988 73.1436L147.137 69.1464ZM176.771 74.2532C177.875 74.2943 178.803 73.4328 178.844 72.329C178.885 71.2252 178.024 70.2971 176.92 70.256L176.771 74.2532ZM147.114 79.6573C146.01 79.6291 145.092 80.5015 145.064 81.6057C145.036 82.7099 145.908 83.6278 147.012 83.656L147.114 79.6573ZM176.795 84.4152C177.899 84.4433 178.817 83.571 178.846 82.4668C178.874 81.3626 178.001 80.4446 176.897 80.4165L176.795 84.4152ZM147.075 90.3435C145.97 90.337 145.07 91.2271 145.063 92.3317C145.057 93.4362 145.947 94.3369 147.052 94.3434L147.075 90.3435ZM176.834 94.5186C177.939 94.5251 178.84 93.635 178.846 92.5304C178.853 91.4258 177.962 90.5252 176.858 90.5187L176.834 94.5186ZM146.988 73.1436L176.771 74.2532L176.92 70.256L147.137 69.1464L146.988 73.1436ZM147.012 83.656L176.795 84.4152L176.897 80.4165L147.114 79.6573L147.012 83.656ZM147.052 94.3434L176.834 94.5186L176.858 90.5187L147.075 90.3435L147.052 94.3434Z",fill:"white"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M143.442 71.2024C143.442 72.604 142.274 73.7135 140.872 73.6551C139.471 73.5967 138.303 72.3704 138.303 70.9688C138.303 69.5673 139.471 68.3993 140.872 68.5161C142.332 68.5745 143.442 69.8009 143.442 71.2024ZM143.443 81.5981C143.443 82.9996 142.275 84.1092 140.873 84.0508C139.472 83.9924 138.304 82.766 138.304 81.3645C138.304 79.9045 139.472 78.795 140.873 78.9118C142.333 78.9702 143.443 80.1965 143.443 81.5981ZM140.873 94.4457C142.275 94.5041 143.443 93.3945 143.443 91.993C143.443 90.5914 142.333 89.3651 140.873 89.3067C139.472 89.1899 138.304 90.3578 138.304 91.7594C138.304 93.1609 139.472 94.3873 140.873 94.4457Z",fill:"white"}),i.a.createElement("path",{opacity:"0.2",d:"M190.452 91.8753V57.771C190.452 54.0919 187.824 50.9385 184.553 50.7633L160.902 49.4785C159.793 52.8656 159.15 56.5447 159.15 60.4573C159.15 78.0934 171.94 92.2841 187.24 92.1089C188.291 92.1673 189.4 92.0505 190.452 91.8753Z",fill:"#00236B"}),i.a.createElement("path",{d:"M220.645 58.8832C220.645 42.2982 209.024 28.1076 194.191 27.2316C178.891 26.3556 166.102 39.9039 166.102 57.5401C166.102 75.1762 178.891 89.3669 194.191 89.1917C209.024 89.0749 220.645 75.4682 220.645 58.8832Z",fill:"#FF4645"}),i.a.createElement("path",{d:"M215.329 40.3719C210.541 32.897 202.949 27.758 194.189 27.2324V58.2417L215.329 40.3719Z",fill:"#FFCC00"}),i.a.createElement("path",{d:"M215.329 40.3721L194.189 58.2418L220.644 58.8842C220.644 51.9932 218.658 45.5695 215.329 40.3721V40.3721Z",fill:"#00236B"}),i.a.createElement("path",{d:"M194.248 58.2408V27.2316C178.947 26.3556 166.158 39.9039 166.158 57.5401L194.248 58.2408Z",fill:"#FF4645"}),i.a.createElement("path",{d:"M161.151 14.7336C161.151 13.6291 160.256 12.7336 159.151 12.7336C158.047 12.7336 157.151 13.6291 157.151 14.7336H161.151ZM157.151 18.9383C157.151 20.0429 158.047 20.9383 159.151 20.9383C160.256 20.9383 161.151 20.0429 161.151 18.9383H157.151ZM161.151 27.8138C161.151 26.7093 160.256 25.8138 159.151 25.8138C158.047 25.8138 157.151 26.7093 157.151 27.8138H161.151ZM157.151 32.3689C157.151 33.4734 158.047 34.3689 159.151 34.3689C160.256 34.3689 161.151 33.4734 161.151 32.3689H157.151ZM167.97 25.5526C169.074 25.5526 169.97 24.6572 169.97 23.5526C169.97 22.4481 169.074 21.5526 167.97 21.5526V25.5526ZM163.707 21.5526C162.602 21.5526 161.707 22.4481 161.707 23.5526C161.707 24.6572 162.602 25.5526 163.707 25.5526V21.5526ZM154.538 25.5526C155.643 25.5526 156.538 24.6572 156.538 23.5526C156.538 22.4481 155.643 21.5526 154.538 21.5526V25.5526ZM150.275 21.5526C149.171 21.5526 148.275 22.4481 148.275 23.5526C148.275 24.6572 149.171 25.5526 150.275 25.5526V21.5526ZM157.151 14.7336V18.9383H161.151V14.7336H157.151ZM157.151 27.8138V32.3689H161.151V27.8138H157.151ZM167.97 21.5526H163.707V25.5526H167.97V21.5526ZM154.538 21.5526H150.275V25.5526H154.538V21.5526Z",fill:"#2EE5C0"})),i.a.createElement("g",{id:"icon.404"},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M307.333 168.43C316.733 154.23 321.433 135.83 321.433 113.13C321.433 78.7305 309.733 51.2305 286.133 30.9305C262.733 10.4305 223.133 0.230469 179.433 0.230469C166.333 0.230469 155.333 1.13047 144.633 2.93047C133.933 4.73047 124.533 6.83047 116.433 9.23047C111.033 10.8305 100.333 14.9305 93.1334 17.8305C89.0334 19.5305 86.2334 23.8305 86.2334 28.6305V68.1305C86.2334 76.3305 94.0334 81.9305 101.133 78.6305C101.749 78.3525 102.352 78.0786 102.939 77.8124C105.306 76.738 107.391 75.7915 108.833 75.2305C114.533 72.9305 121.233 71.0305 128.933 69.4305C136.633 67.8305 145.233 67.0305 154.633 67.0305C176.833 67.0305 197.733 72.0305 206.933 81.9305C216.133 91.9305 220.733 104.43 220.733 119.43C220.733 132.43 218.033 143.53 212.533 152.63C207.033 161.73 199.433 170.63 189.633 179.13C181.733 186.03 174.433 192.63 167.633 198.93C160.833 205.23 155.033 212.13 150.133 219.63C145.233 227.13 141.433 235.63 138.833 244.93C137.233 250.53 136.133 265.23 135.533 275.93C135.233 282.53 140.033 288.13 146.233 288.13H197.433C202.833 288.13 207.433 283.73 208.033 277.93C208.633 272.23 210.033 265.43 213.533 260.13C217.533 254.23 222.233 248.33 228.233 242.83C234.233 237.33 241.233 231.83 249.133 226.13C257.133 220.53 265.333 214.03 274.033 206.73C286.833 195.33 297.933 182.63 307.333 168.43ZM139.733 381.13C148.733 390.63 159.833 395.33 173.133 395.33C179.433 395.33 185.533 394.03 191.333 391.33C197.133 388.73 202.233 385.33 206.533 381.03C210.833 376.73 214.233 371.63 216.733 365.83C219.233 360.03 220.433 353.73 220.433 346.83C220.433 340.03 219.233 333.63 216.733 327.83C214.233 322.03 210.833 316.93 206.533 312.43C202.233 307.93 197.133 304.53 191.333 302.13C185.533 299.73 179.433 298.53 173.133 298.53C159.833 298.53 148.733 303.13 139.733 312.43C130.733 321.73 126.233 333.23 126.233 346.93C126.233 360.33 130.733 371.73 139.733 381.13Z",fill:"#ECF2F9"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M213.933 353.03H20.4334C10.4334 353.03 2.2334 344.83 2.2334 334.83V209.43C2.2334 199.43 10.4334 191.23 20.4334 191.23H213.933C223.933 191.23 232.133 199.43 232.133 209.43V334.83C232.133 344.93 223.933 353.03 213.933 353.03Z",stroke:"#00E6C5",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4 10"}),i.a.createElement("path",{d:"M21.0335 214.732C23.9054 214.732 26.2335 212.404 26.2335 209.532C26.2335 206.66 23.9054 204.332 21.0335 204.332C18.1616 204.332 15.8335 206.66 15.8335 209.532C15.8335 212.404 18.1616 214.732 21.0335 214.732Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M37.9334 214.732C40.8053 214.732 43.1334 212.404 43.1334 209.532C43.1334 206.66 40.8053 204.332 37.9334 204.332C35.0615 204.332 32.7334 206.66 32.7334 209.532C32.7334 212.404 35.0615 214.732 37.9334 214.732Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M54.8333 214.732C57.7052 214.732 60.0333 212.404 60.0333 209.532C60.0333 206.66 57.7052 204.332 54.8333 204.332C51.9614 204.332 49.6333 206.66 49.6333 209.532C49.6333 212.404 51.9614 214.732 54.8333 214.732Z",fill:"#2EE5C0"}),i.a.createElement("path",{d:"M2.5332 228.129H231.433",stroke:"#00E6C5",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4 10",fill:"#FFFFFF"}),i.a.createElement("path",{d:"M301.033 264.83L84.1335 276.83C76.8335 277.23 70.8335 271.63 70.8335 264.33V96.9303C70.8335 89.6303 76.8335 84.0303 84.1335 84.4303L301.033 96.4303C306.633 96.7303 311.133 102.13 311.133 108.43V252.83C311.133 259.13 306.633 264.53 301.033 264.83Z",fill:"#027BF3"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M90.4335 107.93C93.8335 108.13 96.5335 105.53 96.5335 102.13C96.5335 98.7296 93.8335 95.8296 90.4335 95.7296C87.1335 95.5296 84.3335 98.1296 84.3335 101.53C84.3335 104.93 87.0335 107.83 90.4335 107.93ZM110.233 108.728C113.533 108.828 116.233 106.228 116.233 102.928C116.233 99.6278 113.533 96.8278 110.233 96.6278C106.933 96.5278 104.233 99.1278 104.233 102.428C104.233 105.728 106.933 108.628 110.233 108.728ZM135.433 103.828C135.433 107.128 132.833 109.728 129.633 109.528C126.433 109.428 123.733 106.628 123.733 103.328C123.733 100.028 126.333 97.428 129.633 97.628C132.833 97.728 135.433 100.528 135.433 103.828ZM201.434 165.531L220.534 144.631L237.934 163.731L219.034 184.631L237.934 205.131L220.534 224.631L201.434 204.131L182.034 225.631L163.934 206.531L183.534 185.031L163.934 164.031L182.034 144.531L201.434 165.531Z",fill:"white"}),i.a.createElement("path",{d:"M327.433 112.83C327.433 84.4297 305.733 75.7297 293.933 74.9297C293.833 74.9297 260.433 77.2297 260.433 120.23C260.433 145.73 281.633 165.73 306.433 164.83C314.233 164.53 321.333 162.23 327.433 158.43V112.83Z",fill:"#67B0F8"}),i.a.createElement("path",{d:"M380.534 195.931C377.634 199.331 372.934 199.631 370.034 196.731L331.434 157.731L342.734 145.531L380.534 184.531C383.434 187.531 383.434 192.531 380.534 195.931Z",fill:"#FF4645"}),i.a.createElement("path",{d:"M342.833 145.629L331.533 157.829L335.233 161.529C337.133 163.429 340.133 163.529 342.033 161.729C343.133 160.729 344.233 159.629 345.233 158.529C345.833 157.829 346.533 157.129 347.133 156.429C348.733 154.529 348.633 151.629 346.833 149.829L342.833 145.629Z",fill:"#D93654"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M267.633 154.13C244.633 132.729 244.633 96.8295 267.633 76.0295C289.533 56.2295 322.733 59.0295 342.033 80.3295C360.433 100.729 360.433 132.03 342.033 151.93C322.733 172.73 289.533 174.53 267.633 154.13ZM277.033 143.328C292.633 158.328 316.833 157.528 331.133 142.428C344.933 127.828 344.933 104.628 331.133 89.6281C316.833 74.128 292.633 72.628 277.033 87.1281C260.833 102.228 260.833 127.828 277.033 143.328Z",fill:"#00236B"}),i.a.createElement("path",{d:"M41.0336 42.7305C41.0336 41.6259 40.1382 40.7305 39.0336 40.7305C37.929 40.7305 37.0336 41.6259 37.0336 42.7305H41.0336ZM37.0336 51.0305C37.0336 52.135 37.929 53.0305 39.0336 53.0305C40.1382 53.0305 41.0336 52.135 41.0336 51.0305H37.0336ZM41.0336 68.2305C41.0336 67.1259 40.1382 66.2305 39.0336 66.2305C37.929 66.2305 37.0336 67.1259 37.0336 68.2305H41.0336ZM37.0336 77.1305C37.0336 78.235 37.929 79.1305 39.0336 79.1305C40.1382 79.1305 41.0336 78.235 41.0336 77.1305H37.0336ZM56.2336 61.9305C57.3382 61.9305 58.2336 61.035 58.2336 59.9305C58.2336 58.8259 57.3382 57.9305 56.2336 57.9305V61.9305ZM48.0336 57.9305C46.929 57.9305 46.0336 58.8259 46.0336 59.9305C46.0336 61.035 46.929 61.9305 48.0336 61.9305V57.9305ZM30.1336 61.9305C31.2382 61.9305 32.1336 61.035 32.1336 59.9305C32.1336 58.8259 31.2382 57.9305 30.1336 57.9305V61.9305ZM21.9336 57.9305C20.829 57.9305 19.9336 58.8259 19.9336 59.9305C19.9336 61.035 20.829 61.9305 21.9336 61.9305V57.9305ZM37.0336 42.7305V51.0305H41.0336V42.7305H37.0336ZM37.0336 68.2305V77.1305H41.0336V68.2305H37.0336ZM56.2336 57.9305H48.0336V61.9305H56.2336V57.9305ZM30.1336 57.9305H21.9336V61.9305H30.1336V57.9305Z",fill:"#2EE5C0"})),"/* History controls */",i.a.createElement("path",{id:"icon.previous",d:"M5.41406 10.6094C5.36719 10.6562 5.29688 10.6797 5.22656 10.6797C5.13281 10.6797 5.0625 10.6562 5.01562 10.6094L0.117188 5.6875C0.046875 5.64062 0.0234375 5.59375 0.0234375 5.5C0.0234375 5.42969 0.046875 5.35938 0.117188 5.3125L5.01562 0.390625C5.0625 0.34375 5.13281 0.320312 5.22656 0.320312C5.29688 0.320312 5.36719 0.34375 5.41406 0.390625L5.88281 0.859375C5.92969 0.90625 5.97656 0.976562 5.97656 1.04688C5.97656 1.14062 5.92969 1.21094 5.88281 1.25781L1.64062 5.5L5.88281 9.74219C5.92969 9.8125 5.97656 9.88281 5.97656 9.95312C5.97656 10.0469 5.92969 10.0938 5.88281 10.1406L5.41406 10.6094Z",fill:"currentColor"}),i.a.createElement("path",{id:"icon.next",d:"M0.787109 0.191406C0.830078 0.148438 0.873047 0.126953 0.958984 0.126953C1.02344 0.126953 1.08789 0.148438 1.15234 0.191406L5.64258 4.70312C5.68555 4.74609 5.72852 4.81055 5.72852 4.875C5.72852 4.96094 5.68555 5.00391 5.64258 5.04688L1.15234 9.55859C1.08789 9.60156 1.02344 9.62305 0.958984 9.62305C0.873047 9.62305 0.830078 9.60156 0.787109 9.55859L0.357422 9.12891C0.292969 9.08594 0.271484 9.04297 0.271484 8.95703C0.271484 8.89258 0.292969 8.82812 0.357422 8.76367L4.24609 4.875L0.357422 0.986328C0.292969 0.943359 0.271484 0.878906 0.271484 0.792969C0.271484 0.728516 0.292969 0.664062 0.357422 0.621094L0.787109 0.191406Z",fill:"currentColor"}),i.a.createElement("g",{id:"icon.dialog-warning",width:"24",height:"22",viewBox:"0 0 24 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.253448 19.0301L10.7294 0.712125C11.2724 -0.237375 12.7304 -0.237375 13.2719 0.712125L23.7479 19.0301C24.2609 19.9256 23.5649 21.0071 22.4774 21.0071H1.52545C0.436448 21.0071 -0.258052 19.9256 0.253448 19.0301Z",fill:"var(--yc-color-base-warning-heavy)"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 13.0074C13.5 13.2836 13.2761 13.5074 13 13.5074H11C10.7239 13.5074 10.5 13.2836 10.5 13.0074V7.39844C10.5 7.1223 10.7239 6.89844 11 6.89844H13C13.2761 6.89844 13.5 7.1223 13.5 7.39844V13.0074Z",fill:"var(--yc-color-text-complementary)"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 17.548C13.5 17.8241 13.2761 18.048 13 18.048H11C10.7239 18.048 10.5 17.8241 10.5 17.548V15.8555C10.5 15.5793 10.7239 15.3555 11 15.3555H13C13.2761 15.3555 13.5 15.5793 13.5 15.8555V17.548Z",fill:"var(--yc-color-text-complementary)"})),i.a.createElement("g",{id:"icon.chevron-down",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16"},i.a.createElement("path",{stroke:"currentColor",fill:"none",d:"M3 6l5 5 5-5"})),"/* theme icons */",i.a.createElement("path",{id:"icon.sun",d:"M7.99108 5.98e-05C7.67665 0.00674984 7.42467 0.265426 7.42913 0.579851V2.29246C7.4269 2.49762 7.53394 2.6894 7.71233 2.79421C7.89073 2.89679 8.10927 2.89679 8.28767 2.79421C8.46606 2.6894 8.5731 2.49762 8.57087 2.29246V0.579851C8.5731 0.425983 8.51289 0.276576 8.40362 0.167307C8.29436 0.0580392 8.14495 -0.00217002 7.99108 5.98e-05ZM2.7462 2.17651C2.51429 2.17874 2.30467 2.31922 2.2177 2.5333C2.13073 2.74961 2.18202 2.9949 2.34927 3.15769L3.56014 4.36856C3.70286 4.51797 3.91693 4.57818 4.1154 4.52466C4.3161 4.47337 4.47219 4.31727 4.52348 4.11658C4.577 3.91811 4.51679 3.70403 4.36739 3.56131L3.15652 2.35044C3.04948 2.23895 2.90007 2.17651 2.7462 2.17651ZM13.236 2.17651C13.0865 2.18097 12.9461 2.2434 12.8435 2.35044L11.6326 3.56131C11.4832 3.70403 11.423 3.91811 11.4765 4.11658C11.5278 4.31727 11.6839 4.47337 11.8846 4.52466C12.0831 4.57818 12.2971 4.51797 12.4399 4.36856L13.6507 3.15769C13.8202 2.99267 13.8693 2.74292 13.7778 2.52661C13.6864 2.30807 13.4723 2.16982 13.236 2.17651ZM8 4.00508C5.79233 4.00508 4.0039 5.79351 4.0039 8.00118C4.0039 10.2088 5.79233 11.9973 8 11.9973C10.2077 11.9973 11.9961 10.2088 11.9961 8.00118C11.9961 5.79351 10.2077 4.00508 8 4.00508ZM0.578676 7.43031C0.373519 7.42808 0.181743 7.53511 0.076934 7.71351C-0.0256447 7.89191 -0.0256447 8.11044 0.076934 8.28884C0.181743 8.46724 0.373519 8.57428 0.578676 8.57205H2.29129C2.49645 8.57428 2.68822 8.46724 2.79303 8.28884C2.89561 8.11044 2.89561 7.89191 2.79303 7.71351C2.68822 7.53511 2.49645 7.42808 2.29129 7.43031H0.578676ZM13.7087 7.43031C13.5036 7.42808 13.3118 7.53511 13.207 7.71351C13.1044 7.89191 13.1044 8.11044 13.207 8.28884C13.3118 8.46724 13.5036 8.57428 13.7087 8.57205H15.4213C15.6265 8.57428 15.8183 8.46724 15.9231 8.28884C16.0256 8.11044 16.0256 7.89191 15.9231 7.71351C15.8183 7.53511 15.6265 7.42808 15.4213 7.43031H13.7087ZM3.95261 11.4621C3.80321 11.4643 3.66272 11.5268 3.56014 11.6338L2.34927 12.8447C2.19986 12.9874 2.13965 13.2015 2.19317 13.3999C2.24446 13.6006 2.40056 13.7567 2.60125 13.808C2.79972 13.8615 3.0138 13.8013 3.15652 13.6519L4.36739 12.441C4.53686 12.276 4.58592 12.0263 4.49449 11.81C4.40307 11.5914 4.18899 11.4532 3.95261 11.4621ZM12.0318 11.4621C11.7976 11.4621 11.5902 11.6026 11.501 11.8166C11.4141 12.033 11.4654 12.2782 11.6326 12.441L12.8435 13.6519C12.9862 13.8013 13.2003 13.8615 13.3987 13.808C13.5994 13.7567 13.7555 13.6006 13.8068 13.3999C13.8603 13.2015 13.8001 12.9874 13.6507 12.8447L12.4399 11.6338C12.3328 11.5223 12.1856 11.4621 12.0318 11.4621ZM7.99108 13.1301C7.67665 13.1368 7.42467 13.3955 7.42913 13.7099V15.4225C7.4269 15.6277 7.53394 15.8194 7.71233 15.9242C7.89073 16.0268 8.10927 16.0268 8.28767 15.9242C8.46606 15.8194 8.5731 15.6277 8.57087 15.4225V13.7099C8.5731 13.556 8.51289 13.4066 8.40362 13.2973C8.29436 13.1881 8.14495 13.1279 7.99108 13.1301Z",fill:"currentColor"}),i.a.createElement("path",{id:"icon.moon",d:"M10.9102 13.991C12.7951 13.305 14.209 11.8446 14.8419 10.0201C14.9307 9.74456 14.627 9.50386 14.3819 9.6471C11.6317 11.2966 8.08679 10.0199 6.99259 7.01362C6.36734 5.29574 6.70084 3.39103 7.89136 1.98499C8.07785 1.755 7.88469 1.44702 7.60487 1.49482C7.2925 1.52745 6.78277 1.68596 6.46392 1.77499C3.07588 3.00814 1.35459 6.74195 2.57904 10.1061C3.81219 13.4942 7.52215 15.2241 10.9102 13.991Z",fill:"currentColor"}),i.a.createElement("g",{id:"icon.monitoring",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16S0 24.837 0 16z",fill:"#027BF3"}),i.a.createElement("path",{d:"M9 10H8v12h16v-2H9V10zm11.5 5.5L17 12l-3.5 3.5L10 12v7h14v-7l-3.5 3.5z",fill:"#fff"})),i.a.createElement("path",{id:"icon.pencil",d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}),i.a.createElement("path",{id:"icon.trash",d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}),i.a.createElement("path",{id:"icon.kikimr-logo",d:"M6.47 30.11L6.47 21.37L10.81 7.45L9.35 7.45L5.80 19.50L2.19 7.45L0.51 7.45L4.88 21.37L4.88 30.11ZM13.12 30.11L15.44 30.11C20.45 30.11 23.84 25.61 23.84 17.94C23.84 10.08 20.26 7.45 15.79 7.45L13.12 7.45ZM15.79 8.75C19.34 8.75 22.22 11.06 22.22 18.07C22.22 25.01 19.50 28.82 15.47 28.82L14.71 28.82L14.71 8.75ZM29.67 30.11C33.38 30.11 36.17 28.15 36.17 23.62C36.17 20.80 34.97 18.67 32.37 18.01C34.30 17.15 35.38 15.44 35.38 12.81C35.38 9.48 33.60 7.45 30.05 7.45L26.75 7.45L26.75 30.11ZM29.99 8.72C32.65 8.72 33.82 10.24 33.82 12.93C33.82 16.10 32.24 17.47 29.92 17.47L28.34 17.47L28.34 8.72ZM30.40 18.70C33.22 18.70 34.58 20.70 34.58 23.84C34.58 27.55 32.52 28.85 29.45 28.85L28.34 28.85L28.34 18.70ZM49.58 26.63L50.82 26.63L54.21 14.01C54.46 13.06 54.68 12.14 54.97 10.87L55.09 10.87C55.03 12.01 54.97 13.16 54.97 14.23L54.97 30.11L56.49 30.11L56.49 7.45L54.71 7.45L50.85 21.94C50.69 22.51 50.43 23.71 50.31 24.57L50.21 24.57C50.12 23.71 49.90 22.54 49.74 21.94L45.90 7.45L44.06 7.45L44.06 30.11L45.46 30.11L45.46 14.23C45.46 13.09 45.43 11.95 45.36 10.87L45.46 10.87C45.65 11.92 45.90 12.93 46.22 14.11ZM64.13 30.43C66.89 30.43 69.01 27.33 69.01 22.03C69.01 16.55 66.89 13.82 64.13 13.82C61.37 13.82 59.25 16.90 59.25 22.22C59.25 27.67 61.37 30.43 64.13 30.43ZM64.13 29.23C62.26 29.23 60.74 27.10 60.74 22.13C60.74 17.28 62.26 15.06 64.13 15.06C66.00 15.06 67.52 17.12 67.52 22.13C67.52 26.95 66.00 29.23 64.13 29.23ZM76.81 15.09C78.27 15.09 78.96 15.98 78.96 17.88L78.96 30.11L80.45 30.11L80.45 17.69C80.45 15.15 79.22 13.82 77.09 13.82C74.94 13.82 73.67 15.60 73.23 16.77L73.16 16.77L73.10 14.14L71.74 14.14L71.74 30.11L73.23 30.11L73.23 18.45C74.02 16.42 75.22 15.09 76.81 15.09ZM84.64 11.00C85.18 11.00 85.65 10.56 85.65 9.99C85.65 9.45 85.18 8.94 84.64 8.94C84.07 8.94 83.62 9.45 83.62 9.99C83.62 10.56 84.07 11.00 84.64 11.00ZM83.88 14.14L83.88 30.11L85.37 30.11L85.37 14.14ZM93.64 29.92L93.32 28.82C93.13 28.91 92.82 29.04 92.34 29.04C91.39 29.04 90.88 28.34 90.88 26.75L90.88 15.31L93.61 15.31L93.61 14.14L90.88 14.14L90.88 10.97L89.55 10.97L89.39 14.14L87.78 14.14L87.78 15.31L89.39 15.31L89.39 26.91C89.39 28.88 90.28 30.27 92.18 30.27C92.85 30.27 93.29 30.11 93.64 29.92ZM100.17 30.43C102.93 30.43 105.05 27.33 105.05 22.03C105.05 16.55 102.93 13.82 100.17 13.82C97.41 13.82 95.29 16.90 95.29 22.22C95.29 27.67 97.41 30.43 100.17 30.43ZM100.17 29.23C98.30 29.23 96.78 27.10 96.78 22.13C96.78 17.28 98.30 15.06 100.17 15.06C102.04 15.06 103.56 17.12 103.56 22.13C103.56 26.95 102.04 29.23 100.17 29.23ZM113.07 15.60L113.07 14.04C111.11 14.17 109.81 15.79 109.30 17.34L109.21 17.34L109.14 14.14L107.78 14.14L107.78 30.11L109.27 30.11L109.27 19.02C110.00 16.83 111.33 15.66 113.07 15.60ZM116.28 11.00C116.81 11.00 117.29 10.56 117.29 9.99C117.29 9.45 116.81 8.94 116.28 8.94C115.70 8.94 115.26 9.45 115.26 9.99C115.26 10.56 115.70 11.00 116.28 11.00ZM115.51 14.14L115.51 30.11L117.00 30.11L117.00 14.14ZM125.63 15.09C127.09 15.09 127.78 15.98 127.78 17.88L127.78 30.11L129.27 30.11L129.27 17.69C129.27 15.15 128.04 13.82 125.91 13.82C123.76 13.82 122.49 15.60 122.05 16.77L121.98 16.77L121.92 14.14L120.56 14.14L120.56 30.11L122.05 30.11L122.05 18.45C122.84 16.42 124.04 15.09 125.63 15.09ZM136.60 29.10C134.69 29.10 133.49 26.63 133.49 22.44C133.49 17.72 134.82 14.99 136.85 14.99C138.28 14.99 139.16 15.72 139.80 17.24L139.80 26.09C139.10 27.71 137.96 29.10 136.60 29.10ZM136.37 35.31C139.26 35.31 141.29 33.76 141.29 29.96L141.29 14.14L140.05 14.14L139.89 15.63C139.35 14.55 138.28 13.82 137.04 13.82C133.96 13.82 132.00 17.02 132.00 22.57C132.00 27.20 133.65 30.40 136.31 30.40C137.99 30.40 139.10 29.16 139.80 27.77L139.80 29.80C139.80 32.87 138.50 34.01 136.37 34.01C134.88 34.01 133.55 33.38 132.98 32.81L132.54 34.11C133.17 34.62 134.53 35.31 136.37 35.31Z"}),i.a.createElement("path",{id:"icon.question",fillRule:"evenodd",clipRule:"evenodd",d:"M22 12.219c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10 10 4.477 10 10zm-2 0a8 8 0 11-16 0 8 8 0 0116 0zm-9.25 4.243c0-.723.55-1.243 1.243-1.243.708 0 1.257.52 1.257 1.243 0 .722-.55 1.257-1.257 1.257a1.228 1.228 0 01-1.243-1.258zm1.475-9.743c-2.157 0-3.775 1.243-3.775 3.25v.025a.5.5 0 00.5.5h.803c.24 0 .435-.195.435-.435 0-1.123.868-1.722 2.037-1.722 1.138 0 1.887.599 1.887 1.453 0 .809-.42 1.183-1.468 1.662l-.3.135c-.883.39-1.213.974-1.213 1.992v.14a.5.5 0 00.5.5h.738a.5.5 0 00.5-.5v-.035c0-.45.12-.629.48-.794l.299-.134c1.258-.57 2.202-1.319 2.202-2.951v-.09c0-1.723-1.498-2.996-3.625-2.996z",fill:"currentColor"})))}n(968);var Py=ie()("header"),Iy=(G=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"componentDidMount",value:function(){this.props.getHostInfo()}},{key:"componentDidUpdate",value:function(){var e=(t=this.props).pathname,t=t.clusterName;e.includes("/clusters")||t||!Ro||this.props.getClusterInfo(Lo)}},{key:"render",value:function(){var e=(n=this.props).host,t=n.pathname,n=n.clusterName;t=t.endsWith("/clusters")||t.endsWith("/clusters/"),n=Ro?n:e.ClusterName;return i.a.createElement("header",{className:Py()},i.a.createElement("div",{className:Py("content")},!t&&n&&i.a.createElement(Ty,{name:n})),!t&&e.Host&&i.a.createElement(ky,{host:e,backend:Do}))}}]),n}(i.a.Component),y={getHostInfo:function(){return Ue({request:Pt.getHostInfo(),actions:kr})},setSettingValue:Bt,getClusterInfo:Sn},ra(Object(l.b)((function(e,t){return{host:e.host.data,pathname:t.location.pathname,theme:Ht(e,L),clusterName:(null===(t=e.cluster.data)||void 0===t?void 0:t.Name)||e.clusterInfo.title}}),y)(G)));function Ry(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var jy=i.a.createContext(null),Dy="unmounted",Ay="exited",Ly="entering",My="entered",Fy="exiting";function By(){}function Hy(e,t){return e&&t&&t.split(" ").forEach((function(t){var n;n=t,(t=e).classList?t.classList.remove(n):"string"==typeof t.className?t.className=Ry(t.className,n):t.setAttribute("class",Ry(t.className&&t.className.baseVal||"",n))}))}(Z=function(e){function t(t,n){var r,i=e.call(this,t,n)||this;n=n&&!n.isMounting?t.enter:t.appear;return i.appearStatus=null,t.in?n?(r=Ay,i.appearStatus=Ly):r=My:r=t.unmountOnExit||t.mountOnEnter?Dy:Ay,i.state={status:r},i.nextCallback=null,i}Object(Bo.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Dy?{status:Ay}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;e!==this.props&&(e=this.state.status,this.props.in?e!==Ly&&e!==My&&(t=Ly):e!==Ly&&e!==My||(t=Fy)),this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n=this.props.timeout,r=e=t=n;return null!=n&&"number"!=typeof n&&(r=n.exit,e=n.enter,t=void 0!==n.appear?n.appear:e),{exit:r,enter:e,appear:t}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Ly?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===Ay&&this.setState({status:Dy})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=(s=this.props.nodeRef?[r]:[a.a.findDOMNode(this),r])[0],o=s[1],s=this.getTimeouts(),l=r?s.appear:s.enter;e||n?(this.props.onEnter(i,o),this.safeSetState({status:Ly},(function(){t.props.onEntering(i,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:My},(function(){t.props.onEntered(i,o)}))}))}))):this.safeSetState({status:My},(function(){t.props.onEntered(i)}))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:a.a.findDOMNode(this);t?(this.props.onExit(r),this.safeSetState({status:Fy},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ay},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ay},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.a.findDOMNode(this);t=null==e&&!this.props.addEndListener;n&&!t?(this.props.addEndListener&&(n=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],this.props.addEndListener(n[0],n[1])),null!=e&&setTimeout(this.nextCallback,e)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Dy)return null;var t=(n=this.props).children,n=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,Object(Uo.a)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.a.createElement(jy.Provider,{value:null},"function"==typeof t?t(e,n):i.a.cloneElement(i.a.Children.only(t),n))},t}(i.a.Component)).contextType=jy,Z.propTypes={},Z.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:By,onEntering:By,onEntered:By,onExit:By,onExiting:By,onExited:By},Z.UNMOUNTED=Dy,Z.EXITED=Ay,Z.ENTERING=Ly,Z.ENTERED=My,Z.EXITING=Fy;var zy=Z;function Uy(e){var t=e.className,n=e.children,r=e.style,o=e.onVeilClick,a=e.onEscape,s=void 0===(e=e.preventSrcollBody)||e,l=!1;return i.a.Children.forEach(n,(function(e){e.type===Yy&&Boolean(e.props.visible)&&(l=!0)})),i.a.useEffect((function(){function e(e){"Escape"===e.key&&null!=a&&a()}return l&&window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[a,l]),i.a.useEffect((function(){function e(){document.body.style.paddingRight="",document.body.style.paddingBottom="",document.body.style.overflow=""}var t,n,r=s;return r&&(l?(t=window.innerWidth-document.documentElement.clientWidth,n=window.innerHeight-document.documentElement.clientHeight,document.body.style.paddingRight=t+"px",document.body.style.paddingBottom=n+"px",document.body.style.overflow="hidden"):e()),function(){r&&e()}}),[l,s]),i.a.createElement(zy,{in:l,timeout:{enter:0,exit:qy},mountOnEnter:!0,unmountOnExit:!0},(function(e){var a=l&&"entered"===e;return i.a.createElement("div",{className:Gy(null,t),style:r},i.a.createElement(Wy,{in:a,timeout:qy,unmountOnExit:!0,classNames:Gy("veil-transition")},i.a.createElement("div",{className:Gy("veil"),onClick:o})),i.a.Children.map(n,(function(e){var t=e;return t.type!==Yy?e:(e=Boolean(t.props.visible),i.a.cloneElement(t,oc()(oc()({},t.props),{},{visible:e&&a})))})))}))}function Vy(e){var t=e.onLogoIconClick,n=e.logoText,r=e.logoIcon,o=void 0===(u=e.logoIconSize)?24:u,a=e.logoTextSize,s=void 0===a?16:a,l=e.logoHref,c=e.logoIconClassName,u=e.isCompact;e="function"==typeof(a=e.logoWrapper),l="function"==typeof t?{}:{target:"_self",href:void 0===l?"/":l},c=i.a.createElement(ge,Object.assign({view:"flat",size:"l",className:Xy("btn-logo"),component:e?"span":void 0,onClick:t},l),i.a.createElement(he,{data:r,size:o,className:c})),n="function"==typeof n?n():i.a.createElement("div",{className:Xy("logo"),style:{fontSize:s}},n);return i.a.createElement("div",{className:Xy()},i.a.createElement("div",{className:Xy("logo-btn-place")},"function"==typeof a?a(c,u):c),!u&&("function"==typeof a?a(n,u):i.a.createElement("a",Object.assign({},l,{className:Xy("logo-link"),onClick:t}),n)))}(m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=(i=t.resolveArguments(e,n))[0],i=i[1];t.removeClasses(r,"exit"),t.addClass(r,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=(i=t.resolveArguments(e,n))[0],i=i[1];t.addClass(r,i?"appear":"enter","active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=(i=t.resolveArguments(e,n))[0],i=i[1]?"appear":"enter";t.removeClasses(r,i),t.addClass(r,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}Object(Bo.a)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){var n,r,i;r=t,(n=e).classList?n.classList.add(r):(i=r,((t=n).classList?i&&t.classList.contains(i):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+i+" "))||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)))}))}(e,r))},n.removeClasses=function(e,t){var n=(i=this.appliedClasses[t]).base,r=i.active,i=i.done;this.appliedClasses[t]={},n&&Hy(e,n),r&&Hy(e,r),i&&Hy(e,i)},n.render=function(){var e=((e=this.props).classNames,Object(Uo.a)(e,["classNames"]));return i.a.createElement(zy,Object(nn.a)({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(i.a.Component)).defaultProps={classNames:""},m.propTypes={};var Wy=m,Gy=(n(987),ie()("nv-drawer")),qy=300,Yy=function(e){var t=e.className,n=e.visible;e=e.children;return i.a.createElement(Wy,{in:n,timeout:qy,unmountOnExit:!0,classNames:Gy("item-transition")},i.a.createElement("div",{className:Gy("item",t)},e))},Xy=(n(985),ie()("nv-aside-header-logo")),Ky=new sa.I18N;function Zy(){return Ky.lang||sa.I18N.defaultLang||sa.I18N.lang}function Qy(e){return i.a.createElement("svg",e,i.a.createElement("path",{d:"M14 6.125a1.874 1.874 0 1 1 .001 3.749A1.874 1.874 0 0 1 14 6.125zm-5.906 0a1.874 1.874 0 1 1 0 3.749 1.874 1.874 0 0 1 0-3.749zM2 6.125a1.874 1.874 0 1 1 .001 3.749A1.874 1.874 0 0 1 2 6.125z",fill:"currentColor",fillRule:"evenodd"}))}y=n(554),G=n(555),Z="nv-aside-header",Ky.registerKeyset(sa.I18N.LANGS.en,Z,y),Ky.registerKeyset(sa.I18N.LANGS.ru,Z,G);var $y=Ky.keyset(Z),Jy=(n(970),ie()("nv-aside-header-tooltip")),eb=["right"],tb=function(e){var t=e.anchor,n=(e=e.text,i.a.useRef(t));return i.a.useEffect((function(){n.current=t}),[t]),t?i.a.createElement(kl,{className:Jy(),open:!0,anchorRef:n,placement:eb,disableEscapeKeyDown:!0,disableOutsideClick:!0,disableLayer:!0},i.a.createElement("div",{className:Jy("text")},e)):null};function nb(e){return-1===(e=e.findIndex((function(e){return e=e.current,Boolean(e)})))?void 0:e}function rb(e){var t=e.item,n=e.isCompact,r=e.collapseItems,o=e.onClick,a=i.a.useState(null),s=(h=ae()(a,2))[0],l=h[1],c=(e=i.a.useState(!1),(a=ae()(e,2))[0]),u=a[1],h=i.a.useRef(null),d=(e=t.tooltipText||t.title,a=t.iconSize||24,t.id===ob);r=i.a.createElement("div",{className:ib("menu-item"),ref:h,onClick:function(){"function"==typeof t.onItemClick&&t.onItemClick(t,!1),d&&(u(!c),l(null)),null!=o&&o()}},i.a.createElement("div",{className:ib("menu-icon-place")},n?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{onMouseEnter:function(e){return!c&&l(e.currentTarget)},onMouseLeave:function(){return l(null)},className:ib("btn-icon",{current:Boolean(t.current)})},t.icon&&i.a.createElement(he,{data:t.icon,size:a,className:ib("menu-icon")})),i.a.createElement(tb,{anchor:s,text:e})):t.icon&&i.a.createElement(he,{data:t.icon,size:a,className:ib("menu-icon")})),i.a.createElement("div",{className:ib("menu-title"),title:t.title},t.title),d&&Array.isArray(r)&&Boolean(h.current)&&i.a.createElement(kl,{placement:ab,open:c,anchorRef:h,onClose:function(){return u(!1)}},i.a.createElement("div",{className:ib("collapse-items-popup-content")},i.a.createElement(sh,{itemClassName:ib("root-collapse-item"),items:r,selectedItemIndex:nb(r),itemHeight:28,itemsHeight:28*r.length,virtualized:!1,filterable:!1,sortable:!1,renderItem:function(e){var t=i.a.createElement("div",{className:ib("collapse-item"),onClick:function(){"function"==typeof e.onItemClick&&e.onItemClick(e,!0)}},e.title);return"function"==typeof e.itemWrapper?e.itemWrapper(t,e,!0,n):e.link?i.a.createElement("a",{href:e.link,className:ib("link")},t):t}}))));return"function"==typeof t.itemWrapper?t.itemWrapper(r,t,!1,n):t.link?i.a.createElement("a",{href:t.link,className:ib("link")},r):r}n(986),Qy.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var ib=ie()("nv-composite-bar"),ob="nv-collapse-item-id",ab=["right-start","right-end","right"];function sb(e){var t=e.icon;e=e.className;return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:t},className:e})}function lb(e){var t=e.children,n=e.size;e=e.className;return i.a.createElement("div",{className:fb({size:void 0===n?"l":n},e)},t)}rb.displayName="Item";var cb=function(e){X()(n,e);var t=ss()(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={height:"auto",activeItemIndex:void 0},e.currentItemsCount=0,e.skipCheckResize=!1,e.onResize=function(t){t=t.height;e.skipCheckResize?e.skipCheckResize=!1:t<(t=40*e.currentItemsCount)?e.state.height!==t&&(e.skipCheckResize=!0,e.setState({height:t})):"auto"!==e.state.height&&(e.skipCheckResize=!0,e.setState({height:"auto"}))},e}return q()(n,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:ib(),style:{height:this.state.height}},0!==this.props.items.length&&i.a.createElement(Nc.a,{onResize:this.onResize},(function(t){var n=t.width;t=t.height;return i.a.createElement("div",{style:{width:n,height:t}},e.renderMenu(t))}))))}},{key:"renderMenu",value:function(e){var t,n,r=this.props,o=r.items,a=r.isCompact,s=r.onClickItem,l=Math.max(1,Math.floor(e/40)),c=null;return 1===l?(n=o.filter((function(e){return e.pinned})),0<(c=J()(o.filter((function(e){return!e.pinned})))).length&&n.push(this.getCollapseItem())):l<o.length?(e=o.filter((function(e,t){return e.pinned&&l-1<=t})).length,t=o.reduceRight((function(e,t,n){return n=!t.pinned&&n<l-1&&0<e.extraCount,e.flags.unshift(t.pinned||n),{flags:e.flags,extraCount:e.extraCount-Number(n)}}),{flags:[],extraCount:e}).flags,n=o.filter((function(e,n){return e.pinned||n<l-1&&!t[n]})),0<(c=o.filter((function(e,n){return!e.pinned&&(l-1<=n||t[n])}))).length&&n.push(this.getCollapseItem())):n=J()(o),this.currentItemsCount=n.length,i.a.createElement(sh,{items:n,selectedItemIndex:a?void 0:nb(n),itemHeight:40,itemClassName:ib("root-menu-item",{compact:a}),itemsHeight:40*n.length,virtualized:!1,filterable:!1,sortable:!1,renderItem:function(e){return i.a.createElement(rb,{item:e,isCompact:a,collapseItems:c,onClick:function(){return null==s?void 0:s(e)}})}})}},{key:"getCollapseItem",value:function(){return{id:ob,title:$y("label_more"),icon:Qy,iconSize:16}}}]),n}(i.a.Component),ub=(m=n(146),n.n(m)),hb=(y=n(556),n.n(y)),db=(G=n(258),n.n(G)),fb=(n(994),ie()("nv-round-icon"));function pb(e){var t=e.pinned,n=e.className;e=e.onClick;return i.a.createElement(ge,{view:"flat",className:vb({pinned:t},n),onClick:e},i.a.createElement(he,t?gb:yb))}n(995);var mb,vb=ie()("nv-services-navigation-pin-btn"),gb={data:function(e){return r.createElement("svg",Object.assign({width:16,height:16,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M14.501 7.175l1.414-1.414L10.239.085 8.825 1.499l1.305 1.305-2.72 2.719c-1.755-.61-3.779-.231-5.181 1.17l2.832 2.832L0 14.585V16h1.414l5.061-5.06 2.831 2.83c1.402-1.401 1.781-3.424 1.171-5.18l2.72-2.72 1.304 1.305z",fill:"currentColor"}))},size:16,className:vb("pin-icon")},yb={data:function(e){return r.createElement("svg",Object.assign({width:16,height:16,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M9.209 8.124l.206.592a3.984 3.984 0 01-.316 3.348L3.853 6.818c.984-.578 2.236-.7 3.348-.316l.592.206 3.163-3.163 1.417 1.416-3.164 3.163zm5.292-1.034l1.414-1.414-.714-.715L10.956.717 10.239 0 8.825 1.414l.717.717-2.304 2.304a6.024 6.024 0 00-5.596 1.586l-.707.707 3.419 3.419L0 14.501v1.414h1.414l4.354-4.353 3.42 3.42.708-.707a5.94 5.94 0 001.587-5.597l2.303-2.303.715.715z",fill:"currentColor"}))},size:16,className:vb("pin-icon")};(Z=mb=mb||{})[Z.ServiceList=0]="ServiceList",Z[Z.AllServicesPanel=1]="AllServicesPanel";var bb=i.a.createContext({});m=n(557),y=n(558),G="nv-services-navigation";Ky.registerKeyset(sa.I18N.LANGS.en,G,m),Ky.registerKeyset(sa.I18N.LANGS.ru,G,y);var Cb=Ky.keyset(G),wb=(n(993),ie()("nv-services-navigation-all-services-panel")),Eb=function(e){X()(n,e);var t=ss()(n);function n(){var e;W()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).context={},e.state={},e.categoryAnchorMap=new Map,e.scrollTimeout=void 0,e.onScrollThrottled=cc()((function(){var t,n,r=e.props.onScrollToCategory,i=e.state.waitForVisibleCategoryId;i&&(n=null==(t=e.categoryAnchorMap.get(i))?void 0:t.getBoundingClientRect());var o,a=null,s=ub()(e.categoryAnchorMap);try{for(s.s();!(o=s.n()).done;){var l=ae()(o.value,2),c=l[0];if(function(e,t){return 0<e.height&&0<e.width&&e.top<=window.innerHeight&&e.bottom>=(1<arguments.length&&void 0!==t?t:40)&&e.left<=window.innerWidth&&0<=e.right}(l[1].getBoundingClientRect())&&(a=c,!n||c===i))break}}catch(t){s.e(t)}finally{s.f()}a&&!i&&null!=r&&r(a)}),300),e.onScroll=function(){return e.scrollTimeout&&clearTimeout(e.scrollTimeout),e.scrollTimeout=window.setTimeout((function(){e.scrollTimeout=void 0,e.setState({waitForVisibleCategoryId:void 0})}),300),e.onScrollThrottled()},e.renderServiceCard=function(t){var n=(v=e.props).pinnedServices,r=v.onChangePinnedServices,o=v.filter,a=v.installationType,s=t.id,l=t.link,c=t.icon,u=t.title,h=t.description,d=void 0!==(m=t.allowRenderAsHtml)&&m,f=n.includes(s),p=""!==o,m=(v=e.context).wrappedServices,v=(o=v.serviceItemWrapper,v.onServiceClickHandler);h=i.a.createElement("div",{className:wb("service-card",{pinned:f})},i.a.createElement("div",{className:wb("service-caption")},"external"===a?i.a.createElement(lb,{size:"m",className:wb("service-icon",{external:!0})},i.a.createElement(sb,{icon:c})):i.a.createElement(sb,{icon:c,className:wb("service-icon")}),i.a.createElement("div",{className:wb("service-name"),dangerouslySetInnerHTML:d?{__html:u}:void 0},d?void 0:u),i.a.createElement(pb,{pinned:f,onClick:function(e){e.preventDefault(),e.stopPropagation(),n.includes(s)?r(n.filter((function(e){return e!==s}))):r([].concat(J()(n),[s]))}})),i.a.createElement("div",{className:wb("service-description"),dangerouslySetInnerHTML:d?{__html:h}:void 0},d?void 0:h));return m&&m.includes(s)&&o&&(v=o(t,h,mb.AllServicesPanel,p,v))?v:i.a.createElement("a",{href:l,key:s,className:wb("link")},h)},e}return q()(n,[{key:"componentDidUpdate",value:function(e){dc()(e.categories,this.props.categories)||this.onScrollThrottled()}},{key:"componentWillUnmount",value:function(){this.scrollTimeout&&clearTimeout(this.scrollTimeout)}},{key:"render",value:function(){var e=this.props.services;e=0===Object.keys(e).length;return i.a.createElement("div",{className:wb({nocontent:e}),onScroll:this.onScroll},i.a.createElement("div",{className:wb("header")},i.a.createElement("div",{className:wb("controls")},i.a.createElement("div",{className:wb("filter")},i.a.createElement(ic,{className:wb("filter-input"),placeholder:Cb("label_placeholder-search-services"),hasClear:!0,value:this.props.filter,onUpdate:this.props.setFilter,autoFocus:!0})))),i.a.createElement("div",{className:wb("content")},this.renderGroupView()))}},{key:"scrollToCategory",value:function(e){this.categoryAnchorMap.has(e)&&(this.setState({waitForVisibleCategoryId:e}),null!==(e=this.categoryAnchorMap.get(e))&&void 0!==e&&e.scrollIntoView({behavior:"smooth"}))}},{key:"renderGroupView",value:function(){var e=this,t=this.props,n=t.categories;return 0===(n=function(e,t){var n,r=[],i=ub()(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.id,s=o.title,l=o.services.map((function(t){return e[t]})).filter((function(e){return Boolean(null==e?void 0:e.link)}));l.length&&r.push({servicesItems:l,categoryId:a,categoryTitle:s})}}catch(t){i.e(t)}finally{i.f()}return r}(t.services,n)).length?this.renderNotFound():n.map((function(t){var n=t.servicesItems,r=t.categoryId;t=t.categoryTitle;return i.a.createElement("div",{key:r,className:wb("group"),ref:function(t){t?e.categoryAnchorMap.set(r,t):e.categoryAnchorMap.delete(r)}},i.a.createElement("div",{className:wb("group-caption")},t),e.renderGrid(n))}))}},{key:"renderGrid",value:function(e){return i.a.createElement("div",{className:wb("grid")},e.map(this.renderServiceCard))}},{key:"renderNotFound",value:function(){return i.a.createElement("span",null,Cb("label_not-found"))}}]),n}(i.a.Component);Eb.contextType=bb;var Sb,Ob=["featured"];function xb(e,t){var n,r=e.categories,i=e.services,o=(t=(t=(t=(t=t).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).replace(/\s/g," ")).split(" ").filter(Boolean).map((function(e){return"(^|[^\\wа-я])".concat(e)})).join(".*?"),new RegExp(t,"i")),a={},s=ub()(r);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(!Ob.includes(l.id)&&o.test(l.title)){var c,u=ub()(l.services);try{for(u.s();!(c=u.n()).done;){var h=c.value;a[h]=i[h]}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){s.e(e)}finally{s.f()}for(var d=0,f=Object.values(i);d<f.length;d++){var p=f[d];a[p.id]||[p.title,p.description].concat(J()(p.keywords||[])).some((function(e){return o.test(e)}))&&(a[p.id]=p)}return a}function _b(e,t){return e.filter((function(e){return e.services.some((function(e){return t[e]}))}))}(Z=Sb=Sb||{}).Loading="loading",Z.Success="success",Z.Failed="failed";var kb=[{id:"console",icon:"console",link:"https://console.cloud.yandex.ru",title:"label_console-title",description:"",docLink:"",wikiLink:"",keywords:[]},{id:"monitoring",icon:"monitoring",link:"https://monitoring.cloud.yandex.ru",title:"label_monitoring-title",description:"",docLink:"",wikiLink:"",keywords:[]},{id:"datalens",icon:"datalens",link:"https://datalens.yandex.ru",title:"label_datalens-title",description:"",docLink:"",wikiLink:"",keywords:[]},{id:"managed-elasticsearch",icon:"console",link:"https://console-preprod.cloud.yandex.ru/link/managed-elasticsearch",title:"label_elasticsearch-title",description:"",docLink:"",wikiLink:"",keywords:[]}];m=n(337);function Tb(e){return"testing"===(0<arguments.length&&void 0!==e?e:"production")?"https://shared-services-api-test.yandex-team.ru/v1/settings/navigation":"https://shared-services-api.yandex-team.ru/v1/settings/navigation"}var Nb=new(function(e){X()(n,e);var t=ss()(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"isMockEnabled",value:function(){return Boolean(Object({BEM_LANG:"ru"}).STORYBOOK_MOCK_API)}},{key:"resolvedData",value:function(e){return Promise.resolve(e)}},{key:"isCancelled",value:function(e){return Boolean(null==e?void 0:e.isCancelled)}},{key:"getServicesConfig",value:function(e){var t=e.env;e=function(e,t,n){var r=1<arguments.length&&void 0!==t?t:"production",i=2<arguments.length&&void 0!==n?n:"ru";switch(e=0<arguments.length&&void 0!==e?e:"internal"){case"internal":return"testing"===r?"https://yastatic.net/s3/cloud/shared/internal/services-test.json":"https://yastatic.net/s3/cloud/shared/internal/services.json";case"external":return("testing"===r?"https://storage.cloud-preprod.yandex.net/services-static/services-external-":"https://storage.yandexcloud.net/services-static/services-external-").concat(i,".json");default:throw new Error("Unknown environment")}}(e.installationType,t,e.lang);return this.get(e,{rand:Math.random()},{requestConfig:{withCredentials:!1}})}},{key:"getUserSettings",value:function(e,t){if(this.isMockEnabled())return this.resolvedData({pins:["solomon","rtmr","yt","broken-id-service"]});var n=e.env;e=v()(e,["env"]),n=Tb(n);return this.get(n,e,t)}},{key:"updateUserSettings",value:function(e,t){if(this.isMockEnabled())return this.resolvedData({message:"Successfully updated"});var n=e.env;e=v()(e,["env"]),n=Tb(n);return this.patch(n,e,{},t)}}]),n}((y=n.n(m)).a));function Pb(e){return n.e(4).then(n.t.bind(null,1187,7)).then((function(t){return(0,t.default)(e,{allowedTags:["br","b","i","strong","em","sup","sub","a","ul","ol","li"]})}))}function Ib(e){var t=e.categories,n=e.selectedCategoryId,r=e.onSelectCategory,o=e.className,a=i.a.useCallback((function(e){e.id!==n&&null!=r&&r(e)}),[r]);e=i.a.useMemo((function(){return n?t.findIndex((function(e){return e.id===n})):void 0}),[t,n]);return i.a.createElement("div",{className:Db(null,o)},i.a.createElement(sh,{itemHeight:40,itemsHeight:40*t.length,filterable:!1,virtualized:!1,items:t,renderItem:function(e){return e.title},selectedItemIndex:e,onItemClick:a}))}function Rb(e){var t=e.services;e=e.className,t=Object.values(t);return i.a.createElement("div",{className:Ab(null,e)},i.a.createElement(sh,{itemHeight:40,itemsHeight:40*t.length,filterable:!1,virtualized:!1,items:t,renderItem:function(e){return i.a.createElement(jb,{item:e},i.a.createElement("div",{className:Ab("item")},i.a.createElement(sb,{className:Ab("item-icon"),icon:e.icon}),i.a.createElement("div",{className:Ab("item-title")},e.title)))}}))}function jb(e){var t=e.item,n=e.children,r=(o=i.a.useContext(bb)).wrappedServices,o=(e=o.serviceItemWrapper,o.onServiceClickHandler);return r&&r.includes(t.id)&&e&&(o=e(t,n,mb.ServiceList,!1,o))?o:i.a.createElement("a",{href:t.link,className:Ab("link")},n)}n(991);var Db=ie()("nv-services-navigation-categories-list"),Ab=(n(992),ie()("nv-services-navigation-services-list"));n(990);var Lb=ie()("nv-services-navigation"),Mb=["featured"],Fb="pinned",Bb={textSize:"s",showIcons:!0},Hb={services:{},categories:[]};function zb(e,t){return t.length?[{id:Fb,title:Cb("label_favorites-services"),services:t}].concat(J()(e.filter((function(e){return e.id!==Fb})))):e.filter((function(e){return e.id!==Fb}))}var Ub=function(e){X()(a,e);var t,n,r,o=ss()(a);function a(){var e;W()(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={currentAdditionalPanel:null,pinnedServices:"internal"===e.props.installationType?[]:kb.map((function(e){return e.id})),filter:"",status:"internal"===e.props.installationType?Sb.Loading:Sb.Success,config:Hb,services:{},filteredServices:{},navigationServices:{},categories:[],filteredCategories:[],settings:e.mergeSettings(),serviceItemRenderContextData:{wrappedServices:e.props.wrappedServices,serviceItemWrapper:e.props.serviceItemWrapper,onServiceClickHandler:e.props.onServiceClickHandler},selectedCategoryId:void 0},e.isUnmounted=!1,e.toaster=new Pe,e.allServicesPanelRef=i.a.createRef(),e.setFilter=function(t){var n=(r=e.state).services,r=_b(r=r.categories,n=xb({categories:r,services:n},t));e.setState({filter:t,filteredServices:n,filteredCategories:r})},e.onChangePinnedServices=function(t){var n=zb(e.state.categories,t);e.setState({categories:n,pinnedServices:t},(function(){var n=oc()({pins:t},e.state.settings);e.updateUserSettings(n,"onChangePinnedServices")}))},e}return q()(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e){!0===e.visible&&!1===this.props.visible&&null!==this.state.currentAdditionalPanel&&this.setState({currentAdditionalPanel:null}),e.installationType!==this.props.installationType&&this.init(),e.wrappedServices==this.props.wrappedServices&&e.serviceItemWrapper==this.props.serviceItemWrapper&&e.onServiceClickHandler==this.props.onServiceClickHandler||this.setState({serviceItemRenderContextData:{wrappedServices:this.props.wrappedServices,serviceItemWrapper:this.props.serviceItemWrapper,onServiceClickHandler:this.props.onServiceClickHandler}})}},{key:"componentWillUnmount",value:function(){this.isUnmounted=!0}},{key:"render",value:function(){var e=this.state.status;return i.a.createElement("div",{className:Lb("aside")},i.a.createElement("div",{className:Lb("aside-header")},Cb("section_all-services")),e===Sb.Success?this.renderContent():this.renderLoadingOrFailed())}},{key:"renderContent",value:function(){var e=this,t=(l=this.state).pinnedServices,n=l.filteredServices,r=l.categories,o=l.filteredCategories,a=l.selectedCategoryId,s=l.navigationServices,l=this.props.installationType;return i.a.createElement(bb.Provider,{value:this.state.serviceItemRenderContextData},i.a.createElement("div",{className:Lb("aside-content")},i.a.createElement("div",{className:Lb("tab-panel")},i.a.createElement(Ib,{className:Lb("categories-list",{empty:0===o.length}),categories:o,selectedCategoryId:a,onSelectCategory:function(t){e.allServicesPanelRef.current&&(e.setState({selectedCategoryId:t.id}),e.allServicesPanelRef.current.scrollToCategory(t.id))}}),"external"===l&&i.a.createElement(Rb,{services:s,className:Lb("services-list")})),i.a.createElement(Eb,{installationType:l,services:n,pinnedServices:t,onChangePinnedServices:this.onChangePinnedServices,setFilter:this.setFilter,filter:this.state.filter,categories:r,ref:this.allServicesPanelRef,onScrollToCategory:function(t){e.setState({selectedCategoryId:t})}})))}},{key:"renderLoadingOrFailed",value:function(){var e=this;return this.state.status===Sb.Loading?i.a.createElement("div",{className:Lb("panel")},i.a.createElement(Ql,{size:"m"})):i.a.createElement("div",{className:Lb("panel")},i.a.createElement("div",{className:Lb("error")},i.a.createElement("span",{className:Lb("error-text")},Cb("label_failed-load-services")),i.a.createElement("br",null),i.a.createElement(ge,{view:"action",onClick:function(){return e.init()}},Cb("button_retry"))))}},{key:"init",value:(r=$()(ee.a.mark((function e(){var t,n,r,i,o,a,s,l,c,u=this;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,o=n.installationType,t=n.servicesConfigEnvironment,n=n.lang,r=void 0===n?Zy():n,e.prev=1,this.setState({status:Sb.Loading}),e.next=5,Promise.all([Nb.getServicesConfig({env:t,installationType:o,lang:r}),this.getUserSettings()]);case 5:if(o=e.sent,o=ae()(o,2),i=o[0],o=o[1],a=o.pins||[],s=hb()(o,Object.keys(Bb)),this.isUnmounted)return e.abrupt("return");e.next=13;break;case 13:l=this.getCategories(i,a),c=this.getConsoleOnlyCategories(i),this.getServices(i).then((function(e){var n,o=xb({categories:l,services:e},""),h=_b(l,e),d=Object.keys(e).filter((function(e){return c.some((function(t){return t.services.includes(e)}))})).reduce((function(t,n){return t[n]=e[n],t}),{});u.setState({status:Sb.Success,filter:"",filteredServices:o,filteredCategories:h,config:i,pinnedServices:(o=a,h=i,n=Object.keys(h.services),o.filter((function(e){return n.includes(e)}))),settings:u.mergeSettings(s),services:e,categories:l,selectedCategoryId:null===(o=l[0])||void 0===o?void 0:o.id,navigationServices:oc()(oc()({},d),function(e,t){var n=0<arguments.length&&void 0!==e?e:"testing";e=1<arguments.length&&void 0!==t?t:"ru",t=location.hostname.endsWith(".com")?"com":"ru";return{console:{id:"console",title:"ru"===e?"Консоль управления":"Management console",link:t=("testing"===n?"https://console-preprod.cloud.yandex.":"https://console.cloud.yandex.").concat(t),icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.10899 5.54601C3 5.75992 3 6.03995 3 6.6V9.4C3 9.96005 3 10.2401 3.10899 10.454C3.20487 10.6422 3.35785 10.7951 3.54601 10.891C3.75992 11 4.03995 11 4.6 11H9.4C9.96005 11 10.2401 11 10.454 10.891C10.6422 10.7951 10.7951 10.6422 10.891 10.454C11 10.2401 11 9.96005 11 9.4V6.6C11 6.03995 11 5.75992 10.891 5.54601C10.7951 5.35785 10.6422 5.20487 10.454 5.10899C10.2401 5 9.96005 5 9.4 5H4.6C4.03995 5 3.75992 5 3.54601 5.10899C3.35785 5.20487 3.20487 5.35785 3.10899 5.54601ZM3.10899 13.546C3 13.7599 3 14.0399 3 14.6V17.4C3 17.9601 3 18.2401 3.10899 18.454C3.20487 18.6422 3.35785 18.7951 3.54601 18.891C3.75992 19 4.03995 19 4.6 19H9.4C9.96005 19 10.2401 19 10.454 18.891C10.6422 18.7951 10.7951 18.6422 10.891 18.454C11 18.2401 11 17.9601 11 17.4V14.6C11 14.0399 11 13.7599 10.891 13.546C10.7951 13.3578 10.6422 13.2049 10.454 13.109C10.2401 13 9.96005 13 9.4 13H4.6C4.03995 13 3.75992 13 3.54601 13.109C3.35785 13.2049 3.20487 13.3578 3.10899 13.546ZM13 6.6C13 6.03995 13 5.75992 13.109 5.54601C13.2049 5.35785 13.3578 5.20487 13.546 5.10899C13.7599 5 14.0399 5 14.6 5H19.4C19.9601 5 20.2401 5 20.454 5.10899C20.6422 5.20487 20.7951 5.35785 20.891 5.54601C21 5.75992 21 6.03995 21 6.6V9.4C21 9.96005 21 10.2401 20.891 10.454C20.7951 10.6422 20.6422 10.7951 20.454 10.891C20.2401 11 19.9601 11 19.4 11H14.6C14.0399 11 13.7599 11 13.546 10.891C13.3578 10.7951 13.2049 10.6422 13.109 10.454C13 10.2401 13 9.96005 13 9.4V6.6ZM13.109 13.546C13 13.7599 13 14.0399 13 14.6V17.4C13 17.9601 13 18.2401 13.109 18.454C13.2049 18.6422 13.3578 18.7951 13.546 18.891C13.7599 19 14.0399 19 14.6 19H19.4C19.9601 19 20.2401 19 20.454 18.891C20.6422 18.7951 20.7951 18.6422 20.891 18.454C21 18.2401 21 17.9601 21 17.4V14.6C21 14.0399 21 13.7599 20.891 13.546C20.7951 13.3578 20.6422 13.2049 20.454 13.109C20.2401 13 19.9601 13 19.4 13H14.6C14.0399 13 13.7599 13 13.546 13.109C13.3578 13.2049 13.2049 13.3578 13.109 13.546Z" fill="currentColor"/></svg>'},billing:{id:"billing",title:"ru"===e?"Биллинг":"Billing",link:"".concat(t,"/billing"),icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 17.5C3 18.3438 3.65625 19 4.5 19H19.5C20.3125 19 21 18.3438 21 17.5V12H3V17.5ZM9 15.375C9 15.1875 9.15625 15 9.375 15H13.625C13.8125 15 14 15.1875 14 15.375V16.625C14 16.8438 13.8125 17 13.625 17H9.375C9.15625 17 9 16.8438 9 16.625V15.375ZM5 15.375C5 15.1875 5.15625 15 5.375 15H7.625C7.8125 15 8 15.1875 8 15.375V16.625C8 16.8438 7.8125 17 7.625 17H5.375C5.15625 17 5 16.8438 5 16.625V15.375ZM21 6.5C21 5.6875 20.3125 5 19.5 5H4.5C3.65625 5 3 5.6875 3 6.5V8H21V6.5Z" fill="currentColor"/></svg>'},support:{id:"support",title:"ru"===e?"Поддержка":"Support",link:"".concat(t,"/support"),icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12C21 7.06452 16.9355 3 12 3C7.02823 3 3 7.06452 3 12C3 16.9718 7.02823 21 12 21C16.9355 21 21 16.9718 21 12ZM12.2177 5.97581C14.2863 5.97581 16.4637 7.57258 16.4637 9.67742C16.4637 12.5081 13.4516 12.5444 13.4516 13.5605V13.5968C13.4516 13.8508 13.2339 14.0323 13.0161 14.0323H10.9839C10.7298 14.0323 10.5484 13.8508 10.5484 13.5968V13.4516C10.5484 11.9637 11.6734 11.3831 12.5081 10.9113C13.2339 10.5121 13.7056 10.2218 13.7056 9.67742C13.7056 8.95161 12.7621 8.47984 12.0363 8.47984C11.0565 8.47984 10.621 8.95161 9.96774 9.78629C9.82258 9.96774 9.53226 10.004 9.35081 9.85887L8.08065 8.91532C7.89919 8.77016 7.8629 8.51613 8.00806 8.29839C8.9879 6.81048 10.2581 5.97581 12.2177 5.97581ZM12 14.9758C12.9073 14.9758 13.6694 15.7379 13.6694 16.6452C13.6694 17.5887 12.9073 18.3145 12 18.3145C11.0565 18.3145 10.3306 17.5887 10.3306 16.6452C10.3306 15.7379 11.0565 14.9758 12 14.9758Z" fill="currentColor"/></svg>'}}}(t,r))})})),e.next=23;break;case 18:if(e.prev=18,e.t0=e.catch(1),this.isUnmounted)return e.abrupt("return");e.next=22;break;case 22:this.setState({status:Sb.Failed});case 23:case"end":return e.stop()}}),e,this,[[1,18]])}))),function(){return r.apply(this,arguments)})},{key:"getUserSettings",value:(n=$()(ee.a.mark((function e(){var t,n,r,i;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,t=r.installationType,i=r.servicesConfigEnvironment,n=r.sdk,r=oc()(oc()({},Bb),{},{pins:[]}),"internal"===t)return e.next=5,Nb.getUserSettings({env:i});e.next=8;break;case 5:return e.abrupt("return",e.sent);case 8:if(n)return e.prev=9,e.next=12,n.iam.getUserAccountSettings({responseJsonPath:["/navigation"]});e.next=19;break;case 12:return i=e.sent,e.abrupt("return",db()(i,["userSettings","navigation"],r));case 16:e.prev=16,e.t0=e.catch(9),this.isUnmounted||400==e.t0.status||this.toaster.createToast({title:Cb("toast_failed-get-settings"),name:"getUserSettings",type:"error"});case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,this,[[9,16]])}))),function(){return n.apply(this,arguments)})},{key:"updateUserSettings",value:(t=$()(ee.a.mark((function e(t,n){var r,i,o;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,i=r.installationType,o=r.servicesConfigEnvironment,r=r.sdk,i="internal"===i,e.prev=2,i)return e.next=6,Nb.updateUserSettings(oc()({env:o},t),{concurrentId:n});e.next=8;break;case 6:e.next=12;break;case 8:if(r)return o=this.getJsonPatchForSettings(t),e.next=12,r.iam.updateUserAccountSettings({jsonPatch:o},{concurrentId:n});e.next=12;break;case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(2),this.isUnmounted||Nb.isCancelled(e.t0))return e.abrupt("return");e.next=18;break;case 18:this.toaster.createToast({title:Cb("toast_failed-update-settings"),name:"updateUserSettings",type:"error"});case 19:case"end":return e.stop()}}),e,this,[[2,14]])}))),function(e,n){return t.apply(this,arguments)})},{key:"extractLabel",value:function(e,t){return"string"==typeof e?e:null==e?void 0:e[t]}},{key:"getServices",value:function(){for(var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.state.config,n=[],r=(t=t.services,Zy()),i=0,o=Object.values(t);i<o.length;i++)!function(){var t=o[i],a=e.extractLabel(t.title,r),s=e.extractLabel(t.description,r);n.push(Promise.all([Pb(a),Pb(s)]).then((function(e){e=(n=ae()(e,2))[0];var n=n[1];return oc()(oc()({},t),{},{title:e,description:n,allowRenderAsHtml:!0})})).catch((function(){return oc()(oc()({},t),{},{title:a,description:s,allowRenderAsHtml:!1})})))}();return Promise.all(n).then((function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})}))}},{key:"getCategories",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.state.config,n=1<arguments.length?arguments[1]:void 0,r=[],i=(t=t.categories,Zy()),o=ub()(t);try{for(o.s();!(e=o.n()).done;){var a=e.value;a.consoleOnly||Mb.includes(a.id)||r.push(oc()(oc()({},a),{},{title:this.extractLabel(a.title,i)}))}}catch(e){o.e(e)}finally{o.f()}return zb(r,n)}},{key:"getConsoleOnlyCategories",value:function(){var e,t=[],n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.state.config).categories,r=Zy(),i=ub()(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.consoleOnly&&t.push(oc()(oc()({},o),{},{title:this.extractLabel(o.title,r)}))}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"mergeSettings",value:function(e){return oc()(oc()({},Bb),e)}},{key:"getJsonPatchForSettings",value:function(e){return JSON.stringify([{op:"replace",path:"/navigation",value:e}])}}]),a}(i.a.PureComponent);Ub.defaultProps={installationType:"internal",servicesConfigEnvironment:"production",onServiceClickHandler:Y.a};var Vb,Wb=i.a.createContext(void 0),Gb=i.a.createContext(void 0);function qb(e){var t=e.children,n=i.a.useState({}),r=(n=(e=ae()(n,2))[0],e[1]);e=i.a.useCallback((function(e,t){r((function(n){return n[e]===t?n:oc()(oc()({},n),{},p()({},e,t))}))}),[r]);return i.a.createElement(Gb.Provider,{value:e},i.a.createElement(Wb.Provider,{value:n},t))}function Yb(e){var t=e.name,n=e.slotRef;e=e.children,t=function(e){return function(){var e=i.a.useContext(Wb);if(void 0===e)throw new Error("useSlots must be used within a SlotsProvider");return e}()[e]}(t);return"function"==typeof n?n(t||null):n&&(n.current=t),t?a.a.createPortal(e,t):null}(G=Vb=Vb||{}).InfraBuzzer="infra-buzzer",G.Services="services",G.Settings="settings",G.User="user",G.Favorites="favorites",G.BugReport="bug-report",G.Support="support",G.Notifications="notifications",G.Search="search";var Xb,Kb,Zb,Qb,$b="nvAsideHeader";(Z=Xb=Xb||{}).SETTINGS_OPEN="SETTINGS_OPEN",Z.SETTINGS_CLOSE="SETTINGS_CLOSE",(m=Kb=Kb||{}).Services="services",m.Settings="settings",m.Favorites="favorites",(G=Zb=Zb||{}).Notifications="notifications",G.NotificationsWithDot="notifications-with-new",G.Search="search",G.Bug="bug",G.Support="support",G.Settings="settings",G.SettingsWithDot="settings-with-dot",G.Star="star",G.Services="services",(Z=Qb=Qb||{}).Normal="normal",Z.WithDot="with-dot";var Jb=function(e){return r.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M20.763 14.255l-1.63-.912c.19-.911.19-1.784 0-2.696l1.63-.911a.437.437 0 00.19-.532 9.714 9.714 0 00-2.046-3.607.459.459 0 00-.569-.076l-1.63.911a7.611 7.611 0 00-2.273-1.329v-1.86c0-.19-.151-.38-.379-.418-1.402-.342-2.804-.304-4.13 0-.227.038-.34.227-.34.417v1.861c-.872.304-1.63.76-2.312 1.367l-1.63-.95a.459.459 0 00-.568.077A9.714 9.714 0 003.03 9.204c-.076.19 0 .418.19.532l1.629.911a8.05 8.05 0 000 2.696l-1.63.912a.437.437 0 00-.19.531 9.713 9.713 0 002.047 3.608c.152.152.379.19.568.076l1.63-.912a7.355 7.355 0 002.311 1.33v1.86c0 .19.152.38.341.456 1.402.304 2.804.266 4.13 0 .228-.076.38-.266.38-.456v-1.86a7.612 7.612 0 002.273-1.33l1.63.912a.458.458 0 00.568-.076c.947-1.025 1.629-2.24 2.084-3.608a.511.511 0 00-.228-.531zm-8.753.76c-1.705 0-3.031-1.33-3.031-3.039a3.02 3.02 0 013.031-3.038 3.044 3.044 0 013.031 3.038 3.02 3.02 0 01-3.03 3.038z",fill:"currentColor"}))};var eC=(m={},p()(m,Zb.Notifications,(function(e){return r.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M12.003 21c1.25 0 2.249-1 2.249-2.284H9.719c0 1.285 1 2.284 2.284 2.284zm7.674-5.318c-.678-.75-1.998-1.856-1.998-5.533 0-2.748-1.928-4.96-4.57-5.532v-.75c0-.606-.499-1.142-1.106-1.142a1.15 1.15 0 00-1.142 1.143v.75c-2.641.57-4.568 2.783-4.568 5.531 0 3.677-1.321 4.783-2 5.533-.213.214-.32.5-.285.75 0 .606.429 1.142 1.142 1.142h13.67c.715 0 1.143-.536 1.178-1.143 0-.25-.107-.535-.32-.75z",fill:"currentColor"}))})),p()(m,Zb.NotificationsWithDot,(function(e){return r.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.252 18.716c0 1.285-1 2.284-2.249 2.284-1.285 0-2.284-1-2.284-2.284h4.533zm5.26-3.213c.058.062.113.121.165.179.215.214.322.5.322.75-.036.606-.464 1.142-1.178 1.142H5.15c-.714 0-1.143-.536-1.143-1.143-.035-.25.072-.535.286-.75l.166-.178c.706-.755 1.833-1.958 1.833-5.354 0-2.748 1.927-4.96 4.568-5.532v-.75c0-.606.5-1.142 1.142-1.142.607 0 1.107.536 1.107 1.143v.749c.346.075.68.178.999.307a3.79 3.79 0 003.573 5.514c.061 3.176 1.143 4.332 1.83 5.065z",fill:"currentColor"}),r.createElement("circle",{cx:17.482,cy:6.652,r:2.5,fill:"#FF0400",fillOpacity:.8}))})),p()(m,Zb.Search,(function(e){return r.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M20.767 18.559l-3.518-3.512c-.176-.14-.387-.246-.598-.246h-.563a7.316 7.316 0 001.548-4.496C17.636 6.301 14.329 3 10.318 3 6.272 3 3 6.3 3 10.305a7.306 7.306 0 007.318 7.306 7.278 7.278 0 004.503-1.546v.597c0 .211.07.422.246.598l3.483 3.477c.352.35.88.35 1.197 0l.985-.984c.351-.316.351-.843.035-1.194zm-10.45-3.758a4.486 4.486 0 01-4.503-4.496 4.508 4.508 0 014.504-4.495c2.463 0 4.503 2.037 4.503 4.495 0 2.494-2.04 4.496-4.503 4.496z",fill:"currentColor"}))})),p()(m,Zb.Bug,(function(e){return r.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M20.248 12.66a1.021 1.021 0 00-1-1.065H17.44V9.723l1.485-1.518a.996.996 0 000-1.453.996.996 0 00-1.453 0l-1.776 1.744H8.303L6.528 6.752a.996.996 0 00-1.453 0 .996.996 0 000 1.453l1.517 1.518v1.872H4.784c-.581 0-1.065.484-1.033 1.065 0 .582.484 1.001 1.033 1.001h1.808v.517c0 .71.13 1.388.42 2.002l-1.937 1.936a.996.996 0 000 1.453.996.996 0 001.453 0l1.775-1.775a4.646 4.646 0 002.938 1.033v-7.878c0-.193.162-.387.388-.387h.774c.194 0 .388.194.388.387v7.878a4.624 4.624 0 002.905-1.033l1.776 1.775a.996.996 0 001.453 0 .996.996 0 000-1.453l-1.937-1.936c.29-.614.452-1.292.452-2.002v-.517h1.775c.55 0 1.034-.42 1.034-1zm-8.2-9.33c-2.002 0-3.616 1.647-3.616 3.616h7.232c0-1.97-1.646-3.616-3.616-3.616z",fill:"currentColor"}))})),p()(m,Zb.Support,(function(e){return r.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M21 12c0-4.936-4.065-9-9-9-4.972 0-9 4.064-9 9 0 4.972 4.028 9 9 9 4.935 0 9-4.028 9-9zm-8.782-6.024c2.068 0 4.246 1.596 4.246 3.701 0 2.831-3.012 2.867-3.012 3.883v.037a.441.441 0 01-.436.435h-2.032a.42.42 0 01-.436-.435v-.146c0-1.487 1.125-2.068 1.96-2.54.726-.399 1.198-.69 1.198-1.234 0-.725-.944-1.197-1.67-1.197-.98 0-1.415.472-2.068 1.306a.453.453 0 01-.617.073l-1.27-.944c-.182-.145-.218-.399-.073-.617.98-1.488 2.25-2.322 4.21-2.322zm-.218 9c.907 0 1.67.762 1.67 1.67 0 .943-.763 1.668-1.67 1.668-.944 0-1.67-.725-1.67-1.669 0-.907.726-1.67 1.67-1.67z",fill:"currentColor"}))})),p()(m,Zb.Settings,Jb),p()(m,Zb.SettingsWithDot,(function(e){return r.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.134 13.343l1.629.912a.51.51 0 01.227.531c-.454 1.367-1.136 2.583-2.084 3.608a.458.458 0 01-.568.076l-1.63-.912a7.613 7.613 0 01-2.273 1.33v1.86c0 .19-.152.38-.379.456-1.326.266-2.728.304-4.13 0-.19-.076-.341-.266-.341-.456v-1.86a7.355 7.355 0 01-2.312-1.33l-1.629.912a.459.459 0 01-.568-.076 9.714 9.714 0 01-2.046-3.608.437.437 0 01.189-.531l1.63-.912a8.05 8.05 0 010-2.696l-1.63-.911a.437.437 0 01-.19-.532 9.714 9.714 0 012.047-3.607.459.459 0 01.568-.076l1.63.949a6.783 6.783 0 012.31-1.367v-1.86c0-.19.114-.38.342-.418 1.326-.304 2.728-.342 4.13 0a.442.442 0 01.379.417v1.861a7.3 7.3 0 01.067.025 3.901 3.901 0 004.677 5.755 6.447 6.447 0 01-.045 2.46zm1.67-3.634a.45.45 0 00.146-.19 3.864 3.864 0 01-.147.19zM8.978 11.976c0 1.71 1.326 3.038 3.03 3.038a3.02 3.02 0 003.032-3.038 3.044 3.044 0 00-3.031-3.038 3.02 3.02 0 00-3.031 3.038z",fill:"currentColor"}),r.createElement("circle",{cx:17.783,cy:7.239,r:2.5,fill:"#FF0400",fillOpacity:.8}))})),p()(m,Zb.Star,(function(e){return r.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M11.021 3.116L8.79 7.682l-5.048.721c-.892.138-1.236 1.236-.583 1.889l3.605 3.536-.858 4.979c-.138.893.824 1.58 1.613 1.167l4.498-2.369 4.463 2.37c.79.411 1.752-.276 1.614-1.168l-.858-4.979 3.605-3.536c.652-.653.309-1.751-.584-1.889l-5.013-.72-2.266-4.567c-.377-.79-1.545-.824-1.957 0z",fill:"currentColor"}))})),p()(m,Zb.Services,(function(e){return r.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4.6c0-.56 0-.84.109-1.054a1 1 0 01.437-.437C3.76 3 4.04 3 4.6 3h.8c.56 0 .84 0 1.054.109a1 1 0 01.437.437C7 3.76 7 4.04 7 4.6v.8c0 .56 0 .84-.109 1.054a1 1 0 01-.437.437C6.24 7 5.96 7 5.4 7h-.8c-.56 0-.84 0-1.054-.109a1 1 0 01-.437-.437C3 6.24 3 5.96 3 5.4v-.8zm0 7c0-.56 0-.84.109-1.054a1 1 0 01.437-.437C3.76 10 4.04 10 4.6 10h.8c.56 0 .84 0 1.054.109a1 1 0 01.437.437C7 10.76 7 11.04 7 11.6v.8c0 .56 0 .84-.109 1.054a1 1 0 01-.437.437C6.24 14 5.96 14 5.4 14h-.8c-.56 0-.84 0-1.054-.109a1 1 0 01-.437-.437C3 13.24 3 12.96 3 12.4v-.8zm.109 5.946C3 17.76 3 18.04 3 18.6v.8c0 .56 0 .84.109 1.054a1 1 0 00.437.437C3.76 21 4.04 21 4.6 21h.8c.56 0 .84 0 1.054-.109a1 1 0 00.437-.437C7 20.24 7 19.96 7 19.4v-.8c0-.56 0-.84-.109-1.054a1 1 0 00-.437-.437C6.24 17 5.96 17 5.4 17h-.8c-.56 0-.84 0-1.054.109a1 1 0 00-.437.437zM10 4.6c0-.56 0-.84.109-1.054a1 1 0 01.437-.437C10.76 3 11.04 3 11.6 3h.8c.56 0 .84 0 1.054.109a1 1 0 01.437.437C14 3.76 14 4.04 14 4.6v.8c0 .56 0 .84-.109 1.054a1 1 0 01-.437.437C13.24 7 12.96 7 12.4 7h-.8c-.56 0-.84 0-1.054-.109a1 1 0 01-.437-.437C10 6.24 10 5.96 10 5.4v-.8zm.109 5.946C10 10.76 10 11.04 10 11.6v.8c0 .56 0 .84.109 1.054a1 1 0 00.437.437C10.76 14 11.04 14 11.6 14h.8c.56 0 .84 0 1.054-.109a1 1 0 00.437-.437C14 13.24 14 12.96 14 12.4v-.8c0-.56 0-.84-.109-1.054a1 1 0 00-.437-.437C13.24 10 12.96 10 12.4 10h-.8c-.56 0-.84 0-1.054.109a1 1 0 00-.437.437zM10 18.6c0-.56 0-.84.109-1.054a1 1 0 01.437-.437C10.76 17 11.04 17 11.6 17h.8c.56 0 .84 0 1.054.109a1 1 0 01.437.437C14 17.76 14 18.04 14 18.6v.8c0 .56 0 .84-.109 1.054a1 1 0 01-.437.437C13.24 21 12.96 21 12.4 21h-.8c-.56 0-.84 0-1.054-.109a1 1 0 01-.437-.437C10 20.24 10 19.96 10 19.4v-.8zm7.109-15.054C17 3.76 17 4.04 17 4.6v.8c0 .56 0 .84.109 1.054a1 1 0 00.437.437C17.76 7 18.04 7 18.6 7h.8c.56 0 .84 0 1.054-.109a1 1 0 00.437-.437C21 6.24 21 5.96 21 5.4v-.8c0-.56 0-.84-.109-1.054a1 1 0 00-.437-.437C20.24 3 19.96 3 19.4 3h-.8c-.56 0-.84 0-1.054.109a1 1 0 00-.437.437zM17 11.6c0-.56 0-.84.109-1.054a1 1 0 01.437-.437C17.76 10 18.04 10 18.6 10h.8c.56 0 .84 0 1.054.109a1 1 0 01.437.437C21 10.76 21 11.04 21 11.6v.8c0 .56 0 .84-.109 1.054a1 1 0 01-.437.437C20.24 14 19.96 14 19.4 14h-.8c-.56 0-.84 0-1.054-.109a1 1 0 01-.437-.437C17 13.24 17 12.96 17 12.4v-.8zm.109 5.946C17 17.76 17 18.04 17 18.6v.8c0 .56 0 .84.109 1.054a1 1 0 00.437.437C17.76 21 18.04 21 18.6 21h.8c.56 0 .84 0 1.054-.109a1 1 0 00.437-.437C21 20.24 21 19.96 21 19.4v-.8c0-.56 0-.84-.109-1.054a1 1 0 00-.437-.437C20.24 17 19.96 17 19.4 17h-.8c-.56 0-.84 0-1.054.109a1 1 0 00-.437.437z",fill:"currentColor"}))})),m);n(969);var tC=ie()("nv-aside-header-footer-item"),nC=["right-end"],rC=[-20,8],iC=function(e){var t=e.onClick,n=e.isCompact,r=void 0!==(p=e.isCurrent)&&p,o=void 0===(b=e.enableTooltip)||b,a=e.tooltipText,s=e.text,l=void 0===(m=e.iconSize)?24:m,c=e.slot,u=e.view,h=e.className,d=e.popupAnchor,f=void 0!==(g=e.popupVisible)&&g,p=void 0===(y=e.popupPlacement)?nC:y,m=void 0===(b=e.popupOffset)?rC:b,v=e.onClosePopup,g=e.renderPopupContent,y=e.renderCustomIcon,b=i.a.useState(null),C=(b=(e=ae()(b,2))[0],e[1]),w=i.a.useRef(null);i.a.useEffect((function(){n||C(null)}),[n]);var E;u=c&&function(e,t){switch(e){case Vb.BugReport:return eC[Zb.Bug];case Vb.Favorites:return eC[Zb.Star];case Vb.Support:return eC[Zb.Support];case Vb.Notifications:return t!==Qb.WithDot?eC[Zb.Notifications]:eC[Zb.NotificationsWithDot];case Vb.Search:return eC[Zb.Search];case Vb.Settings:return t!==Qb.WithDot?eC[Zb.Settings]:eC[Zb.SettingsWithDot];case Vb.Services:return eC[Zb.Services];default:return}}(c,u)||Jb;return E="function"==typeof y?y():(E="string"==typeof u?eC[u]:u,n?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{onMouseEnter:function(e){return C(e.currentTarget)},onMouseLeave:function(){return C(null)},className:tC("btn-icon",{current:r})},i.a.createElement(he,{data:E,size:l,className:tC("icon")})),o&&i.a.createElement(tb,{anchor:b,text:a||s})):i.a.createElement("div",{className:tC("icon-wrap")},i.a.createElement(he,{data:E,size:l,className:tC("icon")}))),l=d||w,d=i.a.useCallback((function(e){var t;e instanceof MouseEvent&&e.target&&null!==(t=w.current)&&void 0!==t&&t.contains(e.target)||null!=v&&v()}),[v]),g=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:tC({compact:n,current:r},h),onClick:t,ref:w},i.a.createElement("div",{className:tC("icon-place")},E),!n&&i.a.createElement("div",{className:tC("text")},s)),i.a.createElement(kl,{className:tC("popup"),open:f,placement:p,offset:m,anchorRef:l,onClose:d},null==g?void 0:g())),c?i.a.createElement(Yb,{name:c},g):g},oC=i.a.memo((function(e){var t=e.renderContent;e=e.size;return i.a.createElement(i.a.Fragment,null,t({size:e}))}));function aC(e){var t=e.size,n=e.className;e=e.renderContent;return i.a.createElement("div",{className:n,style:oc()({},{"--nv-aside-header-size":"".concat(t,"px")})},"function"==typeof e&&i.a.createElement(oC,{size:t,renderContent:e}))}function sC(){return function(e){try{var t=window.localStorage.getItem("nvAsideHeader");return null===t?null:JSON.parse(t)}catch(e){return null}}()}function lC(e){return r.createElement("svg",Object.assign({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M8.031 8.531c.281-.281.281-.75 0-1.062l-4.25-4.25c-.312-.281-.781-.281-1.062 0L2 3.938c-.281.312-.281.78 0 1.062l3.031 3.031-3.031 3c-.281.281-.281.75 0 1.063l.719.687c.281.313.75.313 1.062 0l4.25-4.25zm6-1.062-4.25-4.25c-.312-.281-.781-.281-1.062 0L8 3.938A.774.774 0 0 0 8 5l3.031 3L8 11.031c-.281.281-.281.75 0 1.063l.719.687c.281.313.75.313 1.062 0l4.25-4.25c.281-.281.281-.75 0-1.062z",fill:"currentColor"}))}oC.displayName="RenderContent",n(984);var cC=ie()("nv-aside-header"),uC=function(e){X()(n,e);var t=ss()(n);function n(e){var r,o;return W()(this,n),(o=t.call(this,e)).asideRef=i.a.createRef(),o.throttledPageMouseMove=void 0,o.triggerEvent=function(e){e===Xb.SETTINGS_OPEN&&o.onSettingsToggle(!0)},o.renderFirstPane=function(e){var t=(h=o.props).menuItems,n=h.servicesConfigEnvironment,r=h.panelVisible,a=h.renderPanel,s=h.panelClassName,l=h.settings,c=h.favorites,u=h.installationType,h=o.state.isCompact;return i.a.createElement(qb,null,i.a.createElement("div",{className:cC("aside"),style:{width:e}},o.renderCollapseButton(),i.a.createElement("div",{className:cC("aside-popup-anchor"),ref:o.asideRef}),i.a.createElement("div",{className:cC("aside-content")},"external"===u&&o.renderServicesButton(cC("all-services-button",{top:!0})),i.a.createElement(Vy,{onLogoIconClick:o.props.onLogoIconClick,logoWrapper:o.props.logoWrapper,logoText:o.props.logoText,logoIcon:o.props.logoIcon,logoIconSize:o.props.logoIconSize,logoTextSize:o.props.logoTextSize,logoHref:o.props.logoHref,logoIconClassName:o.props.logoIconClassName,isCompact:h}),i.a.createElement(cb,{items:t,isCompact:h,onClickItem:o.onCompositeBarClick}),o.renderFooter(e))),i.a.createElement(Uy,{className:cC("drawer"),onVeilClick:o.onCloseDrawer,onEscape:o.onCloseDrawer,style:{left:e}},i.a.createElement(Yy,{visible:o.isVisibleItem(Kb.Favorites)},c),i.a.createElement(Yy,{visible:r,className:cC("panel",s)},null==a?void 0:a()),i.a.createElement(Yy,{visible:o.isVisibleItem(Kb.Services)},i.a.createElement(Ub,{visible:o.isVisibleItem(Kb.Services),servicesConfigEnvironment:n,installationType:o.props.installationType,currentServiceId:o.props.currentServiceId,lang:o.props.lang,sdk:o.props.sdk,wrappedServices:o.props.wrappedServices,serviceItemWrapper:o.props.serviceItemWrapper,onServiceClickHandler:o.onServicesClick})),i.a.createElement(Yy,{visible:o.isVisibleItem(Kb.Settings)},l)))},o.renderSecondPane=function(e){return i.a.createElement(aC,{size:e,renderContent:o.props.renderContent,className:cC("content")})},o.renderFooter=function(e){var t=o.props,n=t.settings,r=t.settingsIconWithBadge,a=t.favorites,s=t.installationType,l=o.state.isCompact;return i.a.createElement(Gb.Consumer,null,(function(t){var c,u;return t?i.a.createElement("div",{className:cC("footer")},i.a.createElement("div",{ref:function(e){t(Vb.InfraBuzzer,e)}}),"internal"===s&&o.renderServicesButton(cC("all-services-button")),i.a.createElement("div",{ref:function(e){t(Vb.Favorites,e)}},a?i.a.createElement(iC,{slot:Vb.Favorites,text:$y("switch_favorites"),isCompact:l,isCurrent:o.isVisibleItem(Kb.Favorites),onClick:o.onFavoritesClick}):null),i.a.createElement("div",{ref:function(e){t(Vb.Notifications,e)}}),null===(c=(u=o.props).renderFooter)||void 0===c?void 0:c.call(u,{size:e,isCompact:l,asideRef:o.asideRef}),i.a.createElement("div",{ref:function(e){t(Vb.Search,e)}}),i.a.createElement("div",{ref:function(e){t(Vb.Support,e)}}),i.a.createElement("div",{ref:function(e){t(Vb.BugReport,e)}}),i.a.createElement("div",{ref:function(e){t(Vb.Settings,e)}},n?i.a.createElement(iC,{slot:Vb.Settings,view:r?Qb.WithDot:Qb.Normal,text:$y("switch_settings"),isCompact:l,isCurrent:o.isVisibleItem(Kb.Settings),onClick:function(){return o.onSettingsToggle()}}):null),i.a.createElement("div",{ref:function(e){t(Vb.User,e)}})):null}))},o.renderCollapseButton=function(){var e=(t=o.state).isCompact,t=t.isButtonVisible?"visible":"hidden";return i.a.createElement(ge,{className:cC("collapse-button",{compact:e}),view:"flat",style:{visibility:t},onClick:o.onCollapseButtonClick},i.a.createElement(he,{data:lC,className:cC("collapse-icon"),width:"14",height:"14"}))},o.renderServicesButton=function(e){var t=o.state.isCompact;return o.props.showServices?i.a.createElement(Gb.Consumer,null,(function(n){return n?i.a.createElement("div",{ref:function(e){n(Vb.Services,e)}},i.a.createElement(iC,{slot:Vb.Services,text:$y("switch_services"),isCompact:t,isCurrent:o.isVisibleItem(Kb.Services),onClick:o.onServicesClick,className:e})):null})):null},o.onCollapseButtonClick=function(){var e=!o.state.isCompact;void 0===o.props.isCompact?(function(e){var t=sC();!function(e,t){try{window.localStorage.setItem("nvAsideHeader",JSON.stringify(t))}catch(e){console.error("data not saved in localeStorage: ".concat(e))}}($b,oc()(oc()({},t),e))}({isCompact:e}),o.setState({isCompact:e,isButtonVisible:!e})):o.setState({isButtonVisible:!e}),o.props.onChangeCompact&&o.props.onChangeCompact(e)},o.onCloseDrawer=function(){var e,t;o.setState({visibleItem:null}),null!==(e=(t=o.props).onClosePanel)&&void 0!==e&&e.call(t)},o.onServicesClick=function(){var e,t;o.setState({visibleItem:o.getToggledVisibleItem(Kb.Services)}),o.props.panelVisible&&null!==(e=(t=o.props).onClosePanel)&&void 0!==e&&e.call(t)},o.onSettingsToggle=function(e){var t,n;e=void 0===e?o.getToggledVisibleItem(Kb.Settings):e?Kb.Settings:null;o.setState({visibleItem:e}),o.props.panelVisible&&null!==(t=(n=o.props).onClosePanel)&&void 0!==t&&t.call(n)},o.onFavoritesClick=function(){var e,t;o.setState({visibleItem:o.getToggledVisibleItem(Kb.Favorites)}),o.props.panelVisible&&null!==(e=(t=o.props).onClosePanel)&&void 0!==e&&e.call(t)},o.isVisibleItem=function(e){return e===o.state.visibleItem},o.getToggledVisibleItem=function(e){return o.isVisibleItem(e)?null:e},o.onPageMouseMove=function(e){e=e.clientX,!o.state.isButtonVisible&&e<=84&&0<=e?o.setState({isButtonVisible:!0}):o.state.isButtonVisible&&(84<e||e<0)&&o.setState({isButtonVisible:!1})},o.onCompositeBarClick=function(){o.setState({visibleItem:null})},o.throttledPageMouseMove=cc()(o.onPageMouseMove,300),e="boolean"==typeof(null===(r=sC())||void 0===r?void 0:r.isCompact)?Boolean(null===(r=sC())||void 0===r?void 0:r.isCompact):Boolean(e.initIsCompact),o.state={visibleItem:null,isCompact:e,isButtonVisible:!e},o}return q()(n,[{key:"componentDidUpdate",value:function(e,t){var n,r;!e.panelVisible&&this.props.panelVisible&&this.state.visibleItem&&this.setState({visibleItem:null}),t.visibleItem===Kb.Settings!==this.isVisibleItem(Kb.Settings)&&null!==(n=(r=this.props).onEvent)&&void 0!==n&&n.call(r,this.isVisibleItem(Kb.Settings)?Xb.SETTINGS_OPEN:Xb.SETTINGS_CLOSE)}},{key:"render",value:function(){var e=this,t=this.state.isCompact?56:236;return i.a.createElement("div",{className:cC(null,this.props.className)},i.a.createElement("div",{className:cC("pane-container"),onMouseMove:function(t){e.state.isCompact&&(t.persist(),e.throttledPageMouseMove(t))}},this.renderFirstPane(t),this.renderSecondPane(t)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(void 0===e.isCompact)return null;var n={isCompact:e.isCompact};return e.isCompact&&t.isCompact||t.isButtonVisible||(n.isButtonVisible=!0),n}}]),n}(i.a.Component);uC.defaultProps={menuItems:[],servicesConfigEnvironment:"production",panelVisible:!1,onClosePanel:Y.a,showServices:!0},G=n(559),Z=n(560),m="nv-user-dropdown",Ky.registerKeyset(sa.I18N.LANGS.en,m,G),Ky.registerKeyset(sa.I18N.LANGS.ru,m,Z);var hC=Ky.keyset(m),dC=!1,fC="l",pC="m",mC=(n(998),oe("user-avatar"));function vC(e){var t=e.imgUrl,n=e.size,r=e.title,o=e.className;e=e.onClick;return i.a.createElement("div",{title:r,className:mC({size:void 0===n?"m":n},o),style:{backgroundImage:"url(".concat(t,")")},onClick:e})}function gC(e){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",overflow:"visible",viewBox:"0 0 16 16",fillRule:"evenodd",strokeWidth:.501,strokeLinejoin:"bevel"},e),r.createElement("path",{d:"M4.005 15.365v-4.732c0-.349.284-.634.634-.634H5v-.79c0-1.868 1.294-3.205 2.999-3.205 1.707 0 2.999 1.333 2.999 3.205V10h.369c.35 0 .633.285.633.634v4.732c0 .35-.284.635-.633.635h-6.73a.635.635 0 01-.633-.635zM7 15v-3H6v1H5v1h1v1zm3 0v-1h1v-1h-1v-1H9v3zm-.001-5.001v-.79c0-1.362-.886-2.205-1.999-2.205-1.112 0-1.999.847-1.999 2.205V10zM4 9.209V9H1c-.657 0-1-.344-1-1 0-1.15 1.83-3 3-3h2c.355 0 .77.17 1.176.439-.488.25-.915.601-1.195.953l-.112.14a3.938 3.938 0 00-.221.325 3.731 3.731 0 00-.32.628c-.013.03-.032.076-.048.126-.02.046-.043.112-.061.181-.012.03-.028.08-.042.132a1.755 1.755 0 00-.049.193 2.627 2.627 0 00-.072.37 3.789 3.789 0 00-.045.425c-.007.099-.01.197-.01.297zm7.987-.296a3.789 3.789 0 00-.03-.332c-.005-.032-.009-.064-.015-.093a2.627 2.627 0 00-.072-.37 1.755 1.755 0 00-.05-.194 1.144 1.144 0 00-.041-.132 1.425 1.425 0 00-.061-.181 1.273 1.273 0 00-.048-.126 1.883 1.883 0 00-.084-.19 3.731 3.731 0 00-.363-.632 3.938 3.938 0 00-.095-.131l-.112-.14a3.766 3.766 0 00-1.193-.953C10.231 5.17 10.645 5 11 5h2c1.17 0 3 1.85 3 3 0 .656-.343 1-1 1h-3.001v.21c0-.1-.004-.2-.011-.297zM1.998 2a2.002 2.002 0 014.003 0A2.002 2.002 0 012 2zm8 0a2.002 2.002 0 014.003 0A2.002 2.002 0 0110 2z"}),r.createElement("path",{d:"M0 .001V16h15.999V.001z",fill:"none"}))}n(997);var yC={xs:"small",s:"small",m:"middle",l:"middle",xl:"50"},bC={xs:8,s:8,m:8,l:10,xl:10},CC="object"===("undefined"==typeof window?"undefined":se()(window))&&1<window.devicePixelRatio;function wC(e){return CC?null==e?void 0:e.replace(/\/islands-(?!retina-)([^/]+)$/,"/islands-retina-$1"):e}var EC,SC=ie()("nv-user-dropdown-avatar"),OC=i.a.forwardRef((function(e,t){var n,o=e.user,a=e.url,s=void 0===(p=e.size)?"m":p,l=e.title,c=e.className,u=e.internal,h=e.federation,d=e.onClick,f=Boolean(d),p=Object(r.useState)(!1),m=(p=(e=ae()(p,2))[0],e[1]);return Object(r.useEffect)((function(){return m(!0)}),[]),o?n=function(e,t,n){if(e.avatarData)return"data:image/jpeg;base64,".concat(e.avatarData);if(n&&e.avatarHost&&e.login)return"".concat(e.avatarHost,"/api/v1/user/").concat(e.login,"/avatar/100.jpg");if(n=e.avatar||"https://avatars.mds.yandex.net/get-yapic/0/0-0/",e.avatarHost&&e.avatarId)n="".concat(e.avatarHost,"/get-yapic/").concat(e.avatarId,"/");else{if(e.isFederationUser&&e.avatar)return wC(e.avatar);if(n.includes("/islands-"))return wC(e.avatar)}return n.includes("/get-yapic/")&&!n.includes("/islands-")&&(n+="islands".concat(CC?"-retina":"","-").concat(yC[t])),n}(o,s,u):a&&(n=a),i.a.createElement("div",{key:Number(p),ref:t,className:SC({size:s,federation:h,interactive:f},c),onClick:d},i.a.createElement(vC,{imgUrl:n,size:s,title:l,className:SC("avatar")}),h&&i.a.createElement("div",{className:SC("federation")},i.a.createElement(he,{data:gC,size:bC[s],className:SC("federation-icon")})))}));function xC(){return window.location.host.endsWith(".com")?"com":"ru"}function _C(e){return e?"https://passport.yandex-team.ru":"https://passport.yandex.".concat(xC())}function kC(e){return"".concat(_C(e),"/auth?retpath=").concat(encodeURIComponent(location.href))}function TC(e,t){var n=document.createElement(e);return Object.keys(t).forEach((function(e){n.setAttribute(e,t[e])})),n}function NC(e){return Boolean(e&&(e.uid||e.isFederationUser))}function PC(e){return r.createElement("svg",Object.assign({width:16,height:12,viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M13 12h-2.625a.376.376 0 01-.375-.375v-.75c0-.206.169-.375.375-.375H13A1.5 1.5 0 0014.5 9V3A1.5 1.5 0 0013 1.5h-2.625A.376.376 0 0110 1.125v-.75c0-.206.169-.375.375-.375H13a3 3 0 013 3v6a3 3 0 01-3 3zM5.222.61l-.613.612a.37.37 0 00.007.534L8.15 5.187H.375A.376.376 0 000 5.563v.875c0 .207.169.375.375.375H8.15l-3.534 3.429a.376.376 0 00-.007.534l.613.612a.375.375 0 00.531 0l5.138-5.125a.375.375 0 000-.53L5.753.605a.378.378 0 00-.531.003z",fill:"currentColor"}))}OC.displayName="UserDropdownAvatar",(G=EC=EC||{}).SwitchUser="change_default",G.Logout="logout";var IC=i.a.forwardRef((function(e,t){var n=e.user,r=e.internal,o=void 0===(a=e.compact)?dC:a,a=void 0===(a=e.size)?fC:a;e=e.onClick;return NC(n)?i.a.createElement(OC,{ref:t,user:n,size:a,internal:r,federation:null==n?void 0:n.isFederationUser,onClick:e}):(e=[i.a.createElement(he,{key:"icon",data:PC,size:"18"})],o||e.push(i.a.createElement("span",{key:"text"},hC("label_login"))),i.a.createElement(ge,{ref:t,view:"outlined",size:"l",onClick:function(e){e.stopPropagation(),window.open(kC(r))}},e))}));Z=n(423),m=n.n(Z);function RC(e){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 186 186",width:16,height:16},e),r.createElement("g",{fill:"currentColor"},r.createElement("rect",{width:186,height:186,rx:24}),r.createElement("path",{d:"M84.4 48.4c-4.5 2-9.2 8.2-10 13.3l-.6 4.3H63.5c-8.8 0-10.6.3-12.9 2.1-2.2 1.8-2.6 2.8-2.6 7.6 0 6.4 2.1 11.4 5.8 14 2.4 1.6 5.8 1.8 35.7 2.1 18.2.2 35 0 37.4-.3 3.2-.5 5.4-1.6 7.8-4 3.1-3.1 3.3-3.7 3.3-10.2 0-10.4-.4-10.7-14.4-11.1l-11.6-.4v-3c0-4.9-4.3-11.3-9.3-13.7-5-2.4-13.5-2.7-18.3-.7zm16 9.7c1.7 1.4 2.6 3 2.6 5V66H83v-2.5c0-1.4 1.1-3.7 2.5-5 3.2-3.3 11-3.5 14.9-.4zM48 111c0 14.7.2 16.2 2 18 1.9 1.9 3.3 2 42.8 2 35.3 0 41.1-.2 43-1.6 2.1-1.5 2.2-2.1 2.2-17.8V95.2l-3.7 1.9c-3 1.5-5.9 1.9-15.5 1.9H107v3.9c0 2.4-.8 4.8-2.1 6.5-1.9 2.5-2.5 2.6-11.3 2.6-11.8 0-13.6-1.1-13.6-8.1V99H68.3c-9.5 0-12.6-.4-16-2L48 95.1V111z",opacity:.9,fill:"#fff"})))}function jC(e){var t=e.orgId,n=e.className,r=e.width,o=e.height;e=e.size,t=t?DC(t):void 0;return i.a.createElement("div",{className:AC(),style:{color:t}},i.a.createElement(he,{className:n,data:RC,width:r,height:o,size:e}))}n(1e3);var DC=m()((function(e){var t=function(e){for(var t=2166136261,n=0,r=e.length;n<r;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}(e),n=~~(256*Number("0."+Math.sin(t+1).toString().substr(6))),r=~~(256*Number("0."+Math.sin(t+2).toString().substr(6)));e=~~(256*Number("0."+Math.sin(t+3).toString().substr(6))),t="#";return t+=("00"+n.toString(16)).substr(-2,2).toUpperCase(),(t+=("00"+r.toString(16)).substr(-2,2).toUpperCase())+("00"+e.toString(16)).substr(-2,2).toUpperCase()})),AC=ie()("nv-organization-icon"),LC=(n(974),ie()("yc-support-form-row"));function MC(e){var t=e.className,n=e.fieldName;e=e.children;return i.a.createElement("div",{className:LC(null,t)},i.a.createElement("div",{className:LC("left")},i.a.createElement("span",{className:LC("field-name")},n)),i.a.createElement("div",{className:LC("right")},e))}G=n(561),Z=n(562),m="nv-login-federation-dialog",Ky.registerKeyset(sa.I18N.LANGS.en,m,G),Ky.registerKeyset(sa.I18N.LANGS.ru,m,Z);var FC=Ky.keyset(m),BC=(n(1001),ie()("nv-login-federation-dialog"));function HC(e){var t=e.open,n=e.handleClose,o=e.handleSubmit,a=Object(r.useState)(""),s=(c=ae()(a,2))[0],l=c[1],c=(e=Object(r.useState)(""),(a=ae()(e,2))[0]),u=a[1];e=Object(r.useCallback)((function(e){l(e),u((e=e)?/^[A-Za-z0-9\-.]+$/.test(e)?"":FC("label_error-invalid"):FC("label_error-required"))}),[]),a=Object(r.useCallback)((function(e){e.preventDefault(),o(s)}),[o,s]);return Object(r.useEffect)((function(){t||(l(""),u(""))}),[t]),i.a.createElement(wm,{className:BC(),open:t,onClose:n,size:"m"},i.a.createElement(wm.Header,{caption:FC("title_dialog-enter-sso")}),i.a.createElement("form",{id:"sso-form",autoComplete:"on",onSubmit:a},i.a.createElement(wm.Body,null,i.a.createElement(MC,{className:BC("form-row"),fieldName:FC("label_dialog-federation-id")},i.a.createElement(ic,{value:s,onUpdate:e,hasClear:!0,autoFocus:!0,name:"federation-id",error:c}))),i.a.createElement(wm.Footer,null,i.a.createElement(ge,{type:"submit",disabled:!s||Boolean(c)},FC("button_dialog-confirm")))))}function zC(e){var t=e.user,n=e.internal,r=e.className,o=e.name,a=e.description;e=e.onClick;return i.a.createElement("div",{className:UC(null,r),onClick:e},i.a.createElement(OC,{user:t,className:UC("avatar"),internal:n,federation:t.isFederationUser}),(o||a)&&i.a.createElement("div",{className:UC("info")},o&&i.a.createElement("span",{className:UC("name")},o),a&&i.a.createElement("span",{className:UC("description")},a)))}n(1002);var UC=ie()("nv-user-dropdown-user");function VC(e){return r.createElement("svg",Object.assign({width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.873 13.125a.875.875 0 11-1.75 0V7.87H.875a.875.875 0 010-1.75h5.248V.874a.875.875 0 111.75 0V6.12h5.249a.875.875 0 010 1.751H7.873v5.255z",fill:"currentColor"}))}function WC(e){return r.createElement("svg",Object.assign({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("g",{clipPath:"url(#clip0)"},r.createElement("path",{d:"M3 2h2.625c.206 0 .375.169.375.375v.75a.376.376 0 01-.375.375H3A1.5 1.5 0 001.5 5v6A1.5 1.5 0 003 12.5h2.625c.206 0 .375.169.375.375v.75a.376.376 0 01-.375.375H3a3 3 0 01-3-3V5a3 3 0 013-3zm7.222.61l-.613.612a.37.37 0 00.007.534l3.534 3.432H5.375A.376.376 0 005 7.563v.875c0 .206.169.374.375.374h7.775l-3.534 3.429a.376.376 0 00-.007.534l.613.612a.375.375 0 00.531 0l5.138-5.125a.375.375 0 000-.53l-5.138-5.126a.378.378 0 00-.531.003z",fill:"currentColor"})),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0"},r.createElement("path",{d:"M0 0h16v16H0V0z",fill:"#fff"}))))}n(999);var GC,qC,YC=ie()("nv-user-menu-content"),XC=function(e){X()(n,e);var t=ss()(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={loginFederationDialogOpen:!1},e.handleSsoLoginClick=function(){e.setState({loginFederationDialogOpen:!0})},e.handleCloseLoginFederationDialog=function(){e.setState({loginFederationDialogOpen:!1})},e.handleSubmitLoginFederationDialog=function(t){var n=void 0===(r=e.props.oauthUrl)?"":r,r=window.location.search;r=null!==(r=new URLSearchParams(r).get("redirectUrl"))&&void 0!==r?r:"https://".concat(window.location.host,"/");window.location.href="".concat(n,"/federations/").concat(encodeURIComponent(t),"?redirectUrl=").concat(encodeURIComponent(r)),e.setState({loginFederationDialogOpen:!1})},e.handleFormAction=function(t,n,r){return function(i){var o,a,s,l,c;i.preventDefault(),o=t,a=n,s=r,l=e.props.internal,c=o.uid,i=a.yandexuid,o=TC("form",{style:"position: absolute; display: none;",method:"POST",action:"".concat(_C(l),"/passport?mode=embeddedauth")}),a=TC("input",{name:"action",value:s}),l=TC("input",{name:"retpath",value:location.href}),s=TC("input",{name:"yu",value:i}),i=TC("input",{name:"uid",value:c}),c=TC("button",{type:"submit"}),o.appendChild(a),o.appendChild(l),o.appendChild(s),o.appendChild(i),o.appendChild(c),document.body.appendChild(o),(c=o.querySelector("button"))&&c.click(),o.remove()}},e}return q()(n,[{key:"render",value:function(){return NC(this.props.user)?i.a.createElement("div",{className:YC("user-menu")},this.renderCurrentAccount(),this.renderOrganizations(),this.renderAccounts(),this.renderLoginFederationDialog()):null}},{key:"renderCurrentAccount",value:function(){var e=this.props.internal,t=this.props.user,n=e?"https://mail.yandex-team.ru":"https://mail.yandex.".concat(xC()),r=_C(e),o=(e=Array.isArray(this.props.actions)?this.props.actions:[],r=t.isFederationUser?e:e.concat([{key:"mail",label:hC("label_mail"),href:n},{key:"manage-account",label:hC("label_manage-account"),href:r}]),{padding:"2px 8px",borderRadius:8});return i.a.createElement("div",{className:YC("current-account")},this.renderUser(t,!1),i.a.createElement(xm,{className:YC("current-account-actions")},r.map((function(e){var t=e.key,n=e.label,r=e.href;e=e.onClick;return i.a.createElement(xm.Item,{key:t,href:r,onClick:e,style:o},n)}))))}},{key:"renderOrganizations",value:function(){var e=this.props,t=e.organizations,n=e.currentOrgId,r=e.onSelectOrganization;return!Array.isArray(t)||fa()(t)?null:i.a.createElement(xm,{className:YC("organizations")},t.map((function(e){var t=e.id,o=e.title,a=e.name,s=n===t;return i.a.createElement(xm.Item,{key:t,icon:i.a.createElement(jC,{orgId:t,size:24}),active:s,onClick:s?void 0:function(t){null!=r&&r(e),t.stopPropagation()},style:{padding:"6px 8px",borderRadius:8}},o||a)})))}},{key:"renderAccounts",value:function(){var e=this,t=void 0===(r=(l=this.props).accounts)?[]:r,n=l.internal,r=l.showSsoLogin,o=(l=this.props.user).yandexuid,a=l.uid,s=l.avatarHost,l=l.isFederationUser,c=(n=_C(n),n="".concat(n,"/auth?mode=add-user&retpath=").concat(encodeURIComponent(location.href)),{padding:0,borderRadius:8});return 0<(t=t.filter((function(e){return e=e.uid,a!==e}))).length&&i.a.createElement(xm,{className:YC("accounts")},t.map((function(t){return i.a.createElement(xm.Item,{key:t.uid,style:c,className:YC("accounts-item")},e.renderUser(oc()({yandexuid:o,avatarHost:s},t)))})),!l&&i.a.createElement(xm.Item,{title:hC("label_link-add-account-title"),href:n,style:c},i.a.createElement("div",{className:YC("add-account")},i.a.createElement("div",{className:YC("add-account-icon")},i.a.createElement(he,{data:VC,size:16,className:YC("icon")})),i.a.createElement("div",{className:YC("add-account-label")},hC("label_add-account")))),!l&&r&&i.a.createElement(xm.Item,{onClick:this.handleSsoLoginClick,style:c},i.a.createElement("div",{className:YC("sso-login")},i.a.createElement("div",{className:YC("sso-login-icon")},i.a.createElement(he,{data:gC,size:16,className:YC("icon")})),i.a.createElement("div",{className:YC("sso-login-label")},hC("label_sso-login")))))}},{key:"renderLoginFederationDialog",value:function(){var e=this.state.loginFederationDialogOpen;return i.a.createElement(HC,{open:e,handleClose:this.handleCloseLoginFederationDialog,handleSubmit:this.handleSubmitLoginFederationDialog})}},{key:"renderUser",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this.props,r=n.internal,o=n.cloudAuth,a=this.props.user,s=_C(r),l=e.isFederationUser?"/federations/logout":"".concat(s,"/passport?mode=embeddedauth&action=logout&yu=").concat(a.yandexuid,"&uid=").concat(e.uid,"&retpath=").concat(encodeURIComponent(location.href));return o&&!r&&(l="/auth/logout?redirectUrl=".concat(encodeURIComponent(location.href))),n=a.uid===e.uid,s=e.displayName||e.login,o=e.email||e.federationName||e.federationId,i.a.createElement("div",{className:YC("account")},i.a.createElement(zC,{className:YC("user"),user:e,internal:r,name:s,description:o,onClick:t?this.handleFormAction(e,a,EC.SwitchUser):void 0}),i.a.createElement("div",{className:YC("logout")},i.a.createElement(ge,{view:"flat-secondary",href:n?l:void 0,onClick:n?void 0:this.handleFormAction(e,a,EC.Logout),className:YC("logout-button"),title:hC("label_link-logout-title")},i.a.createElement(he,{data:WC,size:18}))))}}]),n}(i.a.Component),KC=(n(996),ie()("nv-aside-header-avatar-with-menu"));function ZC(e){var t=i.a.useState(),n=(l=ae()(t,2))[0],r=l[1],o=i.a.useState(null),a=(t=ae()(o,2))[0],s=t[1],l=e.text,c=(o=e.isAsideHeaderCompact,t=e.popupAnchor,e.user),u=e.internal;return i.a.createElement(Yb,{name:Vb.User},i.a.createElement(iC,{text:null!=l?l:null==c?void 0:c.login,isCompact:o,isCurrent:n,onClick:function(e){c?r(!n):(e.stopPropagation(),window.open(kC(u)))},popupVisible:n,popupAnchor:t,onClosePopup:function(){return r(!1)},renderCustomIcon:function(){return t=e.isAsideHeaderCompact,r=e.user,o=e.internal,c=void 0===(l=e.size)?pC:l,l=e.currentOrgId,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:KC("user-menu-view"),onMouseEnter:function(e){return s(e.target)},onMouseLeave:function(){return s(null)}},i.a.createElement(IC,{compact:!0,user:r,size:c,internal:o,currentOrgId:l})),!n&&t&&i.a.createElement(tb,{anchor:a,text:hC(r?"label_popup":"label_login")}));var t,r,o,l,c},renderPopupContent:function(){return t=e.user,n=e.internal,r=e.actions,o=e.accounts,a=e.cloudAuth,s=e.organizations,l=e.currentOrgId,c=e.onSelectOrganization,u=e.showSsoLogin,h=e.oauthUrl,i.a.createElement(XC,{user:t,internal:n,actions:r,accounts:o,cloudAuth:a,organizations:s,currentOrgId:l,onSelectOrganization:c,showSsoLogin:u,oauthUrl:h});var t,n,r,o,a,s,l,c,u,h}}))}function QC(){return(QC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var $C,JC=function(e){return r.createElement("svg",QC({fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),GC=GC||r.createElement("g",{clipPath:"url(#sign-out_svg__clip0)"},r.createElement("path",{d:"M3 2h2.625c.206 0 .375.169.375.375v.75a.376.376 0 01-.375.375H3A1.5 1.5 0 001.5 5v6A1.5 1.5 0 003 12.5h2.625c.206 0 .375.169.375.375v.75a.376.376 0 01-.375.375H3a3 3 0 01-3-3V5a3 3 0 013-3zm7.222.61l-.613.612a.37.37 0 00.007.534l3.534 3.432H5.375A.376.376 0 005 7.563v.875c0 .206.169.374.375.374h7.775l-3.534 3.429a.376.376 0 00-.007.534l.613.612a.375.375 0 00.531 0l5.138-5.125a.375.375 0 000-.53l-5.138-5.126a.378.378 0 00-.531.003z",fill:"currentColor"})),qC=qC||r.createElement("defs",null,r.createElement("clipPath",{id:"sign-out_svg__clip0"},r.createElement("path",{d:"M0 0h16v16H0V0z",fill:"#fff"}))))};function ew(){return(ew=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var tw,nw,rw,iw,ow,aw=function(e){return r.createElement("svg",ew({viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),$C=$C||r.createElement("path",{d:"M13 12h-2.625a.376.376 0 01-.375-.375v-.75c0-.206.169-.375.375-.375H13A1.5 1.5 0 0014.5 9V3A1.5 1.5 0 0013 1.5h-2.625A.376.376 0 0110 1.125v-.75c0-.206.169-.375.375-.375H13a3 3 0 013 3v6a3 3 0 01-3 3zM5.222.61l-.613.612a.37.37 0 00.007.534L8.15 5.187H.375A.376.376 0 000 5.563v.875c0 .207.169.375.375.375H8.15l-3.534 3.429a.376.376 0 00-.007.534l.613.612a.375.375 0 00.531 0l5.138-5.125a.375.375 0 000-.53L5.753.605a.378.378 0 00-.531.003z",fill:"currentColor"}))};function sw(){return(sw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function lw(e){return r.createElement("svg",sw({"aria-hidden":"true","data-prefix":"fas","data-icon":"server",className:"server_svg__svg-inline--fa server_svg__fa-server",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e),tw=tw||r.createElement("path",{fill:"currentColor",d:"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"}))}function cw(){return(cw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function uw(e){return r.createElement("svg",cw({"aria-hidden":"true","data-prefix":"fas","data-icon":"database",className:"storage_svg__svg-inline--fa storage_svg__fa-database",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),nw=nw||r.createElement("path",{fill:"currentColor",d:"M448 73.12v45.75C448 159.1 347.6 192 224 192S0 159.1 0 118.9V73.12C0 32.88 100.4 0 224 0s224 32.88 224 73.12zM448 176v102.9c0 40.2-100.4 73.1-224 73.1S0 319.1 0 278.9V176c48.12 33.12 136.2 48.62 224 48.62S399.9 209.1 448 176zm0 160v102.9c0 40.2-100.4 73.1-224 73.1S0 479.12 0 438.87V336c48.12 33.13 136.2 48.63 224 48.63S399.9 369.1 448 336z"}))}function hw(){return(hw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function dw(e){return r.createElement("svg",hw({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),rw=rw||r.createElement("path",{d:"M0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16S0 24.837 0 16z",fill:"#5282FF"}),iw=iw||r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 9.5c0 .828-1.343 1.5-3 1.5s-3-.672-3-1.5S19.343 8 21 8s3 .672 3 1.5zM13 19.6v2.7c0 .9 1.3 1.6 3 1.6s3-.7 3-1.6v-2.7c-.8.7-1.9 1-3 1s-2.2-.3-3-1zm5-8.6v-.4c.8.7 1.9 1 3 1s2.2-.3 3-1v2.8c0 .8-1.2 1.5-2.8 1.6l-2.475 2.871c.176.192.275.405.275.629 0 .828-1.343 1.5-3 1.5s-3-.672-3-1.5a.9.9 0 01.232-.58L10.8 15.1C9.3 15 8 14.3 8 13.5v-2.9c.8.7 1.9 1 3 1s2.2-.3 3-1v.4h4zm-.276 6.272A5.27 5.27 0 0016 17c-.265 0-.522.017-.766.05a5.994 5.994 0 00-1.134.25L12 14.9c1.1-.2 2-.8 2-1.5V12h4v1.4c0 .7.7 1.3 1.8 1.5l-2.076 2.372zM14 9.5c0 .828-1.343 1.5-3 1.5s-3-.672-3-1.5S9.343 8 11 8s3 .672 3 1.5z",fill:"#fff"}))}function fw(){return(fw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pw(e){return r.createElement("svg",fw({viewBox:"0 0 16 16",fill:"currenColor",xmlns:"http://www.w3.org/2000/svg"},e),ow=ow||r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 1.5c0 .828-1.343 1.5-3 1.5s-3-.672-3-1.5S11.343 0 13 0s3 .672 3 1.5zM5 11.6v2.7c0 .9 1.3 1.6 3 1.6s3-.7 3-1.6v-2.7c-.8.7-1.9 1-3 1s-2.2-.3-3-1zM10 3v-.4c.8.7 1.9 1 3 1s2.2-.3 3-1v2.8c0 .8-1.2 1.5-2.8 1.6l-2.475 2.871c.176.192.275.404.275.629 0 .828-1.343 1.5-3 1.5s-3-.672-3-1.5a.9.9 0 01.232-.58L2.8 7.1C1.3 7 0 6.3 0 5.5V2.6c.8.7 1.9 1 3 1s2.2-.3 3-1V3h4zm-.276 6.272A5.27 5.27 0 008 9a5.88 5.88 0 00-.766.05A5.992 5.992 0 006.1 9.3L4 6.9c1.1-.2 2-.8 2-1.5V4h4v1.4c0 .7.7 1.3 1.8 1.5L9.724 9.272zM6 1.5C6 2.328 4.657 3 3 3s-3-.672-3-1.5S1.343 0 3 0s3 .672 3 1.5z"}))}var mw={kb:10,mb:20,gb:30,tb:40,pb:50,eb:60};function vw(e,t){return t=function(e){if(!mw[e])throw new Error("Unknown unit: ".concat(e));return mw[e]}(t),e*Math.pow(2,t)}function gw(e){Array.from(e.querySelectorAll("[stroke=currentColor],[fill=currentColor]")).forEach((function(e){"currentColor"===e.getAttributeNS(null,"fill")&&e.setAttributeNS(null,"fill",window.getComputedStyle(e).fill),"currentColor"===e.getAttributeNS(null,"stroke")&&e.setAttributeNS(null,"stroke",window.getComputedStyle(e).stroke)}))}function yw(){window.document.body.classList.remove(ww)}var bw,Cw,ww="js-screenshot-mode",Ew=function(){var e=$()(ee.a.mark((function e(t){var r,i,o;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.document.body.classList.add(ww),e.next=4,n.e(1).then(n.t.bind(null,1186,7));case 4:return r=e.sent.default,s={},"viewport"===(a=i=t.captureMode)&&(s.height=window.innerHeight,s.width=window.innerWidth,s.x=window.pageXOffset,s.y=window.pageYOffset),"cropTop"===a&&(s.y=window.pageYOffset,s.height=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-s.y),i=s,e.next=9,r(document.body,oc()({useCORS:null===(r=t.useCORS)||void 0===r||r,backgroundColor:null,onclone:gw,ignoreElements:function(e){return e.classList.contains("yc-modal")||e.classList.contains("yc-popup")&&!e.classList.contains("yc-popup_open")}},i));case 9:return o=e.sent,yw(),e.abrupt("return",new Promise((function(e){o.toBlob((function(t){e(t?new File([t],"screenshot",{type:"image/png"}):void 0)}),"image/png")})));case 14:return e.prev=14,e.t0=e.catch(0),console.warn("failed make screenshot"),yw(),e.abrupt("return",void 0);case 19:case"end":return e.stop()}var a,s}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();(G=bw=bw||{}).ChangeState="change_state",G.ChangeFormData="change_form_data",G.ChangeCustomData="change_custom_data",G.AddFiles="add_files",G.DeleteFile="delete_file",(Z=Cw=Cw||{}).Normal="normal",Z.Error="error",Z.TicketCreated="ticket-created";var Sw=function(e,t){switch(t.type){case bw.ChangeState:return oc()(oc()({},e),t.payload);case bw.ChangeFormData:return oc()(oc()({},e),{},{formData:oc()(oc()({},e.formData),t.payload)});case bw.ChangeCustomData:return oc()(oc()({},e),{},{formData:oc()(oc()({},e.formData),{},{custom:oc()(oc()({},e.formData.custom),t.payload)})});case bw.AddFiles:return oc()(oc()({},e),{},{formData:oc()(oc()({},e.formData),{},{files:[].concat(J()(e.formData.files),J()(t.payload.files))})});case bw.DeleteFile:var n=e.formData.files,r=t.payload.index;return oc()(oc()({},e),{},{formData:oc()(oc()({},e.formData),{},{files:[].concat(J()(n.slice(0,r)),J()(n.slice(r+1)))})});default:return e}},Ow=function(e){var t=e.faqItems;e=e.initialFormData,t=Boolean(t);return{formData:oc()({access:"cloud",topic:"",message:"",attachScreenshot:!1,files:[],custom:{}},e),view:Cw.Normal,checkFields:!1,hasFaqItems:t,showForm:!t,processMakeScreenshot:!1,ticketData:null,error:null,customFooterOpen:!0}};m=n(546),G=n(547),Z="yc-support-form";g.registerKeyset(sa.I18N.LANGS.en,Z,m),g.registerKeyset(sa.I18N.LANGS.ru,Z,G);var xw=g.keyset(Z);function _w(e){var t=e.className,n=e.value;e=e.onUpdate;return i.a.createElement(Kh,{className:t,value:n,onUpdate:e,width:"max"},i.a.createElement(Kh.Option,{value:"cloud"},xw("value_current-cloud")),i.a.createElement(Kh.Option,{value:"private"},xw("value_only-mine")))}m=n(550),G=n(551),Z="yc-attachment-field",g.registerKeyset(sa.I18N.LANGS.en,Z,m),g.registerKeyset(sa.I18N.LANGS.ru,Z,G);var kw=g.keyset(Z),Tw=function(e){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:16,height:16},e),r.createElement("path",{d:"M8 16A8 8 0 118 0a8 8 0 010 16zm0-7a1 1 0 001-1V4a1 1 0 10-2 0v4a1 1 0 001 1zm0 1a1 1 0 100 2 1 1 0 000-2z",fill:"currentColor",fillRule:"evenodd"}))};m=n(548),G=n(549),Z="yc-file-input";g.registerKeyset(sa.I18N.LANGS.en,Z,m),g.registerKeyset(sa.I18N.LANGS.ru,Z,G);var Nw=g.keyset(Z);function Pw(e){var t=e.onUpdate,n=e.onChange,o=e.accept,a=void 0!==(c=e.multiple)&&c,s=v()(e,["onUpdate","onChange","accept","multiple"]),l=Object(r.useRef)(null),c=Object(r.useCallback)((function(){var e;null!==(e=l.current)&&void 0!==e&&e.click()}),[]);e=Object(r.useCallback)((function(e){null!=n&&n(e),e.defaultPrevented||(null!=t&&t(Array.from(e.target.files||[])),""!==e.target.value&&(e.target.value=""))}),[n,t]);return i.a.createElement("div",{className:Iw()},i.a.createElement(ge,Object.assign({},s,{onClick:c})),i.a.createElement("input",{accept:o,multiple:a,autoComplete:"off",className:Iw("input"),disabled:s.disabled,onChange:e,ref:l,tabIndex:-1,type:"file"}))}n(979);var Iw=ie()("".concat("yc-").concat("button-attach")),Rw=(n(978),ie()("yc-file-input")),jw=function(e){var t=e.onChange,n=e.onUpdate,r=e.accept,o=e.label;e=void 0===(e=e.multiple)||e;return i.a.createElement("div",{className:Rw()},i.a.createElement("span",{className:Rw("input-button")},i.a.createElement(Pw,{onChange:t,onUpdate:n,multiple:e,accept:r},Nw(e?"button_attach-files":"button_attach-file"))),i.a.createElement("div",{className:Rw("attach-label")},o))};function Dw(e){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",width:12,height:12},e),r.createElement("path",{fill:"currentColor",d:"M5.775 12l-1.107-1.098 4.831-4.793c1.384-1.375 1.072-2.914.147-3.832-1.077-1.068-2.592-.943-3.861.316l-3.71 3.68c-1.007 1-.22 1.87-.212 1.879.195.193.897.757 1.764-.104l4.122-4.09 1.108 1.099-4.123 4.09c-1.496 1.486-3.199.876-3.978.103C.331 8.828.05 8.184.006 7.53c-.04-.6.094-1.495.962-2.356l3.71-3.68c1.882-1.87 4.38-1.998 6.075-.316 1.473 1.461 1.896 4.001-.147 6.028L5.775 12z"}))}n(977);var Aw=ie()("yc-attachment-label");function Lw(e){var t=e.className,n=e.text,r=e.onClose;e=e.invalid;return i.a.createElement("span",{className:Aw({invalid:void 0!==e&&e},t)},i.a.createElement(he,{data:Dw,size:12,className:Aw("icon")}),i.a.createElement("span",{className:Aw("text"),title:n},n),i.a.createElement(ge,{view:"flat-secondary",size:"s",className:Aw("btn-close"),onClick:r},i.a.createElement(he,{data:Tl,size:18})))}n(976);var Mw=ie()("yc-attachments-list");function Fw(e){var t=e.className,n=e.files,r=e.onDelete,o=e.maxBytesSize;return n.length?(n=n.map((function(e,t){return i.a.createElement(Lw,{className:Mw("label"),key:t,text:e.name,onClose:function(){return r(t)},invalid:e.size>o})})),i.a.createElement("div",{className:Mw(null,t)},n)):null}function Bw(e){var t=e.className,n=e.files,r=e.onAddFiles,o=e.onDeleteFile,a=e.maxSize,s=vw(a,"mb");e=n.some((function(e){return e.size>s}));return i.a.createElement("div",{className:Hw(null,t)},i.a.createElement(Fw,{className:Hw("list"),files:n,onDelete:o,maxBytesSize:s}),i.a.createElement(jw,{onUpdate:r,label:kw("label_attach-file-notice",{maxSize:a})}),e&&i.a.createElement("div",{className:Hw("file-size-warning")},i.a.createElement(he,{data:Tw,size:14,className:Hw("warning-icon")}),i.a.createElement("div",{className:Hw("file-size-text")},kw("label_file-size-limit-exceeded"))))}n(975);var Hw=ie()("yc-attachment-field"),zw=function(e){return r.createElement("svg",Object.assign({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.903 11.295l-4.528-1.708v-5.12c0-.707-.436-1.339-1.097-1.589l-4.687-1.77a1.657 1.657 0 00-1.186 0l-4.688 1.77c-.66.25-1.097.882-1.097 1.59v5.119l-4.528 1.708A1.7 1.7 0 000 12.885v5.194c0 .642.36 1.232.933 1.52l4.687 2.358c.474.24 1.036.24 1.51 0L12 19.504l4.87 2.453c.474.24 1.036.24 1.51 0l4.687-2.359c.572-.287.933-.877.933-1.519v-5.194c0-.708-.436-1.34-1.097-1.59zm-6.122-1.67l-3.984 1.504V7.912l3.984-1.746v3.458zM12 2.6L7.219 4.402v.029L12 6.384l4.781-1.953v-.029L12 2.6zm-.844 15.536L7.172 20.14v-3.732l3.984-1.83v3.557zm-4.781-3.33l4.781-1.954v-.029l-4.781-1.802-4.781 1.802v.029l4.781 1.953zm16.031 3.33l-3.984 2.005v-3.732l3.984-1.83v3.557zm-4.781-3.33l4.781-1.954v-.029l-4.781-1.802-4.781 1.802v.029l4.781 1.953z",fill:"currentColor"}))},Uw=(n(980),ie()("yc-support-form-faq-section"));function Vw(e){var t=e.className;e=e.faqItems;return Array.isArray(e)?i.a.createElement("div",{className:Uw(null,t)},i.a.createElement("div",{className:Uw("title")},i.a.createElement(he,{data:zw,size:24,className:Uw("title-icon")}),i.a.createElement("div",{className:Uw("title-text")},xw("section_faq"))),i.a.createElement("div",{className:Uw("list")},e.map((function(e,t){return i.a.createElement("div",{key:t,className:Uw("item-row")},i.a.createElement(we,{href:e.url,target:"_blank"},e.text))})))):null}n(981);var Ww=ie()("yc-support-form-confirm-problem");function Gw(e){var t=e.className,n=e.onConfirm;return i.a.createElement("div",{className:Ww(null,t)},i.a.createElement("div",{className:Ww("question")},xw("label_problem-solved")),i.a.createElement(ge,{className:Ww("btn-yes"),onClick:function(){return n(!0)}},xw("button_yes")),i.a.createElement(ge,{view:"flat",onClick:function(){return n(!1)}},xw("button_no")))}function qw(e){var t=e.onRetry,n=e.error;e=e.loading,n=db()(n,["response","headers","x-request-id"],"");return i.a.createElement("div",{className:Xw()},i.a.createElement("div",{className:Xw("image-place")},i.a.createElement(fy,{name:"500",className:Xw("image")})),i.a.createElement("div",{className:Xw("content")},i.a.createElement("div",{className:Xw("message")},xw("label_failed-create-ticket")),Boolean(n)&&i.a.createElement("div",{className:Xw("request-id-place")},i.a.createElement("div",{className:Xw("request-id-label")},"Request-ID:"),i.a.createElement("div",null,n),i.a.createElement(Kl,{size:16,className:Xw("clipboard-button"),text:n}))),i.a.createElement("div",{className:Xw("action")},i.a.createElement(ge,{view:"action",onClick:function(){return t()},loading:e},xw("button_retry"))))}function Yw(e){var t=e.ticket,n=e.onClick;return i.a.createElement("div",{className:Kw()},i.a.createElement("div",{className:Kw("image-place")},i.a.createElement(fy,{name:"support",className:Kw("image")})),i.a.createElement("div",{className:Kw("content")},i.a.createElement("div",{className:Kw("message")},xw("label_success-create-ticket")),null!==t&&Boolean(t.ticketName)&&Boolean(t.ticketUrl)&&i.a.createElement("div",{className:Kw("ticket-info")},i.a.createElement("span",{className:Kw("ticket-info-text")},xw("label_cteated-ticket-info")),i.a.createElement(we,{href:t.ticketUrl,target:"_blank"},t.ticketName))),i.a.createElement("div",{className:Kw("action")},i.a.createElement(ge,{view:"action",onClick:function(){return n()}},xw("button_done"))))}n(972);var Xw=ie()("yc-support-form-error"),Kw=(n(973),ie()("yc-support-form-success-view")),Zw=(n(971),ie()("yc-support-form"));function Qw(e){var t,n=e.open,o=e.onClose,a=e.onSend,s=e.caption,l=e.loading,c=void 0===(f=e.maxSize)?20:f,u=e.faqItems,h=void 0===(p=e.installationType)?"external":p,d=void 0===(t=e.screenshotCaptureMode)?"full":t,f=e.initialFormData,p=e.renderFormContent,m=e.useCORS,g=(t=function(e){var t=e.faqItems,n=e.initialFormData,i=Object(r.useReducer)(Sw,{faqItems:t,initialFormData:n},Ow),o=(l=ae()(i,2))[0],a=l[1],s=(e=Object(r.useCallback)((function(e){a({type:e,payload:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}})}),[a]),Object(r.useCallback)((function(e){a({type:bw.ChangeState,payload:e})}),[a])),l=(t=Object(r.useCallback)((function(e){a({type:bw.ChangeFormData,payload:e})}),[a]),n=Object(r.useCallback)((function(e){a({type:bw.ChangeCustomData,payload:e})}),[a]),i=Object(r.useCallback)((function(e){a({type:bw.ChangeState,payload:{customFooterOpen:e}})}),[a]),Object(r.useCallback)(function(){var e=$()(ee.a.mark((function e(t){var n;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({processMakeScreenshot:!0}),e.next=3,Ew(t);case 3:return n=e.sent,s({processMakeScreenshot:!1}),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s]));return{state:o,setState:s,setFormData:t,setCustomData:n,toggleFooterOpen:i,dispatch:e,makeScreenshot:l}}({faqItems:u,initialFormData:f})).state,y=t.setState,b=t.setFormData,C=(e=t.setCustomData,f=t.toggleFooterOpen,t.dispatch),w=t.makeScreenshot;function E(){return S.apply(this,arguments)}function S(){return(S=$()(ee.a.mark((function e(){var t,n,r,i,o,s;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.formData,t=r.attachScreenshot,n=r.files,(r=v()(r,["attachScreenshot","files"])).topic&&r.message){e.next=4;break}return y({checkFields:!0}),e.abrupt("return");case 4:if(t)return e.next=7,w({captureMode:d,useCORS:m});e.next=8;break;case 7:i=e.sent;case 8:return o=vw(c,"mb"),s=oc()(oc()({},r),{},{files:n.filter((function(e){return e.size<=o})),screenshot:i}),e.next=12,a(s);case 12:"success"===(null==(l=s=e.sent)?void 0:l.status)&&y({view:Cw.TicketCreated,ticketData:s.ticketData||null}),"error"===(null==(l=s)?void 0:l.status)&&y({view:Cw.Error,error:s.error});case 15:case"end":return e.stop()}var l}),e)})))).apply(this,arguments)}var O,x="external"===h;return g.view===Cw.Error&&(O=i.a.createElement(qw,{onRetry:E,error:g.error,loading:l||g.processMakeScreenshot})),g.view===Cw.TicketCreated&&(O=i.a.createElement(Yw,{ticket:g.ticketData,onClick:o})),g.view===Cw.Normal&&(h=function(){return[x&&i.a.createElement(MC,{key:"field_access",fieldName:xw("field_access")},i.a.createElement(_w,{value:g.formData.access,onUpdate:function(e){b({access:e})}})),i.a.createElement(MC,{key:"field_topic",fieldName:xw("field_topic")},i.a.createElement("div",{className:Zw("wrap-input")},i.a.createElement(ic,{value:g.formData.topic,autoFocus:!0,hasClear:!0,error:g.checkFields&&!g.formData.topic?xw("label_field-empty-error"):void 0,onUpdate:function(e){return b({topic:e})}}))),i.a.createElement(MC,{key:"field_message",fieldName:xw("field_message")},i.a.createElement("div",{className:Zw("wrap-input")},i.a.createElement(ic,{multiline:!0,rows:6,value:g.formData.message,hasClear:!0,error:g.checkFields&&!g.formData.message?xw("label_field-empty-error"):void 0,onUpdate:function(e){return b({message:e})}}))),i.a.createElement(MC,{key:"field_attach-file",fieldName:xw("field_attach-file")},i.a.createElement(Bw,{files:g.formData.files,onAddFiles:function(e){return C(bw.AddFiles,{files:e})},onDeleteFile:function(e){return C(bw.DeleteFile,{index:e})},maxSize:c})),i.a.createElement(MC,{key:"field_screenshot",fieldName:xw("field_screenshot")},i.a.createElement(Ef,{checked:g.formData.attachScreenshot,content:xw("label_add-screenshot"),onUpdate:function(){return b({attachScreenshot:!g.formData.attachScreenshot})},className:Zw("checkbox")}))].filter(Boolean)},O=i.a.createElement(i.a.Fragment,null,g.hasFaqItems&&i.a.createElement("div",{className:Zw("info")},i.a.createElement(Vw,{className:Zw("faq-section"),faqItems:u}),!g.showForm&&i.a.createElement(Gw,{className:Zw("confirm"),onConfirm:function(e){e?o():y({showForm:!0})}})),g.showForm&&("function"==typeof p?p({state:g,setCustomData:e,content:h(),onClose:o,toggleFooterOpen:f}):h()))),i.a.createElement(wm,{hasCloseButton:!0,open:n,onClose:o,size:"s",disableOutsideClick:!0},i.a.createElement("div",{className:Zw()},i.a.createElement(wm.Header,{caption:g.view===Cw.Normal?s:""}),i.a.createElement(wm.Body,{className:Zw("body",{view:g.view})},O),g.showForm&&g.view===Cw.Normal&&g.customFooterOpen&&i.a.createElement(wm.Footer,{loading:l||g.processMakeScreenshot,textButtonCancel:xw("button_cancel"),textButtonApply:xw("button_send"),onClickButtonCancel:o,onClickButtonApply:E})))}var $w=function(){function e(){W()(this,e)}return q()(e,null,[{key:"init",value:function(){(e.container=document.createElement("div")).classList.add(e.className),document.body.appendChild(e.container)}},{key:"createWith",value:function(t,n){e.init();var r=n.themeValue||"light";a.a.render(i.a.createElement(ca.Provider,{value:{themeValue:r}},i.a.createElement(t,Object.assign({},n,{onClose:function(){"function"==typeof n.onClose&&n.onClose(),e.remove()}}))),e.container)}},{key:"create",value:function(t){e.init();var n=t.themeValue||"light";a.a.render(i.a.createElement(ca.Provider,{value:{themeValue:n}},i.a.createElement(Qw,Object.assign({},t,{open:!0,onClose:function(){"function"==typeof t.onClose&&t.onClose(),e.remove()}}))),e.container)}},{key:"remove",value:function(){a.a.unmountComponentAtNode(e.container),document.body.removeChild(e.container)}}]),e}();function Jw(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function eE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jw(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}$w.container=void 0,$w.className="yc-standalone-support-form";var tE=new(function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){return W()(this,n),t.apply(this,arguments)}return q()(n,[{key:"createTicket",value:function(e){return this.post("/api/report-bug/createTicket",e,{})}},{key:"uploadFile",value:function(e){return this.post("/api/report-bug/uploadTrackerFile",e,{})}}]),n}(y.a));function nE(e){var t=e.isAsideHeaderCompact,n=i.a.useState(!1),r=(n=(e=ae()(n,2))[0],e[1]),o=i.a.useCallback((function(){return r((function(e){return!e}))}),[r]);return i.a.createElement(iC,{text:"Report a bug",slot:Vb.BugReport,isCompact:t,isCurrent:n,enableTooltip:!n,onClick:function(){var e,t,n;o(),n=void 0===(t=(e={onClose:function(){r(!1)}}).caption)?"Report a bug":t,t=void 0===(t=e.initialData)?{}:t,e=e.onClose,$w.createWith(rE,{caption:n,onClose:e,initialData:t})}})}function rE(e){var t=e.caption,n=e.initialData,r=e.onClose,o=i.a.useState(!1),a=(o=(e=ae()(o,2))[0],e[1]),s=i.a.useRef(!1);return i.a.useEffect((function(){return function(){s.current=!0}}),[]),i.a.createElement(Qw,{open:!0,installationType:"internal",onClose:r,caption:t,initialFormData:eE({},n),progress:o,onSend:function(){var e=$()(ee.a.mark((function e(t){var n;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,function(){return iE.apply(this,arguments)}(t);case 4:return n=e.sent,e.abrupt("return",{status:"success",ticketData:{ticketName:n.id,ticketUrl:n.link}});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{status:"error",error:e.t0});case 11:return e.prev=11,s.current||a(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()})}function iE(){return(iE=$()(ee.a.mark((function e(t){var n,r,i,o=arguments;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<o.length&&void 0!==o[1]?o[1]:{},r=J()(t.files),t.screenshot&&r.push(t.screenshot),i=[],0<r.length)return e.next=7,Promise.all(r.map((function(e){return t=e,(e=new FormData).append("file",t),e.append("filename",t.name),tE.uploadFile(e).then((function(e){return e.id}));var t})));e.next=8;break;case 7:i=e.sent;case 8:return e.abrupt("return",tE.createTicket({description:t.message,summary:t.topic,timestamp:(new Date).valueOf(),url:window.location.href,attachmentIds:i,meta:eE({url:window.location.href,widowSize:{width:window.outerWidth,height:window.outerHeight},screenSize:{width:screen.width,height:screen.height},userAgent:window.navigator.userAgent,cookies:document.cookie,message:n.message,stack:n.stack},n)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g=n(552),Z=n(553),y="nv-settings",Ky.registerKeyset(sa.I18N.LANGS.en,y,g),Ky.registerKeyset(sa.I18N.LANGS.ru,y,Z);var oE=Ky.keyset(y),aE=ie()("nv-settings-search");function sE(e){var t=e.className,n=e.onChange,r=void 0===(r=e.debounce)?200:r,o=e.inputRef,a=(e=i.a.useState(),(e=ae()(e,2))[0]),s=(e=e[1],i.a.useRef(n));s.current=n;var l=i.a.useRef(r);return l.current=r,i.a.useEffect((function(){var e;return void 0!==a&&(e=window.setTimeout((function(){s.current(a)}),l.current)),function(){clearTimeout(e)}}),[a]),i.a.createElement("div",{className:aE(null,t)},i.a.createElement(ic,{controlRef:function(e){"function"==typeof o?o(e):o&&(o.current=e)},hasClear:!0,autoFocus:!0,placeholder:oE("placeholder_search"),value:a,onUpdate:e}))}function lE(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}n(983);var cE=ie()("nv-settings-menu"),uE=i.a.forwardRef((function(e,t){var n,o,a,s=e.items,l=e.onChange,c=e.activeItem,u=(e=i.a.useState(),(e=ae()(e,2))[0]),h=e[1],d=i.a.useRef(null),f=(n=l,o=r.useRef(),r.useEffect((function(){return o.current=n,function(){o.current=void 0}}),[n]),r.useCallback((function(){if("function"==typeof o.current)return o.current.apply(o,arguments)}),[])),p=(e=u,(a=r.useRef(e)).current=e,r.useCallback((function(){return a.current}),[]));return i.a.useImperativeHandle(t,(function(){return{handleKeyDown:function(e){if(!d.current)return!1;var t=p();return t&&"Enter"===e.key?(f(t),!0):"ArrowDown"===e.key?(h(dE(d.current,t,1)),!0):"ArrowUp"===e.key&&(h(dE(d.current,t,-1)),!0)},clearFocus:function(){h(void 0)}}}),[p,f]),i.a.createElement("div",{ref:d,className:cE()},s.map((function(e){return"groupTitle"in e?i.a.createElement("div",{key:e.groupTitle,className:cE("group")},i.a.createElement("span",{className:cE("group-heading")},e.groupTitle),e.items.map((function(e){return hE(e,l,c,u)}))):hE(e,l,c,u)})))}));function hE(e,t,n,r){return i.a.createElement(we,{key:e.title,extraProps:{"data-id":e.id,tabIndex:-1,disabled:e.disabled},className:cE("item",{selected:n===e.id,disabled:e.disabled,focused:r===e.id,badge:e.withBadge}),iconLeft:e.icon?i.a.createElement(he,Object.assign({size:16},e.icon,{className:cE("item-icon")})):void 0,onClick:function(){t(e.id)}},e.icon?i.a.createElement(he,Object.assign({size:16},e.icon,{className:cE("item-icon")})):void 0,i.a.createElement("span",null,e.title))}function dE(e,t,n){var r=e.querySelectorAll(".".concat(cE("item"),":not(.").concat(cE("item"),"_disabled)"));if(0!==r.length){e=0<n?-1:0;return t&&(e=Array.prototype.findIndex.call(r,(function(e){return e.getAttribute("data-id")===t}))),null!==(e=r[e=(r.length+e+n)%r.length].getAttribute("data-id"))&&void 0!==e?e:void 0}}function fE(e){var t=[];return i.a.Children.forEach(e,(function(e){i.a.isValidElement(e)&&(e.type===i.a.Fragment?t.push.apply(t,J()(fE(e.props.children))):t.push({title:e.props.title,renderTitleComponent:e.props.renderTitleComponent,children:e}))})),t}function pE(e){return e}n(982);var mE,vE,gE=ie()("nv-settings"),yE=i.a.createContext(void 0);function bE(e){var t=e.initialPage,n=e.onPageChange,r=e.children,o=e.renderNotFound,a=e.loading,s=e.renderLoading,l=i.a.useState(""),c=(u=ae()(l,2))[0],u=(e=u[1],l=i.a.useState(t),l=(u=ae()(l,2))[0],u[1]),h=(t=i.a.useRef(t),i.a.useRef(null)),d=i.a.useRef(null);if(i.a.useEffect((function(){var e;null!==(e=d.current)&&void 0!==e&&e.clearFocus()}),[c]),i.a.useEffect((function(){function e(){var e;null!==(e=d.current)&&void 0!==e&&e.clearFocus()}return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[]),l!==t.current&&(null!=n&&n(l),t.current=l),a)return i.a.createElement("div",{className:gE({loading:!0})},"function"==typeof s?s():i.a.createElement(Ql,{className:gE("loader"),size:"m"}));r=(s=function e(t,n){var r=1<arguments.length&&void 0!==n?n:"",o=[],a={};return i.a.Children.forEach(t,(function(t){var n,s,l;i.a.isValidElement(t)&&(t.type===i.a.Fragment?(n=(s=e(t.props.children,r)).menu,s=s.pages,o.push.apply(o,J()(n)),Object.assign(a,s)):t.props.groupTitle?(s="".concat(r,"/").concat(null!==(l=t.props.id)&&void 0!==l?l:t.props.groupTitle),s=(l=e(t.props.children,s)).menu,l=l.pages,o.push({groupTitle:t.props.groupTitle,items:s}),Object.assign(a,l)):(l="".concat(r,"/").concat(null!==(l=t.props.id)&&void 0!==l?l:t.props.title),a[l]=function e(t){var n={sections:[]};return i.a.Children.forEach(t,(function(t){var r,o,a;i.a.isValidElement(t)&&(t.type===i.a.Fragment?(a=(r=e(t.props.children)).sections,o=r.withBadge,(r=n.sections).push.apply(r,J()(a)),n.withBadge=o||n.withBadge):(o=(a=t.props).title,a=a.header,n.withBadge=t.props.withBadge||n.withBadge,n.sections.push({title:o,header:a,withBadge:t.props.withBadge,items:fE(t.props.children)})))})),n}(t.props.children),o.push({pageId:l,title:t.props.title,icon:t.props.icon,withBadge:a[l].withBadge})))})),{menu:o,pages:a}}(r)).menu;var f=s.pages;!function(e,t,n){for(var r=1<arguments.length&&void 0!==t?t:"",i=2<arguments.length&&void 0!==n?n:pE,o=(n=lE(r).replace(/\s+/g,".*?"),new RegExp(n,"i")),a=0,s=Object.values(e);a<s.length;a++){var l,c=s[a],u=!0,h=ub()(c.sections);try{for(h.s();!(l=h.n()).done;){var d,f=l.value,p=!0,m=ub()(f.items);try{for(m.s();!(d=m.n()).done;){var v=d.value;v.hide=Boolean(r)&&!o.test(v.title),v.renderTitleComponent?v.titleComponent=v.renderTitleComponent(r&&!v.hide?i(v.title,r):null):v.titleComponent=r&&!v.hide?i(v.title,r):v.title,p=p&&v.hide}}catch(e){m.e(e)}finally{m.f()}f.hide=p,u=u&&p}}catch(e){h.e(e)}finally{h.f()}c.hide=u}}(f,c,CE);var p,m=[],v=ub()(r);try{for(v.s();!(p=v.n()).done;){var g=p.value;"groupTitle"in g?m.push({groupTitle:g.groupTitle,items:g.items.map((function(e){return{id:e.pageId,title:e.title,icon:e.icon,disabled:f[e.pageId].hide,withBadge:e.withBadge}}))}):m.push({id:g.pageId,title:g.title,icon:g.icon,disabled:f[g.pageId].hide,withBadge:g.withBadge})}}catch(e){v.e(e)}finally{v.f()}if(!(b=l)||null!==(r=f[b])&&void 0!==r&&r.hide){var y,b=void 0,C=ub()(m);try{for(C.s();!(y=C.n()).done;){var w=y.value;if("groupTitle"in w){var E,S=ub()(w.items);try{for(S.s();!(E=S.n()).done;){var O=E.value;if(!O.disabled){b=O.id;break}}}catch(e){S.e(e)}finally{S.f()}if(b)break}else if(!w.disabled){b=w.id;break}}}catch(e){C.e(e)}finally{C.f()}}return b!==l&&u(b),i.a.createElement("div",{className:gE()},i.a.createElement("div",{className:gE("menu"),onClick:function(){h.current&&h.current.focus()},onKeyDown:function(e){d.current&&d.current.handleKeyDown(e)&&e.preventDefault()}},i.a.createElement("h2",{className:gE("heading")},oE("heading_settings")),i.a.createElement(sE,{inputRef:h,className:gE("search"),onChange:e}),i.a.createElement(uE,{ref:d,items:m,onChange:u,activeItem:b})),i.a.createElement("div",{className:gE("page")},b?f[b].sections.map((function(e){return e.hide?null:i.a.createElement("div",{key:e.title,className:gE("section")},i.a.createElement("h3",{className:gE("section-heading",{badge:e.withBadge})},e.title),e.header||null,e.items.map((function(e){var t=e.hide,n=e.title,r=e.children;e=e.titleComponent;return t?null:i.a.createElement("div",{key:n,className:gE("section-item")},i.a.createElement(yE.Provider,{value:e},r))})))})):"function"==typeof o?o():i.a.createElement("div",{className:gE("not-found")},oE("not-found"))))}function CE(e,t){var n,r=e.slice(0),o=[],a=(t=lE(t).split(" ").filter(Boolean),0),s=ub()(t);try{for(s.s();!(n=s.n()).done;){var l,c,u=n.value,h=new RegExp(u,"ig").exec(r);h&&(l=h[0],0<(c=h.index)&&o.push(r.slice(0,c)),o.push(i.a.createElement("strong",{key:a++,className:gE("found")},l)),r=r.slice(c+l.length))}}catch(e){s.e(e)}finally{s.f()}return r&&o.push(r),o}function wE(){return(wE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function EE(e){return r.createElement("svg",wE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),mE=mE||r.createElement("path",{fill:"currentColor",d:"M12 16.106L7.056 19l1.264-5.53L4 9.73l5.726-.524L12 4l2.274 5.206L20 9.729l-4.32 3.741L16.944 19z"}))}bE.Group=function(e){return e=e.children,i.a.createElement(i.a.Fragment,null,e)},bE.Page=function(e){return e=e.children,i.a.createElement(i.a.Fragment,null,e)},bE.Section=function(e){return e=e.children,i.a.createElement(i.a.Fragment,null,e)},bE.Item=function(e){var t=e.title,n=e.children,r=void 0===(o=e.align)?"center":o,o=e.withBadge;e=i.a.useContext(yE);return i.a.createElement("div",{className:gE("item",{align:r})},i.a.createElement("label",{className:gE("item-heading",{badge:o})},null!=e?e:t),i.a.createElement("div",null,n))},(g=vE=vE||{}).light="light",g.dark="dark",g.system="system";Z={setSettingValue:Bt};var SE,OE=Object(l.b)((function(e){return{theme:e.settings.userSettings.theme}}),Z)((function(e){return i.a.createElement(bE,null,i.a.createElement(bE.Page,{id:"general",title:"General",icon:{data:EE,height:24,width:24}},i.a.createElement(bE.Section,{title:"General"},i.a.createElement(bE.Item,{title:"Interface theme"},i.a.createElement(Kh,{value:e.theme,onUpdate:function(t){e.setSettingValue(L,t),Ro||localStorage.setItem("theme",t)}},i.a.createElement(Kh.Option,{value:vE.system},"System"),i.a.createElement(Kh.Option,{value:vE.light},"Light"),i.a.createElement(Kh.Option,{value:vE.dark},"Dark"))))))}));(y=SE=SE||{}).Creating="CREATING",y.Active="ACTIVE",y.Deleting="DELETING",n(526);var xE=ie()("kv-navigation");function _E(e){var t=e.ydbUser,n=e.logout;e=e.setIsNotAuthenticated;return i.a.createElement("div",{className:xE("internal-user")},i.a.createElement("div",{className:xE("user-info-wrapper")},i.a.createElement("div",{className:xE("ydb-internal-user-title")},"YDB user"),t&&i.a.createElement("div",{className:xE("username")},t)),t?i.a.createElement(ge,{view:"flat-secondary",onClick:n,title:"logout"},i.a.createElement(he,{data:JC,size:18})):i.a.createElement(ge,{view:"flat-secondary",onClick:e,title:"login"},i.a.createElement(he,{data:aw,size:18})))}var kE=[{id:sf,title:"Databases",icon:pw,iconSize:20,location:va(ga,{activeTab:sf}),locationKeys:["/tenant"]},{id:lf,title:"Nodes",icon:lw,iconSize:20,location:va(ga,{activeTab:lf}),locationKeys:["/node"]},{id:cf,title:"Storage",icon:uw,iconSize:20,location:va(ga,{activeTab:cf}),locationKeys:["/storage"]}],TE=(g={logout:De,setIsNotAuthenticated:je},Object(l.b)((function(e){var t=e.settings.systemSettings;return{login:t.login,yandexuid:t.yandexuid,uid:t.uid,ydbUser:e.authentication.user}}),g)((function(e){var t=aa(),n=oa(),r=[(o=i.a.useContext(mc)).mobile,o.setMobile],o=ae()(r,1)[0],a=(r=i.a.useMemo((function(){var e=t.pathname,r=e.includes("/clusters"),i="/cluster"===e;return r?[]:kE.map((function(t){var r=(r=null===(r=t.locationKeys)||void 0===r?void 0:r.filter((function(t){return e.startsWith(t)})))&&0<r.length||t.location.startsWith(e);return i&&t.id!==sf&&(r=!1),{id:t.id,title:t.title,icon:t.icon,iconSize:t.iconSize,current:r,onItemClick:function(){n.push(t.location)}}}))}),[t,n]),t.pathname.includes("/clusters")||"/"===t.pathname);return i.a.createElement(i.a.Fragment,null,i.a.createElement(uC,{logoText:"YDB",logoIcon:dw,onLogoIconClick:function(){return window.location.assign("/")},installationType:"internal",showServices:!o,menuItems:r,settings:i.a.createElement(OE,null),className:xE(),renderContent:function(){return e.children},renderFooter:function(t){var n=t.isCompact;t=t.asideRef;return i.a.createElement(i.a.Fragment,null,i.a.createElement(iC,{slot:Vb.Support,iconSize:24,text:"Documentation",isCompact:n,onClick:function(){window.open("https://ydb.yandex-team.ru/docs/","_blank","noreferrer")}}),i.a.createElement(Yb,{name:Vb.BugReport},i.a.createElement(nE,{isAsideHeaderCompact:n})),i.a.createElement(ZC,{isAsideHeaderCompact:n,popupAnchor:t,internal:!0,user:{login:e.login,uid:e.uid,yandexuid:e.yandexuid,avatarHost:"https://center.yandex-team.ru"},organizations:a?void 0:[{id:"YDB",title:i.a.createElement(_E,{ydbUser:e.ydbUser,logout:e.logout,setIsNotAuthenticated:e.setIsNotAuthenticated}),name:"YDB internal user",description:"YDB internal",status:SE.Active}]}))}}))})));function NE(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function PE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NE(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IE(e){var t=e.className,n=e.children,r=e.style,o=e.onVeilClick,a=e.onEscape,s=void 0===(e=e.preventSrcollBody)||e,l=!1;return i.a.Children.forEach(n,(function(e){e.type===AE&&Boolean(e.props.visible)&&(l=!0)})),i.a.useEffect((function(){function e(e){"Escape"===e.key&&null!=a&&a()}return l&&window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[a,l]),i.a.useEffect((function(){function e(){document.body.style.paddingRight="",document.body.style.paddingBottom="",document.body.style.overflow=""}var t,n,r=s;return r&&(l?(t=window.innerWidth-document.documentElement.clientWidth,n=window.innerHeight-document.documentElement.clientHeight,document.body.style.paddingRight=t+"px",document.body.style.paddingBottom=n+"px",document.body.style.overflow="hidden"):e()),function(){r&&e()}}),[l,s]),i.a.createElement(zy,{in:l,timeout:{enter:0,exit:DE},mountOnEnter:!0,unmountOnExit:!0},(function(e){var a=l&&"entered"===e;return i.a.createElement("div",{className:jE(null,t),style:r},i.a.createElement(Wy,{in:a,timeout:DE,unmountOnExit:!0,classNames:jE("veil-transition")},i.a.createElement("div",{className:jE("veil"),onClick:o})),i.a.Children.map(n,(function(e){var t=e;return t.type!==AE?e:(e=Boolean(t.props.visible),i.a.cloneElement(t,PE(PE({},t.props),{},{visible:e&&a})))})))}))}function RE(e){var t=e.onLogoIconClick,n=e.logoText,r=e.logoIcon,o=void 0===(u=e.logoIconSize)?24:u,a=e.logoTextSize,s=void 0===a?16:a,l=e.logoHref,c=e.logoIconClassName,u=e.isCompact;e="function"==typeof(a=e.logoWrapper),l="function"==typeof t?{}:{target:"_self",href:void 0===l?"/":l},c=i.a.createElement(ge,Object.assign({view:"flat",size:"l",className:LE("btn-logo"),component:e?"span":void 0,onClick:t},l),i.a.createElement(he,{data:r,size:o,className:c})),n="function"==typeof n?n():i.a.createElement("div",{className:LE("logo"),style:{fontSize:s}},n);return i.a.createElement("div",{className:LE()},i.a.createElement("div",{className:LE("logo-btn-place")},"function"==typeof a?a(c,u):c),!u&&("function"==typeof a?a(n,u):i.a.createElement("a",Object.assign({},l,{className:LE("logo-link"),onClick:t}),n)))}n(1003);var jE=ie()("nv-drawer"),DE=300,AE=function(e){var t=e.className,n=e.visible;e=e.children;return i.a.createElement(Wy,{in:n,timeout:DE,unmountOnExit:!0,classNames:jE("item-transition")},i.a.createElement("div",{className:jE("item",t)},e))},LE=(n(1004),ie()("nv-aside-header-logo"));Z=n(563),y=n(564),g="ydb-embedded-ui";d.registerKeyset(sa.I18N.LANGS.en,g,Z),d.registerKeyset(sa.I18N.LANGS.ru,g,y);var ME,FE=d.keyset(g),BE=(n(1005),ie()("nv-aside-header-tooltip")),HE=["right"],zE=function(e){var t=e.anchor,n=(e=e.text,i.a.useRef(t));return i.a.useEffect((function(){n.current=t}),[t]),t?i.a.createElement(kl,{className:BE(),open:!0,anchorRef:n,placement:HE,disableEscapeKeyDown:!0,disableOutsideClick:!0,disableLayer:!0},i.a.createElement("div",{className:BE("text")},e)):null};function UE(){return(UE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function VE(e){return r.createElement("svg",UE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e),ME=ME||r.createElement("path",{d:"M14 6.125a1.874 1.874 0 11.001 3.749A1.874 1.874 0 0114 6.125zm-5.906 0a1.874 1.874 0 110 3.749 1.874 1.874 0 010-3.749zM2 6.125a1.874 1.874 0 11.001 3.749A1.874 1.874 0 012 6.125z",fill:"currentColor",fillRule:"evenodd"}))}function WE(e){return-1===(e=e.findIndex((function(e){return e=e.current,Boolean(e)})))?void 0:e}function GE(e){var t=e.item,n=e.isCompact,r=e.collapseItems,o=e.onClick,a=i.a.useState(null),s=(h=ae()(a,2))[0],l=h[1],c=(e=i.a.useState(!1),(a=ae()(e,2))[0]),u=a[1],h=i.a.useRef(null),d=(e=t.tooltipText||t.title,a=t.iconSize||24,t.id===YE);r=i.a.createElement("div",{className:qE("menu-item"),ref:h,onClick:function(){"function"==typeof t.onItemClick&&t.onItemClick(t,!1),d&&(u(!c),l(null)),null!=o&&o()}},i.a.createElement("div",{className:qE("menu-icon-place")},n?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{onMouseEnter:function(e){return!c&&l(e.currentTarget)},onMouseLeave:function(){return l(null)},className:qE("btn-icon",{current:Boolean(t.current)})},t.icon&&i.a.createElement(he,{data:t.icon,size:a,className:qE("menu-icon")})),i.a.createElement(zE,{anchor:s,text:e})):t.icon&&i.a.createElement(he,{data:t.icon,size:a,className:qE("menu-icon")})),i.a.createElement("div",{className:qE("menu-title"),title:t.title},t.title),d&&Array.isArray(r)&&Boolean(h.current)&&i.a.createElement(kl,{placement:XE,open:c,anchorRef:h,onClose:function(){return u(!1)}},i.a.createElement("div",{className:qE("collapse-items-popup-content")},i.a.createElement(sh,{itemClassName:qE("root-collapse-item"),items:r,selectedItemIndex:WE(r),itemHeight:28,itemsHeight:28*r.length,virtualized:!1,filterable:!1,sortable:!1,renderItem:function(e){var t=i.a.createElement("div",{className:qE("collapse-item"),onClick:function(){"function"==typeof e.onItemClick&&e.onItemClick(e,!0)}},e.title);return"function"==typeof e.itemWrapper?e.itemWrapper(t,e,!0,n):e.link?i.a.createElement("a",{href:e.link,className:qE("link")},t):t}}))));return"function"==typeof t.itemWrapper?t.itemWrapper(r,t,!1,n):t.link?i.a.createElement("a",{href:t.link,className:qE("link")},r):r}n(1006);var qE=ie()("nv-composite-bar"),YE="nv-collapse-item-id",XE=["right-start","right-end","right"];GE.displayName="Item";var KE=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(){var e;W()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={height:"auto",activeItemIndex:void 0},e.currentItemsCount=0,e.skipCheckResize=!1,e.onResize=function(t){t=t.height;e.skipCheckResize?e.skipCheckResize=!1:t<(t=40*e.currentItemsCount)?e.state.height!==t&&(e.skipCheckResize=!0,e.setState({height:t})):"auto"!==e.state.height&&(e.skipCheckResize=!0,e.setState({height:"auto"}))},e}return q()(n,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:qE(),style:{height:this.state.height}},0!==this.props.items.length&&i.a.createElement(Nc.a,{onResize:this.onResize},(function(t){var n=t.width;t=t.height;return i.a.createElement("div",{style:{width:n,height:t}},e.renderMenu(t))}))))}},{key:"renderMenu",value:function(e){var t,n,r=this.props,o=r.items,a=r.isCompact,s=r.onClickItem,l=Math.max(1,Math.floor(e/40)),c=null;return 1===l?(n=o.filter((function(e){return e.pinned})),0<(c=J()(o.filter((function(e){return!e.pinned})))).length&&n.push(this.getCollapseItem())):l<o.length?(e=o.filter((function(e,t){return e.pinned&&l-1<=t})).length,t=o.reduceRight((function(e,t,n){return n=!t.pinned&&n<l-1&&0<e.extraCount,e.flags.unshift(t.pinned||n),{flags:e.flags,extraCount:e.extraCount-Number(n)}}),{flags:[],extraCount:e}).flags,n=o.filter((function(e,n){return e.pinned||n<l-1&&!t[n]})),0<(c=o.filter((function(e,n){return!e.pinned&&(l-1<=n||t[n])}))).length&&n.push(this.getCollapseItem())):n=J()(o),this.currentItemsCount=n.length,i.a.createElement(sh,{items:n,selectedItemIndex:a?void 0:WE(n),itemHeight:40,itemClassName:qE("root-menu-item",{compact:a}),itemsHeight:40*n.length,virtualized:!1,filterable:!1,sortable:!1,renderItem:function(e){return i.a.createElement(GE,{item:e,isCompact:a,collapseItems:c,onClick:function(){return null==s?void 0:s(e)}})}})}},{key:"getCollapseItem",value:function(){return{id:YE,title:FE("label_more"),icon:VE,iconSize:16}}}]),n}(i.a.Component);function ZE(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function QE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZE(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $E,JE=i.a.createContext(void 0),eS=i.a.createContext(void 0);function tS(e){var t=e.children,n=i.a.useState({}),r=(n=(e=ae()(n,2))[0],e[1]);e=i.a.useCallback((function(e,t){r((function(n){return n[e]===t?n:QE(QE({},n),{},p()({},e,t))}))}),[r]);return i.a.createElement(eS.Provider,{value:e},i.a.createElement(JE.Provider,{value:n},t))}function nS(e){var t=e.name,n=e.slotRef;e=e.children,t=function(e){return function(){var e=i.a.useContext(JE);if(void 0===e)throw new Error("useSlots must be used within a SlotsProvider");return e}()[e]}(t);return"function"==typeof n?n(t||null):n&&(n.current=t),t?a.a.createPortal(e,t):null}(g=$E=$E||{}).Settings="settings",g.User="user",g.Support="support",g.BugReport="bug-report";var rS,iS,oS,aS,sS,lS,cS,uS="nvAsideHeader";function hS(){return(hS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function dS(){return(dS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fS(){return(fS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}(g=rS=rS||{}).SETTINGS_OPEN="SETTINGS_OPEN",g.SETTINGS_CLOSE="SETTINGS_CLOSE",(iS=iS||{}).Settings="settings",(g=oS=oS||{}).Bug="bug",g.Support="support",g.Settings="settings",g.SettingsWithDot="settings-with-dot",(g=aS=aS||{}).Normal="normal",g.WithDot="with-dot";var pS,mS,vS=function(e){return r.createElement("svg",fS({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),cS=cS||r.createElement("path",{d:"M20.763 14.255l-1.63-.912c.19-.911.19-1.784 0-2.696l1.63-.911a.437.437 0 00.19-.532 9.714 9.714 0 00-2.046-3.607.459.459 0 00-.569-.076l-1.63.911a7.611 7.611 0 00-2.273-1.329v-1.86c0-.19-.151-.38-.379-.418-1.402-.342-2.804-.304-4.13 0-.227.038-.34.227-.34.417v1.861c-.872.304-1.63.76-2.312 1.367l-1.63-.95a.459.459 0 00-.568.077A9.714 9.714 0 003.03 9.204c-.076.19 0 .418.19.532l1.629.911a8.05 8.05 0 000 2.696l-1.63.912a.437.437 0 00-.19.531 9.713 9.713 0 002.047 3.608c.152.152.379.19.568.076l1.63-.912a7.355 7.355 0 002.311 1.33v1.86c0 .19.152.38.341.456 1.402.304 2.804.266 4.13 0 .228-.076.38-.266.38-.456v-1.86a7.612 7.612 0 002.273-1.33l1.63.912a.458.458 0 00.568-.076c.947-1.025 1.629-2.24 2.084-3.608a.511.511 0 00-.228-.531zm-8.753.76c-1.705 0-3.031-1.33-3.031-3.039a3.02 3.02 0 013.031-3.038 3.044 3.044 0 013.031 3.038 3.02 3.02 0 01-3.03 3.038z",fill:"currentColor"}))};function gS(){return(gS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var yS=(g={},p()(g,oS.Bug,(function(e){return r.createElement("svg",hS({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),sS=sS||r.createElement("path",{d:"M20.248 12.66a1.021 1.021 0 00-1-1.065H17.44V9.723l1.485-1.518a.996.996 0 000-1.453.996.996 0 00-1.453 0l-1.776 1.744H8.303L6.528 6.752a.996.996 0 00-1.453 0 .996.996 0 000 1.453l1.517 1.518v1.872H4.784c-.581 0-1.065.484-1.033 1.065 0 .582.484 1.001 1.033 1.001h1.808v.517c0 .71.13 1.388.42 2.002l-1.937 1.936a.996.996 0 000 1.453.996.996 0 001.453 0l1.775-1.775a4.646 4.646 0 002.938 1.033v-7.878c0-.193.162-.387.388-.387h.774c.194 0 .388.194.388.387v7.878a4.624 4.624 0 002.905-1.033l1.776 1.775a.996.996 0 001.453 0 .996.996 0 000-1.453l-1.937-1.936c.29-.614.452-1.292.452-2.002v-.517h1.775c.55 0 1.034-.42 1.034-1zm-8.2-9.33c-2.002 0-3.616 1.647-3.616 3.616h7.232c0-1.97-1.646-3.616-3.616-3.616z",fill:"currentColor"}))})),p()(g,oS.Support,(function(e){return r.createElement("svg",dS({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),lS=lS||r.createElement("path",{d:"M21 12c0-4.936-4.065-9-9-9-4.972 0-9 4.064-9 9 0 4.972 4.028 9 9 9 4.935 0 9-4.028 9-9zm-8.782-6.024c2.068 0 4.246 1.596 4.246 3.701 0 2.831-3.012 2.867-3.012 3.883v.037a.441.441 0 01-.436.435h-2.032a.42.42 0 01-.436-.435v-.146c0-1.487 1.125-2.068 1.96-2.54.726-.399 1.198-.69 1.198-1.234 0-.725-.944-1.197-1.67-1.197-.98 0-1.415.472-2.068 1.306a.453.453 0 01-.617.073l-1.27-.944c-.182-.145-.218-.399-.073-.617.98-1.488 2.25-2.322 4.21-2.322zm-.218 9c.907 0 1.67.762 1.67 1.67 0 .943-.763 1.668-1.67 1.668-.944 0-1.67-.725-1.67-1.669 0-.907.726-1.67 1.67-1.67z",fill:"currentColor"}))})),p()(g,oS.Settings,vS),p()(g,oS.SettingsWithDot,(function(e){return r.createElement("svg",gS({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),pS=pS||r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.134 13.343l1.629.912a.51.51 0 01.227.531c-.454 1.367-1.136 2.583-2.084 3.608a.458.458 0 01-.568.076l-1.63-.912a7.613 7.613 0 01-2.273 1.33v1.86c0 .19-.152.38-.379.456-1.326.266-2.728.304-4.13 0-.19-.076-.341-.266-.341-.456v-1.86a7.355 7.355 0 01-2.312-1.33l-1.629.912a.459.459 0 01-.568-.076 9.714 9.714 0 01-2.046-3.608.437.437 0 01.189-.531l1.63-.912a8.05 8.05 0 010-2.696l-1.63-.911a.437.437 0 01-.19-.532 9.714 9.714 0 012.047-3.607.459.459 0 01.568-.076l1.63.949a6.783 6.783 0 012.31-1.367v-1.86c0-.19.114-.38.342-.418 1.326-.304 2.728-.342 4.13 0a.442.442 0 01.379.417v1.861a7.3 7.3 0 01.067.025 3.901 3.901 0 004.677 5.755 6.447 6.447 0 01-.045 2.46zm1.67-3.634a.45.45 0 00.146-.19 3.864 3.864 0 01-.147.19zM8.978 11.976c0 1.71 1.326 3.038 3.03 3.038a3.02 3.02 0 003.032-3.038 3.044 3.044 0 00-3.031-3.038 3.02 3.02 0 00-3.031 3.038z",fill:"currentColor"}),mS=mS||r.createElement("circle",{cx:17.783,cy:7.239,r:2.5,fill:"#FF0400",fillOpacity:.8}))})),g);n(1007);var bS=ie()("nv-aside-header-footer-item"),CS=["right-end"],wS=[-20,8],ES=function(e){var t=e.onClick,n=e.isCompact,r=void 0!==(p=e.isCurrent)&&p,o=void 0===(b=e.enableTooltip)||b,a=e.tooltipText,s=e.text,l=void 0===(m=e.iconSize)?24:m,c=e.slot,u=e.view,h=e.className,d=e.popupAnchor,f=void 0!==(g=e.popupVisible)&&g,p=void 0===(y=e.popupPlacement)?CS:y,m=void 0===(b=e.popupOffset)?wS:b,v=e.onClosePopup,g=e.renderPopupContent,y=e.renderCustomIcon,b=i.a.useState(null),C=(b=(e=ae()(b,2))[0],e[1]),w=i.a.useRef(null);i.a.useEffect((function(){n||C(null)}),[n]);var E;u=c&&function(e,t){switch(e){case $E.BugReport:return yS[oS.Bug];case $E.Support:return yS[oS.Support];case $E.Settings:return t!==aS.WithDot?yS[oS.Settings]:yS[oS.SettingsWithDot];default:return}}(c,u)||vS;return E="function"==typeof y?y():(E="string"==typeof u?yS[u]:u,n?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{onMouseEnter:function(e){return C(e.currentTarget)},onMouseLeave:function(){return C(null)},className:bS("btn-icon",{current:r})},i.a.createElement(he,{data:E,size:l,className:bS("icon")})),o&&i.a.createElement(zE,{anchor:b,text:a||s})):i.a.createElement("div",{className:bS("icon-wrap")},i.a.createElement(he,{data:E,size:l,className:bS("icon")}))),l=d||w,d=i.a.useCallback((function(e){var t;e instanceof MouseEvent&&e.target&&null!==(t=w.current)&&void 0!==t&&t.contains(e.target)||null!=v&&v()}),[v]),g=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:bS({compact:n,current:r},h),onClick:t,ref:w},i.a.createElement("div",{className:bS("icon-place")},E),!n&&i.a.createElement("div",{className:bS("text")},s)),i.a.createElement(kl,{className:bS("popup"),open:f,placement:p,offset:m,anchorRef:l,onClose:d},null==g?void 0:g())),c?i.a.createElement(nS,{name:c},g):g};function SS(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}var OS,xS=i.a.memo((function(e){var t=e.renderContent;e=e.size;return i.a.createElement(i.a.Fragment,null,t({size:e}))}));function _S(e){var t=e.size,n=e.className;e=e.renderContent;return i.a.createElement("div",{className:n,style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SS(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{"--nv-aside-header-size":"".concat(t,"px")})},"function"==typeof e&&i.a.createElement(xS,{size:t,renderContent:e}))}function kS(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function TS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kS(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NS(){return function(e){try{var t=window.localStorage.getItem("nvAsideHeader");return null===t?null:JSON.parse(t)}catch(e){return null}}()}function PS(){return(PS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function IS(e){return r.createElement("svg",PS({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),OS=OS||r.createElement("path",{d:"M8.031 8.531c.281-.281.281-.75 0-1.062l-4.25-4.25c-.312-.281-.781-.281-1.062 0L2 3.938c-.281.312-.281.78 0 1.062l3.031 3.031-3.031 3c-.281.281-.281.75 0 1.063l.719.687c.281.313.75.313 1.062 0l4.25-4.25zm6-1.062l-4.25-4.25c-.312-.281-.781-.281-1.062 0L8 3.938A.774.774 0 008 5l3.031 3L8 11.031c-.281.281-.281.75 0 1.063l.719.687c.281.313.75.313 1.062 0l4.25-4.25c.281-.281.281-.75 0-1.062z",fill:"currentColor"}))}xS.displayName="RenderContent",n(1008);var RS,jS=ie()("nv-aside-header"),DS=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(e){var r,o;return W()(this,n),(o=t.call(this,e)).asideRef=i.a.createRef(),o.throttledPageMouseMove=void 0,o.triggerEvent=function(e){e===rS.SETTINGS_OPEN&&o.onSettingsToggle(!0)},o.renderFirstPane=function(e){var t=(l=o.props).menuItems,n=l.panelVisible,r=l.renderPanel,a=l.panelClassName,s=l.settings,l=o.state.isCompact;return i.a.createElement(tS,null,i.a.createElement("div",{className:jS("aside"),style:{width:e}},o.renderCollapseButton(),i.a.createElement("div",{className:jS("aside-popup-anchor"),ref:o.asideRef}),i.a.createElement("div",{className:jS("aside-content")},i.a.createElement(RE,{onLogoIconClick:o.props.onLogoIconClick,logoWrapper:o.props.logoWrapper,logoText:o.props.logoText,logoIcon:o.props.logoIcon,logoIconSize:o.props.logoIconSize,logoTextSize:o.props.logoTextSize,logoHref:o.props.logoHref,logoIconClassName:o.props.logoIconClassName,isCompact:l}),i.a.createElement(KE,{items:t,isCompact:l,onClickItem:o.onCompositeBarClick}),o.renderFooter(e))),i.a.createElement(IE,{className:jS("drawer"),onVeilClick:o.onCloseDrawer,onEscape:o.onCloseDrawer,style:{left:e}},i.a.createElement(AE,{visible:n,className:jS("panel",a)},null==r?void 0:r()),i.a.createElement(AE,{visible:o.isVisibleItem(iS.Settings)},s)))},o.renderSecondPane=function(e){return i.a.createElement(_S,{size:e,renderContent:o.props.renderContent,className:jS("content")})},o.renderFooter=function(e){var t=o.props,n=t.settings,r=t.settingsIconWithBadge,a=o.state.isCompact;return i.a.createElement(eS.Consumer,null,(function(t){var s,l;return t?i.a.createElement("div",{className:jS("footer")},null===(s=(l=o.props).renderFooter)||void 0===s?void 0:s.call(l,{size:e,isCompact:a,asideRef:o.asideRef}),i.a.createElement("div",{ref:function(e){t($E.Support,e)}}),i.a.createElement("div",{ref:function(e){t($E.BugReport,e)}}),i.a.createElement("div",{ref:function(e){t($E.Settings,e)}},n?i.a.createElement(ES,{slot:$E.Settings,view:r?aS.WithDot:aS.Normal,text:FE("switch_settings"),isCompact:a,isCurrent:o.isVisibleItem(iS.Settings),onClick:function(){return o.onSettingsToggle()}}):null),i.a.createElement("div",{ref:function(e){t($E.User,e)}})):null}))},o.renderCollapseButton=function(){var e=(t=o.state).isCompact,t=t.isButtonVisible?"visible":"hidden";return i.a.createElement(ge,{className:jS("collapse-button",{compact:e}),view:"flat",style:{visibility:t},onClick:o.onCollapseButtonClick},i.a.createElement(he,{data:IS,className:jS("collapse-icon"),width:"14",height:"14"}))},o.onCollapseButtonClick=function(){var e=!o.state.isCompact;void 0===o.props.isCompact?(function(e){var t=NS();!function(e,t){try{window.localStorage.setItem("nvAsideHeader",JSON.stringify(t))}catch(e){console.error("data not saved in localeStorage: ".concat(e))}}(uS,TS(TS({},t),e))}({isCompact:e}),o.setState({isCompact:e,isButtonVisible:!e})):o.setState({isButtonVisible:!e}),o.props.onChangeCompact&&o.props.onChangeCompact(e)},o.onCloseDrawer=function(){var e,t;o.setState({visibleItem:null}),null!==(e=(t=o.props).onClosePanel)&&void 0!==e&&e.call(t)},o.onSettingsToggle=function(e){var t,n;e=void 0===e?o.getToggledVisibleItem(iS.Settings):e?iS.Settings:null;o.setState({visibleItem:e}),o.props.panelVisible&&null!==(t=(n=o.props).onClosePanel)&&void 0!==t&&t.call(n)},o.isVisibleItem=function(e){return e===o.state.visibleItem},o.getToggledVisibleItem=function(e){return o.isVisibleItem(e)?null:e},o.onPageMouseMove=function(e){e=e.clientX,!o.state.isButtonVisible&&e<=84&&0<=e?o.setState({isButtonVisible:!0}):o.state.isButtonVisible&&(84<e||e<0)&&o.setState({isButtonVisible:!1})},o.onCompositeBarClick=function(){o.setState({visibleItem:null})},o.throttledPageMouseMove=cc()(o.onPageMouseMove,300),e="boolean"==typeof(null===(r=NS())||void 0===r?void 0:r.isCompact)?Boolean(null===(r=NS())||void 0===r?void 0:r.isCompact):Boolean(e.initIsCompact),o.state={visibleItem:null,isCompact:e,isButtonVisible:!e},o}return q()(n,[{key:"componentDidUpdate",value:function(e,t){var n,r;!e.panelVisible&&this.props.panelVisible&&this.state.visibleItem&&this.setState({visibleItem:null}),t.visibleItem===iS.Settings!==this.isVisibleItem(iS.Settings)&&null!==(n=(r=this.props).onEvent)&&void 0!==n&&n.call(r,this.isVisibleItem(iS.Settings)?rS.SETTINGS_OPEN:rS.SETTINGS_CLOSE)}},{key:"render",value:function(){var e=this,t=this.state.isCompact?56:236;return i.a.createElement("div",{className:jS(null,this.props.className)},i.a.createElement("div",{className:jS("pane-container"),onMouseMove:function(t){e.state.isCompact&&(t.persist(),e.throttledPageMouseMove(t))}},this.renderFirstPane(t),this.renderSecondPane(t)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(void 0===e.isCompact)return null;var n={isCompact:e.isCompact};return e.isCompact&&t.isCompact||t.isButtonVisible||(n.isButtonVisible=!0),n}}]),n}(i.a.Component);function AS(){return(AS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}DS.defaultProps={menuItems:[],panelVisible:!1,onClosePanel:Y.a};var LS,MS=function(e){return r.createElement("svg",AS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"none"},e),RS=RS||r.createElement("path",{fill:"currentColor",d:"M377.7 338.8l37.15-92.87C419 235.4 411.3 224 399.1 224h-57.48c6.88-14.8 10.38-31 10.38-48 0-4.117-.836-8.057-1.217-12.08C390.7 155.1 416 142.3 416 128c0-16.08-31.75-30.28-80.31-38.99C323.8 45.15 304.9 0 277.4 0c-10.38 0-19.62 4.5-27.38 10.5-15.25 11.88-36.75 11.88-52 0C190.3 4.5 181.1 0 170.7 0c-27.5 0-46.3 45.16-58.2 88.98C63.83 97.68 32 111.9 32 128c0 14.34 25.31 27.13 65.22 35.92C96.84 167.9 96 171.9 96 176c0 17 3.47 33.2 9.5 48H48.02c-11.32 0-19.06 11.4-14.86 21.9l37.15 92.87C27.87 370.4 0 420.4 0 477.3 0 496.5 15.52 512 34.66 512H413.3c19.2 0 34.7-15.5 34.7-34.7 0-56.9-27.9-106.9-70.3-138.5zM176 479.1L128 288l64 32 16 32-32 127.1zm95.1 0L240 352l16-32 64-32-48.9 191.1zM320 186c0 21-17.2 38-38.4 38h-12.33c-16.46 0-30.29-10.39-35.63-24.99-1.54-4.11-5.24-7.01-9.64-7.01s-8.1 2.9-9.6 7c-5.4 14.6-19.2 25-35.6 25h-12.33C145.2 224 128 207 128 186v-16.5c28.3 4.1 60.1 6.5 96 6.5s67.74-2.383 96-6.473V186z"}))};function FS(){return(FS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var BS=function(e){return r.createElement("svg",FS({"aria-hidden":"true","data-prefix":"fas","data-icon":"user-check",className:"user-check_svg__svg-inline--fa user-check_svg__fa-user-check",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},e),LS=LS||r.createElement("path",{fill:"currentColor",d:"M274.7 304H173.3C77.61 304 0 381.6 0 477.3 0 496.5 15.52 512 34.66 512H413.3c19.2 0 34.7-15.5 34.7-34.7 0-95.7-77.6-173.3-173.3-173.3zM224 256c70.7 0 128-57.31 128-128S294.7 0 224 0 96 57.31 96 128s57.3 128 128 128zm408.3-121.6c-9.703-9-24.91-8.453-33.92 1.266l-87.05 93.75-38.39-38.39c-9.375-9.375-24.56-9.375-33.94 0s-9.375 24.56 0 33.94l56 56c4.5 4.534 10.6 7.034 17 7.034h.438a24.032 24.032 0 0017.16-7.672l104-112C642.6 158.6 642 143.4 632.3 134.4z"}))},HS=ie()("kv-navigation");function zS(e){var t=e.ydbUser,n=e.logout;e=e.setIsNotAuthenticated;return i.a.createElement("div",{className:HS("internal-user")},i.a.createElement("div",{className:HS("user-info-wrapper")},i.a.createElement("div",{className:HS("ydb-internal-user-title")},"YDB user"),t&&i.a.createElement("div",{className:HS("username")},t)),t?i.a.createElement(ge,{view:"flat-secondary",onClick:n,title:"logout"},i.a.createElement(he,{data:JC,size:18})):i.a.createElement(ge,{view:"flat-secondary",onClick:e,title:"login"},i.a.createElement(he,{data:aw,size:18})))}function US(e){var t=e.isCompact,n=e.popupAnchor,o=e.ydbUser,a=Object(r.useState)(!1),s=(a=(e=ae()(a,2))[0],e[1]),l=null!=o&&o.login?BS:MS;return i.a.createElement(ES,{isCurrent:a,slot:$E.User,renderCustomIcon:function(){return i.a.createElement(he,{data:l,size:22,className:HS("user-icon")})},text:null!==(e=null==o?void 0:o.login)&&void 0!==e?e:"Account",isCompact:t,popupAnchor:n,popupVisible:a,onClick:function(){return s(!0)},onClosePopup:function(){return s(!1)},renderPopupContent:function(){return i.a.createElement("div",{className:HS("ydb-user-wrapper")},i.a.createElement(zS,{ydbUser:o.login,logout:o.logout,setIsNotAuthenticated:o.setIsNotAuthenticated}))}})}var VS=[{id:sf,title:"Databases",icon:pw,iconSize:20,location:va(ga,{activeTab:sf}),locationKeys:["/tenant"]},{id:lf,title:"Nodes",icon:lw,iconSize:20,location:va(ga,{activeTab:lf}),locationKeys:["/node"]},{id:cf,title:"Storage",icon:uw,iconSize:20,location:va(ga,{activeTab:cf}),locationKeys:["/storage"]}],WS=(Y={logout:De,setIsNotAuthenticated:je},Object(l.b)((function(e){return{ydbUser:e.authentication.user}}),Y)((function(e){var t=aa(),n=oa(),r=i.a.useMemo((function(){var e=t.pathname,r="/cluster"===e;return VS.map((function(t){var i=(i=null===(i=t.locationKeys)||void 0===i?void 0:i.filter((function(t){return e.startsWith(t)})))&&0<i.length||t.location.startsWith(e);return r&&t.id!==sf&&(i=!1),{id:t.id,title:t.title,icon:t.icon,iconSize:t.iconSize,current:i,onItemClick:function(){n.push(t.location)}}}))}),[t,n]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(DS,{logoText:"YDB",logoIcon:dw,onLogoIconClick:function(){return n.push("/")},menuItems:r,settings:i.a.createElement(OE,null),className:HS(),renderContent:function(){return e.children},renderFooter:function(t){var n=t.isCompact;t=t.asideRef;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ES,{slot:$E.Support,iconSize:24,text:"Documentation",isCompact:n,onClick:function(){window.open("http://ydb.tech/docs","_blank","noreferrer")}}),i.a.createElement(US,{isCompact:n,popupAnchor:t,ydbUser:{login:e.ydbUser,logout:e.logout,setIsNotAuthenticated:e.setIsNotAuthenticated}}))}}))}))),GS=(n(1009),ie()("authentication")),qS=(Y={authenticate:function(e,t){return Ue({request:Pt.authenticate(e,t),actions:Le})}},Object(l.b)((function(e){return{error:e.authentication.error}}),Y)((function(e){var t=e.authenticate,n=e.error,o=Object(r.useState)(""),a=(u=ae()(o,2))[0],s=u[1],l=(e=Object(r.useState)(""),(o=ae()(e,2))[0]),c=o[1],u=Object(r.useState)(""),h=(o=(e=ae()(u,2))[0],e[1]),d=(u=Object(r.useState)(""),u=(e=ae()(u,2))[0],e[1]);function f(){t(a,l)}return Object(r.useEffect)((function(){var e,t,r,i;null!=n&&null!==(e=n.data)&&void 0!==e&&null!==(t=e.error)&&void 0!==t&&t.includes("user")&&h(n.data.error),null!=n&&null!==(r=n.data)&&void 0!==r&&null!==(i=r.error)&&void 0!==i&&i.includes("password")&&d(n.data.error)}),[n]),i.a.createElement("section",{className:GS()},i.a.createElement("div",{className:GS("form-wrapper")},i.a.createElement("h2",null,"Please sign in:"),i.a.createElement("div",{className:GS("field-wrapper")},i.a.createElement(ic,{value:a,onUpdate:function(e){s(e),h("")},placeholder:"Username",error:o})),i.a.createElement("div",{className:GS("field-wrapper")},i.a.createElement(ic,{value:l,onUpdate:function(e){c(e),d("")},type:"password",placeholder:"Password",error:u,onKeyDown:function(e){13===e.keyCode&&f()}})),i.a.createElement("div",{className:GS("field-wrapper")},i.a.createElement(ge,{view:"action",onClick:f,width:"max"},"Let me in!"))))})));n(1010);var YS=ie()("app");H.languages.register({id:zm}),H.languages.setMonarchTokensProvider(zm,{defaultToken:"text",ignoreCase:!0,tokenPostfix:".yql",brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"{",close:"}",token:"delimiter.curly"}],keywordControl:"bind|block|declare|export|import|lambda|let|quote|return".split("|"),escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[{include:"@whitespace"},{include:"@comment"},[/(#)((?:\w|[\\+-=<>'"&#])+)/,["delimiter","constant"]],[/(?:\b(?:(defun|defmethod|defmacro))\b)(\s+)((?:\w|-|\?)*)/,["type.function","text","entity.name"]],[/(\*)(\S*)(\*)/,["delimiter","variable","delimiter"]],{include:"@strings"},[/'[^#\s)(]+/,"variable.parameter"],[/[(){}[\]]/,"@brackets"],[/(?:(?:<=?|>=?|==|!=|[-+*/%])|[a-zA-Z][a-zA-Z0-9!]*)/,{cases:{"@keywordControl":{token:"keyword.operator"},"@default":"identifier"}}]],whitespace:[[/\s+/,"white"]],comment:[[/#.*/,"comment"]],strings:[[/'?"(?=.)/,{token:"string",next:"@qqstring"}],[/'?[@]{2}/,{token:"string",next:"@multiline"}],[/'?x"(?:[0-9A-Fa-f]{2})*"/,"string"]],qqstring:[[/\\(?:[0-3][0-7][0-7]|x[0-9A-Fa-f]{2}|["tnrbfav\\])/,"string.escape"],[/[^"\\]+/,"string"],[/"|$/,{token:"string",next:"@pop"}]],multiline:[[/[^@]+/,"string"],[/[@]{2}/,{token:"string",next:"@pop"}],[/./,{token:"string"}]]}}),Y=function(e){X()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q()(e);return r=t?(n=Q()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),K()(this,r)}}(n);function n(e){return W()(this,n),e=t.call(this,e),sa.I18N.setLang(sa.I18N.LANGS.en),e}return q()(n,[{key:"componentDidMount",value:function(){var e=(t=this.props).isAuthenticated,t=t.getUser;e&&t()}},{key:"componentDidUpdate",value:function(e){var t=(n=this.props).isAuthenticated,n=n.getUser;t&&!e.isAuthenticated&&n()}},{key:"renderRoute",value:function(){return i.a.createElement(na,null,i.a.createElement(ta,{path:ga,component:hf}),i.a.createElement(ta,{path:ya,component:jg}),i.a.createElement(ta,{path:Ca,component:Ag}),i.a.createElement(ta,{path:Ea,component:Zg}),i.a.createElement(ta,{path:ba,component:$d}),i.a.createElement(ta,{path:wa,component:qg}),i.a.createElement(ta,{path:Sa,component:oy}),i.a.createElement(ta,{path:Oa,component:by}),i.a.createElement(ta,{path:xa,component:Sy}),Ro&&i.a.createElement(ta,{path:_a,component:vf,exact:!0}),i.a.createElement(ta,{path:ka,component:Mf}),i.a.createElement(Qo,{to:Ro?_a:va(ga,{activeTab:sf})}))}},{key:"renderContent",value:function(){var e=location.pathname.includes("/clusters")||Ro&&"/"===location.pathname;return i.a.createElement(i.a.Fragment,null,!e&&i.a.createElement(Iy,null),i.a.createElement("main",{className:YS("main")},this.renderRoute()),i.a.createElement(xy,null),i.a.createElement(Ny,null))}},{key:"renderContentWithNavigation",value:function(){return Ro?i.a.createElement(TE,null,this.renderContent()):i.a.createElement(WS,null,this.renderContent())}},{key:"render",value:function(){var e=(t=this.props).theme,t=t.isAuthenticated;return i.a.createElement(qo,{history:Mo},i.a.createElement(ha,{theme:e},i.a.createElement("div",{className:Ro?YS():YS({embedded:!0})},t?this.renderContentWithNavigation():i.a.createElement(qS,null))))}}]),n}(i.a.Component),H={setSettingValue:Bt,getUser:function(){return Ue({request:Pt.whoami(),actions:Me,dataHandler:function(e){var t=e.UserSID;return"Login"===e.AuthType?t:void 0}})}},Y=Object(l.b)((function(e){return{theme:Ht(e,L),initialIsPopupVisible:Ht(e,"".concat(F,"-visible")),isAuthenticated:e.authentication.isAuthenticated}}),H)(Y),a.a.render(i.a.createElement(s.AppContainer,null,i.a.createElement(l.a,{store:f},i.a.createElement(Y,null))),document.getElementById("root"))}]),[[582,3,0]]]);
//# sourceMappingURL=main.js.map